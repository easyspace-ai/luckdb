import{g as sl,r as y,h as hg,i as pg,R as le,j as u,k as uS,c as jd,u as Zl,b as Jl,l as vn,a as cp}from"./index-CA_1fxgT.js";import{c as vs,r as Kl,P as ga,L as up,I as dS,t as wn,C as dp,e as fp}from"./createLucideIcon-B63Zln4e.js";import{u as ws,B as po}from"./button-B2pmM69s.js";import{U as fS,r as hS,t as ec,s as ki,_ as yi,H as pS,$ as mS,f as Ju,D as Ku,g as gS,m as xS,P as yS,h as bS,i as vS,j as wS,k as CS,T as SS,l as kS,a as _S,b as RS,E as MS,c as TS,d as xu,e as jS,Q as mg,S as gg,L as yu}from"./index-RthcLIEM.js";import{T as ES}from"./trash-2-BWWODerP.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],DS=vs("copy",IS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],OS=vs("download",AS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xg=vs("eye",zS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],NS=vs("house",PS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],LS=vs("share",FS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ed=vs("table",HS);var Ks={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var BS=Ks.exports,hp;function WS(){return hp||(hp=1,(function(t,e){(function(){var n,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",m=1,g=2,x=4,b=1,C=2,w=1,S=2,k=4,_=8,R=16,T=32,M=64,I=128,z=256,D=512,P=30,L="...",H=800,$=16,Y=1,te=2,J=3,re=1/0,ie=9007199254740991,G=17976931348623157e292,U=NaN,ce=4294967295,ue=ce-1,pe=ce>>>1,He=[["ary",I],["bind",w],["bindKey",S],["curry",_],["curryRight",R],["flip",D],["partial",T],["partialRight",M],["rearg",z]],V="[object Arguments]",se="[object Array]",ze="[object AsyncFunction]",Ne="[object Boolean]",ae="[object Date]",ve="[object DOMException]",je="[object Error]",Qe="[object Function]",Ue="[object GeneratorFunction]",Me="[object Map]",Fe="[object Number]",st="[object Null]",Ee="[object Object]",Ze="[object Promise]",Et="[object Proxy]",mt="[object RegExp]",gt="[object Set]",Ot="[object String]",xt="[object Symbol]",Dt="[object Undefined]",Bt="[object WeakMap]",an="[object WeakSet]",ln="[object ArrayBuffer]",Xt="[object DataView]",cn="[object Float32Array]",un="[object Float64Array]",Cn="[object Int8Array]",yt="[object Int16Array]",Qn="[object Int32Array]",Sn="[object Uint8Array]",jt="[object Uint8ClampedArray]",gn="[object Uint16Array]",En="[object Uint32Array]",me=/\b__p \+= '';/g,ut=/\b(__p \+=) '' \+/g,Re=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ke=/&(?:amp|lt|gt|quot|#39);/g,Wt=/[&<>"']/g,Be=RegExp(ke.source),At=RegExp(Wt.source),_r=/<%-([\s\S]+?)%>/g,dr=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,In=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rr=/^\w*$/,Mr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/[\\^$.*+?()[\]{}|]/g,Co=RegExp(Zn.source),fr=/^\s+/,ei=/\s/,Jn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,De=/\{\n\/\* \[wrapped with (.+)\] \*/,Ge=/,? & /,We=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ct=/[()=,{}\[\]\/\s]/,$t=/\\(\\)?/g,rn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zt=/\w*$/,Wn=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,hr=/^\[object .+?Constructor\]$/,So=/^0o[0-7]+$/i,Li=/^(?:0|[1-9]\d*)$/,ko=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qr=/($^)/,_o=/['\n\r\u2028\u2029\\]/g,Zr="\\ud800-\\udfff",ti="\\u0300-\\u036f",Ro="\\ufe20-\\ufe2f",Mo="\\u20d0-\\u20ff",Dn=ti+Ro+Mo,To="\\u2700-\\u27bf",Le="a-z\\xdf-\\xf6\\xf8-\\xff",ni="\\xac\\xb1\\xd7\\xf7",jo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ms="\\u2000-\\u206f",Hi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jr="A-Z\\xc0-\\xd6\\xd8-\\xde",Kn="\\ufe0e\\ufe0f",Eo=ni+jo+Ms+Hi,Kr="['’]",Ts="["+Zr+"]",Bi="["+Eo+"]",eo="["+Dn+"]",Wi="\\d+",er="["+To+"]",Tr="["+Le+"]",$i="[^"+Zr+Eo+Wi+To+Le+Jr+"]",ri="\\ud83c[\\udffb-\\udfff]",Yi="(?:"+eo+"|"+ri+")",oi="[^"+Zr+"]",ii="(?:\\ud83c[\\udde6-\\uddff]){2}",Io="[\\ud800-\\udbff][\\udc00-\\udfff]",Pr="["+Jr+"]",Vi="\\u200d",ne="(?:"+Tr+"|"+$i+")",Ce="(?:"+Pr+"|"+$i+")",ft="(?:"+Kr+"(?:d|ll|m|re|s|t|ve))?",oe="(?:"+Kr+"(?:D|LL|M|RE|S|T|VE))?",fe=Yi+"?",ye="["+Kn+"]?",xe="(?:"+Vi+"(?:"+[oi,ii,Io].join("|")+")"+ye+fe+")*",Se="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Je=ye+fe+xe,ht="(?:"+[er,ii,Io].join("|")+")"+Je,Rt="(?:"+[oi+eo+"?",eo,ii,Io,Ts].join("|")+")",on=RegExp(Kr,"g"),Pt=RegExp(eo,"g"),pn=RegExp(ri+"(?="+ri+")|"+Rt+Je,"g"),Do=RegExp([Pr+"?"+Tr+"+"+ft+"(?="+[Bi,Pr,"$"].join("|")+")",Ce+"+"+oe+"(?="+[Bi,Pr+ne,"$"].join("|")+")",Pr+"?"+ne+"+"+ft,Pr+"+"+oe,$e,Se,Wi,ht].join("|"),"g"),Nr=RegExp("["+Vi+Zr+Dn+Kn+"]"),to=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,js=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qi=-1,St={};St[cn]=St[un]=St[Cn]=St[yt]=St[Qn]=St[Sn]=St[jt]=St[gn]=St[En]=!0,St[V]=St[se]=St[ln]=St[Ne]=St[Xt]=St[ae]=St[je]=St[Qe]=St[Me]=St[Fe]=St[Ee]=St[mt]=St[gt]=St[Ot]=St[Bt]=!1;var pt={};pt[V]=pt[se]=pt[ln]=pt[Xt]=pt[Ne]=pt[ae]=pt[cn]=pt[un]=pt[Cn]=pt[yt]=pt[Qn]=pt[Me]=pt[Fe]=pt[Ee]=pt[mt]=pt[gt]=pt[Ot]=pt[xt]=pt[Sn]=pt[jt]=pt[gn]=pt[En]=!0,pt[je]=pt[Qe]=pt[Bt]=!1;var Es={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},M0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},j0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},E0=parseFloat,I0=parseInt,tf=typeof sl=="object"&&sl&&sl.Object===Object&&sl,D0=typeof self=="object"&&self&&self.Object===Object&&self,xn=tf||D0||Function("return this")(),fc=e&&!e.nodeType&&e,si=fc&&!0&&t&&!t.nodeType&&t,nf=si&&si.exports===fc,hc=nf&&tf.process,pr=(function(){try{var B=si&&si.require&&si.require("util").types;return B||hc&&hc.binding&&hc.binding("util")}catch{}})(),rf=pr&&pr.isArrayBuffer,of=pr&&pr.isDate,sf=pr&&pr.isMap,af=pr&&pr.isRegExp,lf=pr&&pr.isSet,cf=pr&&pr.isTypedArray;function tr(B,X,q){switch(q.length){case 0:return B.call(X);case 1:return B.call(X,q[0]);case 2:return B.call(X,q[0],q[1]);case 3:return B.call(X,q[0],q[1],q[2])}return B.apply(X,q)}function A0(B,X,q,he){for(var Ye=-1,bt=B==null?0:B.length;++Ye<bt;){var dn=B[Ye];X(he,dn,q(dn),B)}return he}function mr(B,X){for(var q=-1,he=B==null?0:B.length;++q<he&&X(B[q],q,B)!==!1;);return B}function O0(B,X){for(var q=B==null?0:B.length;q--&&X(B[q],q,B)!==!1;);return B}function uf(B,X){for(var q=-1,he=B==null?0:B.length;++q<he;)if(!X(B[q],q,B))return!1;return!0}function Ao(B,X){for(var q=-1,he=B==null?0:B.length,Ye=0,bt=[];++q<he;){var dn=B[q];X(dn,q,B)&&(bt[Ye++]=dn)}return bt}function wa(B,X){var q=B==null?0:B.length;return!!q&&Ui(B,X,0)>-1}function pc(B,X,q){for(var he=-1,Ye=B==null?0:B.length;++he<Ye;)if(q(X,B[he]))return!0;return!1}function zt(B,X){for(var q=-1,he=B==null?0:B.length,Ye=Array(he);++q<he;)Ye[q]=X(B[q],q,B);return Ye}function Oo(B,X){for(var q=-1,he=X.length,Ye=B.length;++q<he;)B[Ye+q]=X[q];return B}function mc(B,X,q,he){var Ye=-1,bt=B==null?0:B.length;for(he&&bt&&(q=B[++Ye]);++Ye<bt;)q=X(q,B[Ye],Ye,B);return q}function z0(B,X,q,he){var Ye=B==null?0:B.length;for(he&&Ye&&(q=B[--Ye]);Ye--;)q=X(q,B[Ye],Ye,B);return q}function gc(B,X){for(var q=-1,he=B==null?0:B.length;++q<he;)if(X(B[q],q,B))return!0;return!1}var P0=xc("length");function N0(B){return B.split("")}function F0(B){return B.match(We)||[]}function df(B,X,q){var he;return q(B,function(Ye,bt,dn){if(X(Ye,bt,dn))return he=bt,!1}),he}function Ca(B,X,q,he){for(var Ye=B.length,bt=q+(he?1:-1);he?bt--:++bt<Ye;)if(X(B[bt],bt,B))return bt;return-1}function Ui(B,X,q){return X===X?Q0(B,X,q):Ca(B,ff,q)}function L0(B,X,q,he){for(var Ye=q-1,bt=B.length;++Ye<bt;)if(he(B[Ye],X))return Ye;return-1}function ff(B){return B!==B}function hf(B,X){var q=B==null?0:B.length;return q?bc(B,X)/q:U}function xc(B){return function(X){return X==null?n:X[B]}}function yc(B){return function(X){return B==null?n:B[X]}}function pf(B,X,q,he,Ye){return Ye(B,function(bt,dn,It){q=he?(he=!1,bt):X(q,bt,dn,It)}),q}function H0(B,X){var q=B.length;for(B.sort(X);q--;)B[q]=B[q].value;return B}function bc(B,X){for(var q,he=-1,Ye=B.length;++he<Ye;){var bt=X(B[he]);bt!==n&&(q=q===n?bt:q+bt)}return q}function vc(B,X){for(var q=-1,he=Array(B);++q<B;)he[q]=X(q);return he}function B0(B,X){return zt(X,function(q){return[q,B[q]]})}function mf(B){return B&&B.slice(0,bf(B)+1).replace(fr,"")}function nr(B){return function(X){return B(X)}}function wc(B,X){return zt(X,function(q){return B[q]})}function Is(B,X){return B.has(X)}function gf(B,X){for(var q=-1,he=B.length;++q<he&&Ui(X,B[q],0)>-1;);return q}function xf(B,X){for(var q=B.length;q--&&Ui(X,B[q],0)>-1;);return q}function W0(B,X){for(var q=B.length,he=0;q--;)B[q]===X&&++he;return he}var $0=yc(Es),Y0=yc(M0);function V0(B){return"\\"+j0[B]}function q0(B,X){return B==null?n:B[X]}function Gi(B){return Nr.test(B)}function U0(B){return to.test(B)}function G0(B){for(var X,q=[];!(X=B.next()).done;)q.push(X.value);return q}function Cc(B){var X=-1,q=Array(B.size);return B.forEach(function(he,Ye){q[++X]=[Ye,he]}),q}function yf(B,X){return function(q){return B(X(q))}}function zo(B,X){for(var q=-1,he=B.length,Ye=0,bt=[];++q<he;){var dn=B[q];(dn===X||dn===p)&&(B[q]=p,bt[Ye++]=q)}return bt}function Sa(B){var X=-1,q=Array(B.size);return B.forEach(function(he){q[++X]=he}),q}function X0(B){var X=-1,q=Array(B.size);return B.forEach(function(he){q[++X]=[he,he]}),q}function Q0(B,X,q){for(var he=q-1,Ye=B.length;++he<Ye;)if(B[he]===X)return he;return-1}function Z0(B,X,q){for(var he=q+1;he--;)if(B[he]===X)return he;return he}function Xi(B){return Gi(B)?K0(B):P0(B)}function jr(B){return Gi(B)?ey(B):N0(B)}function bf(B){for(var X=B.length;X--&&ei.test(B.charAt(X)););return X}var J0=yc(T0);function K0(B){for(var X=pn.lastIndex=0;pn.test(B);)++X;return X}function ey(B){return B.match(pn)||[]}function ty(B){return B.match(Do)||[]}var ny=(function B(X){X=X==null?xn:Qi.defaults(xn.Object(),X,Qi.pick(xn,js));var q=X.Array,he=X.Date,Ye=X.Error,bt=X.Function,dn=X.Math,It=X.Object,Sc=X.RegExp,ry=X.String,gr=X.TypeError,ka=q.prototype,oy=bt.prototype,Zi=It.prototype,_a=X["__core-js_shared__"],Ra=oy.toString,Mt=Zi.hasOwnProperty,iy=0,vf=(function(){var o=/[^.]+$/.exec(_a&&_a.keys&&_a.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})(),Ma=Zi.toString,sy=Ra.call(It),ay=xn._,ly=Sc("^"+Ra.call(Mt).replace(Zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ta=nf?X.Buffer:n,Po=X.Symbol,ja=X.Uint8Array,wf=Ta?Ta.allocUnsafe:n,Ea=yf(It.getPrototypeOf,It),Cf=It.create,Sf=Zi.propertyIsEnumerable,Ia=ka.splice,kf=Po?Po.isConcatSpreadable:n,Ds=Po?Po.iterator:n,ai=Po?Po.toStringTag:n,Da=(function(){try{var o=fi(It,"defineProperty");return o({},"",{}),o}catch{}})(),cy=X.clearTimeout!==xn.clearTimeout&&X.clearTimeout,uy=he&&he.now!==xn.Date.now&&he.now,dy=X.setTimeout!==xn.setTimeout&&X.setTimeout,Aa=dn.ceil,Oa=dn.floor,kc=It.getOwnPropertySymbols,fy=Ta?Ta.isBuffer:n,_f=X.isFinite,hy=ka.join,py=yf(It.keys,It),fn=dn.max,kn=dn.min,my=he.now,gy=X.parseInt,Rf=dn.random,xy=ka.reverse,_c=fi(X,"DataView"),As=fi(X,"Map"),Rc=fi(X,"Promise"),Ji=fi(X,"Set"),Os=fi(X,"WeakMap"),zs=fi(It,"create"),za=Os&&new Os,Ki={},yy=hi(_c),by=hi(As),vy=hi(Rc),wy=hi(Ji),Cy=hi(Os),Pa=Po?Po.prototype:n,Ps=Pa?Pa.valueOf:n,Mf=Pa?Pa.toString:n;function A(o){if(Vt(o)&&!Ve(o)&&!(o instanceof at)){if(o instanceof xr)return o;if(Mt.call(o,"__wrapped__"))return Th(o)}return new xr(o)}var es=(function(){function o(){}return function(s){if(!Nt(s))return{};if(Cf)return Cf(s);o.prototype=s;var f=new o;return o.prototype=n,f}})();function Na(){}function xr(o,s){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}A.templateSettings={escape:_r,evaluate:dr,interpolate:Qt,variable:"",imports:{_:A}},A.prototype=Na.prototype,A.prototype.constructor=A,xr.prototype=es(Na.prototype),xr.prototype.constructor=xr;function at(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}function Sy(){var o=new at(this.__wrapped__);return o.__actions__=$n(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=$n(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=$n(this.__views__),o}function ky(){if(this.__filtered__){var o=new at(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function _y(){var o=this.__wrapped__.value(),s=this.__dir__,f=Ve(o),v=s<0,j=f?o.length:0,O=Nb(0,j,this.__views__),N=O.start,F=O.end,W=F-N,Q=v?F:N-1,Z=this.__iteratees__,ee=Z.length,de=0,we=kn(W,this.__takeCount__);if(!f||!v&&j==W&&we==W)return Zf(o,this.__actions__);var Ae=[];e:for(;W--&&de<we;){Q+=s;for(var et=-1,Oe=o[Q];++et<ee;){var ot=Z[et],lt=ot.iteratee,ir=ot.type,zn=lt(Oe);if(ir==te)Oe=zn;else if(!zn){if(ir==Y)continue e;break e}}Ae[de++]=Oe}return Ae}at.prototype=es(Na.prototype),at.prototype.constructor=at;function li(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function Ry(){this.__data__=zs?zs(null):{},this.size=0}function My(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}function Ty(o){var s=this.__data__;if(zs){var f=s[o];return f===h?n:f}return Mt.call(s,o)?s[o]:n}function jy(o){var s=this.__data__;return zs?s[o]!==n:Mt.call(s,o)}function Ey(o,s){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=zs&&s===n?h:s,this}li.prototype.clear=Ry,li.prototype.delete=My,li.prototype.get=Ty,li.prototype.has=jy,li.prototype.set=Ey;function no(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function Iy(){this.__data__=[],this.size=0}function Dy(o){var s=this.__data__,f=Fa(s,o);if(f<0)return!1;var v=s.length-1;return f==v?s.pop():Ia.call(s,f,1),--this.size,!0}function Ay(o){var s=this.__data__,f=Fa(s,o);return f<0?n:s[f][1]}function Oy(o){return Fa(this.__data__,o)>-1}function zy(o,s){var f=this.__data__,v=Fa(f,o);return v<0?(++this.size,f.push([o,s])):f[v][1]=s,this}no.prototype.clear=Iy,no.prototype.delete=Dy,no.prototype.get=Ay,no.prototype.has=Oy,no.prototype.set=zy;function ro(o){var s=-1,f=o==null?0:o.length;for(this.clear();++s<f;){var v=o[s];this.set(v[0],v[1])}}function Py(){this.size=0,this.__data__={hash:new li,map:new(As||no),string:new li}}function Ny(o){var s=Qa(this,o).delete(o);return this.size-=s?1:0,s}function Fy(o){return Qa(this,o).get(o)}function Ly(o){return Qa(this,o).has(o)}function Hy(o,s){var f=Qa(this,o),v=f.size;return f.set(o,s),this.size+=f.size==v?0:1,this}ro.prototype.clear=Py,ro.prototype.delete=Ny,ro.prototype.get=Fy,ro.prototype.has=Ly,ro.prototype.set=Hy;function ci(o){var s=-1,f=o==null?0:o.length;for(this.__data__=new ro;++s<f;)this.add(o[s])}function By(o){return this.__data__.set(o,h),this}function Wy(o){return this.__data__.has(o)}ci.prototype.add=ci.prototype.push=By,ci.prototype.has=Wy;function Er(o){var s=this.__data__=new no(o);this.size=s.size}function $y(){this.__data__=new no,this.size=0}function Yy(o){var s=this.__data__,f=s.delete(o);return this.size=s.size,f}function Vy(o){return this.__data__.get(o)}function qy(o){return this.__data__.has(o)}function Uy(o,s){var f=this.__data__;if(f instanceof no){var v=f.__data__;if(!As||v.length<i-1)return v.push([o,s]),this.size=++f.size,this;f=this.__data__=new ro(v)}return f.set(o,s),this.size=f.size,this}Er.prototype.clear=$y,Er.prototype.delete=Yy,Er.prototype.get=Vy,Er.prototype.has=qy,Er.prototype.set=Uy;function Tf(o,s){var f=Ve(o),v=!f&&pi(o),j=!f&&!v&&Bo(o),O=!f&&!v&&!j&&os(o),N=f||v||j||O,F=N?vc(o.length,ry):[],W=F.length;for(var Q in o)(s||Mt.call(o,Q))&&!(N&&(Q=="length"||j&&(Q=="offset"||Q=="parent")||O&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||ao(Q,W)))&&F.push(Q);return F}function jf(o){var s=o.length;return s?o[Nc(0,s-1)]:n}function Gy(o,s){return Za($n(o),ui(s,0,o.length))}function Xy(o){return Za($n(o))}function Mc(o,s,f){(f!==n&&!Ir(o[s],f)||f===n&&!(s in o))&&oo(o,s,f)}function Ns(o,s,f){var v=o[s];(!(Mt.call(o,s)&&Ir(v,f))||f===n&&!(s in o))&&oo(o,s,f)}function Fa(o,s){for(var f=o.length;f--;)if(Ir(o[f][0],s))return f;return-1}function Qy(o,s,f,v){return No(o,function(j,O,N){s(v,j,f(j),N)}),v}function Ef(o,s){return o&&Lr(s,mn(s),o)}function Zy(o,s){return o&&Lr(s,Vn(s),o)}function oo(o,s,f){s=="__proto__"&&Da?Da(o,s,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[s]=f}function Tc(o,s){for(var f=-1,v=s.length,j=q(v),O=o==null;++f<v;)j[f]=O?n:lu(o,s[f]);return j}function ui(o,s,f){return o===o&&(f!==n&&(o=o<=f?o:f),s!==n&&(o=o>=s?o:s)),o}function yr(o,s,f,v,j,O){var N,F=s&m,W=s&g,Q=s&x;if(f&&(N=j?f(o,v,j,O):f(o)),N!==n)return N;if(!Nt(o))return o;var Z=Ve(o);if(Z){if(N=Lb(o),!F)return $n(o,N)}else{var ee=_n(o),de=ee==Qe||ee==Ue;if(Bo(o))return eh(o,F);if(ee==Ee||ee==V||de&&!j){if(N=W||de?{}:bh(o),!F)return W?Tb(o,Zy(N,o)):Mb(o,Ef(N,o))}else{if(!pt[ee])return j?o:{};N=Hb(o,ee,F)}}O||(O=new Er);var we=O.get(o);if(we)return we;O.set(o,N),Gh(o)?o.forEach(function(Oe){N.add(yr(Oe,s,f,Oe,o,O))}):qh(o)&&o.forEach(function(Oe,ot){N.set(ot,yr(Oe,s,f,ot,o,O))});var Ae=Q?W?Gc:Uc:W?Vn:mn,et=Z?n:Ae(o);return mr(et||o,function(Oe,ot){et&&(ot=Oe,Oe=o[ot]),Ns(N,ot,yr(Oe,s,f,ot,o,O))}),N}function Jy(o){var s=mn(o);return function(f){return If(f,o,s)}}function If(o,s,f){var v=f.length;if(o==null)return!v;for(o=It(o);v--;){var j=f[v],O=s[j],N=o[j];if(N===n&&!(j in o)||!O(N))return!1}return!0}function Df(o,s,f){if(typeof o!="function")throw new gr(l);return Ys(function(){o.apply(n,f)},s)}function Fs(o,s,f,v){var j=-1,O=wa,N=!0,F=o.length,W=[],Q=s.length;if(!F)return W;f&&(s=zt(s,nr(f))),v?(O=pc,N=!1):s.length>=i&&(O=Is,N=!1,s=new ci(s));e:for(;++j<F;){var Z=o[j],ee=f==null?Z:f(Z);if(Z=v||Z!==0?Z:0,N&&ee===ee){for(var de=Q;de--;)if(s[de]===ee)continue e;W.push(Z)}else O(s,ee,v)||W.push(Z)}return W}var No=ih(Fr),Af=ih(Ec,!0);function Ky(o,s){var f=!0;return No(o,function(v,j,O){return f=!!s(v,j,O),f}),f}function La(o,s,f){for(var v=-1,j=o.length;++v<j;){var O=o[v],N=s(O);if(N!=null&&(F===n?N===N&&!or(N):f(N,F)))var F=N,W=O}return W}function eb(o,s,f,v){var j=o.length;for(f=Ke(f),f<0&&(f=-f>j?0:j+f),v=v===n||v>j?j:Ke(v),v<0&&(v+=j),v=f>v?0:Qh(v);f<v;)o[f++]=s;return o}function Of(o,s){var f=[];return No(o,function(v,j,O){s(v,j,O)&&f.push(v)}),f}function yn(o,s,f,v,j){var O=-1,N=o.length;for(f||(f=Wb),j||(j=[]);++O<N;){var F=o[O];s>0&&f(F)?s>1?yn(F,s-1,f,v,j):Oo(j,F):v||(j[j.length]=F)}return j}var jc=sh(),zf=sh(!0);function Fr(o,s){return o&&jc(o,s,mn)}function Ec(o,s){return o&&zf(o,s,mn)}function Ha(o,s){return Ao(s,function(f){return lo(o[f])})}function di(o,s){s=Lo(s,o);for(var f=0,v=s.length;o!=null&&f<v;)o=o[Hr(s[f++])];return f&&f==v?o:n}function Pf(o,s,f){var v=s(o);return Ve(o)?v:Oo(v,f(o))}function An(o){return o==null?o===n?Dt:st:ai&&ai in It(o)?Pb(o):Xb(o)}function Ic(o,s){return o>s}function tb(o,s){return o!=null&&Mt.call(o,s)}function nb(o,s){return o!=null&&s in It(o)}function rb(o,s,f){return o>=kn(s,f)&&o<fn(s,f)}function Dc(o,s,f){for(var v=f?pc:wa,j=o[0].length,O=o.length,N=O,F=q(O),W=1/0,Q=[];N--;){var Z=o[N];N&&s&&(Z=zt(Z,nr(s))),W=kn(Z.length,W),F[N]=!f&&(s||j>=120&&Z.length>=120)?new ci(N&&Z):n}Z=o[0];var ee=-1,de=F[0];e:for(;++ee<j&&Q.length<W;){var we=Z[ee],Ae=s?s(we):we;if(we=f||we!==0?we:0,!(de?Is(de,Ae):v(Q,Ae,f))){for(N=O;--N;){var et=F[N];if(!(et?Is(et,Ae):v(o[N],Ae,f)))continue e}de&&de.push(Ae),Q.push(we)}}return Q}function ob(o,s,f,v){return Fr(o,function(j,O,N){s(v,f(j),O,N)}),v}function Ls(o,s,f){s=Lo(s,o),o=Sh(o,s);var v=o==null?o:o[Hr(vr(s))];return v==null?n:tr(v,o,f)}function Nf(o){return Vt(o)&&An(o)==V}function ib(o){return Vt(o)&&An(o)==ln}function sb(o){return Vt(o)&&An(o)==ae}function Hs(o,s,f,v,j){return o===s?!0:o==null||s==null||!Vt(o)&&!Vt(s)?o!==o&&s!==s:ab(o,s,f,v,Hs,j)}function ab(o,s,f,v,j,O){var N=Ve(o),F=Ve(s),W=N?se:_n(o),Q=F?se:_n(s);W=W==V?Ee:W,Q=Q==V?Ee:Q;var Z=W==Ee,ee=Q==Ee,de=W==Q;if(de&&Bo(o)){if(!Bo(s))return!1;N=!0,Z=!1}if(de&&!Z)return O||(O=new Er),N||os(o)?gh(o,s,f,v,j,O):Ob(o,s,W,f,v,j,O);if(!(f&b)){var we=Z&&Mt.call(o,"__wrapped__"),Ae=ee&&Mt.call(s,"__wrapped__");if(we||Ae){var et=we?o.value():o,Oe=Ae?s.value():s;return O||(O=new Er),j(et,Oe,f,v,O)}}return de?(O||(O=new Er),zb(o,s,f,v,j,O)):!1}function lb(o){return Vt(o)&&_n(o)==Me}function Ac(o,s,f,v){var j=f.length,O=j,N=!v;if(o==null)return!O;for(o=It(o);j--;){var F=f[j];if(N&&F[2]?F[1]!==o[F[0]]:!(F[0]in o))return!1}for(;++j<O;){F=f[j];var W=F[0],Q=o[W],Z=F[1];if(N&&F[2]){if(Q===n&&!(W in o))return!1}else{var ee=new Er;if(v)var de=v(Q,Z,W,o,s,ee);if(!(de===n?Hs(Z,Q,b|C,v,ee):de))return!1}}return!0}function Ff(o){if(!Nt(o)||Yb(o))return!1;var s=lo(o)?ly:hr;return s.test(hi(o))}function cb(o){return Vt(o)&&An(o)==mt}function ub(o){return Vt(o)&&_n(o)==gt}function db(o){return Vt(o)&&rl(o.length)&&!!St[An(o)]}function Lf(o){return typeof o=="function"?o:o==null?qn:typeof o=="object"?Ve(o)?Wf(o[0],o[1]):Bf(o):ap(o)}function Oc(o){if(!$s(o))return py(o);var s=[];for(var f in It(o))Mt.call(o,f)&&f!="constructor"&&s.push(f);return s}function fb(o){if(!Nt(o))return Gb(o);var s=$s(o),f=[];for(var v in o)v=="constructor"&&(s||!Mt.call(o,v))||f.push(v);return f}function zc(o,s){return o<s}function Hf(o,s){var f=-1,v=Yn(o)?q(o.length):[];return No(o,function(j,O,N){v[++f]=s(j,O,N)}),v}function Bf(o){var s=Qc(o);return s.length==1&&s[0][2]?wh(s[0][0],s[0][1]):function(f){return f===o||Ac(f,o,s)}}function Wf(o,s){return Jc(o)&&vh(s)?wh(Hr(o),s):function(f){var v=lu(f,o);return v===n&&v===s?cu(f,o):Hs(s,v,b|C)}}function Ba(o,s,f,v,j){o!==s&&jc(s,function(O,N){if(j||(j=new Er),Nt(O))hb(o,s,N,f,Ba,v,j);else{var F=v?v(eu(o,N),O,N+"",o,s,j):n;F===n&&(F=O),Mc(o,N,F)}},Vn)}function hb(o,s,f,v,j,O,N){var F=eu(o,f),W=eu(s,f),Q=N.get(W);if(Q){Mc(o,f,Q);return}var Z=O?O(F,W,f+"",o,s,N):n,ee=Z===n;if(ee){var de=Ve(W),we=!de&&Bo(W),Ae=!de&&!we&&os(W);Z=W,de||we||Ae?Ve(F)?Z=F:Jt(F)?Z=$n(F):we?(ee=!1,Z=eh(W,!0)):Ae?(ee=!1,Z=th(W,!0)):Z=[]:Vs(W)||pi(W)?(Z=F,pi(F)?Z=Zh(F):(!Nt(F)||lo(F))&&(Z=bh(W))):ee=!1}ee&&(N.set(W,Z),j(Z,W,v,O,N),N.delete(W)),Mc(o,f,Z)}function $f(o,s){var f=o.length;if(f)return s+=s<0?f:0,ao(s,f)?o[s]:n}function Yf(o,s,f){s.length?s=zt(s,function(O){return Ve(O)?function(N){return di(N,O.length===1?O[0]:O)}:O}):s=[qn];var v=-1;s=zt(s,nr(Ie()));var j=Hf(o,function(O,N,F){var W=zt(s,function(Q){return Q(O)});return{criteria:W,index:++v,value:O}});return H0(j,function(O,N){return Rb(O,N,f)})}function pb(o,s){return Vf(o,s,function(f,v){return cu(o,v)})}function Vf(o,s,f){for(var v=-1,j=s.length,O={};++v<j;){var N=s[v],F=di(o,N);f(F,N)&&Bs(O,Lo(N,o),F)}return O}function mb(o){return function(s){return di(s,o)}}function Pc(o,s,f,v){var j=v?L0:Ui,O=-1,N=s.length,F=o;for(o===s&&(s=$n(s)),f&&(F=zt(o,nr(f)));++O<N;)for(var W=0,Q=s[O],Z=f?f(Q):Q;(W=j(F,Z,W,v))>-1;)F!==o&&Ia.call(F,W,1),Ia.call(o,W,1);return o}function qf(o,s){for(var f=o?s.length:0,v=f-1;f--;){var j=s[f];if(f==v||j!==O){var O=j;ao(j)?Ia.call(o,j,1):Hc(o,j)}}return o}function Nc(o,s){return o+Oa(Rf()*(s-o+1))}function gb(o,s,f,v){for(var j=-1,O=fn(Aa((s-o)/(f||1)),0),N=q(O);O--;)N[v?O:++j]=o,o+=f;return N}function Fc(o,s){var f="";if(!o||s<1||s>ie)return f;do s%2&&(f+=o),s=Oa(s/2),s&&(o+=o);while(s);return f}function tt(o,s){return tu(Ch(o,s,qn),o+"")}function xb(o){return jf(is(o))}function yb(o,s){var f=is(o);return Za(f,ui(s,0,f.length))}function Bs(o,s,f,v){if(!Nt(o))return o;s=Lo(s,o);for(var j=-1,O=s.length,N=O-1,F=o;F!=null&&++j<O;){var W=Hr(s[j]),Q=f;if(W==="__proto__"||W==="constructor"||W==="prototype")return o;if(j!=N){var Z=F[W];Q=v?v(Z,W,F):n,Q===n&&(Q=Nt(Z)?Z:ao(s[j+1])?[]:{})}Ns(F,W,Q),F=F[W]}return o}var Uf=za?function(o,s){return za.set(o,s),o}:qn,bb=Da?function(o,s){return Da(o,"toString",{configurable:!0,enumerable:!1,value:du(s),writable:!0})}:qn;function vb(o){return Za(is(o))}function br(o,s,f){var v=-1,j=o.length;s<0&&(s=-s>j?0:j+s),f=f>j?j:f,f<0&&(f+=j),j=s>f?0:f-s>>>0,s>>>=0;for(var O=q(j);++v<j;)O[v]=o[v+s];return O}function wb(o,s){var f;return No(o,function(v,j,O){return f=s(v,j,O),!f}),!!f}function Wa(o,s,f){var v=0,j=o==null?v:o.length;if(typeof s=="number"&&s===s&&j<=pe){for(;v<j;){var O=v+j>>>1,N=o[O];N!==null&&!or(N)&&(f?N<=s:N<s)?v=O+1:j=O}return j}return Lc(o,s,qn,f)}function Lc(o,s,f,v){var j=0,O=o==null?0:o.length;if(O===0)return 0;s=f(s);for(var N=s!==s,F=s===null,W=or(s),Q=s===n;j<O;){var Z=Oa((j+O)/2),ee=f(o[Z]),de=ee!==n,we=ee===null,Ae=ee===ee,et=or(ee);if(N)var Oe=v||Ae;else Q?Oe=Ae&&(v||de):F?Oe=Ae&&de&&(v||!we):W?Oe=Ae&&de&&!we&&(v||!et):we||et?Oe=!1:Oe=v?ee<=s:ee<s;Oe?j=Z+1:O=Z}return kn(O,ue)}function Gf(o,s){for(var f=-1,v=o.length,j=0,O=[];++f<v;){var N=o[f],F=s?s(N):N;if(!f||!Ir(F,W)){var W=F;O[j++]=N===0?0:N}}return O}function Xf(o){return typeof o=="number"?o:or(o)?U:+o}function rr(o){if(typeof o=="string")return o;if(Ve(o))return zt(o,rr)+"";if(or(o))return Mf?Mf.call(o):"";var s=o+"";return s=="0"&&1/o==-re?"-0":s}function Fo(o,s,f){var v=-1,j=wa,O=o.length,N=!0,F=[],W=F;if(f)N=!1,j=pc;else if(O>=i){var Q=s?null:Db(o);if(Q)return Sa(Q);N=!1,j=Is,W=new ci}else W=s?[]:F;e:for(;++v<O;){var Z=o[v],ee=s?s(Z):Z;if(Z=f||Z!==0?Z:0,N&&ee===ee){for(var de=W.length;de--;)if(W[de]===ee)continue e;s&&W.push(ee),F.push(Z)}else j(W,ee,f)||(W!==F&&W.push(ee),F.push(Z))}return F}function Hc(o,s){return s=Lo(s,o),o=Sh(o,s),o==null||delete o[Hr(vr(s))]}function Qf(o,s,f,v){return Bs(o,s,f(di(o,s)),v)}function $a(o,s,f,v){for(var j=o.length,O=v?j:-1;(v?O--:++O<j)&&s(o[O],O,o););return f?br(o,v?0:O,v?O+1:j):br(o,v?O+1:0,v?j:O)}function Zf(o,s){var f=o;return f instanceof at&&(f=f.value()),mc(s,function(v,j){return j.func.apply(j.thisArg,Oo([v],j.args))},f)}function Bc(o,s,f){var v=o.length;if(v<2)return v?Fo(o[0]):[];for(var j=-1,O=q(v);++j<v;)for(var N=o[j],F=-1;++F<v;)F!=j&&(O[j]=Fs(O[j]||N,o[F],s,f));return Fo(yn(O,1),s,f)}function Jf(o,s,f){for(var v=-1,j=o.length,O=s.length,N={};++v<j;){var F=v<O?s[v]:n;f(N,o[v],F)}return N}function Wc(o){return Jt(o)?o:[]}function $c(o){return typeof o=="function"?o:qn}function Lo(o,s){return Ve(o)?o:Jc(o,s)?[o]:Mh(kt(o))}var Cb=tt;function Ho(o,s,f){var v=o.length;return f=f===n?v:f,!s&&f>=v?o:br(o,s,f)}var Kf=cy||function(o){return xn.clearTimeout(o)};function eh(o,s){if(s)return o.slice();var f=o.length,v=wf?wf(f):new o.constructor(f);return o.copy(v),v}function Yc(o){var s=new o.constructor(o.byteLength);return new ja(s).set(new ja(o)),s}function Sb(o,s){var f=s?Yc(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function kb(o){var s=new o.constructor(o.source,Zt.exec(o));return s.lastIndex=o.lastIndex,s}function _b(o){return Ps?It(Ps.call(o)):{}}function th(o,s){var f=s?Yc(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function nh(o,s){if(o!==s){var f=o!==n,v=o===null,j=o===o,O=or(o),N=s!==n,F=s===null,W=s===s,Q=or(s);if(!F&&!Q&&!O&&o>s||O&&N&&W&&!F&&!Q||v&&N&&W||!f&&W||!j)return 1;if(!v&&!O&&!Q&&o<s||Q&&f&&j&&!v&&!O||F&&f&&j||!N&&j||!W)return-1}return 0}function Rb(o,s,f){for(var v=-1,j=o.criteria,O=s.criteria,N=j.length,F=f.length;++v<N;){var W=nh(j[v],O[v]);if(W){if(v>=F)return W;var Q=f[v];return W*(Q=="desc"?-1:1)}}return o.index-s.index}function rh(o,s,f,v){for(var j=-1,O=o.length,N=f.length,F=-1,W=s.length,Q=fn(O-N,0),Z=q(W+Q),ee=!v;++F<W;)Z[F]=s[F];for(;++j<N;)(ee||j<O)&&(Z[f[j]]=o[j]);for(;Q--;)Z[F++]=o[j++];return Z}function oh(o,s,f,v){for(var j=-1,O=o.length,N=-1,F=f.length,W=-1,Q=s.length,Z=fn(O-F,0),ee=q(Z+Q),de=!v;++j<Z;)ee[j]=o[j];for(var we=j;++W<Q;)ee[we+W]=s[W];for(;++N<F;)(de||j<O)&&(ee[we+f[N]]=o[j++]);return ee}function $n(o,s){var f=-1,v=o.length;for(s||(s=q(v));++f<v;)s[f]=o[f];return s}function Lr(o,s,f,v){var j=!f;f||(f={});for(var O=-1,N=s.length;++O<N;){var F=s[O],W=v?v(f[F],o[F],F,f,o):n;W===n&&(W=o[F]),j?oo(f,F,W):Ns(f,F,W)}return f}function Mb(o,s){return Lr(o,Zc(o),s)}function Tb(o,s){return Lr(o,xh(o),s)}function Ya(o,s){return function(f,v){var j=Ve(f)?A0:Qy,O=s?s():{};return j(f,o,Ie(v,2),O)}}function ts(o){return tt(function(s,f){var v=-1,j=f.length,O=j>1?f[j-1]:n,N=j>2?f[2]:n;for(O=o.length>3&&typeof O=="function"?(j--,O):n,N&&On(f[0],f[1],N)&&(O=j<3?n:O,j=1),s=It(s);++v<j;){var F=f[v];F&&o(s,F,v,O)}return s})}function ih(o,s){return function(f,v){if(f==null)return f;if(!Yn(f))return o(f,v);for(var j=f.length,O=s?j:-1,N=It(f);(s?O--:++O<j)&&v(N[O],O,N)!==!1;);return f}}function sh(o){return function(s,f,v){for(var j=-1,O=It(s),N=v(s),F=N.length;F--;){var W=N[o?F:++j];if(f(O[W],W,O)===!1)break}return s}}function jb(o,s,f){var v=s&w,j=Ws(o);function O(){var N=this&&this!==xn&&this instanceof O?j:o;return N.apply(v?f:this,arguments)}return O}function ah(o){return function(s){s=kt(s);var f=Gi(s)?jr(s):n,v=f?f[0]:s.charAt(0),j=f?Ho(f,1).join(""):s.slice(1);return v[o]()+j}}function ns(o){return function(s){return mc(ip(op(s).replace(on,"")),o,"")}}function Ws(o){return function(){var s=arguments;switch(s.length){case 0:return new o;case 1:return new o(s[0]);case 2:return new o(s[0],s[1]);case 3:return new o(s[0],s[1],s[2]);case 4:return new o(s[0],s[1],s[2],s[3]);case 5:return new o(s[0],s[1],s[2],s[3],s[4]);case 6:return new o(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new o(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var f=es(o.prototype),v=o.apply(f,s);return Nt(v)?v:f}}function Eb(o,s,f){var v=Ws(o);function j(){for(var O=arguments.length,N=q(O),F=O,W=rs(j);F--;)N[F]=arguments[F];var Q=O<3&&N[0]!==W&&N[O-1]!==W?[]:zo(N,W);if(O-=Q.length,O<f)return fh(o,s,Va,j.placeholder,n,N,Q,n,n,f-O);var Z=this&&this!==xn&&this instanceof j?v:o;return tr(Z,this,N)}return j}function lh(o){return function(s,f,v){var j=It(s);if(!Yn(s)){var O=Ie(f,3);s=mn(s),f=function(F){return O(j[F],F,j)}}var N=o(s,f,v);return N>-1?j[O?s[N]:N]:n}}function ch(o){return so(function(s){var f=s.length,v=f,j=xr.prototype.thru;for(o&&s.reverse();v--;){var O=s[v];if(typeof O!="function")throw new gr(l);if(j&&!N&&Xa(O)=="wrapper")var N=new xr([],!0)}for(v=N?v:f;++v<f;){O=s[v];var F=Xa(O),W=F=="wrapper"?Xc(O):n;W&&Kc(W[0])&&W[1]==(I|_|T|z)&&!W[4].length&&W[9]==1?N=N[Xa(W[0])].apply(N,W[3]):N=O.length==1&&Kc(O)?N[F]():N.thru(O)}return function(){var Q=arguments,Z=Q[0];if(N&&Q.length==1&&Ve(Z))return N.plant(Z).value();for(var ee=0,de=f?s[ee].apply(this,Q):Z;++ee<f;)de=s[ee].call(this,de);return de}})}function Va(o,s,f,v,j,O,N,F,W,Q){var Z=s&I,ee=s&w,de=s&S,we=s&(_|R),Ae=s&D,et=de?n:Ws(o);function Oe(){for(var ot=arguments.length,lt=q(ot),ir=ot;ir--;)lt[ir]=arguments[ir];if(we)var zn=rs(Oe),sr=W0(lt,zn);if(v&&(lt=rh(lt,v,j,we)),O&&(lt=oh(lt,O,N,we)),ot-=sr,we&&ot<Q){var Kt=zo(lt,zn);return fh(o,s,Va,Oe.placeholder,f,lt,Kt,F,W,Q-ot)}var Dr=ee?f:this,uo=de?Dr[o]:o;return ot=lt.length,F?lt=Qb(lt,F):Ae&&ot>1&&lt.reverse(),Z&&W<ot&&(lt.length=W),this&&this!==xn&&this instanceof Oe&&(uo=et||Ws(uo)),uo.apply(Dr,lt)}return Oe}function uh(o,s){return function(f,v){return ob(f,o,s(v),{})}}function qa(o,s){return function(f,v){var j;if(f===n&&v===n)return s;if(f!==n&&(j=f),v!==n){if(j===n)return v;typeof f=="string"||typeof v=="string"?(f=rr(f),v=rr(v)):(f=Xf(f),v=Xf(v)),j=o(f,v)}return j}}function Vc(o){return so(function(s){return s=zt(s,nr(Ie())),tt(function(f){var v=this;return o(s,function(j){return tr(j,v,f)})})})}function Ua(o,s){s=s===n?" ":rr(s);var f=s.length;if(f<2)return f?Fc(s,o):s;var v=Fc(s,Aa(o/Xi(s)));return Gi(s)?Ho(jr(v),0,o).join(""):v.slice(0,o)}function Ib(o,s,f,v){var j=s&w,O=Ws(o);function N(){for(var F=-1,W=arguments.length,Q=-1,Z=v.length,ee=q(Z+W),de=this&&this!==xn&&this instanceof N?O:o;++Q<Z;)ee[Q]=v[Q];for(;W--;)ee[Q++]=arguments[++F];return tr(de,j?f:this,ee)}return N}function dh(o){return function(s,f,v){return v&&typeof v!="number"&&On(s,f,v)&&(f=v=n),s=co(s),f===n?(f=s,s=0):f=co(f),v=v===n?s<f?1:-1:co(v),gb(s,f,v,o)}}function Ga(o){return function(s,f){return typeof s=="string"&&typeof f=="string"||(s=wr(s),f=wr(f)),o(s,f)}}function fh(o,s,f,v,j,O,N,F,W,Q){var Z=s&_,ee=Z?N:n,de=Z?n:N,we=Z?O:n,Ae=Z?n:O;s|=Z?T:M,s&=~(Z?M:T),s&k||(s&=-4);var et=[o,s,j,we,ee,Ae,de,F,W,Q],Oe=f.apply(n,et);return Kc(o)&&kh(Oe,et),Oe.placeholder=v,_h(Oe,o,s)}function qc(o){var s=dn[o];return function(f,v){if(f=wr(f),v=v==null?0:kn(Ke(v),292),v&&_f(f)){var j=(kt(f)+"e").split("e"),O=s(j[0]+"e"+(+j[1]+v));return j=(kt(O)+"e").split("e"),+(j[0]+"e"+(+j[1]-v))}return s(f)}}var Db=Ji&&1/Sa(new Ji([,-0]))[1]==re?function(o){return new Ji(o)}:pu;function hh(o){return function(s){var f=_n(s);return f==Me?Cc(s):f==gt?X0(s):B0(s,o(s))}}function io(o,s,f,v,j,O,N,F){var W=s&S;if(!W&&typeof o!="function")throw new gr(l);var Q=v?v.length:0;if(Q||(s&=-97,v=j=n),N=N===n?N:fn(Ke(N),0),F=F===n?F:Ke(F),Q-=j?j.length:0,s&M){var Z=v,ee=j;v=j=n}var de=W?n:Xc(o),we=[o,s,f,v,j,Z,ee,O,N,F];if(de&&Ub(we,de),o=we[0],s=we[1],f=we[2],v=we[3],j=we[4],F=we[9]=we[9]===n?W?0:o.length:fn(we[9]-Q,0),!F&&s&(_|R)&&(s&=-25),!s||s==w)var Ae=jb(o,s,f);else s==_||s==R?Ae=Eb(o,s,F):(s==T||s==(w|T))&&!j.length?Ae=Ib(o,s,f,v):Ae=Va.apply(n,we);var et=de?Uf:kh;return _h(et(Ae,we),o,s)}function ph(o,s,f,v){return o===n||Ir(o,Zi[f])&&!Mt.call(v,f)?s:o}function mh(o,s,f,v,j,O){return Nt(o)&&Nt(s)&&(O.set(s,o),Ba(o,s,n,mh,O),O.delete(s)),o}function Ab(o){return Vs(o)?n:o}function gh(o,s,f,v,j,O){var N=f&b,F=o.length,W=s.length;if(F!=W&&!(N&&W>F))return!1;var Q=O.get(o),Z=O.get(s);if(Q&&Z)return Q==s&&Z==o;var ee=-1,de=!0,we=f&C?new ci:n;for(O.set(o,s),O.set(s,o);++ee<F;){var Ae=o[ee],et=s[ee];if(v)var Oe=N?v(et,Ae,ee,s,o,O):v(Ae,et,ee,o,s,O);if(Oe!==n){if(Oe)continue;de=!1;break}if(we){if(!gc(s,function(ot,lt){if(!Is(we,lt)&&(Ae===ot||j(Ae,ot,f,v,O)))return we.push(lt)})){de=!1;break}}else if(!(Ae===et||j(Ae,et,f,v,O))){de=!1;break}}return O.delete(o),O.delete(s),de}function Ob(o,s,f,v,j,O,N){switch(f){case Xt:if(o.byteLength!=s.byteLength||o.byteOffset!=s.byteOffset)return!1;o=o.buffer,s=s.buffer;case ln:return!(o.byteLength!=s.byteLength||!O(new ja(o),new ja(s)));case Ne:case ae:case Fe:return Ir(+o,+s);case je:return o.name==s.name&&o.message==s.message;case mt:case Ot:return o==s+"";case Me:var F=Cc;case gt:var W=v&b;if(F||(F=Sa),o.size!=s.size&&!W)return!1;var Q=N.get(o);if(Q)return Q==s;v|=C,N.set(o,s);var Z=gh(F(o),F(s),v,j,O,N);return N.delete(o),Z;case xt:if(Ps)return Ps.call(o)==Ps.call(s)}return!1}function zb(o,s,f,v,j,O){var N=f&b,F=Uc(o),W=F.length,Q=Uc(s),Z=Q.length;if(W!=Z&&!N)return!1;for(var ee=W;ee--;){var de=F[ee];if(!(N?de in s:Mt.call(s,de)))return!1}var we=O.get(o),Ae=O.get(s);if(we&&Ae)return we==s&&Ae==o;var et=!0;O.set(o,s),O.set(s,o);for(var Oe=N;++ee<W;){de=F[ee];var ot=o[de],lt=s[de];if(v)var ir=N?v(lt,ot,de,s,o,O):v(ot,lt,de,o,s,O);if(!(ir===n?ot===lt||j(ot,lt,f,v,O):ir)){et=!1;break}Oe||(Oe=de=="constructor")}if(et&&!Oe){var zn=o.constructor,sr=s.constructor;zn!=sr&&"constructor"in o&&"constructor"in s&&!(typeof zn=="function"&&zn instanceof zn&&typeof sr=="function"&&sr instanceof sr)&&(et=!1)}return O.delete(o),O.delete(s),et}function so(o){return tu(Ch(o,n,Ih),o+"")}function Uc(o){return Pf(o,mn,Zc)}function Gc(o){return Pf(o,Vn,xh)}var Xc=za?function(o){return za.get(o)}:pu;function Xa(o){for(var s=o.name+"",f=Ki[s],v=Mt.call(Ki,s)?f.length:0;v--;){var j=f[v],O=j.func;if(O==null||O==o)return j.name}return s}function rs(o){var s=Mt.call(A,"placeholder")?A:o;return s.placeholder}function Ie(){var o=A.iteratee||fu;return o=o===fu?Lf:o,arguments.length?o(arguments[0],arguments[1]):o}function Qa(o,s){var f=o.__data__;return $b(s)?f[typeof s=="string"?"string":"hash"]:f.map}function Qc(o){for(var s=mn(o),f=s.length;f--;){var v=s[f],j=o[v];s[f]=[v,j,vh(j)]}return s}function fi(o,s){var f=q0(o,s);return Ff(f)?f:n}function Pb(o){var s=Mt.call(o,ai),f=o[ai];try{o[ai]=n;var v=!0}catch{}var j=Ma.call(o);return v&&(s?o[ai]=f:delete o[ai]),j}var Zc=kc?function(o){return o==null?[]:(o=It(o),Ao(kc(o),function(s){return Sf.call(o,s)}))}:mu,xh=kc?function(o){for(var s=[];o;)Oo(s,Zc(o)),o=Ea(o);return s}:mu,_n=An;(_c&&_n(new _c(new ArrayBuffer(1)))!=Xt||As&&_n(new As)!=Me||Rc&&_n(Rc.resolve())!=Ze||Ji&&_n(new Ji)!=gt||Os&&_n(new Os)!=Bt)&&(_n=function(o){var s=An(o),f=s==Ee?o.constructor:n,v=f?hi(f):"";if(v)switch(v){case yy:return Xt;case by:return Me;case vy:return Ze;case wy:return gt;case Cy:return Bt}return s});function Nb(o,s,f){for(var v=-1,j=f.length;++v<j;){var O=f[v],N=O.size;switch(O.type){case"drop":o+=N;break;case"dropRight":s-=N;break;case"take":s=kn(s,o+N);break;case"takeRight":o=fn(o,s-N);break}}return{start:o,end:s}}function Fb(o){var s=o.match(De);return s?s[1].split(Ge):[]}function yh(o,s,f){s=Lo(s,o);for(var v=-1,j=s.length,O=!1;++v<j;){var N=Hr(s[v]);if(!(O=o!=null&&f(o,N)))break;o=o[N]}return O||++v!=j?O:(j=o==null?0:o.length,!!j&&rl(j)&&ao(N,j)&&(Ve(o)||pi(o)))}function Lb(o){var s=o.length,f=new o.constructor(s);return s&&typeof o[0]=="string"&&Mt.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function bh(o){return typeof o.constructor=="function"&&!$s(o)?es(Ea(o)):{}}function Hb(o,s,f){var v=o.constructor;switch(s){case ln:return Yc(o);case Ne:case ae:return new v(+o);case Xt:return Sb(o,f);case cn:case un:case Cn:case yt:case Qn:case Sn:case jt:case gn:case En:return th(o,f);case Me:return new v;case Fe:case Ot:return new v(o);case mt:return kb(o);case gt:return new v;case xt:return _b(o)}}function Bb(o,s){var f=s.length;if(!f)return o;var v=f-1;return s[v]=(f>1?"& ":"")+s[v],s=s.join(f>2?", ":" "),o.replace(Jn,`{
/* [wrapped with `+s+`] */
`)}function Wb(o){return Ve(o)||pi(o)||!!(kf&&o&&o[kf])}function ao(o,s){var f=typeof o;return s=s??ie,!!s&&(f=="number"||f!="symbol"&&Li.test(o))&&o>-1&&o%1==0&&o<s}function On(o,s,f){if(!Nt(f))return!1;var v=typeof s;return(v=="number"?Yn(f)&&ao(s,f.length):v=="string"&&s in f)?Ir(f[s],o):!1}function Jc(o,s){if(Ve(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||or(o)?!0:Rr.test(o)||!In.test(o)||s!=null&&o in It(s)}function $b(o){var s=typeof o;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?o!=="__proto__":o===null}function Kc(o){var s=Xa(o),f=A[s];if(typeof f!="function"||!(s in at.prototype))return!1;if(o===f)return!0;var v=Xc(f);return!!v&&o===v[0]}function Yb(o){return!!vf&&vf in o}var Vb=_a?lo:gu;function $s(o){var s=o&&o.constructor,f=typeof s=="function"&&s.prototype||Zi;return o===f}function vh(o){return o===o&&!Nt(o)}function wh(o,s){return function(f){return f==null?!1:f[o]===s&&(s!==n||o in It(f))}}function qb(o){var s=tl(o,function(v){return f.size===d&&f.clear(),v}),f=s.cache;return s}function Ub(o,s){var f=o[1],v=s[1],j=f|v,O=j<(w|S|I),N=v==I&&f==_||v==I&&f==z&&o[7].length<=s[8]||v==(I|z)&&s[7].length<=s[8]&&f==_;if(!(O||N))return o;v&w&&(o[2]=s[2],j|=f&w?0:k);var F=s[3];if(F){var W=o[3];o[3]=W?rh(W,F,s[4]):F,o[4]=W?zo(o[3],p):s[4]}return F=s[5],F&&(W=o[5],o[5]=W?oh(W,F,s[6]):F,o[6]=W?zo(o[5],p):s[6]),F=s[7],F&&(o[7]=F),v&I&&(o[8]=o[8]==null?s[8]:kn(o[8],s[8])),o[9]==null&&(o[9]=s[9]),o[0]=s[0],o[1]=j,o}function Gb(o){var s=[];if(o!=null)for(var f in It(o))s.push(f);return s}function Xb(o){return Ma.call(o)}function Ch(o,s,f){return s=fn(s===n?o.length-1:s,0),function(){for(var v=arguments,j=-1,O=fn(v.length-s,0),N=q(O);++j<O;)N[j]=v[s+j];j=-1;for(var F=q(s+1);++j<s;)F[j]=v[j];return F[s]=f(N),tr(o,this,F)}}function Sh(o,s){return s.length<2?o:di(o,br(s,0,-1))}function Qb(o,s){for(var f=o.length,v=kn(s.length,f),j=$n(o);v--;){var O=s[v];o[v]=ao(O,f)?j[O]:n}return o}function eu(o,s){if(!(s==="constructor"&&typeof o[s]=="function")&&s!="__proto__")return o[s]}var kh=Rh(Uf),Ys=dy||function(o,s){return xn.setTimeout(o,s)},tu=Rh(bb);function _h(o,s,f){var v=s+"";return tu(o,Bb(v,Zb(Fb(v),f)))}function Rh(o){var s=0,f=0;return function(){var v=my(),j=$-(v-f);if(f=v,j>0){if(++s>=H)return arguments[0]}else s=0;return o.apply(n,arguments)}}function Za(o,s){var f=-1,v=o.length,j=v-1;for(s=s===n?v:s;++f<s;){var O=Nc(f,j),N=o[O];o[O]=o[f],o[f]=N}return o.length=s,o}var Mh=qb(function(o){var s=[];return o.charCodeAt(0)===46&&s.push(""),o.replace(Mr,function(f,v,j,O){s.push(j?O.replace($t,"$1"):v||f)}),s});function Hr(o){if(typeof o=="string"||or(o))return o;var s=o+"";return s=="0"&&1/o==-re?"-0":s}function hi(o){if(o!=null){try{return Ra.call(o)}catch{}try{return o+""}catch{}}return""}function Zb(o,s){return mr(He,function(f){var v="_."+f[0];s&f[1]&&!wa(o,v)&&o.push(v)}),o.sort()}function Th(o){if(o instanceof at)return o.clone();var s=new xr(o.__wrapped__,o.__chain__);return s.__actions__=$n(o.__actions__),s.__index__=o.__index__,s.__values__=o.__values__,s}function Jb(o,s,f){(f?On(o,s,f):s===n)?s=1:s=fn(Ke(s),0);var v=o==null?0:o.length;if(!v||s<1)return[];for(var j=0,O=0,N=q(Aa(v/s));j<v;)N[O++]=br(o,j,j+=s);return N}function Kb(o){for(var s=-1,f=o==null?0:o.length,v=0,j=[];++s<f;){var O=o[s];O&&(j[v++]=O)}return j}function ev(){var o=arguments.length;if(!o)return[];for(var s=q(o-1),f=arguments[0],v=o;v--;)s[v-1]=arguments[v];return Oo(Ve(f)?$n(f):[f],yn(s,1))}var tv=tt(function(o,s){return Jt(o)?Fs(o,yn(s,1,Jt,!0)):[]}),nv=tt(function(o,s){var f=vr(s);return Jt(f)&&(f=n),Jt(o)?Fs(o,yn(s,1,Jt,!0),Ie(f,2)):[]}),rv=tt(function(o,s){var f=vr(s);return Jt(f)&&(f=n),Jt(o)?Fs(o,yn(s,1,Jt,!0),n,f):[]});function ov(o,s,f){var v=o==null?0:o.length;return v?(s=f||s===n?1:Ke(s),br(o,s<0?0:s,v)):[]}function iv(o,s,f){var v=o==null?0:o.length;return v?(s=f||s===n?1:Ke(s),s=v-s,br(o,0,s<0?0:s)):[]}function sv(o,s){return o&&o.length?$a(o,Ie(s,3),!0,!0):[]}function av(o,s){return o&&o.length?$a(o,Ie(s,3),!0):[]}function lv(o,s,f,v){var j=o==null?0:o.length;return j?(f&&typeof f!="number"&&On(o,s,f)&&(f=0,v=j),eb(o,s,f,v)):[]}function jh(o,s,f){var v=o==null?0:o.length;if(!v)return-1;var j=f==null?0:Ke(f);return j<0&&(j=fn(v+j,0)),Ca(o,Ie(s,3),j)}function Eh(o,s,f){var v=o==null?0:o.length;if(!v)return-1;var j=v-1;return f!==n&&(j=Ke(f),j=f<0?fn(v+j,0):kn(j,v-1)),Ca(o,Ie(s,3),j,!0)}function Ih(o){var s=o==null?0:o.length;return s?yn(o,1):[]}function cv(o){var s=o==null?0:o.length;return s?yn(o,re):[]}function uv(o,s){var f=o==null?0:o.length;return f?(s=s===n?1:Ke(s),yn(o,s)):[]}function dv(o){for(var s=-1,f=o==null?0:o.length,v={};++s<f;){var j=o[s];v[j[0]]=j[1]}return v}function Dh(o){return o&&o.length?o[0]:n}function fv(o,s,f){var v=o==null?0:o.length;if(!v)return-1;var j=f==null?0:Ke(f);return j<0&&(j=fn(v+j,0)),Ui(o,s,j)}function hv(o){var s=o==null?0:o.length;return s?br(o,0,-1):[]}var pv=tt(function(o){var s=zt(o,Wc);return s.length&&s[0]===o[0]?Dc(s):[]}),mv=tt(function(o){var s=vr(o),f=zt(o,Wc);return s===vr(f)?s=n:f.pop(),f.length&&f[0]===o[0]?Dc(f,Ie(s,2)):[]}),gv=tt(function(o){var s=vr(o),f=zt(o,Wc);return s=typeof s=="function"?s:n,s&&f.pop(),f.length&&f[0]===o[0]?Dc(f,n,s):[]});function xv(o,s){return o==null?"":hy.call(o,s)}function vr(o){var s=o==null?0:o.length;return s?o[s-1]:n}function yv(o,s,f){var v=o==null?0:o.length;if(!v)return-1;var j=v;return f!==n&&(j=Ke(f),j=j<0?fn(v+j,0):kn(j,v-1)),s===s?Z0(o,s,j):Ca(o,ff,j,!0)}function bv(o,s){return o&&o.length?$f(o,Ke(s)):n}var vv=tt(Ah);function Ah(o,s){return o&&o.length&&s&&s.length?Pc(o,s):o}function wv(o,s,f){return o&&o.length&&s&&s.length?Pc(o,s,Ie(f,2)):o}function Cv(o,s,f){return o&&o.length&&s&&s.length?Pc(o,s,n,f):o}var Sv=so(function(o,s){var f=o==null?0:o.length,v=Tc(o,s);return qf(o,zt(s,function(j){return ao(j,f)?+j:j}).sort(nh)),v});function kv(o,s){var f=[];if(!(o&&o.length))return f;var v=-1,j=[],O=o.length;for(s=Ie(s,3);++v<O;){var N=o[v];s(N,v,o)&&(f.push(N),j.push(v))}return qf(o,j),f}function nu(o){return o==null?o:xy.call(o)}function _v(o,s,f){var v=o==null?0:o.length;return v?(f&&typeof f!="number"&&On(o,s,f)?(s=0,f=v):(s=s==null?0:Ke(s),f=f===n?v:Ke(f)),br(o,s,f)):[]}function Rv(o,s){return Wa(o,s)}function Mv(o,s,f){return Lc(o,s,Ie(f,2))}function Tv(o,s){var f=o==null?0:o.length;if(f){var v=Wa(o,s);if(v<f&&Ir(o[v],s))return v}return-1}function jv(o,s){return Wa(o,s,!0)}function Ev(o,s,f){return Lc(o,s,Ie(f,2),!0)}function Iv(o,s){var f=o==null?0:o.length;if(f){var v=Wa(o,s,!0)-1;if(Ir(o[v],s))return v}return-1}function Dv(o){return o&&o.length?Gf(o):[]}function Av(o,s){return o&&o.length?Gf(o,Ie(s,2)):[]}function Ov(o){var s=o==null?0:o.length;return s?br(o,1,s):[]}function zv(o,s,f){return o&&o.length?(s=f||s===n?1:Ke(s),br(o,0,s<0?0:s)):[]}function Pv(o,s,f){var v=o==null?0:o.length;return v?(s=f||s===n?1:Ke(s),s=v-s,br(o,s<0?0:s,v)):[]}function Nv(o,s){return o&&o.length?$a(o,Ie(s,3),!1,!0):[]}function Fv(o,s){return o&&o.length?$a(o,Ie(s,3)):[]}var Lv=tt(function(o){return Fo(yn(o,1,Jt,!0))}),Hv=tt(function(o){var s=vr(o);return Jt(s)&&(s=n),Fo(yn(o,1,Jt,!0),Ie(s,2))}),Bv=tt(function(o){var s=vr(o);return s=typeof s=="function"?s:n,Fo(yn(o,1,Jt,!0),n,s)});function Wv(o){return o&&o.length?Fo(o):[]}function $v(o,s){return o&&o.length?Fo(o,Ie(s,2)):[]}function Yv(o,s){return s=typeof s=="function"?s:n,o&&o.length?Fo(o,n,s):[]}function ru(o){if(!(o&&o.length))return[];var s=0;return o=Ao(o,function(f){if(Jt(f))return s=fn(f.length,s),!0}),vc(s,function(f){return zt(o,xc(f))})}function Oh(o,s){if(!(o&&o.length))return[];var f=ru(o);return s==null?f:zt(f,function(v){return tr(s,n,v)})}var Vv=tt(function(o,s){return Jt(o)?Fs(o,s):[]}),qv=tt(function(o){return Bc(Ao(o,Jt))}),Uv=tt(function(o){var s=vr(o);return Jt(s)&&(s=n),Bc(Ao(o,Jt),Ie(s,2))}),Gv=tt(function(o){var s=vr(o);return s=typeof s=="function"?s:n,Bc(Ao(o,Jt),n,s)}),Xv=tt(ru);function Qv(o,s){return Jf(o||[],s||[],Ns)}function Zv(o,s){return Jf(o||[],s||[],Bs)}var Jv=tt(function(o){var s=o.length,f=s>1?o[s-1]:n;return f=typeof f=="function"?(o.pop(),f):n,Oh(o,f)});function zh(o){var s=A(o);return s.__chain__=!0,s}function Kv(o,s){return s(o),o}function Ja(o,s){return s(o)}var ew=so(function(o){var s=o.length,f=s?o[0]:0,v=this.__wrapped__,j=function(O){return Tc(O,o)};return s>1||this.__actions__.length||!(v instanceof at)||!ao(f)?this.thru(j):(v=v.slice(f,+f+(s?1:0)),v.__actions__.push({func:Ja,args:[j],thisArg:n}),new xr(v,this.__chain__).thru(function(O){return s&&!O.length&&O.push(n),O}))});function tw(){return zh(this)}function nw(){return new xr(this.value(),this.__chain__)}function rw(){this.__values__===n&&(this.__values__=Xh(this.value()));var o=this.__index__>=this.__values__.length,s=o?n:this.__values__[this.__index__++];return{done:o,value:s}}function ow(){return this}function iw(o){for(var s,f=this;f instanceof Na;){var v=Th(f);v.__index__=0,v.__values__=n,s?j.__wrapped__=v:s=v;var j=v;f=f.__wrapped__}return j.__wrapped__=o,s}function sw(){var o=this.__wrapped__;if(o instanceof at){var s=o;return this.__actions__.length&&(s=new at(this)),s=s.reverse(),s.__actions__.push({func:Ja,args:[nu],thisArg:n}),new xr(s,this.__chain__)}return this.thru(nu)}function aw(){return Zf(this.__wrapped__,this.__actions__)}var lw=Ya(function(o,s,f){Mt.call(o,f)?++o[f]:oo(o,f,1)});function cw(o,s,f){var v=Ve(o)?uf:Ky;return f&&On(o,s,f)&&(s=n),v(o,Ie(s,3))}function uw(o,s){var f=Ve(o)?Ao:Of;return f(o,Ie(s,3))}var dw=lh(jh),fw=lh(Eh);function hw(o,s){return yn(Ka(o,s),1)}function pw(o,s){return yn(Ka(o,s),re)}function mw(o,s,f){return f=f===n?1:Ke(f),yn(Ka(o,s),f)}function Ph(o,s){var f=Ve(o)?mr:No;return f(o,Ie(s,3))}function Nh(o,s){var f=Ve(o)?O0:Af;return f(o,Ie(s,3))}var gw=Ya(function(o,s,f){Mt.call(o,f)?o[f].push(s):oo(o,f,[s])});function xw(o,s,f,v){o=Yn(o)?o:is(o),f=f&&!v?Ke(f):0;var j=o.length;return f<0&&(f=fn(j+f,0)),ol(o)?f<=j&&o.indexOf(s,f)>-1:!!j&&Ui(o,s,f)>-1}var yw=tt(function(o,s,f){var v=-1,j=typeof s=="function",O=Yn(o)?q(o.length):[];return No(o,function(N){O[++v]=j?tr(s,N,f):Ls(N,s,f)}),O}),bw=Ya(function(o,s,f){oo(o,f,s)});function Ka(o,s){var f=Ve(o)?zt:Hf;return f(o,Ie(s,3))}function vw(o,s,f,v){return o==null?[]:(Ve(s)||(s=s==null?[]:[s]),f=v?n:f,Ve(f)||(f=f==null?[]:[f]),Yf(o,s,f))}var ww=Ya(function(o,s,f){o[f?0:1].push(s)},function(){return[[],[]]});function Cw(o,s,f){var v=Ve(o)?mc:pf,j=arguments.length<3;return v(o,Ie(s,4),f,j,No)}function Sw(o,s,f){var v=Ve(o)?z0:pf,j=arguments.length<3;return v(o,Ie(s,4),f,j,Af)}function kw(o,s){var f=Ve(o)?Ao:Of;return f(o,nl(Ie(s,3)))}function _w(o){var s=Ve(o)?jf:xb;return s(o)}function Rw(o,s,f){(f?On(o,s,f):s===n)?s=1:s=Ke(s);var v=Ve(o)?Gy:yb;return v(o,s)}function Mw(o){var s=Ve(o)?Xy:vb;return s(o)}function Tw(o){if(o==null)return 0;if(Yn(o))return ol(o)?Xi(o):o.length;var s=_n(o);return s==Me||s==gt?o.size:Oc(o).length}function jw(o,s,f){var v=Ve(o)?gc:wb;return f&&On(o,s,f)&&(s=n),v(o,Ie(s,3))}var Ew=tt(function(o,s){if(o==null)return[];var f=s.length;return f>1&&On(o,s[0],s[1])?s=[]:f>2&&On(s[0],s[1],s[2])&&(s=[s[0]]),Yf(o,yn(s,1),[])}),el=uy||function(){return xn.Date.now()};function Iw(o,s){if(typeof s!="function")throw new gr(l);return o=Ke(o),function(){if(--o<1)return s.apply(this,arguments)}}function Fh(o,s,f){return s=f?n:s,s=o&&s==null?o.length:s,io(o,I,n,n,n,n,s)}function Lh(o,s){var f;if(typeof s!="function")throw new gr(l);return o=Ke(o),function(){return--o>0&&(f=s.apply(this,arguments)),o<=1&&(s=n),f}}var ou=tt(function(o,s,f){var v=w;if(f.length){var j=zo(f,rs(ou));v|=T}return io(o,v,s,f,j)}),Hh=tt(function(o,s,f){var v=w|S;if(f.length){var j=zo(f,rs(Hh));v|=T}return io(s,v,o,f,j)});function Bh(o,s,f){s=f?n:s;var v=io(o,_,n,n,n,n,n,s);return v.placeholder=Bh.placeholder,v}function Wh(o,s,f){s=f?n:s;var v=io(o,R,n,n,n,n,n,s);return v.placeholder=Wh.placeholder,v}function $h(o,s,f){var v,j,O,N,F,W,Q=0,Z=!1,ee=!1,de=!0;if(typeof o!="function")throw new gr(l);s=wr(s)||0,Nt(f)&&(Z=!!f.leading,ee="maxWait"in f,O=ee?fn(wr(f.maxWait)||0,s):O,de="trailing"in f?!!f.trailing:de);function we(Kt){var Dr=v,uo=j;return v=j=n,Q=Kt,N=o.apply(uo,Dr),N}function Ae(Kt){return Q=Kt,F=Ys(ot,s),Z?we(Kt):N}function et(Kt){var Dr=Kt-W,uo=Kt-Q,lp=s-Dr;return ee?kn(lp,O-uo):lp}function Oe(Kt){var Dr=Kt-W,uo=Kt-Q;return W===n||Dr>=s||Dr<0||ee&&uo>=O}function ot(){var Kt=el();if(Oe(Kt))return lt(Kt);F=Ys(ot,et(Kt))}function lt(Kt){return F=n,de&&v?we(Kt):(v=j=n,N)}function ir(){F!==n&&Kf(F),Q=0,v=W=j=F=n}function zn(){return F===n?N:lt(el())}function sr(){var Kt=el(),Dr=Oe(Kt);if(v=arguments,j=this,W=Kt,Dr){if(F===n)return Ae(W);if(ee)return Kf(F),F=Ys(ot,s),we(W)}return F===n&&(F=Ys(ot,s)),N}return sr.cancel=ir,sr.flush=zn,sr}var Dw=tt(function(o,s){return Df(o,1,s)}),Aw=tt(function(o,s,f){return Df(o,wr(s)||0,f)});function Ow(o){return io(o,D)}function tl(o,s){if(typeof o!="function"||s!=null&&typeof s!="function")throw new gr(l);var f=function(){var v=arguments,j=s?s.apply(this,v):v[0],O=f.cache;if(O.has(j))return O.get(j);var N=o.apply(this,v);return f.cache=O.set(j,N)||O,N};return f.cache=new(tl.Cache||ro),f}tl.Cache=ro;function nl(o){if(typeof o!="function")throw new gr(l);return function(){var s=arguments;switch(s.length){case 0:return!o.call(this);case 1:return!o.call(this,s[0]);case 2:return!o.call(this,s[0],s[1]);case 3:return!o.call(this,s[0],s[1],s[2])}return!o.apply(this,s)}}function zw(o){return Lh(2,o)}var Pw=Cb(function(o,s){s=s.length==1&&Ve(s[0])?zt(s[0],nr(Ie())):zt(yn(s,1),nr(Ie()));var f=s.length;return tt(function(v){for(var j=-1,O=kn(v.length,f);++j<O;)v[j]=s[j].call(this,v[j]);return tr(o,this,v)})}),iu=tt(function(o,s){var f=zo(s,rs(iu));return io(o,T,n,s,f)}),Yh=tt(function(o,s){var f=zo(s,rs(Yh));return io(o,M,n,s,f)}),Nw=so(function(o,s){return io(o,z,n,n,n,s)});function Fw(o,s){if(typeof o!="function")throw new gr(l);return s=s===n?s:Ke(s),tt(o,s)}function Lw(o,s){if(typeof o!="function")throw new gr(l);return s=s==null?0:fn(Ke(s),0),tt(function(f){var v=f[s],j=Ho(f,0,s);return v&&Oo(j,v),tr(o,this,j)})}function Hw(o,s,f){var v=!0,j=!0;if(typeof o!="function")throw new gr(l);return Nt(f)&&(v="leading"in f?!!f.leading:v,j="trailing"in f?!!f.trailing:j),$h(o,s,{leading:v,maxWait:s,trailing:j})}function Bw(o){return Fh(o,1)}function Ww(o,s){return iu($c(s),o)}function $w(){if(!arguments.length)return[];var o=arguments[0];return Ve(o)?o:[o]}function Yw(o){return yr(o,x)}function Vw(o,s){return s=typeof s=="function"?s:n,yr(o,x,s)}function qw(o){return yr(o,m|x)}function Uw(o,s){return s=typeof s=="function"?s:n,yr(o,m|x,s)}function Gw(o,s){return s==null||If(o,s,mn(s))}function Ir(o,s){return o===s||o!==o&&s!==s}var Xw=Ga(Ic),Qw=Ga(function(o,s){return o>=s}),pi=Nf((function(){return arguments})())?Nf:function(o){return Vt(o)&&Mt.call(o,"callee")&&!Sf.call(o,"callee")},Ve=q.isArray,Zw=rf?nr(rf):ib;function Yn(o){return o!=null&&rl(o.length)&&!lo(o)}function Jt(o){return Vt(o)&&Yn(o)}function Jw(o){return o===!0||o===!1||Vt(o)&&An(o)==Ne}var Bo=fy||gu,Kw=of?nr(of):sb;function e1(o){return Vt(o)&&o.nodeType===1&&!Vs(o)}function t1(o){if(o==null)return!0;if(Yn(o)&&(Ve(o)||typeof o=="string"||typeof o.splice=="function"||Bo(o)||os(o)||pi(o)))return!o.length;var s=_n(o);if(s==Me||s==gt)return!o.size;if($s(o))return!Oc(o).length;for(var f in o)if(Mt.call(o,f))return!1;return!0}function n1(o,s){return Hs(o,s)}function r1(o,s,f){f=typeof f=="function"?f:n;var v=f?f(o,s):n;return v===n?Hs(o,s,n,f):!!v}function su(o){if(!Vt(o))return!1;var s=An(o);return s==je||s==ve||typeof o.message=="string"&&typeof o.name=="string"&&!Vs(o)}function o1(o){return typeof o=="number"&&_f(o)}function lo(o){if(!Nt(o))return!1;var s=An(o);return s==Qe||s==Ue||s==ze||s==Et}function Vh(o){return typeof o=="number"&&o==Ke(o)}function rl(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=ie}function Nt(o){var s=typeof o;return o!=null&&(s=="object"||s=="function")}function Vt(o){return o!=null&&typeof o=="object"}var qh=sf?nr(sf):lb;function i1(o,s){return o===s||Ac(o,s,Qc(s))}function s1(o,s,f){return f=typeof f=="function"?f:n,Ac(o,s,Qc(s),f)}function a1(o){return Uh(o)&&o!=+o}function l1(o){if(Vb(o))throw new Ye(a);return Ff(o)}function c1(o){return o===null}function u1(o){return o==null}function Uh(o){return typeof o=="number"||Vt(o)&&An(o)==Fe}function Vs(o){if(!Vt(o)||An(o)!=Ee)return!1;var s=Ea(o);if(s===null)return!0;var f=Mt.call(s,"constructor")&&s.constructor;return typeof f=="function"&&f instanceof f&&Ra.call(f)==sy}var au=af?nr(af):cb;function d1(o){return Vh(o)&&o>=-ie&&o<=ie}var Gh=lf?nr(lf):ub;function ol(o){return typeof o=="string"||!Ve(o)&&Vt(o)&&An(o)==Ot}function or(o){return typeof o=="symbol"||Vt(o)&&An(o)==xt}var os=cf?nr(cf):db;function f1(o){return o===n}function h1(o){return Vt(o)&&_n(o)==Bt}function p1(o){return Vt(o)&&An(o)==an}var m1=Ga(zc),g1=Ga(function(o,s){return o<=s});function Xh(o){if(!o)return[];if(Yn(o))return ol(o)?jr(o):$n(o);if(Ds&&o[Ds])return G0(o[Ds]());var s=_n(o),f=s==Me?Cc:s==gt?Sa:is;return f(o)}function co(o){if(!o)return o===0?o:0;if(o=wr(o),o===re||o===-re){var s=o<0?-1:1;return s*G}return o===o?o:0}function Ke(o){var s=co(o),f=s%1;return s===s?f?s-f:s:0}function Qh(o){return o?ui(Ke(o),0,ce):0}function wr(o){if(typeof o=="number")return o;if(or(o))return U;if(Nt(o)){var s=typeof o.valueOf=="function"?o.valueOf():o;o=Nt(s)?s+"":s}if(typeof o!="string")return o===0?o:+o;o=mf(o);var f=Yt.test(o);return f||So.test(o)?I0(o.slice(2),f?2:8):Wn.test(o)?U:+o}function Zh(o){return Lr(o,Vn(o))}function x1(o){return o?ui(Ke(o),-ie,ie):o===0?o:0}function kt(o){return o==null?"":rr(o)}var y1=ts(function(o,s){if($s(s)||Yn(s)){Lr(s,mn(s),o);return}for(var f in s)Mt.call(s,f)&&Ns(o,f,s[f])}),Jh=ts(function(o,s){Lr(s,Vn(s),o)}),il=ts(function(o,s,f,v){Lr(s,Vn(s),o,v)}),b1=ts(function(o,s,f,v){Lr(s,mn(s),o,v)}),v1=so(Tc);function w1(o,s){var f=es(o);return s==null?f:Ef(f,s)}var C1=tt(function(o,s){o=It(o);var f=-1,v=s.length,j=v>2?s[2]:n;for(j&&On(s[0],s[1],j)&&(v=1);++f<v;)for(var O=s[f],N=Vn(O),F=-1,W=N.length;++F<W;){var Q=N[F],Z=o[Q];(Z===n||Ir(Z,Zi[Q])&&!Mt.call(o,Q))&&(o[Q]=O[Q])}return o}),S1=tt(function(o){return o.push(n,mh),tr(Kh,n,o)});function k1(o,s){return df(o,Ie(s,3),Fr)}function _1(o,s){return df(o,Ie(s,3),Ec)}function R1(o,s){return o==null?o:jc(o,Ie(s,3),Vn)}function M1(o,s){return o==null?o:zf(o,Ie(s,3),Vn)}function T1(o,s){return o&&Fr(o,Ie(s,3))}function j1(o,s){return o&&Ec(o,Ie(s,3))}function E1(o){return o==null?[]:Ha(o,mn(o))}function I1(o){return o==null?[]:Ha(o,Vn(o))}function lu(o,s,f){var v=o==null?n:di(o,s);return v===n?f:v}function D1(o,s){return o!=null&&yh(o,s,tb)}function cu(o,s){return o!=null&&yh(o,s,nb)}var A1=uh(function(o,s,f){s!=null&&typeof s.toString!="function"&&(s=Ma.call(s)),o[s]=f},du(qn)),O1=uh(function(o,s,f){s!=null&&typeof s.toString!="function"&&(s=Ma.call(s)),Mt.call(o,s)?o[s].push(f):o[s]=[f]},Ie),z1=tt(Ls);function mn(o){return Yn(o)?Tf(o):Oc(o)}function Vn(o){return Yn(o)?Tf(o,!0):fb(o)}function P1(o,s){var f={};return s=Ie(s,3),Fr(o,function(v,j,O){oo(f,s(v,j,O),v)}),f}function N1(o,s){var f={};return s=Ie(s,3),Fr(o,function(v,j,O){oo(f,j,s(v,j,O))}),f}var F1=ts(function(o,s,f){Ba(o,s,f)}),Kh=ts(function(o,s,f,v){Ba(o,s,f,v)}),L1=so(function(o,s){var f={};if(o==null)return f;var v=!1;s=zt(s,function(O){return O=Lo(O,o),v||(v=O.length>1),O}),Lr(o,Gc(o),f),v&&(f=yr(f,m|g|x,Ab));for(var j=s.length;j--;)Hc(f,s[j]);return f});function H1(o,s){return ep(o,nl(Ie(s)))}var B1=so(function(o,s){return o==null?{}:pb(o,s)});function ep(o,s){if(o==null)return{};var f=zt(Gc(o),function(v){return[v]});return s=Ie(s),Vf(o,f,function(v,j){return s(v,j[0])})}function W1(o,s,f){s=Lo(s,o);var v=-1,j=s.length;for(j||(j=1,o=n);++v<j;){var O=o==null?n:o[Hr(s[v])];O===n&&(v=j,O=f),o=lo(O)?O.call(o):O}return o}function $1(o,s,f){return o==null?o:Bs(o,s,f)}function Y1(o,s,f,v){return v=typeof v=="function"?v:n,o==null?o:Bs(o,s,f,v)}var tp=hh(mn),np=hh(Vn);function V1(o,s,f){var v=Ve(o),j=v||Bo(o)||os(o);if(s=Ie(s,4),f==null){var O=o&&o.constructor;j?f=v?new O:[]:Nt(o)?f=lo(O)?es(Ea(o)):{}:f={}}return(j?mr:Fr)(o,function(N,F,W){return s(f,N,F,W)}),f}function q1(o,s){return o==null?!0:Hc(o,s)}function U1(o,s,f){return o==null?o:Qf(o,s,$c(f))}function G1(o,s,f,v){return v=typeof v=="function"?v:n,o==null?o:Qf(o,s,$c(f),v)}function is(o){return o==null?[]:wc(o,mn(o))}function X1(o){return o==null?[]:wc(o,Vn(o))}function Q1(o,s,f){return f===n&&(f=s,s=n),f!==n&&(f=wr(f),f=f===f?f:0),s!==n&&(s=wr(s),s=s===s?s:0),ui(wr(o),s,f)}function Z1(o,s,f){return s=co(s),f===n?(f=s,s=0):f=co(f),o=wr(o),rb(o,s,f)}function J1(o,s,f){if(f&&typeof f!="boolean"&&On(o,s,f)&&(s=f=n),f===n&&(typeof s=="boolean"?(f=s,s=n):typeof o=="boolean"&&(f=o,o=n)),o===n&&s===n?(o=0,s=1):(o=co(o),s===n?(s=o,o=0):s=co(s)),o>s){var v=o;o=s,s=v}if(f||o%1||s%1){var j=Rf();return kn(o+j*(s-o+E0("1e-"+((j+"").length-1))),s)}return Nc(o,s)}var K1=ns(function(o,s,f){return s=s.toLowerCase(),o+(f?rp(s):s)});function rp(o){return uu(kt(o).toLowerCase())}function op(o){return o=kt(o),o&&o.replace(ko,$0).replace(Pt,"")}function eC(o,s,f){o=kt(o),s=rr(s);var v=o.length;f=f===n?v:ui(Ke(f),0,v);var j=f;return f-=s.length,f>=0&&o.slice(f,j)==s}function tC(o){return o=kt(o),o&&At.test(o)?o.replace(Wt,Y0):o}function nC(o){return o=kt(o),o&&Co.test(o)?o.replace(Zn,"\\$&"):o}var rC=ns(function(o,s,f){return o+(f?"-":"")+s.toLowerCase()}),oC=ns(function(o,s,f){return o+(f?" ":"")+s.toLowerCase()}),iC=ah("toLowerCase");function sC(o,s,f){o=kt(o),s=Ke(s);var v=s?Xi(o):0;if(!s||v>=s)return o;var j=(s-v)/2;return Ua(Oa(j),f)+o+Ua(Aa(j),f)}function aC(o,s,f){o=kt(o),s=Ke(s);var v=s?Xi(o):0;return s&&v<s?o+Ua(s-v,f):o}function lC(o,s,f){o=kt(o),s=Ke(s);var v=s?Xi(o):0;return s&&v<s?Ua(s-v,f)+o:o}function cC(o,s,f){return f||s==null?s=0:s&&(s=+s),gy(kt(o).replace(fr,""),s||0)}function uC(o,s,f){return(f?On(o,s,f):s===n)?s=1:s=Ke(s),Fc(kt(o),s)}function dC(){var o=arguments,s=kt(o[0]);return o.length<3?s:s.replace(o[1],o[2])}var fC=ns(function(o,s,f){return o+(f?"_":"")+s.toLowerCase()});function hC(o,s,f){return f&&typeof f!="number"&&On(o,s,f)&&(s=f=n),f=f===n?ce:f>>>0,f?(o=kt(o),o&&(typeof s=="string"||s!=null&&!au(s))&&(s=rr(s),!s&&Gi(o))?Ho(jr(o),0,f):o.split(s,f)):[]}var pC=ns(function(o,s,f){return o+(f?" ":"")+uu(s)});function mC(o,s,f){return o=kt(o),f=f==null?0:ui(Ke(f),0,o.length),s=rr(s),o.slice(f,f+s.length)==s}function gC(o,s,f){var v=A.templateSettings;f&&On(o,s,f)&&(s=n),o=kt(o),s=il({},s,v,ph);var j=il({},s.imports,v.imports,ph),O=mn(j),N=wc(j,O),F,W,Q=0,Z=s.interpolate||Qr,ee="__p += '",de=Sc((s.escape||Qr).source+"|"+Z.source+"|"+(Z===Qt?rn:Qr).source+"|"+(s.evaluate||Qr).source+"|$","g"),we="//# sourceURL="+(Mt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qi+"]")+`
`;o.replace(de,function(Oe,ot,lt,ir,zn,sr){return lt||(lt=ir),ee+=o.slice(Q,sr).replace(_o,V0),ot&&(F=!0,ee+=`' +
__e(`+ot+`) +
'`),zn&&(W=!0,ee+=`';
`+zn+`;
__p += '`),lt&&(ee+=`' +
((__t = (`+lt+`)) == null ? '' : __t) +
'`),Q=sr+Oe.length,Oe}),ee+=`';
`;var Ae=Mt.call(s,"variable")&&s.variable;if(!Ae)ee=`with (obj) {
`+ee+`
}
`;else if(Ct.test(Ae))throw new Ye(c);ee=(W?ee.replace(me,""):ee).replace(ut,"$1").replace(Re,"$1;"),ee="function("+(Ae||"obj")+`) {
`+(Ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(F?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var et=sp(function(){return bt(O,we+"return "+ee).apply(n,N)});if(et.source=ee,su(et))throw et;return et}function xC(o){return kt(o).toLowerCase()}function yC(o){return kt(o).toUpperCase()}function bC(o,s,f){if(o=kt(o),o&&(f||s===n))return mf(o);if(!o||!(s=rr(s)))return o;var v=jr(o),j=jr(s),O=gf(v,j),N=xf(v,j)+1;return Ho(v,O,N).join("")}function vC(o,s,f){if(o=kt(o),o&&(f||s===n))return o.slice(0,bf(o)+1);if(!o||!(s=rr(s)))return o;var v=jr(o),j=xf(v,jr(s))+1;return Ho(v,0,j).join("")}function wC(o,s,f){if(o=kt(o),o&&(f||s===n))return o.replace(fr,"");if(!o||!(s=rr(s)))return o;var v=jr(o),j=gf(v,jr(s));return Ho(v,j).join("")}function CC(o,s){var f=P,v=L;if(Nt(s)){var j="separator"in s?s.separator:j;f="length"in s?Ke(s.length):f,v="omission"in s?rr(s.omission):v}o=kt(o);var O=o.length;if(Gi(o)){var N=jr(o);O=N.length}if(f>=O)return o;var F=f-Xi(v);if(F<1)return v;var W=N?Ho(N,0,F).join(""):o.slice(0,F);if(j===n)return W+v;if(N&&(F+=W.length-F),au(j)){if(o.slice(F).search(j)){var Q,Z=W;for(j.global||(j=Sc(j.source,kt(Zt.exec(j))+"g")),j.lastIndex=0;Q=j.exec(Z);)var ee=Q.index;W=W.slice(0,ee===n?F:ee)}}else if(o.indexOf(rr(j),F)!=F){var de=W.lastIndexOf(j);de>-1&&(W=W.slice(0,de))}return W+v}function SC(o){return o=kt(o),o&&Be.test(o)?o.replace(ke,J0):o}var kC=ns(function(o,s,f){return o+(f?" ":"")+s.toUpperCase()}),uu=ah("toUpperCase");function ip(o,s,f){return o=kt(o),s=f?n:s,s===n?U0(o)?ty(o):F0(o):o.match(s)||[]}var sp=tt(function(o,s){try{return tr(o,n,s)}catch(f){return su(f)?f:new Ye(f)}}),_C=so(function(o,s){return mr(s,function(f){f=Hr(f),oo(o,f,ou(o[f],o))}),o});function RC(o){var s=o==null?0:o.length,f=Ie();return o=s?zt(o,function(v){if(typeof v[1]!="function")throw new gr(l);return[f(v[0]),v[1]]}):[],tt(function(v){for(var j=-1;++j<s;){var O=o[j];if(tr(O[0],this,v))return tr(O[1],this,v)}})}function MC(o){return Jy(yr(o,m))}function du(o){return function(){return o}}function TC(o,s){return o==null||o!==o?s:o}var jC=ch(),EC=ch(!0);function qn(o){return o}function fu(o){return Lf(typeof o=="function"?o:yr(o,m))}function IC(o){return Bf(yr(o,m))}function DC(o,s){return Wf(o,yr(s,m))}var AC=tt(function(o,s){return function(f){return Ls(f,o,s)}}),OC=tt(function(o,s){return function(f){return Ls(o,f,s)}});function hu(o,s,f){var v=mn(s),j=Ha(s,v);f==null&&!(Nt(s)&&(j.length||!v.length))&&(f=s,s=o,o=this,j=Ha(s,mn(s)));var O=!(Nt(f)&&"chain"in f)||!!f.chain,N=lo(o);return mr(j,function(F){var W=s[F];o[F]=W,N&&(o.prototype[F]=function(){var Q=this.__chain__;if(O||Q){var Z=o(this.__wrapped__),ee=Z.__actions__=$n(this.__actions__);return ee.push({func:W,args:arguments,thisArg:o}),Z.__chain__=Q,Z}return W.apply(o,Oo([this.value()],arguments))})}),o}function zC(){return xn._===this&&(xn._=ay),this}function pu(){}function PC(o){return o=Ke(o),tt(function(s){return $f(s,o)})}var NC=Vc(zt),FC=Vc(uf),LC=Vc(gc);function ap(o){return Jc(o)?xc(Hr(o)):mb(o)}function HC(o){return function(s){return o==null?n:di(o,s)}}var BC=dh(),WC=dh(!0);function mu(){return[]}function gu(){return!1}function $C(){return{}}function YC(){return""}function VC(){return!0}function qC(o,s){if(o=Ke(o),o<1||o>ie)return[];var f=ce,v=kn(o,ce);s=Ie(s),o-=ce;for(var j=vc(v,s);++f<o;)s(f);return j}function UC(o){return Ve(o)?zt(o,Hr):or(o)?[o]:$n(Mh(kt(o)))}function GC(o){var s=++iy;return kt(o)+s}var XC=qa(function(o,s){return o+s},0),QC=qc("ceil"),ZC=qa(function(o,s){return o/s},1),JC=qc("floor");function KC(o){return o&&o.length?La(o,qn,Ic):n}function eS(o,s){return o&&o.length?La(o,Ie(s,2),Ic):n}function tS(o){return hf(o,qn)}function nS(o,s){return hf(o,Ie(s,2))}function rS(o){return o&&o.length?La(o,qn,zc):n}function oS(o,s){return o&&o.length?La(o,Ie(s,2),zc):n}var iS=qa(function(o,s){return o*s},1),sS=qc("round"),aS=qa(function(o,s){return o-s},0);function lS(o){return o&&o.length?bc(o,qn):0}function cS(o,s){return o&&o.length?bc(o,Ie(s,2)):0}return A.after=Iw,A.ary=Fh,A.assign=y1,A.assignIn=Jh,A.assignInWith=il,A.assignWith=b1,A.at=v1,A.before=Lh,A.bind=ou,A.bindAll=_C,A.bindKey=Hh,A.castArray=$w,A.chain=zh,A.chunk=Jb,A.compact=Kb,A.concat=ev,A.cond=RC,A.conforms=MC,A.constant=du,A.countBy=lw,A.create=w1,A.curry=Bh,A.curryRight=Wh,A.debounce=$h,A.defaults=C1,A.defaultsDeep=S1,A.defer=Dw,A.delay=Aw,A.difference=tv,A.differenceBy=nv,A.differenceWith=rv,A.drop=ov,A.dropRight=iv,A.dropRightWhile=sv,A.dropWhile=av,A.fill=lv,A.filter=uw,A.flatMap=hw,A.flatMapDeep=pw,A.flatMapDepth=mw,A.flatten=Ih,A.flattenDeep=cv,A.flattenDepth=uv,A.flip=Ow,A.flow=jC,A.flowRight=EC,A.fromPairs=dv,A.functions=E1,A.functionsIn=I1,A.groupBy=gw,A.initial=hv,A.intersection=pv,A.intersectionBy=mv,A.intersectionWith=gv,A.invert=A1,A.invertBy=O1,A.invokeMap=yw,A.iteratee=fu,A.keyBy=bw,A.keys=mn,A.keysIn=Vn,A.map=Ka,A.mapKeys=P1,A.mapValues=N1,A.matches=IC,A.matchesProperty=DC,A.memoize=tl,A.merge=F1,A.mergeWith=Kh,A.method=AC,A.methodOf=OC,A.mixin=hu,A.negate=nl,A.nthArg=PC,A.omit=L1,A.omitBy=H1,A.once=zw,A.orderBy=vw,A.over=NC,A.overArgs=Pw,A.overEvery=FC,A.overSome=LC,A.partial=iu,A.partialRight=Yh,A.partition=ww,A.pick=B1,A.pickBy=ep,A.property=ap,A.propertyOf=HC,A.pull=vv,A.pullAll=Ah,A.pullAllBy=wv,A.pullAllWith=Cv,A.pullAt=Sv,A.range=BC,A.rangeRight=WC,A.rearg=Nw,A.reject=kw,A.remove=kv,A.rest=Fw,A.reverse=nu,A.sampleSize=Rw,A.set=$1,A.setWith=Y1,A.shuffle=Mw,A.slice=_v,A.sortBy=Ew,A.sortedUniq=Dv,A.sortedUniqBy=Av,A.split=hC,A.spread=Lw,A.tail=Ov,A.take=zv,A.takeRight=Pv,A.takeRightWhile=Nv,A.takeWhile=Fv,A.tap=Kv,A.throttle=Hw,A.thru=Ja,A.toArray=Xh,A.toPairs=tp,A.toPairsIn=np,A.toPath=UC,A.toPlainObject=Zh,A.transform=V1,A.unary=Bw,A.union=Lv,A.unionBy=Hv,A.unionWith=Bv,A.uniq=Wv,A.uniqBy=$v,A.uniqWith=Yv,A.unset=q1,A.unzip=ru,A.unzipWith=Oh,A.update=U1,A.updateWith=G1,A.values=is,A.valuesIn=X1,A.without=Vv,A.words=ip,A.wrap=Ww,A.xor=qv,A.xorBy=Uv,A.xorWith=Gv,A.zip=Xv,A.zipObject=Qv,A.zipObjectDeep=Zv,A.zipWith=Jv,A.entries=tp,A.entriesIn=np,A.extend=Jh,A.extendWith=il,hu(A,A),A.add=XC,A.attempt=sp,A.camelCase=K1,A.capitalize=rp,A.ceil=QC,A.clamp=Q1,A.clone=Yw,A.cloneDeep=qw,A.cloneDeepWith=Uw,A.cloneWith=Vw,A.conformsTo=Gw,A.deburr=op,A.defaultTo=TC,A.divide=ZC,A.endsWith=eC,A.eq=Ir,A.escape=tC,A.escapeRegExp=nC,A.every=cw,A.find=dw,A.findIndex=jh,A.findKey=k1,A.findLast=fw,A.findLastIndex=Eh,A.findLastKey=_1,A.floor=JC,A.forEach=Ph,A.forEachRight=Nh,A.forIn=R1,A.forInRight=M1,A.forOwn=T1,A.forOwnRight=j1,A.get=lu,A.gt=Xw,A.gte=Qw,A.has=D1,A.hasIn=cu,A.head=Dh,A.identity=qn,A.includes=xw,A.indexOf=fv,A.inRange=Z1,A.invoke=z1,A.isArguments=pi,A.isArray=Ve,A.isArrayBuffer=Zw,A.isArrayLike=Yn,A.isArrayLikeObject=Jt,A.isBoolean=Jw,A.isBuffer=Bo,A.isDate=Kw,A.isElement=e1,A.isEmpty=t1,A.isEqual=n1,A.isEqualWith=r1,A.isError=su,A.isFinite=o1,A.isFunction=lo,A.isInteger=Vh,A.isLength=rl,A.isMap=qh,A.isMatch=i1,A.isMatchWith=s1,A.isNaN=a1,A.isNative=l1,A.isNil=u1,A.isNull=c1,A.isNumber=Uh,A.isObject=Nt,A.isObjectLike=Vt,A.isPlainObject=Vs,A.isRegExp=au,A.isSafeInteger=d1,A.isSet=Gh,A.isString=ol,A.isSymbol=or,A.isTypedArray=os,A.isUndefined=f1,A.isWeakMap=h1,A.isWeakSet=p1,A.join=xv,A.kebabCase=rC,A.last=vr,A.lastIndexOf=yv,A.lowerCase=oC,A.lowerFirst=iC,A.lt=m1,A.lte=g1,A.max=KC,A.maxBy=eS,A.mean=tS,A.meanBy=nS,A.min=rS,A.minBy=oS,A.stubArray=mu,A.stubFalse=gu,A.stubObject=$C,A.stubString=YC,A.stubTrue=VC,A.multiply=iS,A.nth=bv,A.noConflict=zC,A.noop=pu,A.now=el,A.pad=sC,A.padEnd=aC,A.padStart=lC,A.parseInt=cC,A.random=J1,A.reduce=Cw,A.reduceRight=Sw,A.repeat=uC,A.replace=dC,A.result=W1,A.round=sS,A.runInContext=B,A.sample=_w,A.size=Tw,A.snakeCase=fC,A.some=jw,A.sortedIndex=Rv,A.sortedIndexBy=Mv,A.sortedIndexOf=Tv,A.sortedLastIndex=jv,A.sortedLastIndexBy=Ev,A.sortedLastIndexOf=Iv,A.startCase=pC,A.startsWith=mC,A.subtract=aS,A.sum=lS,A.sumBy=cS,A.template=gC,A.times=qC,A.toFinite=co,A.toInteger=Ke,A.toLength=Qh,A.toLower=xC,A.toNumber=wr,A.toSafeInteger=x1,A.toString=kt,A.toUpper=yC,A.trim=bC,A.trimEnd=vC,A.trimStart=wC,A.truncate=CC,A.unescape=SC,A.uniqueId=GC,A.upperCase=kC,A.upperFirst=uu,A.each=Ph,A.eachRight=Nh,A.first=Dh,hu(A,(function(){var o={};return Fr(A,function(s,f){Mt.call(A.prototype,f)||(o[f]=s)}),o})(),{chain:!1}),A.VERSION=r,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){A[o].placeholder=A}),mr(["drop","take"],function(o,s){at.prototype[o]=function(f){f=f===n?1:fn(Ke(f),0);var v=this.__filtered__&&!s?new at(this):this.clone();return v.__filtered__?v.__takeCount__=kn(f,v.__takeCount__):v.__views__.push({size:kn(f,ce),type:o+(v.__dir__<0?"Right":"")}),v},at.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),mr(["filter","map","takeWhile"],function(o,s){var f=s+1,v=f==Y||f==J;at.prototype[o]=function(j){var O=this.clone();return O.__iteratees__.push({iteratee:Ie(j,3),type:f}),O.__filtered__=O.__filtered__||v,O}}),mr(["head","last"],function(o,s){var f="take"+(s?"Right":"");at.prototype[o]=function(){return this[f](1).value()[0]}}),mr(["initial","tail"],function(o,s){var f="drop"+(s?"":"Right");at.prototype[o]=function(){return this.__filtered__?new at(this):this[f](1)}}),at.prototype.compact=function(){return this.filter(qn)},at.prototype.find=function(o){return this.filter(o).head()},at.prototype.findLast=function(o){return this.reverse().find(o)},at.prototype.invokeMap=tt(function(o,s){return typeof o=="function"?new at(this):this.map(function(f){return Ls(f,o,s)})}),at.prototype.reject=function(o){return this.filter(nl(Ie(o)))},at.prototype.slice=function(o,s){o=Ke(o);var f=this;return f.__filtered__&&(o>0||s<0)?new at(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),s!==n&&(s=Ke(s),f=s<0?f.dropRight(-s):f.take(s-o)),f)},at.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},at.prototype.toArray=function(){return this.take(ce)},Fr(at.prototype,function(o,s){var f=/^(?:filter|find|map|reject)|While$/.test(s),v=/^(?:head|last)$/.test(s),j=A[v?"take"+(s=="last"?"Right":""):s],O=v||/^find/.test(s);j&&(A.prototype[s]=function(){var N=this.__wrapped__,F=v?[1]:arguments,W=N instanceof at,Q=F[0],Z=W||Ve(N),ee=function(ot){var lt=j.apply(A,Oo([ot],F));return v&&de?lt[0]:lt};Z&&f&&typeof Q=="function"&&Q.length!=1&&(W=Z=!1);var de=this.__chain__,we=!!this.__actions__.length,Ae=O&&!de,et=W&&!we;if(!O&&Z){N=et?N:new at(this);var Oe=o.apply(N,F);return Oe.__actions__.push({func:Ja,args:[ee],thisArg:n}),new xr(Oe,de)}return Ae&&et?o.apply(this,F):(Oe=this.thru(ee),Ae?v?Oe.value()[0]:Oe.value():Oe)})}),mr(["pop","push","shift","sort","splice","unshift"],function(o){var s=ka[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);A.prototype[o]=function(){var j=arguments;if(v&&!this.__chain__){var O=this.value();return s.apply(Ve(O)?O:[],j)}return this[f](function(N){return s.apply(Ve(N)?N:[],j)})}}),Fr(at.prototype,function(o,s){var f=A[s];if(f){var v=f.name+"";Mt.call(Ki,v)||(Ki[v]=[]),Ki[v].push({name:s,func:f})}}),Ki[Va(n,S).name]=[{name:"wrapper",func:n}],at.prototype.clone=Sy,at.prototype.reverse=ky,at.prototype.value=_y,A.prototype.at=ew,A.prototype.chain=tw,A.prototype.commit=nw,A.prototype.next=rw,A.prototype.plant=iw,A.prototype.reverse=sw,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=aw,A.prototype.first=A.prototype.head,Ds&&(A.prototype[Ds]=ow),A}),Qi=ny();si?((si.exports=Qi)._=Qi,fc._=Qi):xn._=Qi}).call(BS)})(Ks,Ks.exports)),Ks.exports}var Lt=WS();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YS=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),pp=t=>{const e=YS(t);return e.charAt(0).toUpperCase()+e.slice(1)},yg=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),VS=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...c},h)=>y.createElement("svg",{ref:h,...qS,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yg("lucide",i),...!a&&!VS(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,p])=>y.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(t,e)=>{const n=y.forwardRef(({className:r,...i},a)=>y.createElement(US,{ref:a,iconNode:e,className:yg(`lucide-${$S(pp(t))}`,`lucide-${t}`,r),...i}));return n.displayName=pp(t),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],bg=Te("arrow-up-down",GS);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],QS=Te("calculator",XS);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Qo=Te("calendar",ZS);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],KS=Te("chart-column",JS);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cs=Te("check",ek);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ed=Te("chevron-down",tk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rk=Te("chevron-left",nk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Id=Te("chevron-right",ok);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mp=Te("circle-alert",ik);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ak=Te("circle",sk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],td=Te("clock",lk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],uk=Te("copy",ck);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],fk=Te("ellipsis-vertical",dk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],pk=Te("ellipsis",hk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vg=Te("eye-off",mk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wg=Te("eye",gk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Zo=Te("file-text",xk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ca=Te("funnel",yk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vk=Te("grid-3x3",bk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Cg=Te("grip-vertical",wk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]],Sk=Te("group",Ck);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tc=Te("hash",kk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],nc=Te("image",_k);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Mk=Te("layers",Rk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],jk=Te("layout-grid",Tk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Jo=Te("link",Ek);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Di=Te("list",Ik);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ak=Te("loader-circle",Dk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sg=Te("lock",Ok);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xa=Te("mail",zk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nk=Te("map-pin",Pk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Lk=Te("paperclip",Fk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kg=Te("pen-line",Hk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ya=Te("phone",Bk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ua=Te("plus",Wk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Yk=Te("redo-2",$k);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qk=Te("refresh-cw",Vk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ri=Te("search",Uk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xk=Te("settings",Gk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ai=Te("sparkles",Qk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],da=Te("square-check-big",Zk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],Kk=Te("square-function",Jk);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xo=Te("star",e2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],n2=Te("table",t2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Dd=Te("text-align-start",r2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_g=Te("trash-2",o2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],s2=Te("triangle-alert",i2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],l2=Te("type",a2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],u2=Te("undo-2",c2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],f2=Te("user-check",d2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],p2=Te("user-plus",h2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ss=Te("user",m2);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oi=Te("x",g2);var bu={},vu={},al={exports:{}},gp;function x2(){if(gp)return al.exports;gp=1;var t=String,e=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t,blackBright:t,redBright:t,greenBright:t,yellowBright:t,blueBright:t,magentaBright:t,cyanBright:t,whiteBright:t,bgBlackBright:t,bgRedBright:t,bgGreenBright:t,bgYellowBright:t,bgBlueBright:t,bgMagentaBright:t,bgCyanBright:t,bgWhiteBright:t}};return al.exports=e(),al.exports.createColors=e,al.exports}var xp;function y2(){return xp||(xp=1,(function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0});function n(d,p){for(var m in p)Object.defineProperty(d,m,{enumerable:!0,get:p[m]})}n(t,{dim:function(){return c},default:function(){return h}});const r=i(x2());function i(d){return d&&d.__esModule?d:{default:d}}let a=new Set;function l(d,p,m){typeof process<"u"&&e.JEST_WORKER_ID||m&&a.has(m)||(m&&a.add(m),console.warn(""),p.forEach(g=>console.warn(d,"-",g)))}function c(d){return r.default.dim(d)}const h={info(d,p){l(r.default.bold(r.default.cyan("info")),...Array.isArray(d)?[d]:[p,d])},warn(d,p){l(r.default.bold(r.default.yellow("warn")),...Array.isArray(d)?[d]:[p,d])},risk(d,p){l(r.default.bold(r.default.magenta("risk")),...Array.isArray(d)?[d]:[p,d])}}})(vu)),vu}var yp;function b2(){return yp||(yp=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});const e=n(y2());function n(a){return a&&a.__esModule?a:{default:a}}function r({version:a,from:l,to:c}){e.default.warn(`${l}-color-renamed`,[`As of Tailwind CSS ${a}, \`${l}\` has been renamed to \`${c}\`.`,"Update your configuration file to silence this warning."])}const i={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return r({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return r({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return r({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return r({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return r({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(bu)),bu}var wu,bp;function v2(){if(bp)return wu;bp=1;let t=b2();return wu=(t.__esModule?t:{default:t}).default,wu}var w2=v2();const qe=hg(w2),Rg=6048e5,C2=864e5,Ad=6e4,Od=36e5,S2=1e3,vp=Symbol.for("constructDateFrom");function _t(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vp in t?t[vp](e):t instanceof Date?new t.constructor(e):new Date(e)}function rt(t,e){return _t(e||t,t)}function rc(t,e,n){const r=rt(t,n?.in);return isNaN(e)?_t(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Mg(t,e,n){const r=rt(t,n?.in);if(isNaN(e))return _t(t,NaN);if(!e)return r;const i=r.getDate(),a=_t(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const l=a.getDate();return i>=l?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let k2={};function zi(){return k2}function yo(t,e){const n=zi(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=rt(t,e?.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function Mi(t,e){return yo(t,{...e,weekStartsOn:1})}function Tg(t,e){const n=rt(t,e?.in),r=n.getFullYear(),i=_t(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Mi(i),l=_t(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=Mi(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function jl(t){const e=rt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ks(t,...e){const n=_t.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function fa(t,e){const n=rt(t,e?.in);return n.setHours(0,0,0,0),n}function jg(t,e,n){const[r,i]=ks(n?.in,t,e),a=fa(r),l=fa(i),c=+a-jl(a),h=+l-jl(l);return Math.round((c-h)/C2)}function _2(t,e){const n=Tg(t,e),r=_t(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Mi(r)}function R2(t,e,n){return rc(t,e*7,n)}function M2(t,e,n){return Mg(t,e*12,n)}function T2(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=_t.bind(null,i));const a=rt(i,r);(!n||n<a||isNaN(+a))&&(n=a)}),_t(r,n||NaN)}function j2(t,e){let n,r=e?.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=_t.bind(null,i));const a=rt(i,r);(!n||n>a||isNaN(+a))&&(n=a)}),_t(r,n||NaN)}function E2(t,e,n){const[r,i]=ks(n?.in,t,e);return+fa(r)==+fa(i)}function Eg(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bi(t){return!(!Eg(t)&&typeof t!="number"||isNaN(+rt(t)))}function I2(t,e,n){const[r,i]=ks(n?.in,t,e),a=r.getFullYear()-i.getFullYear(),l=r.getMonth()-i.getMonth();return a*12+l}function D2(t,e){const n=rt(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Ig(t,e){const[n,r]=ks(t,e.start,e.end);return{start:n,end:r}}function A2(t,e){const{start:n,end:r}=Ig(e?.in,t);let i=+n>+r;const a=i?+n:+r,l=i?r:n;l.setHours(0,0,0,0),l.setDate(1);let c=1;const h=[];for(;+l<=a;)h.push(_t(n,l)),l.setMonth(l.getMonth()+c);return i?h.reverse():h}function O2(t,e){const n=rt(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function z2(t,e){const n=rt(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Dg(t,e){const n=rt(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function P2(t,e){const{start:n,end:r}=Ig(e?.in,t);let i=+n>+r;const a=i?+n:+r,l=i?r:n;l.setHours(0,0,0,0),l.setMonth(0,1);let c=1;const h=[];for(;+l<=a;)h.push(_t(n,l)),l.setFullYear(l.getFullYear()+c);return i?h.reverse():h}function Ag(t,e){const n=zi(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=rt(t,e?.in),a=i.getDay(),l=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}function N2(t,e){return Ag(t,{...e,weekStartsOn:1})}const F2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},L2=(t,e,n)=>{let r;const i=F2[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const H2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},B2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$2={date:Cu({formats:H2,defaultWidth:"full"}),time:Cu({formats:B2,defaultWidth:"full"}),dateTime:Cu({formats:W2,defaultWidth:"full"})},Y2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V2=(t,e,n,r)=>Y2[t];function qs(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;i=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const q2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Q2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Z2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J2=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},K2={ordinalNumber:J2,era:qs({values:q2,defaultWidth:"wide"}),quarter:qs({values:U2,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qs({values:G2,defaultWidth:"wide"}),day:qs({values:X2,defaultWidth:"wide"}),dayPeriod:qs({values:Q2,defaultWidth:"wide",formattingValues:Z2,defaultFormattingWidth:"wide"})};function Us(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(c)?t_(c,m=>m.test(l)):e_(c,m=>m.test(l));let d;d=t.valueCallback?t.valueCallback(h):h,d=n.valueCallback?n.valueCallback(d):d;const p=e.slice(l.length);return{value:d,rest:p}}}function e_(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function t_(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function n_(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}const r_=/^(\d+)(th|st|nd|rd)?/i,o_=/\d+/i,i_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s_={any:[/^b/i,/^(a|c)/i]},a_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},l_={any:[/1/i,/2/i,/3/i,/4/i]},c_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},u_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},f_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},h_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},p_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},m_={ordinalNumber:n_({matchPattern:r_,parsePattern:o_,valueCallback:t=>parseInt(t,10)}),era:Us({matchPatterns:i_,defaultMatchWidth:"wide",parsePatterns:s_,defaultParseWidth:"any"}),quarter:Us({matchPatterns:a_,defaultMatchWidth:"wide",parsePatterns:l_,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Us({matchPatterns:c_,defaultMatchWidth:"wide",parsePatterns:u_,defaultParseWidth:"any"}),day:Us({matchPatterns:d_,defaultMatchWidth:"wide",parsePatterns:f_,defaultParseWidth:"any"}),dayPeriod:Us({matchPatterns:h_,defaultMatchWidth:"any",parsePatterns:p_,defaultParseWidth:"any"})},oc={code:"en-US",formatDistance:L2,formatLong:$2,formatRelative:V2,localize:K2,match:m_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function g_(t,e){const n=rt(t,e?.in);return jg(n,Dg(n))+1}function zd(t,e){const n=rt(t,e?.in),r=+Mi(n)-+_2(n);return Math.round(r/Rg)+1}function Pd(t,e){const n=rt(t,e?.in),r=n.getFullYear(),i=zi(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=_t(e?.in||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const c=yo(l,e),h=_t(e?.in||t,0);h.setFullYear(r,0,a),h.setHours(0,0,0,0);const d=yo(h,e);return+n>=+c?r+1:+n>=+d?r:r-1}function x_(t,e){const n=zi(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Pd(t,e),a=_t(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),yo(a,e)}function Nd(t,e){const n=rt(t,e?.in),r=+yo(n,e)-+x_(n,e);return Math.round(r/Rg)+1}function Tt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Wo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Tt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Tt(n+1,2)},d(t,e){return Tt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Tt(t.getHours()%12||12,e.length)},H(t,e){return Tt(t.getHours(),e.length)},m(t,e){return Tt(t.getMinutes(),e.length)},s(t,e){return Tt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Tt(i,e.length)}},ss={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wp={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Wo.y(t,e)},Y:function(t,e,n,r){const i=Pd(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return Tt(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Tt(a,e.length)},R:function(t,e){const n=Tg(t);return Tt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Tt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Wo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Nd(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Tt(i,e.length)},I:function(t,e,n){const r=zd(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Tt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Wo.d(t,e)},D:function(t,e,n){const r=g_(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Tt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Tt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Tt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Tt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ss.noon:r===0?i=ss.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ss.evening:r>=12?i=ss.afternoon:r>=4?i=ss.morning:i=ss.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Wo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Wo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Wo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Wo.s(t,e)},S:function(t,e){return Wo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Sp(r);case"XXXX":case"XX":return gi(r);case"XXXXX":case"XXX":default:return gi(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Sp(r);case"xxxx":case"xx":return gi(r);case"xxxxx":case"xxx":default:return gi(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Cp(r,":");case"OOOO":default:return"GMT"+gi(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Cp(r,":");case"zzzz":default:return"GMT"+gi(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Tt(r,e.length)},T:function(t,e,n){return Tt(+t,e.length)}};function Cp(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Tt(a,2)}function Sp(t,e){return t%60===0?(t>0?"-":"+")+Tt(Math.abs(t)/60,2):gi(t,e)}function gi(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Tt(Math.trunc(r/60),2),a=Tt(r%60,2);return n+i+e+a}const kp=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Og=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},y_=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return kp(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",kp(r,e)).replace("{{time}}",Og(i,e))},nd={p:Og,P:y_},b_=/^D+$/,v_=/^Y+$/,w_=["D","DD","YY","YYYY"];function zg(t){return b_.test(t)}function Pg(t){return v_.test(t)}function rd(t,e,n){const r=C_(t,e,n);if(console.warn(r),w_.includes(t))throw new RangeError(r)}function C_(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const S_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,__=/^'([^]*?)'?$/,R_=/''/g,M_=/[a-zA-Z]/;function Vo(t,e,n){const r=zi(),i=n?.locale??r.locale??oc,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=rt(t,n?.in);if(!bi(c))throw new RangeError("Invalid time value");let h=e.match(k_).map(p=>{const m=p[0];if(m==="p"||m==="P"){const g=nd[m];return g(p,i.formatLong)}return p}).join("").match(S_).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const m=p[0];if(m==="'")return{isToken:!1,value:T_(p)};if(wp[m])return{isToken:!0,value:p};if(m.match(M_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});i.localize.preprocessor&&(h=i.localize.preprocessor(c,h));const d={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return h.map(p=>{if(!p.isToken)return p.value;const m=p.value;(!n?.useAdditionalWeekYearTokens&&Pg(m)||!n?.useAdditionalDayOfYearTokens&&zg(m))&&rd(m,e,String(t));const g=wp[m[0]];return g(c,m,i.localize,d)}).join("")}function T_(t){const e=t.match(__);return e?e[1].replace(R_,"'"):t}function j_(t,e){const n=rt(t,e?.in),r=n.getFullYear(),i=n.getMonth(),a=_t(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function E_(){return Object.assign({},zi())}function I_(t,e){const n=rt(t,e?.in).getDay();return n===0?7:n}function D_(t,e){return rt(t,e?.in).getMonth()}function A_(t,e){return rt(t,e?.in).getFullYear()}function O_(t,e){return+rt(t)>+rt(e)}function z_(t,e){return+rt(t)<+rt(e)}function P_(t,e){const n=N_(e)?new e(0):_t(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function N_(t){return typeof t=="function"&&t.prototype?.constructor===t}const F_=10;class Ng{subPriority=0;validate(e,n){return!0}}class L_ extends Ng{constructor(e,n,r,i,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class H_ extends Ng{priority=F_;subPriority=-1;constructor(e,n){super(),this.context=e||(r=>_t(n,r))}set(e,n){return n.timestampIsSet?e:_t(e,P_(e,this.context))}}class wt{run(e,n,r,i){const a=this.parse(e,n,r,i);return a?{setter:new L_(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class B_ extends wt{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const en={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Yr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function tn(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ht(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Vr(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:r*(i*Od+a*Ad+l*S2),rest:e.slice(n[0].length)}}function Fg(t){return Ht(en.anyDigitsSigned,t)}function Ut(t,e){switch(t){case 1:return Ht(en.singleDigit,e);case 2:return Ht(en.twoDigits,e);case 3:return Ht(en.threeDigits,e);case 4:return Ht(en.fourDigits,e);default:return Ht(new RegExp("^\\d{1,"+t+"}"),e)}}function El(t,e){switch(t){case 1:return Ht(en.singleDigitSigned,e);case 2:return Ht(en.twoDigitsSigned,e);case 3:return Ht(en.threeDigitsSigned,e);case 4:return Ht(en.fourDigitsSigned,e);default:return Ht(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Fd(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Lg(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const a=r+50,l=Math.trunc(a/100)*100,c=t>=a%100;i=t+l-(c?100:0)}return n?i:1-i}function Hg(t){return t%400===0||t%4===0&&t%100!==0}class W_ extends wt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return tn(Ut(4,e),i);case"yo":return tn(r.ordinalNumber(e,{unit:"year"}),i);default:return tn(Ut(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const i=e.getFullYear();if(r.isTwoDigitYear){const l=Lg(r.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class $_ extends wt{priority=130;parse(e,n,r){const i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return tn(Ut(4,e),i);case"Yo":return tn(r.ordinalNumber(e,{unit:"year"}),i);default:return tn(Ut(n.length,e),i)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,i){const a=Pd(e,i);if(r.isTwoDigitYear){const c=Lg(r.year,a);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),yo(e,i)}const l=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),yo(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Y_ extends wt{priority=130;parse(e,n){return El(n==="R"?4:n.length,e)}set(e,n,r){const i=_t(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Mi(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class V_ extends wt{priority=130;parse(e,n){return El(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class q_ extends wt{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Ut(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class U_ extends wt{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Ut(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class G_ extends wt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const i=a=>a-1;switch(n){case"M":return tn(Ht(en.month,e),i);case"MM":return tn(Ut(2,e),i);case"Mo":return tn(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class X_ extends wt{priority=110;parse(e,n,r){const i=a=>a-1;switch(n){case"L":return tn(Ht(en.month,e),i);case"LL":return tn(Ut(2,e),i);case"Lo":return tn(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Q_(t,e,n){const r=rt(t,n?.in),i=Nd(r,n)-e;return r.setDate(r.getDate()-i*7),rt(r,n?.in)}class Z_ extends wt{priority=100;parse(e,n,r){switch(n){case"w":return Ht(en.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Ut(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,i){return yo(Q_(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function J_(t,e,n){const r=rt(t,n?.in),i=zd(r,n)-e;return r.setDate(r.getDate()-i*7),r}class K_ extends wt{priority=100;parse(e,n,r){switch(n){case"I":return Ht(en.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Ut(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return Mi(J_(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const eR=[31,28,31,30,31,30,31,31,30,31,30,31],tR=[31,29,31,30,31,30,31,31,30,31,30,31];class nR extends wt{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Ht(en.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Ut(n.length,e)}}validate(e,n){const r=e.getFullYear(),i=Hg(r),a=e.getMonth();return i?n>=1&&n<=tR[a]:n>=1&&n<=eR[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class rR extends wt{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Ht(en.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Ut(n.length,e)}}validate(e,n){const r=e.getFullYear();return Hg(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Ld(t,e,n){const r=zi(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=rt(t,n?.in),l=a.getDay(),h=(e%7+7)%7,d=7-i,p=e<0||e>6?e-(l+d)%7:(h+d)%7-(l+d)%7;return rc(a,p,n)}class oR extends wt{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=Ld(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class iR extends wt{priority=90;parse(e,n,r,i){const a=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return tn(Ut(n.length,e),a);case"eo":return tn(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=Ld(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class sR extends wt{priority=90;parse(e,n,r,i){const a=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return tn(Ut(n.length,e),a);case"co":return tn(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,i){return e=Ld(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function aR(t,e,n){const r=rt(t,n?.in),i=I_(r,n),a=e-i;return rc(r,a,n)}class lR extends wt{priority=90;parse(e,n,r){const i=a=>a===0?7:a;switch(n){case"i":case"ii":return Ut(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return tn(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return tn(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return tn(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return tn(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=aR(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class cR extends wt{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Fd(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class uR extends wt{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Fd(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class dR extends wt{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Fd(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class fR extends wt{priority=70;parse(e,n,r){switch(n){case"h":return Ht(en.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class hR extends wt{priority=70;parse(e,n,r){switch(n){case"H":return Ht(en.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class pR extends wt{priority=70;parse(e,n,r){switch(n){case"K":return Ht(en.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class mR extends wt{priority=70;parse(e,n,r){switch(n){case"k":return Ht(en.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Ut(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class gR extends wt{priority=60;parse(e,n,r){switch(n){case"m":return Ht(en.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Ut(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class xR extends wt{priority=50;parse(e,n,r){switch(n){case"s":return Ht(en.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Ut(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class yR extends wt{priority=30;parse(e,n){const r=i=>Math.trunc(i*Math.pow(10,-n.length+3));return tn(Ut(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class bR extends wt{priority=10;parse(e,n){switch(n){case"X":return Vr(Yr.basicOptionalMinutes,e);case"XX":return Vr(Yr.basic,e);case"XXXX":return Vr(Yr.basicOptionalSeconds,e);case"XXXXX":return Vr(Yr.extendedOptionalSeconds,e);case"XXX":default:return Vr(Yr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:_t(e,e.getTime()-jl(e)-r)}incompatibleTokens=["t","T","x"]}class vR extends wt{priority=10;parse(e,n){switch(n){case"x":return Vr(Yr.basicOptionalMinutes,e);case"xx":return Vr(Yr.basic,e);case"xxxx":return Vr(Yr.basicOptionalSeconds,e);case"xxxxx":return Vr(Yr.extendedOptionalSeconds,e);case"xxx":default:return Vr(Yr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:_t(e,e.getTime()-jl(e)-r)}incompatibleTokens=["t","T","X"]}class wR extends wt{priority=40;parse(e){return Fg(e)}set(e,n,r){return[_t(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class CR extends wt{priority=20;parse(e){return Fg(e)}set(e,n,r){return[_t(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const SR={G:new B_,y:new W_,Y:new $_,R:new Y_,u:new V_,Q:new q_,q:new U_,M:new G_,L:new X_,w:new Z_,I:new K_,d:new nR,D:new rR,E:new oR,e:new iR,c:new sR,i:new lR,a:new cR,b:new uR,B:new dR,h:new fR,H:new hR,K:new pR,k:new mR,m:new gR,s:new xR,S:new yR,X:new bR,x:new vR,t:new wR,T:new CR},kR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_R=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RR=/^'([^]*?)'?$/,MR=/''/g,TR=/\S/,jR=/[a-zA-Z]/;function ER(t,e,n,r){const i=()=>_t(n,NaN),a=E_(),l=a.locale??oc,c=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,h=a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!e)return t?i():rt(n,r?.in);const d={firstWeekContainsDate:c,weekStartsOn:h,locale:l},p=[new H_(r?.in,n)],m=e.match(_R).map(w=>{const S=w[0];if(S in nd){const k=nd[S];return k(w,l.formatLong)}return w}).join("").match(kR),g=[];for(let w of m){Pg(w)&&rd(w,e,t),zg(w)&&rd(w,e,t);const S=w[0],k=SR[S];if(k){const{incompatibleTokens:_}=k;if(Array.isArray(_)){const T=g.find(M=>_.includes(M.token)||M.token===S);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${w}\` at the same time`)}else if(k.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);g.push({token:S,fullToken:w});const R=k.run(t,w,l.match,d);if(!R)return i();p.push(R.setter),t=R.rest}else{if(S.match(jR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");if(w==="''"?w="'":S==="'"&&(w=IR(w)),t.indexOf(w)===0)t=t.slice(w.length);else return i()}}if(t.length>0&&TR.test(t))return i();const x=p.map(w=>w.priority).sort((w,S)=>S-w).filter((w,S,k)=>k.indexOf(w)===S).map(w=>p.filter(S=>S.priority===w).sort((S,k)=>k.subPriority-S.subPriority)).map(w=>w[0]);let b=rt(n,r?.in);if(isNaN(+b))return i();const C={};for(const w of x){if(!w.validate(b,d))return i();const S=w.set(b,C,d);Array.isArray(S)?(b=S[0],Object.assign(C,S[1])):b=S}return b}function IR(t){return t.match(RR)[1].replace(MR,"'")}function DR(t,e,n){const[r,i]=ks(n?.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function AR(t,e,n){const[r,i]=ks(n?.in,t,e);return r.getFullYear()===i.getFullYear()}function _p(t,e){const n=()=>_t(e?.in,NaN),i=NR(t);let a;if(i.date){const d=FR(i.date,2);a=LR(d.restDateString,d.year)}if(!a||isNaN(+a))return n();const l=+a;let c=0,h;if(i.time&&(c=HR(i.time),isNaN(c)))return n();if(i.timezone){if(h=BR(i.timezone),isNaN(h))return n()}else{const d=new Date(l+c),p=rt(0,e?.in);return p.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),p.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),p}return rt(l+c+h,e?.in)}const ll={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,PR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function NR(t){const e={},n=t.split(ll.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],ll.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ll.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=ll.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function FR(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function LR(t,e){if(e===null)return new Date(NaN);const n=t.match(OR);if(!n)return new Date(NaN);const r=!!n[4],i=Gs(n[1]),a=Gs(n[2])-1,l=Gs(n[3]),c=Gs(n[4]),h=Gs(n[5])-1;if(r)return qR(e,c,h)?WR(e,c,h):new Date(NaN);{const d=new Date(0);return!YR(e,a,l)||!VR(e,i)?new Date(NaN):(d.setUTCFullYear(e,a,Math.max(i,l)),d)}}function Gs(t){return t?parseInt(t):1}function HR(t){const e=t.match(zR);if(!e)return NaN;const n=Su(e[1]),r=Su(e[2]),i=Su(e[3]);return UR(n,r,i)?n*Od+r*Ad+i*1e3:NaN}function Su(t){return t&&parseFloat(t.replace(",","."))||0}function BR(t){if(t==="Z")return 0;const e=t.match(PR);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return GR(r,i)?n*(r*Od+i*Ad):NaN}function WR(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const $R=[31,null,31,30,31,30,31,31,30,31,30,31];function Bg(t){return t%400===0||t%4===0&&t%100!==0}function YR(t,e,n){return e>=0&&e<=11&&n>=1&&n<=($R[e]||(Bg(t)?29:28))}function VR(t,e){return e>=1&&e<=(Bg(t)?366:365)}function qR(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function UR(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function GR(t,e){return e>=0&&e<=59}function XR(t,e,n){const r=rt(t,n?.in),i=r.getFullYear(),a=r.getDate(),l=_t(t,0);l.setFullYear(i,e,15),l.setHours(0,0,0,0);const c=j_(l);return r.setMonth(e,Math.min(a,c)),r}function QR(t,e,n){const r=rt(t,n?.in);return isNaN(+r)?_t(t,NaN):(r.setFullYear(e),r)}const as=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Wg=new Set,od=typeof process=="object"&&process?process:{},$g=(t,e,n,r)=>{typeof od.emitWarning=="function"?od.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Il=globalThis.AbortController,Rp=globalThis.AbortSignal;if(typeof Il>"u"){Rp=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Il=class{constructor(){e()}signal=new Rp;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let t=od.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{t&&(t=!1,$g("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const ZR=t=>!Wg.has(t),$o=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Yg=t=>$o(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ml:null:null;class Ml extends Array{constructor(e){super(e),this.fill(0)}}class fs{heap;length;static#e=!1;static create(e){const n=Yg(e);if(!n)return[];fs.#e=!0;const r=new fs(e,n);return fs.#e=!1,r}constructor(e,n){if(!fs.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Pi{#e;#t;#n;#o;#i;#d;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#a;#u;#l;#r;#m;#g;#f;#h;#y;#p;#v;#w;#b;#C;#k;#x;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#b,sizes:e.#v,keyMap:e.#u,keyList:e.#l,valList:e.#r,next:e.#m,prev:e.#g,get head(){return e.#f},get tail(){return e.#h},free:e.#y,isBackgroundFetch:n=>e.#c(n),backgroundFetch:(n,r,i,a)=>e.#z(n,r,i,a),moveToTail:n=>e.#D(n),indexes:n=>e.#_(n),rindexes:n=>e.#R(n),isStale:n=>e.#S(n)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#a}get size(){return this.#s}get fetchMethod(){return this.#i}get memoMethod(){return this.#d}get dispose(){return this.#n}get disposeAfter(){return this.#o}constructor(e){const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:a,updateAgeOnGet:l,updateAgeOnHas:c,allowStale:h,dispose:d,disposeAfter:p,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:C,fetchMethod:w,memoMethod:S,noDeleteOnFetchRejection:k,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:R,allowStaleOnFetchAbort:T,ignoreFetchAbort:M}=e;if(n!==0&&!$o(n))throw new TypeError("max option must be a nonnegative integer");const I=n?Yg(n):Array;if(!I)throw new Error("invalid max value: "+n);if(this.#e=n,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=C,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#d=S,w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#i=w,this.#k=!!w,this.#u=new Map,this.#l=new Array(n).fill(void 0),this.#r=new Array(n).fill(void 0),this.#m=new I(n),this.#g=new I(n),this.#f=0,this.#h=0,this.#y=fs.create(n),this.#s=0,this.#a=0,typeof d=="function"&&(this.#n=d),typeof p=="function"?(this.#o=p,this.#p=[]):(this.#o=void 0,this.#p=void 0),this.#C=!!this.#n,this.#x=!!this.#o,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!k,this.allowStaleOnFetchRejection=!!R,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!M,this.maxEntrySize!==0){if(this.#t!==0&&!$o(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!$o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!c,this.ttlResolution=$o(i)||i===0?i:1,this.ttlAutopurge=!!a,this.ttl=r||0,this.ttl){if(!$o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#j()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){const z="LRU_CACHE_UNBOUNDED";ZR(z)&&(Wg.add(z),$g("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",z,Pi))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#j(){const e=new Ml(this.#e),n=new Ml(this.#e);this.#b=e,this.#w=n,this.#P=(a,l,c=as.now())=>{if(n[a]=l!==0?c:0,e[a]=l,l!==0&&this.ttlAutopurge){const h=setTimeout(()=>{this.#S(a)&&this.#M(this.#l[a],"expire")},l+1);h.unref&&h.unref()}},this.#E=a=>{n[a]=e[a]!==0?as.now():0},this.#T=(a,l)=>{if(e[l]){const c=e[l],h=n[l];if(!c||!h)return;a.ttl=c,a.start=h,a.now=r||i();const d=a.now-h;a.remainingTTL=c-d}};let r=0;const i=()=>{const a=as.now();if(this.ttlResolution>0){r=a;const l=setTimeout(()=>r=0,this.ttlResolution);l.unref&&l.unref()}return a};this.getRemainingTTL=a=>{const l=this.#u.get(a);if(l===void 0)return 0;const c=e[l],h=n[l];if(!c||!h)return 1/0;const d=(r||i())-h;return c-d},this.#S=a=>{const l=n[a],c=e[a];return!!c&&!!l&&(r||i())-l>c}}#E=()=>{};#T=()=>{};#P=()=>{};#S=()=>!1;#B(){const e=new Ml(this.#e);this.#a=0,this.#v=e,this.#I=n=>{this.#a-=e[n],e[n]=0},this.#N=(n,r,i,a)=>{if(this.#c(r))return 0;if(!$o(i))if(a){if(typeof a!="function")throw new TypeError("sizeCalculation must be a function");if(i=a(r,n),!$o(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#A=(n,r,i)=>{if(e[n]=r,this.#t){const a=this.#t-e[n];for(;this.#a>a;)this.#O(!0)}this.#a+=e[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#a)}}#I=e=>{};#A=(e,n,r)=>{};#N=(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#_({allowStale:e=this.allowStale}={}){if(this.#s)for(let n=this.#h;!(!this.#F(n)||((e||!this.#S(n))&&(yield n),n===this.#f));)n=this.#g[n]}*#R({allowStale:e=this.allowStale}={}){if(this.#s)for(let n=this.#f;!(!this.#F(n)||((e||!this.#S(n))&&(yield n),n===this.#h));)n=this.#m[n]}#F(e){return e!==void 0&&this.#u.get(this.#l[e])===e}*entries(){for(const e of this.#_())this.#r[e]!==void 0&&this.#l[e]!==void 0&&!this.#c(this.#r[e])&&(yield[this.#l[e],this.#r[e]])}*rentries(){for(const e of this.#R())this.#r[e]!==void 0&&this.#l[e]!==void 0&&!this.#c(this.#r[e])&&(yield[this.#l[e],this.#r[e]])}*keys(){for(const e of this.#_()){const n=this.#l[e];n!==void 0&&!this.#c(this.#r[e])&&(yield n)}}*rkeys(){for(const e of this.#R()){const n=this.#l[e];n!==void 0&&!this.#c(this.#r[e])&&(yield n)}}*values(){for(const e of this.#_())this.#r[e]!==void 0&&!this.#c(this.#r[e])&&(yield this.#r[e])}*rvalues(){for(const e of this.#R())this.#r[e]!==void 0&&!this.#c(this.#r[e])&&(yield this.#r[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,n={}){for(const r of this.#_()){const i=this.#r[r],a=this.#c(i)?i.__staleWhileFetching:i;if(a!==void 0&&e(a,this.#l[r],this))return this.get(this.#l[r],n)}}forEach(e,n=this){for(const r of this.#_()){const i=this.#r[r],a=this.#c(i)?i.__staleWhileFetching:i;a!==void 0&&e.call(n,a,this.#l[r],this)}}rforEach(e,n=this){for(const r of this.#R()){const i=this.#r[r],a=this.#c(i)?i.__staleWhileFetching:i;a!==void 0&&e.call(n,a,this.#l[r],this)}}purgeStale(){let e=!1;for(const n of this.#R({allowStale:!0}))this.#S(n)&&(this.#M(this.#l[n],"expire"),e=!0);return e}info(e){const n=this.#u.get(e);if(n===void 0)return;const r=this.#r[n],i=this.#c(r)?r.__staleWhileFetching:r;if(i===void 0)return;const a={value:i};if(this.#b&&this.#w){const l=this.#b[n],c=this.#w[n];if(l&&c){const h=l-(as.now()-c);a.ttl=h,a.start=Date.now()}}return this.#v&&(a.size=this.#v[n]),a}dump(){const e=[];for(const n of this.#_({allowStale:!0})){const r=this.#l[n],i=this.#r[n],a=this.#c(i)?i.__staleWhileFetching:i;if(a===void 0||r===void 0)continue;const l={value:a};if(this.#b&&this.#w){l.ttl=this.#b[n];const c=as.now()-this.#w[n];l.start=Math.floor(Date.now()-c)}this.#v&&(l.size=this.#v[n]),e.unshift([r,l])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=as.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:a,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:h}=r;let{noUpdateTTL:d=this.noUpdateTTL}=r;const p=this.#N(e,n,r.size||0,c);if(this.maxEntrySize&&p>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#M(e,"set"),this;let m=this.#s===0?void 0:this.#u.get(e);if(m===void 0)m=this.#s===0?this.#h:this.#y.length!==0?this.#y.pop():this.#s===this.#e?this.#O(!1):this.#s,this.#l[m]=e,this.#r[m]=n,this.#u.set(e,m),this.#m[this.#h]=m,this.#g[m]=this.#h,this.#h=m,this.#s++,this.#A(m,p,h),h&&(h.set="add"),d=!1;else{this.#D(m);const g=this.#r[m];if(n!==g){if(this.#k&&this.#c(g)){g.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:x}=g;x!==void 0&&!l&&(this.#C&&this.#n?.(x,e,"set"),this.#x&&this.#p?.push([x,e,"set"]))}else l||(this.#C&&this.#n?.(g,e,"set"),this.#x&&this.#p?.push([g,e,"set"]));if(this.#I(m),this.#A(m,p,h),this.#r[m]=n,h){h.set="replace";const x=g&&this.#c(g)?g.__staleWhileFetching:g;x!==void 0&&(h.oldValue=x)}}else h&&(h.set="update")}if(i!==0&&!this.#b&&this.#j(),this.#b&&(d||this.#P(m,i,a),h&&this.#T(h,m)),!l&&this.#x&&this.#p){const g=this.#p;let x;for(;x=g?.shift();)this.#o?.(...x)}return this}pop(){try{for(;this.#s;){const e=this.#r[this.#f];if(this.#O(!0),this.#c(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#x&&this.#p){const e=this.#p;let n;for(;n=e?.shift();)this.#o?.(...n)}}}#O(e){const n=this.#f,r=this.#l[n],i=this.#r[n];return this.#k&&this.#c(i)?i.__abortController.abort(new Error("evicted")):(this.#C||this.#x)&&(this.#C&&this.#n?.(i,r,"evict"),this.#x&&this.#p?.push([i,r,"evict"])),this.#I(n),e&&(this.#l[n]=void 0,this.#r[n]=void 0,this.#y.push(n)),this.#s===1?(this.#f=this.#h=0,this.#y.length=0):this.#f=this.#m[n],this.#u.delete(r),this.#s--,n}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,a=this.#u.get(e);if(a!==void 0){const l=this.#r[a];if(this.#c(l)&&l.__staleWhileFetching===void 0)return!1;if(this.#S(a))i&&(i.has="stale",this.#T(i,a));else return r&&this.#E(a),i&&(i.has="hit",this.#T(i,a)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=this.#u.get(e);if(i===void 0||!r&&this.#S(i))return;const a=this.#r[i];return this.#c(a)?a.__staleWhileFetching:a}#z(e,n,r,i){const a=n===void 0?void 0:this.#r[n];if(this.#c(a))return a;const l=new Il,{signal:c}=r;c?.addEventListener("abort",()=>l.abort(c.reason),{signal:l.signal});const h={signal:l.signal,options:r,context:i},d=(C,w=!1)=>{const{aborted:S}=l.signal,k=r.ignoreFetchAbort&&C!==void 0;if(r.status&&(S&&!w?(r.status.fetchAborted=!0,r.status.fetchError=l.signal.reason,k&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),S&&!k&&!w)return m(l.signal.reason);const _=x;return this.#r[n]===x&&(C===void 0?_.__staleWhileFetching?this.#r[n]=_.__staleWhileFetching:this.#M(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,C,h.options))),C},p=C=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=C),m(C)),m=C=>{const{aborted:w}=l.signal,S=w&&r.allowStaleOnFetchAbort,k=S||r.allowStaleOnFetchRejection,_=k||r.noDeleteOnFetchRejection,R=x;if(this.#r[n]===x&&(!_||R.__staleWhileFetching===void 0?this.#M(e,"fetch"):S||(this.#r[n]=R.__staleWhileFetching)),k)return r.status&&R.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),R.__staleWhileFetching;if(R.__returned===R)throw C},g=(C,w)=>{const S=this.#i?.(e,a,h);S&&S instanceof Promise&&S.then(k=>C(k===void 0?void 0:k),w),l.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(C(void 0),r.allowStaleOnFetchAbort&&(C=k=>d(k,!0)))})};r.status&&(r.status.fetchDispatched=!0);const x=new Promise(g).then(d,p),b=Object.assign(x,{__abortController:l,__staleWhileFetching:a,__returned:void 0});return n===void 0?(this.set(e,b,{...h.options,status:void 0}),n=this.#u.get(e)):this.#r[n]=b,b}#c(e){if(!this.#k)return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Il}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:h=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:p=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:C,forceRefresh:w=!1,status:S,signal:k}=n;if(!this.#k)return S&&(S.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,status:S});const _={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,ttl:l,noDisposeOnSet:c,size:h,sizeCalculation:d,noUpdateTTL:p,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:S,signal:k};let R=this.#u.get(e);if(R===void 0){S&&(S.fetch="miss");const T=this.#z(e,R,_,C);return T.__returned=T}else{const T=this.#r[R];if(this.#c(T)){const P=r&&T.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",P&&(S.returnedStale=!0)),P?T.__staleWhileFetching:T.__returned=T}const M=this.#S(R);if(!w&&!M)return S&&(S.fetch="hit"),this.#D(R),i&&this.#E(R),S&&this.#T(S,R),T;const I=this.#z(e,R,_,C),D=I.__staleWhileFetching!==void 0&&r;return S&&(S.fetch=M?"stale":"refresh",D&&M&&(S.returnedStale=!0)),D?I.__staleWhileFetching:I.__returned=I}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=this.#d;if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:a,...l}=n,c=this.get(e,l);if(!a&&c!==void 0)return c;const h=r(e,c,{options:l,context:i});return this.set(e,h,l),h}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:l}=n,c=this.#u.get(e);if(c!==void 0){const h=this.#r[c],d=this.#c(h);return l&&this.#T(l,c),this.#S(c)?(l&&(l.get="stale"),d?(l&&r&&h.__staleWhileFetching!==void 0&&(l.returnedStale=!0),r?h.__staleWhileFetching:void 0):(a||this.#M(e,"expire"),l&&r&&(l.returnedStale=!0),r?h:void 0)):(l&&(l.get="hit"),d?h.__staleWhileFetching:(this.#D(c),i&&this.#E(c),h))}else l&&(l.get="miss")}#L(e,n){this.#g[n]=e,this.#m[e]=n}#D(e){e!==this.#h&&(e===this.#f?this.#f=this.#m[e]:this.#L(this.#g[e],this.#m[e]),this.#L(this.#h,e),this.#h=e)}delete(e){return this.#M(e,"delete")}#M(e,n){let r=!1;if(this.#s!==0){const i=this.#u.get(e);if(i!==void 0)if(r=!0,this.#s===1)this.#H(n);else{this.#I(i);const a=this.#r[i];if(this.#c(a)?a.__abortController.abort(new Error("deleted")):(this.#C||this.#x)&&(this.#C&&this.#n?.(a,e,n),this.#x&&this.#p?.push([a,e,n])),this.#u.delete(e),this.#l[i]=void 0,this.#r[i]=void 0,i===this.#h)this.#h=this.#g[i];else if(i===this.#f)this.#f=this.#m[i];else{const l=this.#g[i];this.#m[l]=this.#m[i];const c=this.#m[i];this.#g[c]=this.#g[i]}this.#s--,this.#y.push(i)}}if(this.#x&&this.#p?.length){const i=this.#p;let a;for(;a=i?.shift();)this.#o?.(...a)}return r}clear(){return this.#H("delete")}#H(e){for(const n of this.#R({allowStale:!0})){const r=this.#r[n];if(this.#c(r))r.__abortController.abort(new Error("deleted"));else{const i=this.#l[n];this.#C&&this.#n?.(r,i,e),this.#x&&this.#p?.push([r,i,e])}}if(this.#u.clear(),this.#r.fill(void 0),this.#l.fill(void 0),this.#b&&this.#w&&(this.#b.fill(0),this.#w.fill(0)),this.#v&&this.#v.fill(0),this.#f=0,this.#h=0,this.#y.length=0,this.#a=0,this.#s=0,this.#x&&this.#p){const n=this.#p;let r;for(;r=n?.shift();)this.#o?.(...r)}}}const JR={},Mp=t=>{let e;const n=new Set,r=(p,m)=>{const g=typeof p=="function"?p(e):p;if(!Object.is(g,e)){const x=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(b=>b(e,x))}},i=()=>e,h={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(JR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,i,h);return h},KR=t=>t?Mp(t):Mp;var ku={exports:{}},_u={},Ru={exports:{}},Mu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function eM(){if(Tp)return Mu;Tp=1;var t=pg();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function c(m,g){var x=g(),b=r({inst:{value:x,getSnapshot:g}}),C=b[0].inst,w=b[1];return a(function(){C.value=x,C.getSnapshot=g,h(C)&&w({inst:C})},[m,x,g]),i(function(){return h(C)&&w({inst:C}),m(function(){h(C)&&w({inst:C})})},[m]),l(x),x}function h(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!n(m,x)}catch{return!0}}function d(m,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Mu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Mu}var jp;function tM(){return jp||(jp=1,Ru.exports=eM()),Ru.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function nM(){if(Ep)return _u;Ep=1;var t=pg(),e=tM();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,h=t.useDebugValue;return _u.useSyncExternalStoreWithSelector=function(d,p,m,g,x){var b=a(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=c(function(){function S(M){if(!k){if(k=!0,_=M,M=g(M),x!==void 0&&C.hasValue){var I=C.value;if(x(I,M))return R=I}return R=M}if(I=R,r(_,M))return I;var z=g(M);return x!==void 0&&x(I,z)?I:(_=M,R=z)}var k=!1,_,R,T=m===void 0?null:m;return[function(){return S(p())},T===null?void 0:function(){return S(T())}]},[p,m,g,x]);var w=i(d,b[0],b[1]);return l(function(){C.hasValue=!0,C.value=w},[w]),h(w),w},_u}var Ip;function rM(){return Ip||(Ip=1,ku.exports=nM()),ku.exports}var oM=rM();const iM=hg(oM),Vg={},{useDebugValue:sM}=le,{useSyncExternalStoreWithSelector:aM}=iM;let Dp=!1;const lM=t=>t;function cM(t,e=lM,n){(Vg?"production":void 0)!=="production"&&n&&!Dp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Dp=!0);const r=aM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sM(r),r}const Ap=t=>{(Vg?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?KR(t):t,n=(r,i)=>cM(e,r,i);return Object.assign(n,e),n},ic=t=>t?Ap(t):Ap;function uM(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const dM={},ea={};function wi(t,e){try{const r=(dM[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(e).split("GMT")[1];return r in ea?ea[r]:Op(r,r.split(":"))}catch{if(t in ea)return ea[t];const n=t?.match(fM);return n?Op(t,n.slice(1)):NaN}}const fM=/([+-]\d\d):?(\d\d)?/;function Op(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return ea[t]=n*60+r>0?n*60+r+i:n*60-r-i}class qr extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(wi(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),qg(this),id(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new qr(...n,e):new qr(Date.now(),e)}withTimeZone(e){return new qr(+this,e)}getTimezoneOffset(){const e=-wi(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),id(this),+this}[Symbol.for("constructDateFrom")](e){return new qr(+new Date(e),this.timeZone)}}const zp=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!zp.test(t))return;const e=t.replace(zp,"$1UTC");qr.prototype[e]&&(t.startsWith("get")?qr.prototype[t]=function(){return this.internal[e]()}:(qr.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),hM(this),+this},qr.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),id(this),+this}))});function id(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-wi(t.timeZone,t)*60))}function hM(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),qg(t)}function qg(t){const e=wi(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),l=i-a,c=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();l&&c&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+l);const h=i-n;h&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+h);const d=new Date(+t);d.setUTCSeconds(0);const p=i>0?d.getSeconds():(d.getSeconds()-60)%60,m=Math.round(-(wi(t.timeZone,t)*60))%60;(m||p)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+m),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+m+p));const g=wi(t.timeZone,t),x=g>0?Math.floor(g):Math.ceil(g),C=-new Date(+t).getTimezoneOffset()-x,w=x!==n,S=C-h;if(w&&S){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+S);const k=wi(t.timeZone,t),_=k>0?Math.floor(k):Math.ceil(k),R=x-_;R&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+R),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+R))}}class Rn extends qr{static tz(e,...n){return n.length?new Rn(...n,e):new Rn(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${uM(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new Rn(+this,e)}[Symbol.for("constructDateFrom")](e){return new Rn(+new Date(e),this.timeZone)}}const Pp=5,pM=4;function mM(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),a=e.addDays(i,Pp*7-1);return e.getMonth(t)===e.getMonth(a)?Pp:pM}function Ug(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-6):e.addDays(n,-1*(r-1))}function gM(t,e){const n=Ug(t,e),r=mM(t,e);return e.addDays(n,r*7-1)}class ur{constructor(e,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Rn.tz(this.options.timeZone):new this.Date,this.newDate=(r,i,a)=>this.overrides?.newDate?this.overrides.newDate(r,i,a):this.options.timeZone?new Rn(r,i,a,this.options.timeZone):new Date(r,i,a),this.addDays=(r,i)=>this.overrides?.addDays?this.overrides.addDays(r,i):rc(r,i),this.addMonths=(r,i)=>this.overrides?.addMonths?this.overrides.addMonths(r,i):Mg(r,i),this.addWeeks=(r,i)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,i):R2(r,i),this.addYears=(r,i)=>this.overrides?.addYears?this.overrides.addYears(r,i):M2(r,i),this.differenceInCalendarDays=(r,i)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):jg(r,i),this.differenceInCalendarMonths=(r,i)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):I2(r,i),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):A2(r),this.eachYearOfInterval=r=>{const i=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):P2(r),a=new Set(i.map(c=>this.getYear(c)));if(a.size===i.length)return i;const l=[];return a.forEach(c=>{l.push(new Date(c,0,1))}),l},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):gM(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):N2(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):D2(r),this.endOfWeek=(r,i)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,i):Ag(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):z2(r),this.format=(r,i,a)=>{const l=this.overrides?.format?this.overrides.format(r,i,this.options):Vo(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(l):l},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):zd(r),this.getMonth=(r,i)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):D_(r,this.options),this.getYear=(r,i)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):A_(r,this.options),this.getWeek=(r,i)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):Nd(r,this.options),this.isAfter=(r,i)=>this.overrides?.isAfter?this.overrides.isAfter(r,i):O_(r,i),this.isBefore=(r,i)=>this.overrides?.isBefore?this.overrides.isBefore(r,i):z_(r,i),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):Eg(r),this.isSameDay=(r,i)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,i):E2(r,i),this.isSameMonth=(r,i)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,i):DR(r,i),this.isSameYear=(r,i)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,i):AR(r,i),this.max=r=>this.overrides?.max?this.overrides.max(r):T2(r),this.min=r=>this.overrides?.min?this.overrides.min(r):j2(r),this.setMonth=(r,i)=>this.overrides?.setMonth?this.overrides.setMonth(r,i):XR(r,i),this.setYear=(r,i)=>this.overrides?.setYear?this.overrides.setYear(r,i):QR(r,i),this.startOfBroadcastWeek=(r,i)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):Ug(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):fa(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):Mi(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):O2(r),this.startOfWeek=(r,i)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):yo(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):Dg(r),this.options={locale:oc,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){const e=this.options.locale?.code;return e&&ur.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,a=n?.code;if(a&&ur.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const l=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,l)}}ur.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Gr=new ur;class Gg{constructor(e,n,r=Gr){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class xM{constructor(e,n){this.date=e,this.weeks=n}}class yM{constructor(e,n){this.days=n,this.weekNumber=e}}function bM(t){return le.createElement("button",{...t})}function vM(t){return le.createElement("span",{...t})}function wM(t){const{size:e=24,orientation:n="left",className:r}=t;return le.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&le.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&le.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&le.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&le.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function CM(t){const{day:e,modifiers:n,...r}=t;return le.createElement("td",{...r})}function SM(t){const{day:e,modifiers:n,...r}=t,i=le.useRef(null);return le.useEffect(()=>{n.focused&&i.current?.focus()},[n.focused]),le.createElement("button",{ref:i,...r})}var _e;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(_e||(_e={}));var Ft;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(Ft||(Ft={}));var Ar;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Ar||(Ar={}));var ar;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(ar||(ar={}));function kM(t){const{options:e,className:n,components:r,classNames:i,...a}=t,l=[i[_e.Dropdown],n].join(" "),c=e?.find(({value:h})=>h===a.value);return le.createElement("span",{"data-disabled":a.disabled,className:i[_e.DropdownRoot]},le.createElement(r.Select,{className:l,...a},e?.map(({value:h,label:d,disabled:p})=>le.createElement(r.Option,{key:h,value:h,disabled:p},d))),le.createElement("span",{className:i[_e.CaptionLabel],"aria-hidden":!0},c?.label,le.createElement(r.Chevron,{orientation:"down",size:18,className:i[_e.Chevron]})))}function _M(t){return le.createElement("div",{...t})}function RM(t){return le.createElement("div",{...t})}function MM(t){const{calendarMonth:e,displayIndex:n,...r}=t;return le.createElement("div",{...r},t.children)}function TM(t){const{calendarMonth:e,displayIndex:n,...r}=t;return le.createElement("div",{...r})}function jM(t){return le.createElement("table",{...t})}function EM(t){return le.createElement("div",{...t})}const Xg=y.createContext(void 0);function ba(){const t=y.useContext(Xg);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function IM(t){const{components:e}=ba();return le.createElement(e.Dropdown,{...t})}function DM(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...a}=t,{components:l,classNames:c,labels:{labelPrevious:h,labelNext:d}}=ba(),p=y.useCallback(g=>{i&&n?.(g)},[i,n]),m=y.useCallback(g=>{r&&e?.(g)},[r,e]);return le.createElement("nav",{...a},le.createElement(l.PreviousMonthButton,{type:"button",className:c[_e.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":h(r),onClick:m},le.createElement(l.Chevron,{disabled:r?void 0:!0,className:c[_e.Chevron],orientation:"left"})),le.createElement(l.NextMonthButton,{type:"button",className:c[_e.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":d(i),onClick:p},le.createElement(l.Chevron,{disabled:i?void 0:!0,orientation:"right",className:c[_e.Chevron]})))}function AM(t){const{components:e}=ba();return le.createElement(e.Button,{...t})}function OM(t){return le.createElement("option",{...t})}function zM(t){const{components:e}=ba();return le.createElement(e.Button,{...t})}function PM(t){const{rootRef:e,...n}=t;return le.createElement("div",{...n,ref:e})}function NM(t){return le.createElement("select",{...t})}function FM(t){const{week:e,...n}=t;return le.createElement("tr",{...n})}function LM(t){return le.createElement("th",{...t})}function HM(t){return le.createElement("thead",{"aria-hidden":!0},le.createElement("tr",{...t}))}function BM(t){const{week:e,...n}=t;return le.createElement("th",{...n})}function WM(t){return le.createElement("th",{...t})}function $M(t){return le.createElement("tbody",{...t})}function YM(t){const{components:e}=ba();return le.createElement(e.Dropdown,{...t})}const VM=Object.freeze(Object.defineProperty({__proto__:null,Button:bM,CaptionLabel:vM,Chevron:wM,Day:CM,DayButton:SM,Dropdown:kM,DropdownNav:_M,Footer:RM,Month:MM,MonthCaption:TM,MonthGrid:jM,Months:EM,MonthsDropdown:IM,Nav:DM,NextMonthButton:AM,Option:OM,PreviousMonthButton:zM,Root:PM,Select:NM,Week:FM,WeekNumber:BM,WeekNumberHeader:WM,Weekday:LM,Weekdays:HM,Weeks:$M,YearsDropdown:YM},Symbol.toStringTag,{value:"Module"}));function mo(t,e,n=!1,r=Gr){let{from:i,to:a}=t;const{differenceInCalendarDays:l,isSameDay:c}=r;return i&&a?(l(a,i)<0&&([i,a]=[a,i]),l(e,i)>=(n?1:0)&&l(a,e)>=(n?1:0)):!n&&a?c(a,e):!n&&i?c(i,e):!1}function Qg(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Hd(t){return!!(t&&typeof t=="object"&&"from"in t)}function Zg(t){return!!(t&&typeof t=="object"&&"after"in t)}function Jg(t){return!!(t&&typeof t=="object"&&"before"in t)}function Kg(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function ex(t,e){return Array.isArray(t)&&t.every(e.isDate)}function go(t,e,n=Gr){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:a,isAfter:l}=n;return r.some(c=>{if(typeof c=="boolean")return c;if(n.isDate(c))return i(t,c);if(ex(c,n))return c.includes(t);if(Hd(c))return mo(c,t,!1,n);if(Kg(c))return Array.isArray(c.dayOfWeek)?c.dayOfWeek.includes(t.getDay()):c.dayOfWeek===t.getDay();if(Qg(c)){const h=a(c.before,t),d=a(c.after,t),p=h>0,m=d<0;return l(c.before,c.after)?m&&p:p||m}return Zg(c)?a(t,c.after)>0:Jg(c)?a(c.before,t)>0:typeof c=="function"?c(t):!1})}function qM(t,e,n,r,i){const{disabled:a,hidden:l,modifiers:c,showOutsideDays:h,broadcastCalendar:d,today:p}=e,{isSameDay:m,isSameMonth:g,startOfMonth:x,isBefore:b,endOfMonth:C,isAfter:w}=i,S=n&&x(n),k=r&&C(r),_={[Ft.focused]:[],[Ft.outside]:[],[Ft.disabled]:[],[Ft.hidden]:[],[Ft.today]:[]},R={};for(const T of t){const{date:M,displayMonth:I}=T,z=!!(I&&!g(M,I)),D=!!(S&&b(M,S)),P=!!(k&&w(M,k)),L=!!(a&&go(M,a,i)),H=!!(l&&go(M,l,i))||D||P||!d&&!h&&z||d&&h===!1&&z,$=m(M,p??i.today());z&&_.outside.push(T),L&&_.disabled.push(T),H&&_.hidden.push(T),$&&_.today.push(T),c&&Object.keys(c).forEach(Y=>{const te=c?.[Y];te&&go(M,te,i)&&(R[Y]?R[Y].push(T):R[Y]=[T])})}return T=>{const M={[Ft.focused]:!1,[Ft.disabled]:!1,[Ft.hidden]:!1,[Ft.outside]:!1,[Ft.today]:!1},I={};for(const z in _){const D=_[z];M[z]=D.some(P=>P===T)}for(const z in R)I[z]=R[z].some(D=>D===T);return{...M,...I}}}function UM(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[a])=>(n[a]?i.push(n[a]):e[Ft[a]]?i.push(e[Ft[a]]):e[Ar[a]]&&i.push(e[Ar[a]]),i),[e[_e.Day]])}function GM(t){return{...VM,...t}}function XM(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function QM(){const t={};for(const e in _e)t[_e[e]]=`rdp-${_e[e]}`;for(const e in Ft)t[Ft[e]]=`rdp-${Ft[e]}`;for(const e in Ar)t[Ar[e]]=`rdp-${Ar[e]}`;for(const e in ar)t[ar[e]]=`rdp-${ar[e]}`;return t}function tx(t,e,n){return(n??new ur(e)).formatMonthYear(t)}const ZM=tx;function JM(t,e,n){return(n??new ur(e)).format(t,"d")}function KM(t,e=Gr){return e.format(t,"LLLL")}function eT(t,e,n){return(n??new ur(e)).format(t,"cccccc")}function tT(t,e=Gr){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function nT(){return""}function nx(t,e=Gr){return e.format(t,"yyyy")}const rT=nx,oT=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:tx,formatDay:JM,formatMonthCaption:ZM,formatMonthDropdown:KM,formatWeekNumber:tT,formatWeekNumberHeader:nT,formatWeekdayName:eT,formatYearCaption:rT,formatYearDropdown:nx},Symbol.toStringTag,{value:"Module"}));function iT(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...oT,...t}}function sT(t,e,n,r,i){const{startOfMonth:a,startOfYear:l,endOfYear:c,eachMonthOfInterval:h,getMonth:d}=i;return h({start:l(t),end:c(t)}).map(g=>{const x=r.formatMonthDropdown(g,i),b=d(g),C=e&&g<a(e)||n&&g>a(n)||!1;return{value:b,label:x,disabled:C}})}function aT(t,e={},n={}){let r={...e?.[_e.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n?.[i]}}),r}function lT(t,e,n){const r=t.today(),i=e?t.startOfISOWeek(r):t.startOfWeek(r),a=[];for(let l=0;l<7;l++){const c=t.addDays(i,l);a.push(c)}return a}function cT(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:a,endOfYear:l,eachYearOfInterval:c,getYear:h}=r,d=a(t),p=l(e),m=c({start:d,end:p});return i&&m.reverse(),m.map(g=>{const x=n.formatYearDropdown(g,r);return{value:h(g),label:x,disabled:!1}})}function rx(t,e,n,r){let i=(r??new ur(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const uT=rx;function ox(t,e,n){return(n??new ur(e)).formatMonthYear(t)}const dT=ox;function fT(t,e,n,r){let i=(r??new ur(n)).format(t,"PPPP");return e?.today&&(i=`Today, ${i}`),i}function hT(t){return"Choose the Month"}function pT(){return""}function mT(t){return"Go to the Next Month"}function gT(t){return"Go to the Previous Month"}function xT(t,e,n){return(n??new ur(e)).format(t,"cccc")}function yT(t,e){return`Week ${t}`}function bT(t){return"Week Number"}function vT(t){return"Choose the Year"}const wT=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:dT,labelDay:uT,labelDayButton:rx,labelGrid:ox,labelGridcell:fT,labelMonthDropdown:hT,labelNav:pT,labelNext:mT,labelPrevious:gT,labelWeekNumber:yT,labelWeekNumberHeader:bT,labelWeekday:xT,labelYearDropdown:vT},Symbol.toStringTag,{value:"Module"})),va=t=>t instanceof HTMLElement?t:null,Tu=t=>[...t.querySelectorAll("[data-animated-month]")??[]],CT=t=>va(t.querySelector("[data-animated-month]")),ju=t=>va(t.querySelector("[data-animated-caption]")),Eu=t=>va(t.querySelector("[data-animated-weeks]")),ST=t=>va(t.querySelector("[data-animated-nav]")),kT=t=>va(t.querySelector("[data-animated-weekdays]"));function _T(t,e,{classNames:n,months:r,focused:i,dateLib:a}){const l=y.useRef(null),c=y.useRef(r),h=y.useRef(!1);y.useLayoutEffect(()=>{const d=c.current;if(c.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||d.length===0||r.length!==d.length)return;const p=a.isSameMonth(r[0].date,d[0].date),m=a.isAfter(r[0].date,d[0].date),g=m?n[ar.caption_after_enter]:n[ar.caption_before_enter],x=m?n[ar.weeks_after_enter]:n[ar.weeks_before_enter],b=l.current,C=t.current.cloneNode(!0);if(C instanceof HTMLElement?(Tu(C).forEach(_=>{if(!(_ instanceof HTMLElement))return;const R=CT(_);R&&_.contains(R)&&_.removeChild(R);const T=ju(_);T&&T.classList.remove(g);const M=Eu(_);M&&M.classList.remove(x)}),l.current=C):l.current=null,h.current||p||i)return;const w=b instanceof HTMLElement?Tu(b):[],S=Tu(t.current);if(S?.every(k=>k instanceof HTMLElement)&&w&&w.every(k=>k instanceof HTMLElement)){h.current=!0,t.current.style.isolation="isolate";const k=ST(t.current);k&&(k.style.zIndex="1"),S.forEach((_,R)=>{const T=w[R];if(!T)return;_.style.position="relative",_.style.overflow="hidden";const M=ju(_);M&&M.classList.add(g);const I=Eu(_);I&&I.classList.add(x);const z=()=>{h.current=!1,t.current&&(t.current.style.isolation=""),k&&(k.style.zIndex=""),M&&M.classList.remove(g),I&&I.classList.remove(x),_.style.position="",_.style.overflow="",_.contains(T)&&_.removeChild(T)};T.style.pointerEvents="none",T.style.position="absolute",T.style.overflow="hidden",T.setAttribute("aria-hidden","true");const D=kT(T);D&&(D.style.opacity="0");const P=ju(T);P&&(P.classList.add(m?n[ar.caption_before_exit]:n[ar.caption_after_exit]),P.addEventListener("animationend",z));const L=Eu(T);L&&L.classList.add(m?n[ar.weeks_before_exit]:n[ar.weeks_after_exit]),_.insertBefore(T,_.firstChild)})}})}function RT(t,e,n,r){const i=t[0],a=t[t.length-1],{ISOWeek:l,fixedWeeks:c,broadcastCalendar:h}=n??{},{addDays:d,differenceInCalendarDays:p,differenceInCalendarMonths:m,endOfBroadcastWeek:g,endOfISOWeek:x,endOfMonth:b,endOfWeek:C,isAfter:w,startOfBroadcastWeek:S,startOfISOWeek:k,startOfWeek:_}=r,R=h?S(i,r):l?k(i):_(i),T=h?g(a):l?x(b(a)):C(b(a)),M=p(T,R),I=m(a,i)+1,z=[];for(let L=0;L<=M;L++){const H=d(R,L);if(e&&w(H,e))break;z.push(H)}const P=(h?35:42)*I;if(c&&z.length<P){const L=P-z.length;for(let H=0;H<L;H++){const $=d(z[z.length-1],1);z.push($)}}return z}function MT(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((a,l)=>a.concat(l.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function TT(t,e,n,r){const{numberOfMonths:i=1}=n,a=[];for(let l=0;l<i;l++){const c=r.addMonths(t,l);if(e&&c>e)break;a.push(c)}return a}function Np(t,e,n,r){const{month:i,defaultMonth:a,today:l=r.today(),numberOfMonths:c=1}=t;let h=i||a||l;const{differenceInCalendarMonths:d,addMonths:p,startOfMonth:m}=r;if(n&&d(n,h)<c-1){const g=-1*(c-1);h=p(n,g)}return e&&d(h,e)<0&&(h=e),m(h)}function jT(t,e,n,r){const{addDays:i,endOfBroadcastWeek:a,endOfISOWeek:l,endOfMonth:c,endOfWeek:h,getISOWeek:d,getWeek:p,startOfBroadcastWeek:m,startOfISOWeek:g,startOfWeek:x}=r,b=t.reduce((C,w)=>{const S=n.broadcastCalendar?m(w,r):n.ISOWeek?g(w):x(w),k=n.broadcastCalendar?a(w):n.ISOWeek?l(c(w)):h(c(w)),_=e.filter(I=>I>=S&&I<=k),R=n.broadcastCalendar?35:42;if(n.fixedWeeks&&_.length<R){const I=e.filter(z=>{const D=R-_.length;return z>k&&z<=i(k,D)});_.push(...I)}const T=_.reduce((I,z)=>{const D=n.ISOWeek?d(z):p(z),P=I.find(H=>H.weekNumber===D),L=new Gg(z,w,r);return P?P.days.push(L):I.push(new yM(D,[L])),I},[]),M=new xM(w,T);return C.push(M),C},[]);return n.reverseMonths?b.reverse():b}function ET(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:a,startOfMonth:l,endOfMonth:c,addYears:h,endOfYear:d,newDate:p,today:m}=e,{fromYear:g,toYear:x,fromMonth:b,toMonth:C}=t;!n&&b&&(n=b),!n&&g&&(n=e.newDate(g,0,1)),!r&&C&&(r=C),!r&&x&&(r=p(x,11,31));const w=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=l(n):g?n=p(g,0,1):!n&&w&&(n=i(h(t.today??m(),-100))),r?r=c(r):x?r=p(x,11,31):!r&&w&&(r=d(t.today??m())),[n&&a(n),r&&a(r)]}function IT(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a=1}=n,{startOfMonth:l,addMonths:c,differenceInCalendarMonths:h}=r,d=i?a:1,p=l(t);if(!e)return c(p,d);if(!(h(e,t)<a))return c(p,d)}function DT(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a}=n,{startOfMonth:l,addMonths:c,differenceInCalendarMonths:h}=r,d=i?a??1:1,p=l(t);if(!e)return c(p,-d);if(!(h(p,e)<=0))return c(p,-d)}function AT(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function sc(t,e){const[n,r]=y.useState(t);return[e===void 0?n:e,r]}function OT(t,e){const[n,r]=ET(t,e),{startOfMonth:i,endOfMonth:a}=e,l=Np(t,n,r,e),[c,h]=sc(l,t.month?l:void 0);y.useEffect(()=>{const M=Np(t,n,r,e);h(M)},[t.timeZone]);const d=TT(c,r,t,e),p=RT(d,t.endMonth?a(t.endMonth):void 0,t,e),m=jT(d,p,t,e),g=AT(m),x=MT(m),b=DT(c,n,t,e),C=IT(c,r,t,e),{disableNavigation:w,onMonthChange:S}=t,k=M=>g.some(I=>I.days.some(z=>z.isEqualTo(M))),_=M=>{if(w)return;let I=i(M);n&&I<i(n)&&(I=i(n)),r&&I>i(r)&&(I=i(r)),h(I),S?.(I)};return{months:m,weeks:g,days:x,navStart:n,navEnd:r,previousMonth:b,nextMonth:C,goToMonth:_,goToDay:M=>{k(M)||_(M.date)}}}var Wr;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(Wr||(Wr={}));function Fp(t){return!t[Ft.disabled]&&!t[Ft.hidden]&&!t[Ft.outside]}function zT(t,e,n,r){let i,a=-1;for(const l of t){const c=e(l);Fp(c)&&(c[Ft.focused]&&a<Wr.FocusedModifier?(i=l,a=Wr.FocusedModifier):r?.isEqualTo(l)&&a<Wr.LastFocused?(i=l,a=Wr.LastFocused):n(l.date)&&a<Wr.Selected?(i=l,a=Wr.Selected):c[Ft.today]&&a<Wr.Today&&(i=l,a=Wr.Today))}return i||(i=t.find(l=>Fp(e(l)))),i}function PT(t,e,n,r,i,a,l){const{ISOWeek:c,broadcastCalendar:h}=a,{addDays:d,addMonths:p,addWeeks:m,addYears:g,endOfBroadcastWeek:x,endOfISOWeek:b,endOfWeek:C,max:w,min:S,startOfBroadcastWeek:k,startOfISOWeek:_,startOfWeek:R}=l;let M={day:d,week:m,month:p,year:g,startOfWeek:I=>h?k(I,l):c?_(I):R(I),endOfWeek:I=>h?x(I):c?b(I):C(I)}[t](n,e==="after"?1:-1);return e==="before"&&r?M=w([r,M]):e==="after"&&i&&(M=S([i,M])),M}function ix(t,e,n,r,i,a,l,c=0){if(c>365)return;const h=PT(t,e,n.date,r,i,a,l),d=!!(a.disabled&&go(h,a.disabled,l)),p=!!(a.hidden&&go(h,a.hidden,l)),m=h,g=new Gg(h,m,l);return!d&&!p?g:ix(t,e,g,r,i,a,l,c+1)}function NT(t,e,n,r,i){const{autoFocus:a}=t,[l,c]=y.useState(),h=zT(e.days,n,r||(()=>!1),l),[d,p]=y.useState(a?h:void 0);return{isFocusTarget:C=>!!h?.isEqualTo(C),setFocused:p,focused:d,blur:()=>{c(d),p(void 0)},moveFocus:(C,w)=>{if(!d)return;const S=ix(C,w,d,e.navStart,e.navEnd,t,i);S&&(t.disableNavigation&&!e.days.some(_=>_.isEqualTo(S))||(e.goToDay(S),p(S)))}}}function FT(t,e){const{selected:n,required:r,onSelect:i}=t,[a,l]=sc(n,i?n:void 0),c=i?n:a,{isSameDay:h}=e,d=x=>c?.some(b=>h(b,x))??!1,{min:p,max:m}=t;return{selected:c,select:(x,b,C)=>{let w=[...c??[]];if(d(x)){if(c?.length===p||r&&c?.length===1)return;w=c?.filter(S=>!h(S,x))}else c?.length===m?w=[x]:w=[...w,x];return i||l(w),i?.(w,x,b,C),w},isSelected:d}}function LT(t,e,n=0,r=0,i=!1,a=Gr){const{from:l,to:c}=e||{},{isSameDay:h,isAfter:d,isBefore:p}=a;let m;if(!l&&!c)m={from:t,to:n>0?void 0:t};else if(l&&!c)h(l,t)?n===0?m={from:l,to:t}:i?m={from:l,to:void 0}:m=void 0:p(t,l)?m={from:t,to:l}:m={from:l,to:t};else if(l&&c)if(h(l,t)&&h(c,t))i?m={from:l,to:c}:m=void 0;else if(h(l,t))m={from:l,to:n>0?void 0:t};else if(h(c,t))m={from:t,to:n>0?void 0:t};else if(p(t,l))m={from:t,to:c};else if(d(t,l))m={from:l,to:t};else if(d(t,c))m={from:l,to:t};else throw new Error("Invalid range");if(m?.from&&m?.to){const g=a.differenceInCalendarDays(m.to,m.from);r>0&&g>r?m={from:t,to:void 0}:n>1&&g<n&&(m={from:t,to:void 0})}return m}function HT(t,e,n=Gr){const r=Array.isArray(e)?e:[e];let i=t.from;const a=n.differenceInCalendarDays(t.to,t.from),l=Math.min(a,6);for(let c=0;c<=l;c++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function Lp(t,e,n=Gr){return mo(t,e.from,!1,n)||mo(t,e.to,!1,n)||mo(e,t.from,!1,n)||mo(e,t.to,!1,n)}function BT(t,e,n=Gr){const r=Array.isArray(e)?e:[e];if(r.filter(c=>typeof c!="function").some(c=>typeof c=="boolean"?c:n.isDate(c)?mo(t,c,!1,n):ex(c,n)?c.some(h=>mo(t,h,!1,n)):Hd(c)?c.from&&c.to?Lp(t,{from:c.from,to:c.to},n):!1:Kg(c)?HT(t,c.dayOfWeek,n):Qg(c)?n.isAfter(c.before,c.after)?Lp(t,{from:n.addDays(c.after,1),to:n.addDays(c.before,-1)},n):go(t.from,c,n)||go(t.to,c,n):Zg(c)||Jg(c)?go(t.from,c,n)||go(t.to,c,n):!1))return!0;const l=r.filter(c=>typeof c=="function");if(l.length){let c=t.from;const h=n.differenceInCalendarDays(t.to,t.from);for(let d=0;d<=h;d++){if(l.some(p=>p(c)))return!0;c=n.addDays(c,1)}}return!1}function WT(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:a,onSelect:l}=t,[c,h]=sc(i,l?i:void 0),d=l?i:c;return{selected:d,select:(g,x,b)=>{const{min:C,max:w}=t,S=g?LT(g,d,C,w,a,e):void 0;return r&&n&&S?.from&&S.to&&BT({from:S.from,to:S.to},n,e)&&(S.from=g,S.to=void 0),l||h(S),l?.(S,g,x,b),S},isSelected:g=>d&&mo(d,g,!1,e)}}function $T(t,e){const{selected:n,required:r,onSelect:i}=t,[a,l]=sc(n,i?n:void 0),c=i?n:a,{isSameDay:h}=e;return{selected:c,select:(m,g,x)=>{let b=m;return!r&&c&&c&&h(m,c)&&(b=void 0),i||l(b),i?.(b,m,g,x),b},isSelected:m=>c?h(c,m):!1}}function YT(t,e){const n=$T(t,e),r=FT(t,e),i=WT(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function VT(t){let e=t;e.timeZone&&(e={...t},e.today&&(e.today=new Rn(e.today,e.timeZone)),e.month&&(e.month=new Rn(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new Rn(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new Rn(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new Rn(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new Rn(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=e.selected?.map(me=>new Rn(me,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new Rn(e.selected.from,e.timeZone):void 0,to:e.selected.to?new Rn(e.selected.to,e.timeZone):void 0}));const{components:n,formatters:r,labels:i,dateLib:a,locale:l,classNames:c}=y.useMemo(()=>{const me={...oc,...e.locale};return{dateLib:new ur({locale:me,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:GM(e.components),formatters:iT(e.formatters),labels:{...wT,...e.labels},locale:me,classNames:{...QM(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:h,mode:d,navLayout:p,numberOfMonths:m=1,onDayBlur:g,onDayClick:x,onDayFocus:b,onDayKeyDown:C,onDayMouseEnter:w,onDayMouseLeave:S,onNextClick:k,onPrevClick:_,showWeekNumber:R,styles:T}=e,{formatCaption:M,formatDay:I,formatMonthDropdown:z,formatWeekNumber:D,formatWeekNumberHeader:P,formatWeekdayName:L,formatYearDropdown:H}=r,$=OT(e,a),{days:Y,months:te,navStart:J,navEnd:re,previousMonth:ie,nextMonth:G,goToMonth:U}=$,ce=qM(Y,e,J,re,a),{isSelected:ue,select:pe,selected:He}=YT(e,a)??{},{blur:V,focused:se,isFocusTarget:ze,moveFocus:Ne,setFocused:ae}=NT(e,$,ce,ue??(()=>!1),a),{labelDayButton:ve,labelGridcell:je,labelGrid:Qe,labelMonthDropdown:Ue,labelNav:Me,labelPrevious:Fe,labelNext:st,labelWeekday:Ee,labelWeekNumber:Ze,labelWeekNumberHeader:Et,labelYearDropdown:mt}=i,gt=y.useMemo(()=>lT(a,e.ISOWeek),[a,e.ISOWeek]),Ot=d!==void 0||x!==void 0,xt=y.useCallback(()=>{ie&&(U(ie),_?.(ie))},[ie,U,_]),Dt=y.useCallback(()=>{G&&(U(G),k?.(G))},[U,G,k]),Bt=y.useCallback((me,ut)=>Re=>{Re.preventDefault(),Re.stopPropagation(),ae(me),pe?.(me.date,ut,Re),x?.(me.date,ut,Re)},[pe,x,ae]),an=y.useCallback((me,ut)=>Re=>{ae(me),b?.(me.date,ut,Re)},[b,ae]),ln=y.useCallback((me,ut)=>Re=>{V(),g?.(me.date,ut,Re)},[V,g]),Xt=y.useCallback((me,ut)=>Re=>{const ke={ArrowLeft:[Re.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[Re.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[Re.shiftKey?"year":"week","after"],ArrowUp:[Re.shiftKey?"year":"week","before"],PageUp:[Re.shiftKey?"year":"month","before"],PageDown:[Re.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(ke[Re.key]){Re.preventDefault(),Re.stopPropagation();const[Wt,Be]=ke[Re.key];Ne(Wt,Be)}C?.(me.date,ut,Re)},[Ne,C,e.dir]),cn=y.useCallback((me,ut)=>Re=>{w?.(me.date,ut,Re)},[w]),un=y.useCallback((me,ut)=>Re=>{S?.(me.date,ut,Re)},[S]),Cn=y.useCallback(me=>ut=>{const Re=Number(ut.target.value),ke=a.setMonth(a.startOfMonth(me),Re);U(ke)},[a,U]),yt=y.useCallback(me=>ut=>{const Re=Number(ut.target.value),ke=a.setYear(a.startOfMonth(me),Re);U(ke)},[a,U]),{className:Qn,style:Sn}=y.useMemo(()=>({className:[c[_e.Root],e.className].filter(Boolean).join(" "),style:{...T?.[_e.Root],...e.style}}),[c,e.className,e.style,T]),jt=XM(e),gn=y.useRef(null);_T(gn,!!e.animate,{classNames:c,months:te,focused:se,dateLib:a});const En={dayPickerProps:e,selected:He,select:pe,isSelected:ue,months:te,nextMonth:G,previousMonth:ie,goToMonth:U,getModifiers:ce,components:n,classNames:c,styles:T,labels:i,formatters:r};return le.createElement(Xg.Provider,{value:En},le.createElement(n.Root,{rootRef:e.animate?gn:void 0,className:Qn,style:Sn,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...jt},le.createElement(n.Months,{className:c[_e.Months],style:T?.[_e.Months]},!e.hideNavigation&&!p&&le.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:c[_e.Nav],style:T?.[_e.Nav],"aria-label":Me(),onPreviousClick:xt,onNextClick:Dt,previousMonth:ie,nextMonth:G}),te.map((me,ut)=>le.createElement(n.Month,{"data-animated-month":e.animate?"true":void 0,className:c[_e.Month],style:T?.[_e.Month],key:ut,displayIndex:ut,calendarMonth:me},p==="around"&&!e.hideNavigation&&ut===0&&le.createElement(n.PreviousMonthButton,{type:"button",className:c[_e.PreviousMonthButton],tabIndex:ie?void 0:-1,"aria-disabled":ie?void 0:!0,"aria-label":Fe(ie),onClick:xt,"data-animated-button":e.animate?"true":void 0},le.createElement(n.Chevron,{disabled:ie?void 0:!0,className:c[_e.Chevron],orientation:e.dir==="rtl"?"right":"left"})),le.createElement(n.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:c[_e.MonthCaption],style:T?.[_e.MonthCaption],calendarMonth:me,displayIndex:ut},h?.startsWith("dropdown")?le.createElement(n.DropdownNav,{className:c[_e.Dropdowns],style:T?.[_e.Dropdowns]},(()=>{const Re=h==="dropdown"||h==="dropdown-months"?le.createElement(n.MonthsDropdown,{key:"month",className:c[_e.MonthsDropdown],"aria-label":Ue(),classNames:c,components:n,disabled:!!e.disableNavigation,onChange:Cn(me.date),options:sT(me.date,J,re,r,a),style:T?.[_e.Dropdown],value:a.getMonth(me.date)}):le.createElement("span",{key:"month"},z(me.date,a)),ke=h==="dropdown"||h==="dropdown-years"?le.createElement(n.YearsDropdown,{key:"year",className:c[_e.YearsDropdown],"aria-label":mt(a.options),classNames:c,components:n,disabled:!!e.disableNavigation,onChange:yt(me.date),options:cT(J,re,r,a,!!e.reverseYears),style:T?.[_e.Dropdown],value:a.getYear(me.date)}):le.createElement("span",{key:"year"},H(me.date,a));return a.getMonthYearOrder()==="year-first"?[ke,Re]:[Re,ke]})(),le.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},M(me.date,a.options,a))):le.createElement(n.CaptionLabel,{className:c[_e.CaptionLabel],role:"status","aria-live":"polite"},M(me.date,a.options,a))),p==="around"&&!e.hideNavigation&&ut===m-1&&le.createElement(n.NextMonthButton,{type:"button",className:c[_e.NextMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":st(G),onClick:Dt,"data-animated-button":e.animate?"true":void 0},le.createElement(n.Chevron,{disabled:G?void 0:!0,className:c[_e.Chevron],orientation:e.dir==="rtl"?"left":"right"})),ut===m-1&&p==="after"&&!e.hideNavigation&&le.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:c[_e.Nav],style:T?.[_e.Nav],"aria-label":Me(),onPreviousClick:xt,onNextClick:Dt,previousMonth:ie,nextMonth:G}),le.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":d==="multiple"||d==="range","aria-label":Qe(me.date,a.options,a)||void 0,className:c[_e.MonthGrid],style:T?.[_e.MonthGrid]},!e.hideWeekdays&&le.createElement(n.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:c[_e.Weekdays],style:T?.[_e.Weekdays]},R&&le.createElement(n.WeekNumberHeader,{"aria-label":Et(a.options),className:c[_e.WeekNumberHeader],style:T?.[_e.WeekNumberHeader],scope:"col"},P()),gt.map(Re=>le.createElement(n.Weekday,{"aria-label":Ee(Re,a.options,a),className:c[_e.Weekday],key:String(Re),style:T?.[_e.Weekday],scope:"col"},L(Re,a.options,a)))),le.createElement(n.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:c[_e.Weeks],style:T?.[_e.Weeks]},me.weeks.map(Re=>le.createElement(n.Week,{className:c[_e.Week],key:Re.weekNumber,style:T?.[_e.Week],week:Re},R&&le.createElement(n.WeekNumber,{week:Re,style:T?.[_e.WeekNumber],"aria-label":Ze(Re.weekNumber,{locale:l}),className:c[_e.WeekNumber],scope:"row",role:"rowheader"},D(Re.weekNumber,a)),Re.days.map(ke=>{const{date:Wt}=ke,Be=ce(ke);if(Be[Ft.focused]=!Be.hidden&&!!se?.isEqualTo(ke),Be[Ar.selected]=ue?.(Wt)||Be.selected,Hd(He)){const{from:Qt,to:In}=He;Be[Ar.range_start]=!!(Qt&&In&&a.isSameDay(Wt,Qt)),Be[Ar.range_end]=!!(Qt&&In&&a.isSameDay(Wt,In)),Be[Ar.range_middle]=mo(He,Wt,!0,a)}const At=aT(Be,T,e.modifiersStyles),_r=UM(Be,c,e.modifiersClassNames),dr=!Ot&&!Be.hidden?je(Wt,Be,a.options,a):void 0;return le.createElement(n.Day,{key:`${a.format(Wt,"yyyy-MM-dd")}_${a.format(ke.displayMonth,"yyyy-MM")}`,day:ke,modifiers:Be,className:_r.join(" "),style:At,role:"gridcell","aria-selected":Be.selected||void 0,"aria-label":dr,"data-day":a.format(Wt,"yyyy-MM-dd"),"data-month":ke.outside?a.format(Wt,"yyyy-MM"):void 0,"data-selected":Be.selected||void 0,"data-disabled":Be.disabled||void 0,"data-hidden":Be.hidden||void 0,"data-outside":ke.outside||void 0,"data-focused":Be.focused||void 0,"data-today":Be.today||void 0},!Be.hidden&&Ot?le.createElement(n.DayButton,{className:c[_e.DayButton],style:T?.[_e.DayButton],type:"button",day:ke,modifiers:Be,disabled:Be.disabled||void 0,tabIndex:ze(ke)?0:-1,"aria-label":ve(Wt,Be,a.options,a),onClick:Bt(ke,Be),onBlur:ln(ke,Be),onFocus:an(ke,Be),onKeyDown:Xt(ke,Be),onMouseEnter:cn(ke,Be),onMouseLeave:un(ke,Be)},I(Wt,a.options,a)):!Be.hidden&&I(ke.date,a.options,a))})))))))),e.footer&&le.createElement(n.Footer,{className:c[_e.Footer],style:T?.[_e.Footer],role:"status","aria-live":"polite"},e.footer)))}var _s=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qT={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},UT=class{#e=qT;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ci=new UT;function GT(t){setTimeout(t,0)}var Ti=typeof window>"u"||"Deno"in globalThis;function Hn(){}function XT(t,e){return typeof t=="function"?t(e):t}function sd(t){return typeof t=="number"&&t>=0&&t!==1/0}function sx(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Go(t,e){return typeof t=="function"?t(e):t}function Sr(t,e){return typeof t=="function"?t(e):t}function Hp(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==Bd(l,e.options))return!1}else if(!ha(e.queryKey,l))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function Bp(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(ji(e.options.mutationKey)!==ji(a))return!1}else if(!ha(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Bd(t,e){return(e?.queryKeyHashFn||ji)(t)}function ji(t){return JSON.stringify(t,(e,n)=>ad(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function ha(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ha(t[n],e[n])):!1}var QT=Object.prototype.hasOwnProperty;function ax(t,e){if(t===e)return t;const n=Wp(t)&&Wp(e);if(!n&&!(ad(t)&&ad(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,c=n?new Array(l):{};let h=0;for(let d=0;d<l;d++){const p=n?d:a[d],m=t[p],g=e[p];if(m===g){c[p]=m,(n?d<i:QT.call(t,p))&&h++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){c[p]=g;continue}const x=ax(m,g);c[p]=x,x===m&&h++}return i===l&&h===i?t:c}function Dl(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Wp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ad(t){if(!$p(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!$p(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function $p(t){return Object.prototype.toString.call(t)==="[object Object]"}function ZT(t){return new Promise(e=>{Ci.setTimeout(e,t)})}function ld(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ax(t,e):e}function JT(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function KT(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Wd=Symbol();function lx(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Wd?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function cx(t,e){return typeof t=="function"?t(...e):!!t}var ej=class extends _s{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Ti&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},$d=new ej;function cd(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var tj=GT;function nj(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=tj;const a=c=>{e?t.push(c):i(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(h=>{n(h)})})})};return{batch:c=>{let h;e++;try{h=c()}finally{e--,e||l()}return h},batchCalls:c=>(...h)=>{a(()=>{c(...h)})},schedule:a,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var hn=nj(),rj=class extends _s{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Ti&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Al=new rj;function oj(t){return Math.min(1e3*2**t,3e4)}function ux(t){return(t??"online")==="online"?Al.isOnline():!0}var ud=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function dx(t){let e=!1,n=0,r;const i=cd(),a=()=>i.status!=="pending",l=C=>{if(!a()){const w=new ud(C);g(w),t.onCancel?.(w)}},c=()=>{e=!0},h=()=>{e=!1},d=()=>$d.isFocused()&&(t.networkMode==="always"||Al.isOnline())&&t.canRun(),p=()=>ux(t.networkMode)&&t.canRun(),m=C=>{a()||(r?.(),i.resolve(C))},g=C=>{a()||(r?.(),i.reject(C))},x=()=>new Promise(C=>{r=w=>{(a()||d())&&C(w)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),b=()=>{if(a())return;let C;const w=n===0?t.initialPromise:void 0;try{C=w??t.fn()}catch(S){C=Promise.reject(S)}Promise.resolve(C).then(m).catch(S=>{if(a())return;const k=t.retry??(Ti?0:3),_=t.retryDelay??oj,R=typeof _=="function"?_(n,S):_,T=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,S);if(e||!T){g(S);return}n++,t.onFail?.(n,S),ZT(R).then(()=>d()?void 0:x()).then(()=>{e?g(S):b()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:h,canStart:p,start:()=>(p()?b():x().then(b),i)}}var fx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sd(this.gcTime)&&(this.#e=Ci.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ti?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ci.clearTimeout(this.#e),this.#e=void 0)}},ij=class extends fx{#e;#t;#n;#o;#i;#d;#s;constructor(t){super(),this.#s=!1,this.#d=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#o=t.client,this.#n=this.#o.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Yp(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#d,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Yp(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=ld(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(Hn).catch(Hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Sr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Go(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sx(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(h=>h.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const c=lx(this.options,e),d=(()=>{const p={client:this.#o,queryKey:this.queryKey,meta:this.meta};return r(p),p})();return this.#s=!1,this.options.persister?this.options.persister(c,d,this):c(d)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#o,state:this.state,fetchFn:i};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=dx({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof ud&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,h)=>{this.#a({type:"failed",failureCount:c,error:h})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof ud){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...hx(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),hn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function hx(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ux(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Yp(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sj=class extends _s{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#s=cd(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#o=void 0;#i;#d;#s;#a;#u;#l;#r;#m;#g;#f;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Vp(this.#t,this.options)?this.#y():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dd(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dd(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#C(),this.#k(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),e._defaulted&&!Dl(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&qp(this.#t,n,this.options,e)&&this.#y(),this.updateResult(),r&&(this.#t!==n||Sr(this.options.enabled,this.#t)!==Sr(e.enabled,this.#t)||Go(this.options.staleTime,this.#t)!==Go(e.staleTime,this.#t))&&this.#p();const i=this.#v();r&&(this.#t!==n||Sr(this.options.enabled,this.#t)!==Sr(e.enabled,this.#t)||i!==this.#f)&&this.#w(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return lj(this,n)&&(this.#o=n,this.#d=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#o}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,r))})}trackProp(t){this.#h.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#y({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#o))}#y(t){this.#x();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Hn)),e}#p(){this.#C();const t=Go(this.options.staleTime,this.#t);if(Ti||this.#o.isStale||!sd(t))return;const n=sx(this.#o.dataUpdatedAt,t)+1;this.#m=Ci.setTimeout(()=>{this.#o.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#w(t){this.#k(),this.#f=t,!(Ti||Sr(this.options.enabled,this.#t)===!1||!sd(this.#f)||this.#f===0)&&(this.#g=Ci.setInterval(()=>{(this.options.refetchIntervalInBackground||$d.isFocused())&&this.#y()},this.#f))}#b(){this.#p(),this.#w(this.#v())}#C(){this.#m&&(Ci.clearTimeout(this.#m),this.#m=void 0)}#k(){this.#g&&(Ci.clearInterval(this.#g),this.#g=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#o,a=this.#i,l=this.#d,h=t!==n?t.state:this.#n,{state:d}=t;let p={...d},m=!1,g;if(e._optimisticResults){const z=this.hasListeners(),D=!z&&Vp(t,e),P=z&&qp(t,n,e,r);(D||P)&&(p={...p,...hx(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:b,status:C}=p;g=p.data;let w=!1;if(e.placeholderData!==void 0&&g===void 0&&C==="pending"){let z;i?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(z=i.data,w=!0):z=typeof e.placeholderData=="function"?e.placeholderData(this.#r?.state.data,this.#r):e.placeholderData,z!==void 0&&(C="success",g=ld(i?.data,z,e),m=!0)}if(e.select&&g!==void 0&&!w)if(i&&g===a?.data&&e.select===this.#u)g=this.#l;else try{this.#u=e.select,g=e.select(g),g=ld(i?.data,g,e),this.#l=g,this.#a=null}catch(z){this.#a=z}this.#a&&(x=this.#a,g=this.#l,b=Date.now(),C="error");const S=p.fetchStatus==="fetching",k=C==="pending",_=C==="error",R=k&&S,T=g!==void 0,I={status:C,fetchStatus:p.fetchStatus,isPending:k,isSuccess:C==="success",isError:_,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:b,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>h.dataUpdateCount||p.errorUpdateCount>h.errorUpdateCount,isFetching:S,isRefetching:S&&!k,isLoadingError:_&&!T,isPaused:p.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:_&&T,isStale:Yd(t,e),refetch:this.refetch,promise:this.#s,isEnabled:Sr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=L=>{I.status==="error"?L.reject(I.error):I.data!==void 0&&L.resolve(I.data)},D=()=>{const L=this.#s=I.promise=cd();z(L)},P=this.#s;switch(P.status){case"pending":t.queryHash===n.queryHash&&z(P);break;case"fulfilled":(I.status==="error"||I.data!==P.value)&&D();break;case"rejected":(I.status!=="error"||I.error!==P.reason)&&D();break}}return I}updateResult(){const t=this.#o,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#d=this.options,this.#i.data!==void 0&&(this.#r=this.#t),Dl(e,t))return;this.#o=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#h.size)return!0;const a=new Set(i??this.#h);return this.options.throwOnError&&a.add("error"),Object.keys(this.#o).some(l=>{const c=l;return this.#o[c]!==t[c]&&a.has(c)})};this.#j({listeners:n()})}#x(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(t){hn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#o)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function aj(t,e){return Sr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Vp(t,e){return aj(t,e)||t.state.data!==void 0&&dd(t,e,e.refetchOnMount)}function dd(t,e,n){if(Sr(e.enabled,t)!==!1&&Go(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Yd(t,e)}return!1}function qp(t,e,n,r){return(t!==e||Sr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Yd(t,n)}function Yd(t,e){return Sr(e.enabled,t)!==!1&&t.isStaleByTime(Go(e.staleTime,t))}function lj(t,e){return!Dl(t.getCurrentResult(),e)}function Up(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},h=0;const d=async()=>{let p=!1;const m=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},g=lx(e.options,e.fetchOptions),x=async(b,C,w)=>{if(p)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const k=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:C,direction:w?"backward":"forward",meta:e.options.meta};return m(M),M})(),_=await g(k),{maxPages:R}=e.options,T=w?KT:JT;return{pages:T(b.pages,_,R),pageParams:T(b.pageParams,C,R)}};if(i&&a.length){const b=i==="backward",C=b?cj:Gp,w={pages:a,pageParams:l},S=C(r,w);c=await x(w,S,b)}else{const b=t??a.length;do{const C=h===0?l[0]??r.initialPageParam:Gp(r,c);if(h>0&&C==null)break;c=await x(c,C),h++}while(h<b)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function Gp(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function cj(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var uj=class extends fx{#e;#t;#n;#o;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||px(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#o=dx({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#i({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#o.canStart();try{if(r)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#i({type:"pending",context:l,variables:t,isPaused:i})}const a=await this.#o.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#i({type:"success",data:a}),a}catch(a){try{throw await this.#n.config.onError?.(a,t,this.state.context,this,n),await this.options.onError?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,t,this.state.context,n),a}finally{this.#i({type:"error",error:a})}}finally{this.#n.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),hn.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function px(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dj=class extends _s{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new uj({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=cl(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=cl(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=cl(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=cl(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){hn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Bp(e,n))}findAll(t={}){return this.getAll().filter(e=>Bp(t,e))}notify(t){hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return hn.batch(()=>Promise.all(t.map(e=>e.continue().catch(Hn))))}};function cl(t){return t.options.scope?.id}var fj=class extends _s{#e;#t=void 0;#n;#o;constructor(t,e){super(),this.#e=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#e.defaultMutationOptions(t),Dl(this.options,e)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),e?.mutationKey&&this.options.mutationKey&&ji(e.mutationKey)!==ji(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#d(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#d()}mutate(t,e){return this.#o=e,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#i(){const t=this.#n?.state??px();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#d(t){hn.batch(()=>{if(this.#o&&this.hasListeners()){const e=this.#t.variables,n=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#o.onSuccess?.(t.data,e,n,r),this.#o.onSettled?.(t.data,null,e,n,r)):t?.type==="error"&&(this.#o.onError?.(t.error,e,n,r),this.#o.onSettled?.(void 0,t.error,e,n,r))}this.listeners.forEach(e=>{e(this.#t)})})}},hj=class extends _s{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??Bd(r,e);let a=this.get(i);return a||(a=new ij({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){hn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Hp(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Hp(t,n)):e}notify(t){hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){hn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){hn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},pj=class{#e;#t;#n;#o;#i;#d;#s;#a;constructor(t={}){this.#e=t.queryCache||new hj,this.#t=t.mutationCache||new dj,this.#n=t.defaultOptions||{},this.#o=new Map,this.#i=new Map,this.#d=0}mount(){this.#d++,this.#d===1&&(this.#s=$d.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Al.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#d--,this.#d===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Go(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=XT(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return hn.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;hn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return hn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=hn.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Hn).catch(Hn)}invalidateQueries(t,e={}){return hn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=hn.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Hn)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Hn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(Go(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Hn).catch(Hn)}fetchInfiniteQuery(t){return t.behavior=Up(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Hn).catch(Hn)}ensureInfiniteQueryData(t){return t.behavior=Up(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Al.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#o.set(ji(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#o.values()],n={};return e.forEach(r=>{ha(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(ji(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{ha(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bd(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Wd&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},mx=y.createContext(void 0),Rs=t=>{const e=y.useContext(mx);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mj=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),u.jsx(mx.Provider,{value:t,children:e})),gx=y.createContext(!1),gj=()=>y.useContext(gx);gx.Provider;function xj(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var yj=y.createContext(xj()),bj=()=>y.useContext(yj),vj=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},wj=t=>{y.useEffect(()=>{t.clearReset()},[t])},Cj=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||cx(n,[t.error,r])),Sj=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},kj=(t,e)=>t.isLoading&&t.isFetching&&!e,_j=(t,e)=>t?.suspense&&e.isPending,Xp=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Rj(t,e,n){const r=gj(),i=bj(),a=Rs(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=r?"isRestoring":"optimistic",Sj(l),vj(l,i),wj(i);const c=!a.getQueryCache().get(l.queryHash),[h]=y.useState(()=>new e(a,l)),d=h.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(m=>{const g=p?h.subscribe(hn.batchCalls(m)):Hn;return h.updateResult(),g},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),y.useEffect(()=>{h.setOptions(l)},[l,h]),_j(l,d))throw Xp(l,h,i);if(Cj({result:d,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!Ti&&kj(d,r)&&(c?Xp(l,h,i):a.getQueryCache().get(l.queryHash)?.promise)?.catch(Hn).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?d:h.trackResult(d)}function gs(t,e){return Rj(t,sj)}function Gn(t,e){const n=Rs(),[r]=y.useState(()=>new fj(n,t));y.useEffect(()=>{r.setOptions(t)},[r,t]);const i=y.useSyncExternalStore(y.useCallback(l=>r.subscribe(hn.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=y.useCallback((l,c)=>{r.mutate(l,c).catch(Hn)},[r]);if(i.error&&cx(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function Mj(){var t=y.useRef(!0);return t.current?(t.current=!1,!0):t.current}var Tj=function(t,e){var n=Mj();y.useEffect(function(){if(!n)return t()},e)};function Ni(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function c(p){try{d(r.next(p))}catch(m){l(m)}}function h(p){try{d(r.throw(p))}catch(m){l(m)}}function d(p){p.done?a(p.value):i(p.value).then(c,h)}d((r=r.apply(t,[])).next())})}function xx(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function yx(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jj=["mousedown","touchstart"],Ej=function(t,e,n){n===void 0&&(n=jj);var r=y.useRef(e);y.useEffect(function(){r.current=e},[e]),y.useEffect(function(){for(var i=function(h){var d=t.current;d&&!d.contains(h.target)&&r.current(h)},a=0,l=n;a<l.length;a++){var c=l[a];xx(document,c,i)}return function(){for(var h=0,d=n;h<d.length;h++){var p=d[h];yx(document,p,i)}}},[n,t])},Ij=function(t){y.useEffect(t,[])},bx=function(t){var e=y.useRef(t);e.current=t,Ij(function(){return function(){return e.current()}})},vx=function(t){var e=y.useRef(0),n=y.useState(t),r=n[0],i=n[1],a=y.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){i(l)})},[]);return bx(function(){cancelAnimationFrame(e.current)}),[r,a]},Dj=function(t){var e=vx({docX:0,docY:0,posX:0,posY:0,elX:0,elY:0,elH:0,elW:0}),n=e[0],r=e[1];return y.useEffect(function(){var i=function(a){if(t&&t.current){var l=t.current.getBoundingClientRect(),c=l.left,h=l.top,d=l.width,p=l.height,m=c+window.pageXOffset,g=h+window.pageYOffset,x=a.pageX-m,b=a.pageY-g;r({docX:a.pageX,docY:a.pageY,posX:m,posY:g,elX:x,elY:b,elH:p,elW:d})}};return xx(document,"mousemove",i),function(){yx(document,"mousemove",i)}},[t]),n};class Gt{}Object.defineProperty(Gt,"Amber",{enumerable:!0,configurable:!0,writable:!0,value:"#F59E0B"});Object.defineProperty(Gt,"Blue",{enumerable:!0,configurable:!0,writable:!0,value:"#3B82F6"});Object.defineProperty(Gt,"Cyan",{enumerable:!0,configurable:!0,writable:!0,value:"#06B6D4"});Object.defineProperty(Gt,"Emerald",{enumerable:!0,configurable:!0,writable:!0,value:"#10B981"});Object.defineProperty(Gt,"Fuchsia",{enumerable:!0,configurable:!0,writable:!0,value:"#D946EF"});Object.defineProperty(Gt,"Gray",{enumerable:!0,configurable:!0,writable:!0,value:"#6B7280"});Object.defineProperty(Gt,"Green",{enumerable:!0,configurable:!0,writable:!0,value:"#22C55E"});Object.defineProperty(Gt,"Indigo",{enumerable:!0,configurable:!0,writable:!0,value:"#6366F1"});Object.defineProperty(Gt,"Lime",{enumerable:!0,configurable:!0,writable:!0,value:"#84CC16"});Object.defineProperty(Gt,"Orange",{enumerable:!0,configurable:!0,writable:!0,value:"#F97316"});Object.defineProperty(Gt,"Pink",{enumerable:!0,configurable:!0,writable:!0,value:"#EC4899"});Object.defineProperty(Gt,"Purple",{enumerable:!0,configurable:!0,writable:!0,value:"#A855F7"});Object.defineProperty(Gt,"Red",{enumerable:!0,configurable:!0,writable:!0,value:"#EF4444"});Object.defineProperty(Gt,"Rose",{enumerable:!0,configurable:!0,writable:!0,value:"#F43F5E"});Object.defineProperty(Gt,"Sky",{enumerable:!0,configurable:!0,writable:!0,value:"#0EA5E9"});Object.defineProperty(Gt,"Slate",{enumerable:!0,configurable:!0,writable:!0,value:"#64748B"});Object.defineProperty(Gt,"Teal",{enumerable:!0,configurable:!0,writable:!0,value:"#14B8A6"});Object.defineProperty(Gt,"Violet",{enumerable:!0,configurable:!0,writable:!0,value:"#8B5CF6"});Object.defineProperty(Gt,"Yellow",{enumerable:!0,configurable:!0,writable:!0,value:"#EAB308"});Object.defineProperty(Gt,"Zinc",{enumerable:!0,configurable:!0,writable:!0,value:"#71717A"});class Ol{static hexToRgb(e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}static rgbToHex(e,n,r){return"#"+((1<<24)+(e<<16)+(n<<8)+r).toString(16).slice(1)}static getContrastYIQ(e){const n=this.hexToRgb(e);return n?(n.r*299+n.g*587+n.b*114)/1e3>=128?"black":"white":"black"}static getHexForColor(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e),e}static shouldUseLightTextOnColor(e){return this.getContrastYIQ(e)==="white"}}function Aj(t,e="light"){if(e==="dark"){const n=Ol.hexToRgb(t);if(!n)return t;const r=1.3;return Ol.rgbToHex(Math.min(255,Math.round(n.r*r)),Math.min(255,Math.round(n.g*r)),Math.min(255,Math.round(n.b*r)))}return t}function Oj(t=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function bo(...t){return t.filter(Boolean).join(" ")}const zj=({className:t,size:e=16,...n})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,...n,children:u.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),Pj=({className:t,size:e=16,...n})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,...n,children:u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})});var be;(function(t){t.Text="text",t.Number="number",t.Boolean="boolean",t.Link="link",t.Image="image",t.Chart="chart",t.Date="date",t.User="user",t.Attachment="attachment",t.Rating="rating",t.Select="select",t.MultiSelect="multiSelect",t.Button="button",t.Formula="formula",t.Lookup="lookup",t.Rollup="rollup",t.Loading="loading"})(be||(be={}));var Xe;(function(t){t.Cell="cell",t.CellValue="cellValue",t.ActiveCell="activeCell",t.ColumnHeader="columnHeader",t.RowHeader="rowHeader",t.Update="update",t.Blank="blank",t.Preview="preview",t.ToggleEditing="toggleEditing",t.Hover="hover"})(Xe||(Xe={}));var oa;(function(t){t.Line="line",t.Bar="bar",t.Pie="pie",t.Area="area"})(oa||(oa={}));var zl;(function(t){t.Number="number",t.Percent="percent",t.Currency="currency",t.Ring="ring",t.Bar="bar"})(zl||(zl={}));const Qp={text:"📝",singleLineText:"📝",longText:"📝",string:"📝",singleline:"📝",multiline:"📝",richtext:"📝",number:"🔢",integer:"🔢",float:"🔢",decimal:"🔢",currency:"💰",percent:"📊",autoNumber:"🔢",count:"🔢",boolean:"✓",checkbox:"✓",check:"✓",date:"📅",datetime:"📅",createdTime:"📅",lastModifiedTime:"📅",timestamp:"📅",time:"📅",createDate:"📅",modifyDate:"📅",createdDatetime:"📅",modifiedDatetime:"📅",select:"📋",singleSelect:"📋",dropdown:"📋",singleChoice:"📋",option:"📋",choice:"📋",multiSelect:"🏷️",multipleSelect:"🏷️",multipleSelects:"🏷️",multiChoice:"🏷️",multipleChoice:"🏷️",tags:"🏷️",categories:"🏷️",user:"👤",createdBy:"👤",lastModifiedBy:"👤",owner:"👤",assignee:"👤",collaborator:"👤",member:"👤",link:"🔗",url:"🔗",hyperlink:"🔗",website:"🔗",webUrl:"🔗",email:"📧",mail:"📧",emailAddress:"📧",phone:"📱",telephone:"📱",mobile:"📱",phoneNumber:"📱",contact:"📱",attachment:"📎",file:"📎",rating:"⭐",star:"⭐",formula:"🧮",rollup:"🔄",lookup:"🔍",reference:"🔗",button:"🔘",barcode:"📱",duration:"⏱️",progress:"📊"};function Nj(t){const e=t?.toLowerCase()||"";return Qp[e]||Qp[t]||"📄"}function Fj(t){const e=(t||"").toLowerCase();return["multiselect","multipleselect","multipleselects","multichoice","multiplechoice","tags","categories"].includes(e)}function Lj(t){const e=(t||"").toLowerCase();return["select","singleselect","dropdown","singlechoice","option","choice"].includes(e)}function Hj(t,e,n){const r=(e||"").toLowerCase();if(["text","singlelinetext","longtext","string","singleline","multiline","richtext","formula"].includes(r))return{type:be.Text,data:t?String(t):"",displayData:t?String(t):""};if(["number","integer","float","decimal","currency","percent","autonumber","count"].includes(r)){const i=t!=null?Number(t):0;return{type:be.Number,data:i,displayData:String(i)}}if(["boolean","checkbox","check"].includes(r)){const i=!!t;return{type:be.Boolean,data:i,displayData:i?"✓":""}}if(["date","datetime","createdtime","lastmodifiedtime","timestamp","time","createdate","modifydate","createddatetime","modifieddatetime"].includes(r)){const i=t?String(t):"";let a="";if(i)try{a=new Date(i).toLocaleDateString("zh-CN")}catch{a=i}return{type:be.Date,data:i,displayData:a}}if(Lj(r)){const i=n?.choices||[],a=new Map;i.forEach(c=>{a.set(c.id||c.name,c)});const l=t?String(t):"";return{type:be.Select,data:l?[l]:[],displayData:l?[l]:[],choiceMap:a,choiceSorted:i,isMultiple:!1}}if(Fj(r)){const i=n?.choices||[],a=new Map;i.forEach(c=>{a.set(c.id||c.name,c)});let l=[];return Array.isArray(t)?l=t.map(c=>String(c||"")).filter(c=>c!==""):t&&(l=[String(t)]),{type:be.Select,data:l,displayData:l,choiceMap:a,choiceSorted:i,isMultiple:!0}}if(["rating","star"].includes(r)){const i=t?Number(t):0;return{type:be.Rating,data:i,displayData:String(i),icon:"⭐",color:"#fbbf24",max:5}}if(["user","createdby","lastmodifiedby","owner","assignee","collaborator","member"].includes(r)){const i=t?String(t):"";return{type:be.User,data:i?[{id:i,name:i,avatarUrl:""}]:[],displayData:i?`👤 ${i}`:""}}if(["url","link","hyperlink","website","weburl","attachment"].includes(r)){const i=t?String(t):"";return{type:be.Link,data:{title:i,url:i},displayData:i}}if(["email","mail","emailaddress"].includes(r))return{type:be.Text,data:t?String(t):"",displayData:t?String(t):""};if(["phone","telephone","mobile","phonenumber","contact"].includes(r)){const i=t?String(t):"";return{type:be.Link,data:{title:i,url:i?`tel:${i}`:""},displayData:i}}return console.log(`⚠️ 未知字段类型 "${e}" (normalized: "${r}")，使用文本类型. 值:`,t),{type:be.Text,data:t?String(t):"",displayData:t?String(t):""}}function Bj(t,e,n){if(!t)return null;if(t.data&&typeof t.data=="object"){if(e in t.data)return t.data[e];if(n&&n in t.data)return t.data[n]}if(t.fields&&typeof t.fields=="object"){if(e in t.fields)return t.fields[e];if(n&&n in t.fields)return t.fields[n]}return e in t?t[e]:n&&n in t?t[n]:null}function Wj(t,e){return n=>{const[r,i]=n;if(r<0||i<0||!e.length||!t.length)return{type:be.Text,data:"",displayData:""};const a=e[i],l=t[r];if(!a||!l)return{type:be.Text,data:"",displayData:""};const c=Bj(a,l.id,l.name);return Hj(c,l.type,l.options)}}function $j(t){return t.map((e,n)=>({id:e.id,name:e.name,width:150,isPrimary:e.isPrimary||e.primary||n===0,icon:Nj(e.type)}))}const ac=y.forwardRef(({className:t,type:e="text",...n},r)=>u.jsx("input",{type:e,className:bo("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));ac.displayName="Input";const wx=y.createContext({search:"",setSearch:()=>{}}),Yj=y.forwardRef(({className:t,children:e,...n},r)=>{const[i,a]=y.useState("");return u.jsx(wx.Provider,{value:{search:i,setSearch:a},children:u.jsx("div",{ref:r,className:bo("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...n,children:e})})});Yj.displayName="Command";const Vj=y.forwardRef(({className:t,placeholder:e,...n},r)=>{const{setSearch:i}=y.useContext(wx);return u.jsx("div",{className:"flex items-center border-b px-3",children:u.jsx("input",{ref:r,className:bo("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none","placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),placeholder:e,onChange:a=>i(a.target.value),...n})})});Vj.displayName="CommandInput";const qj=y.forwardRef(({className:t,children:e,...n},r)=>u.jsx("div",{ref:r,className:bo("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...n,children:e}));qj.displayName="CommandList";const Uj=y.forwardRef(({className:t,children:e="No results found.",...n},r)=>u.jsx("div",{ref:r,className:bo("py-6 text-center text-sm",t),...n,children:e}));Uj.displayName="CommandEmpty";const Gj=y.forwardRef(({className:t,children:e,...n},r)=>u.jsx("div",{ref:r,className:bo("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n,children:e}));Gj.displayName="CommandGroup";const Xj=y.forwardRef(({className:t,onSelect:e,children:n,...r},i)=>u.jsx("div",{ref:i,className:bo("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","hover:bg-accent hover:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),onClick:e,...r,children:n}));Xj.displayName="CommandItem";const Qj={primary:{50:"#eff6ff",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8"},surface:{base:"#ffffff",hover:"#f8fafc",selected:"#e0f2fe",disabled:"#f9fafb",destructive:"#fef2f2"},border:{subtle:"#e5e7eb",default:"#d1d5db",strong:"#9ca3af",focus:"#3b82f6",error:"#ef4444"},text:{primary:"#0f172a",secondary:"#64748b",tertiary:"#94a3b8",inverse:"#ffffff",disabled:"#cbd5e1",link:"#2563eb",error:"#dc2626",warning:"#d97706",accent:"#2563eb"},semantic:{error:{bg:"#fee2e2",border:"#fca5a5",text:"#991b1b"}}},Zj={md:"0.375rem",xl:"0.75rem"},Tn={xs:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",sm:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},Jj={fontWeight:{medium:"500",semibold:"600"},letterSpacing:{tight:"-0.01em"}},sn={presets:{all:"all 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},E={colors:Qj,radius:Zj,elevation:Tn,typography:Jj};function Cx(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Cx(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kj(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Cx(t))&&(r&&(r+=" "),r+=e);return r}function ge(...t){return Kj(t)}y.createContext(void 0);const eE={primary:{base:"bg-blue-600 text-white border-blue-600",hover:"hover:bg-blue-700 hover:border-blue-700 hover:shadow-md",active:"active:bg-blue-800 active:scale-[0.98]",disabled:"disabled:bg-gray-300 disabled:border-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"},secondary:{base:"bg-white text-gray-700 border-gray-300",hover:"hover:bg-gray-50 hover:border-gray-400 hover:text-gray-900",active:"active:bg-gray-100 active:scale-[0.98]",disabled:"disabled:bg-gray-50 disabled:border-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed"},ghost:{base:"bg-transparent text-gray-700 border-transparent",hover:"hover:bg-gray-100 hover:text-gray-900",active:"active:bg-gray-200 active:scale-[0.98]",disabled:"disabled:text-gray-400 disabled:cursor-not-allowed"},danger:{base:"bg-red-600 text-white border-red-600",hover:"hover:bg-red-700 hover:border-red-700 hover:shadow-md",active:"active:bg-red-800 active:scale-[0.98]",disabled:"disabled:bg-gray-300 disabled:border-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"}},tE={sm:"h-7 px-2.5 text-xs gap-1.5",md:"h-8 px-3 text-sm gap-2",lg:"h-10 px-4 text-base gap-2.5"},Zp=({size:t=14})=>u.jsxs("svg",{className:"animate-spin",width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Mn=y.forwardRef(({variant:t="secondary",size:e="md",icon:n,iconPosition:r="left",loading:i=!1,fullWidth:a=!1,disabled:l=!1,className:c,children:h,type:d="button",...p},m)=>{const g=eE[t],x=tE[e],C={sm:14,md:16,lg:18}[e],S=(()=>{if(i)return u.jsx(Zp,{size:C});if(!n)return null;if(le.isValidElement(n))return n;if(typeof n=="function"||typeof n=="object"&&n!==null&&("$$typeof"in n||"render"in n)){const _=n;return u.jsx(_,{size:C})}return n})();return u.jsxs("button",{ref:m,type:d,disabled:l||i,className:ge("inline-flex items-center justify-center","font-medium rounded-md border","transition-all duration-200 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",g.base,g.hover,g.active,g.disabled,x,a&&"w-full",!h&&S&&"aspect-square p-0",c),...p,children:[r==="left"&&S,h&&u.jsx("span",{className:ge(i&&"opacity-0"),children:h}),r==="right"&&S,i&&h&&u.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx(Zp,{size:C})})]})});Mn.displayName="Button";const fd=y.forwardRef(({icon:t,size:e="md",...n},r)=>u.jsx(Mn,{ref:r,icon:t,size:e,...n}));fd.displayName="IconButton";const nE={showToast:()=>{},hideToast:()=>{}},rE=y.createContext(nE);function oE(){return y.useContext(rE)}function Pl(){return Pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pl.apply(null,arguments)}function iE(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sE=typeof document<"u",aE=function(){},lE=sE?y.useLayoutEffect:aE,cE=function(e){var n=le.useRef(e);return lE(function(){n.current=e}),n},Jp=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},uE=function(e,n){var r=le.useRef();return le.useCallback(function(i){e.current=i,r.current&&Jp(r.current,null),r.current=n,n&&Jp(n,i)},[n])},Sx=typeof document<"u",Kp={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},dE=function(e){Object.keys(Kp).forEach(function(n){e.style.setProperty(n,Kp[n],"important")})},em=dE,Pn=null,tm=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function fE(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Pn||(Pn=document.createElement("textarea"),Pn.setAttribute("tabindex","-1"),Pn.setAttribute("aria-hidden","true"),em(Pn)),Pn.parentNode===null&&document.body.appendChild(Pn);var i=t.paddingSize,a=t.borderSize,l=t.sizingStyle,c=l.boxSizing;Object.keys(l).forEach(function(g){var x=g;Pn.style[x]=l[x]}),em(Pn),Pn.value=e;var h=tm(Pn,t);Pn.value=e,h=tm(Pn,t),Pn.value="x";var d=Pn.scrollHeight-i,p=d*n;c==="border-box"&&(p=p+i+a),h=Math.max(p,h);var m=d*r;return c==="border-box"&&(m=m+i+a),h=Math.min(m,h),[h,d]}var nm=function(){},hE=function(e,n){return e.reduce(function(r,i){return r[i]=n[i],r},{})},pE=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],mE=Sx?!!document.documentElement.currentStyle:!1,gE=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=hE(pE,n),i=r.boxSizing;if(i==="")return null;mE&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),l=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:l}},xE=gE;function qd(t,e,n){var r=cE(n);y.useLayoutEffect(function(){var i=function(l){return r.current(l)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var yE=function(e,n){qd(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},bE=function(e){qd(window,"resize",e)},vE=function(e){qd(document.fonts,"loadingdone",e)},wE=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],CE=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,a=e.minRows,l=e.onChange,c=l===void 0?nm:l,h=e.onHeightChange,d=h===void 0?nm:h,p=iE(e,wE),m=p.value!==void 0,g=y.useRef(null),x=uE(g,n),b=y.useRef(0),C=y.useRef(),w=function(){var _=g.current,R=r&&C.current?C.current:xE(_);if(R){C.current=R;var T=fE(R,_.value||_.placeholder||"x",a,i),M=T[0],I=T[1];b.current!==M&&(b.current=M,_.style.setProperty("height",M+"px","important"),d(M,{rowHeight:I}))}},S=function(_){m||w(),c(_)};return Sx?(y.useLayoutEffect(w),yE(g,function(){if(!m){var k=g.current.value;requestAnimationFrame(function(){var _=g.current;_&&k!==_.value&&w()})}}),bE(w),vE(w),y.createElement("textarea",Pl({},p,{onChange:S,ref:x}))):y.createElement("textarea",Pl({},p,{onChange:c,ref:x}))},SE=y.forwardRef(CE),Nl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.PauseBreak=19]="PauseBreak",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Zero=48]="Zero",e[e.ClosedParen=48]="ClosedParen",e[e.One=49]="One",e[e.ExclamationMark=49]="ExclamationMark",e[e.Two=50]="Two",e[e.AtSign=50]="AtSign",e[e.Three=51]="Three",e[e.PoundSign=51]="PoundSign",e[e.Hash=51]="Hash",e[e.Four=52]="Four",e[e.DollarSign=52]="DollarSign",e[e.Five=53]="Five",e[e.PercentSign=53]="PercentSign",e[e.Six=54]="Six",e[e.Caret=54]="Caret",e[e.Hat=54]="Hat",e[e.Seven=55]="Seven",e[e.Ampersand=55]="Ampersand",e[e.Eight=56]="Eight",e[e.Star=56]="Star",e[e.Asterik=56]="Asterik",e[e.Nine=57]="Nine",e[e.OpenParen=57]="OpenParen",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.LeftWindowKey=91]="LeftWindowKey",e[e.RightWindowKey=92]="RightWindowKey",e[e.SelectKey=93]="SelectKey",e[e.Numpad0=96]="Numpad0",e[e.Numpad1=97]="Numpad1",e[e.Numpad2=98]="Numpad2",e[e.Numpad3=99]="Numpad3",e[e.Numpad4=100]="Numpad4",e[e.Numpad5=101]="Numpad5",e[e.Numpad6=102]="Numpad6",e[e.Numpad7=103]="Numpad7",e[e.Numpad8=104]="Numpad8",e[e.Numpad9=105]="Numpad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.DecimalPoint=110]="DecimalPoint",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.SemiColon=186]="SemiColon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.UnderScore=189]="UnderScore",e[e.PlusSign=187]="PlusSign",e[e.ForwardSlash=191]="ForwardSlash",e[e.Tilde=192]="Tilde",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.ClosedBracket=221]="ClosedBracket",e[e.Quote=222]="Quote"})(t.Key||(t.Key={}))})(Nl);var nt;(function(t){t.Rows="Rows",t.Columns="Columns",t.Cells="Cells",t.None="None"})(nt||(nt={}));var K;(function(t){t.Cell="Cell",t.ActiveCell="ActiveCell",t.CellValue="CellValue",t.AppendRow="AppendRow",t.AppendColumn="AppendColumn",t.ColumnHeader="ColumnHeader",t.GroupStatistic="GroupStatistic",t.ColumnStatistic="ColumnStatistic",t.ColumnHeaderMenu="ColumnHeaderMenu",t.ColumnPrimaryIcon="ColumnPrimaryIcon",t.ColumnDescription="ColumnDescription",t.ColumnResizeHandler="ColumnResizeHandler",t.ColumnFreezeHandler="ColumnFreezeHandler",t.RowHeaderDragHandler="RowHeaderDragHandler",t.RowHeaderExpandHandler="RowHeaderExpandHandler",t.RowHeaderCheckbox="RowHeaderCheckbox",t.RowGroupControl="RowGroupControl",t.RowGroupHeader="RowGroupHeader",t.RowCountLabel="RowCountLabel",t.RowHeader="RowHeader",t.AllCheckbox="AllCheckbox",t.FillHandler="FillHandler",t.Blank="Blank",t.None="None"})(K||(K={}));var qt;(function(t){t.Rows="Rows",t.Columns="Columns",t.None="None"})(qt||(qt={}));var hd;(function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"})(hd||(hd={}));var cr;(function(t){t.Drag="Drag",t.Expand="Expand",t.Checkbox="Checkbox"})(cr||(cr={}));var Xo;(function(t){t.All="all",t.None="none",t.Column="column",t.Row="row"})(Xo||(Xo={}));var rm;(function(t){t.Description="description"})(rm||(rm={}));var bn;(function(t){t.All="all",t.None="none",t.Column="column",t.Row="row",t.Cell="cell"})(bn||(bn={}));var vt;(function(t){t.Row="ROW",t.Group="GROUP",t.GroupTitle="GROUP_TITLE",t.AddRow="ADD_ROW",t.Append="APPEND"})(vt||(vt={}));const nn={rowHeight:32,rowHeadIconPaddingTop:8,appendRowHeight:32,groupHeaderHeight:48,maxRowCount:5,columnWidth:150,columnHeadHeight:32,columnHeadMenuSize:12,columnHeadPadding:8,columnAppendBtnWidth:100,columnResizeHandlerWidth:5,columnResizeHandlerPaddingTop:4,columnFreezeHandlerWidth:8,columnFreezeHandlerHeight:30,cellHorizontalPadding:8,cellVerticalPaddingXS:3,cellVerticalPaddingSM:6,cellVerticalPaddingMD:10,cellTextLineHeight:22,columnStatisticHeight:40,minColumnStatisticWidth:110,scrollBuffer:100,cellScrollBuffer:16,cellScrollBarWidth:5,cellScrollBarMinHeight:16,cellScrollBarPaddingX:1,cellScrollBarPaddingY:4},ia={x:0,y:0,rowIndex:-1/0,columnIndex:-1/0,type:K.None,isOutOfBounds:!0},kE={scrollTop:0,scrollLeft:0,isScrolling:!1},Fl={columnIndex:-1,width:0,x:0},sa={type:qt.None,ranges:[],delta:0,isDragging:!1},pd={sourceIndex:-1,targetIndex:-1,isFreezing:!1},_E=new Set([K.Cell,K.RowHeader,K.RowHeaderCheckbox,K.RowHeaderDragHandler,K.RowHeaderExpandHandler]),RE=(t={})=>{const{fontFamily:e="Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif"}=t;if(typeof window>"u"||document?.fonts?.ready==null)return;const n=document.createElement("canvas"),r=n?n.getContext("2d"):null,i=l=>{r&&(r.font=`${l}px ${e}`)},a=()=>i(13);return i(13),{ctx:r,reset:a,setFontSize:i}},Ll=RE(),ME=(t,e)=>{const[n,r]=t;for(const i of e){const[a,l]=i;if(a<=n&&l>=r)return!0}return!1},ta=t=>{const e=[];for(const n of t)for(let r=n[0];r<=n[1];r++)e.push(r);return e},Hl=(t,e,n)=>{const[r,i]=t,[a,l]=e,[c,h]=n,d=Math.min(a,c),p=Math.max(a,c),m=Math.min(l,h),g=Math.max(l,h);return r>=d&&r<=p&&i>=m&&i<=g},dt=(t,e,n)=>e>n?t>=n&&t<=e:t>=e&&t<=n,md=t=>{if(t.length<=1)return t;const e=[...t].sort((i,a)=>i[0]-a[0]),n=[];let r=[...e[0]];for(let i=1;i<e.length;i++){const a=e[i];a[0]<=r[1]+1?r=[r[0],Math.max(r[1],a[1])]:(n.push(r),r=[...a])}return n.push(r),n},TE=(t,e)=>{const n=[];let r=!1;for(const i of t)!r&&i[0]===e[0]&&e[1]===i[1]?r=!0:!r&&e[0]>i[0]&&e[1]<i[1]?(n.push([i[0],e[0]-1]),n.push([e[1]+1,i[1]]),r=!0):!r&&e[0]<=i[1]&&e[1]>=i[0]?(e[0]>i[0]&&n.push([i[0],e[0]-1]),e[1]<i[1]&&n.push([e[1]+1,i[1]]),r=!0):n.push([...i]);return r||n.push(e),md(n)},jE=(t,e,n)=>{if(t==null)return{isRowActive:!1,isCellActive:!1};const[r,i]=t;return{isRowActive:i===e,isCellActive:i===e&&r===n}},EE=(t,e,n)=>{const{isRowSelection:r,isCellSelection:i}=t;return r&&t.includes([e,e])?{isRowSelected:!0,isCellSelected:!0}:i&&t.includes([n,e])?{isRowSelected:!1,isCellSelected:!0}:{isRowSelected:!1,isCellSelected:!1}},IE={[cr.Drag]:K.RowHeaderDragHandler,[cr.Checkbox]:K.RowHeaderCheckbox,[cr.Expand]:K.RowHeaderExpandHandler},Bn={type:K.Blank,x:1/0,y:1/0,width:0,height:0},{groupHeaderHeight:DE,columnHeadPadding:om,columnResizeHandlerWidth:im,rowHeadIconPaddingTop:AE,columnStatisticHeight:xi,columnFreezeHandlerWidth:OE,minColumnStatisticWidth:sm}=nn,zE=t=>PE(t)||NE(t)||FE(t)||LE(t)||HE(t)||BE(t)||WE(t)||$E(t)||YE(t)||VE(t)||qE(t)||UE(t)||GE(t)||XE(t)||QE(t)||Bn,PE=t=>{const{isFreezing:e}=t;return e?{...Bn,type:K.ColumnFreezeHandler}:null},NE=t=>{const{coordInstance:e,scrollState:n,position:r,activeCell:i,activeCellBound:a,real2RowIndex:l}=t;if(i==null||a==null)return null;const{x:c,y:h}=r,{scrollTop:d,scrollLeft:p}=n,[m,g]=i,x=l(g),b=e.getRowOffset(x)-d,C=e.getColumnRelativeOffset(m,p),{width:w,height:S}=a;return dt(c,C,C+w)&&dt(h,b,b+S)?{type:K.ActiveCell,x:C,y:b,width:w,height:S,rowIndex:x,columnIndex:m,isOutOfBounds:!1}:null},FE=t=>{const{isOutOfBounds:e}=t;return e?Bn:null},LE=t=>{const{selection:e,isSelecting:n}=t;return!n||!e.isCellSelection?null:{...Bn,type:K.Cell}},HE=t=>{const{columnIndex:e}=t.columnResizeState;return e<=-1?null:{...Bn,type:K.ColumnResizeHandler}},BE=t=>{const{isDragging:e}=t.dragState;return e?{...Bn,type:K.ColumnHeader}:null},WE=t=>{const{position:e,scrollState:n,coordInstance:r,isColumnFreezable:i}=t;if(!i)return null;const{x:a,y:l}=e,{scrollTop:c}=n,{freezeRegionWidth:h,rowInitSize:d,rowCount:p,containerHeight:m}=r,g=r.getRowOffset(p)-c,x=Math.min(g,m-xi),b=OE/2;return dt(a,h-b,h+b)&&dt(l,d,x)?{...Bn,type:K.ColumnFreezeHandler}:null},$E=t=>{const{position:e,isColumnAppendEnable:n}=t,{rowIndex:r,columnIndex:i}=e;return n&&r>=-1&&i===-2?{...Bn,type:K.AppendColumn}:null},kx=t=>{const{columnStatistics:e,scrollState:n,coordInstance:r,getLinearRow:i,position:a,height:l}=t;if(e==null)return null;const{scrollLeft:c,scrollTop:h}=n,{x:d,y:p,rowIndex:m,columnIndex:g}=a;if(m>-1&&g>-1){const{type:w}=i(m),S=g===0,k=r.getColumnWidth(g),_=r.getColumnRelativeOffset(g,c),R=S?_+k-sm:_;if(w===vt.Group&&dt(d,R,R+(S?sm:k)))return{type:K.GroupStatistic,x:_,y:r.getRowOffset(m)-h,width:k,height:xi}}const x=dt(p,l-xi,l),b=x&&g>-1;if(x&&g===-1)return{type:K.RowCountLabel,x:0,y:l-xi,width:r.columnInitSize,height:xi};if(b){const{scrollLeft:w}=n;return{type:K.ColumnStatistic,x:r.getColumnRelativeOffset(g,w),y:l-xi,width:r.getColumnWidth(g),height:xi}}return null},YE=t=>kx(t),VE=t=>{const{position:e,theme:n,rowControls:r,coordInstance:i,isMultiSelectionEnable:a}=t,{x:l,y:c,rowIndex:h,columnIndex:d}=e;if(!a||h!==-1||d!==-1||!r.some(w=>w.type===cr.Checkbox))return null;const{iconSizeXS:p}=n,m=p/2,{rowInitSize:g,columnInitSize:x}=i,b=x/2-m,C=g/2-m;return dt(l,b,b+p)&&dt(c,C,C+p)?{type:K.AllCheckbox,x:b,y:C,width:p,height:p}:null},qE=t=>{const{position:e,getLinearRow:n}=t,{rowIndex:r,columnIndex:i}=e;if(i>=-1&&r>-1){const{type:a}=n(r);return a!==vt.Append?null:{...Bn,type:K.AppendRow}}return null},UE=t=>{const{position:e,theme:n,rowControls:r,scrollState:i,coordInstance:a}=t,{x:l,y:c,rowIndex:h,columnIndex:d}=e;if(h<=-1||d!==-1)return null;const p=t.getLinearRow(h);if(p.type===vt.Group)return{...Bn,type:K.RowGroupControl};if(p.type!==vt.Row)return null;const{iconSizeXS:m}=n,{scrollTop:g}=i,{columnInitSize:x}=a,b=m/2,C=x/(r.length||1),w=a.getRowOffset(h)-g;for(let S=0;S<r.length;S++){const k=r[S].type,_=IE[k];if(!r.some(z=>z.type===k))continue;const R=C*(S+.5)-b,T=w+AE,M=dt(l,R,R+m),I=dt(c,T,T+m);if(_&&M&&I)return{type:_,x:R,y:T,width:m,height:m}}return{...Bn,type:K.RowHeader}},GE=t=>{const{position:e,scrollState:n,coordInstance:r,getLinearRow:i}=t,{scrollLeft:a}=n,{x:l,y:c,rowIndex:h,columnIndex:d}=e;if(h<=-1||d!==0)return null;const{type:p}=i(h);if(p!==vt.Group)return null;const m=r.getColumnWidth(d),g=r.getColumnRelativeOffset(d,a);return dt(l,g,g+m)?{type:K.RowGroupHeader,x:g,y:c,width:m,height:DE}:null},XE=t=>{const{coordInstance:e,position:n,scrollState:r,getLinearRow:i}=t,{rowIndex:a,columnIndex:l}=n,{scrollLeft:c,scrollTop:h}=r;if(a>-1&&l>-1){if(i(a).type!==vt.Row)return null;const p=e.getColumnRelativeOffset(l,c),m=e.getRowOffset(a)-h,g=e.getColumnWidth(l),x=e.rowHeight;return{type:K.Cell,x:p,y:m,width:g,height:x}}return null},QE=t=>{const{position:e,scrollState:n,coordInstance:r,columns:i,theme:a,isColumnResizable:l,isColumnHeaderMenuVisible:c}=t,{x:h,y:d,rowIndex:p,columnIndex:m}=e,{iconSizeXS:g}=a;if(p===-1&&m>-1){const{scrollLeft:x}=n,{rowInitSize:b}=r,{isPrimary:C,description:w,hasMenu:S}=i[m],k=S&&c,_=r.getColumnWidth(m),R=r.getColumnRelativeOffset(m,x),T=R+_,M=k?T-om/2-g:T;if(k&&dt(h,M,M+g))return{type:K.ColumnHeaderMenu,x:R,y:0,width:g,height:b};const I=M-g-om/2,z=(b-g)/2;if(w&&dt(h,I,I+g)&&dt(d,z,z+g))return{type:K.ColumnDescription,x:I,y:z,width:g,height:g};const D=R+g/2,P=(b-g)/2;return C&&dt(h,D,D+g)&&dt(d,P,P+g)?{type:K.ColumnPrimaryIcon,x:D,y:P,width:g,height:g}:l&&(m!==0&&dt(h,R,R+im/2)||dt(h,T-im/2,T))?{...Bn,type:K.ColumnResizeHandler}:{type:K.ColumnHeader,x:R,y:0,width:_,height:b}}return null};function _x(t,e,n={}){const{offset:r={x:0,y:0},preferredPlacement:i="bottom-start",container:a,padding:l=8}=n,c=window.innerWidth,h=window.innerHeight;a?a.scrollLeft:window.scrollX,a?a.scrollTop:window.scrollY;const d=t.x+r.x,p=t.y+r.y;let m=d,g=p,x="top left";switch(i){case"bottom-start":m=d,g=p,x="top left";break;case"bottom-end":m=d-e.width,g=p,x="top right";break;case"top-start":m=d,g=p-e.height,x="bottom left";break;case"top-end":m=d-e.width,g=p-e.height,x="bottom right";break;case"right":m=d,g=p-e.height/2,x="left center";break;case"left":m=d-e.width,g=p-e.height/2,x="right center";break}return m+e.width>c-l&&(m=c-e.width-l,x.includes("left")&&(x=x.replace("left","right"))),m<l&&(m=l,x.includes("right")&&(x=x.replace("right","left"))),g+e.height>h-l&&(g=h-e.height-l,g<p&&(g=p-e.height,x.includes("top")&&(x=x.replace("top","bottom")))),g<l&&(g=l,x.includes("bottom")&&(x=x.replace("bottom","top"))),{left:Math.round(m),top:Math.round(g),transformOrigin:x}}const ZE={Shift:"Shift"},Un={Space:32,A:65,Z:90,ClosedParen:48,OpenParen:57,Numpad0:96,Numpad9:105,SemiColon:186,Tilde:192,OpenBracket:219,Quote:222,Multiply:106,Divide:111},JE=t=>{const{keyCode:e}=t,{metaKey:n,ctrlKey:r}=t;return n||r||e===Un.Space?!1:e>=Un.A&&e<=Un.Z||e>=Un.ClosedParen&&e<=Un.OpenParen||e>=Un.Numpad0&&e<=Un.Numpad9||e>=Un.SemiColon&&e<=Un.Tilde||e>=Un.OpenBracket&&e<=Un.Quote||e>=Un.Multiply&&e<=Un.Divide||e===Un.Space||e===61||e===173||(e===229||e===0)&&t.key!==ZE.Shift},Iu=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,r)*100)/100+" "+n[r]};var aa;(function(t){t.SingleLineText="singleLineText",t.LongText="longText",t.Number="number",t.SingleSelect="singleSelect",t.MultipleSelect="multipleSelect",t.Date="date",t.Checkbox="checkbox",t.User="user",t.Attachment="attachment",t.Link="link",t.Rating="rating",t.Formula="formula",t.Rollup="rollup",t.Count="count",t.CreatedTime="createdTime",t.LastModifiedTime="lastModifiedTime",t.CreatedBy="createdBy",t.LastModifiedBy="lastModifiedBy",t.AutoNumber="autoNumber"})(aa||(aa={}));aa.LongText,aa.SingleLineText,aa.Number;const KE=t=>{cancelAnimationFrame(t.id)},eI=(t,e)=>{const n=Date.now();function r(){Date.now()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}const i={id:requestAnimationFrame(r)};return i},Rx=({event:t,pageHeight:e,lineHeight:n})=>{let[r,i]=[t.deltaX,t.deltaY];return r===0&&t.shiftKey&&([i,r]=[0,i]),t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=n??32:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=e??document.body.clientHeight-180),[r,i]},Bl=(t,e=1)=>{const[n,r,i]=Mx(t);return n==null||r==null||i==null?t:`rgba(${+n},${+r},${+i},${e})`},Mx=t=>{let e,n,r;return t.length===4?(e="0x"+t[1]+t[1],n="0x"+t[2]+t[2],r="0x"+t[3]+t[3]):t.length===7&&(e="0x"+t[1]+t[2],n="0x"+t[3]+t[4],r="0x"+t[5]+t[6]),e==null||n==null||r==null?[]:[+e,+n,+r]},tI={staticWhite:"#FFFFFF",staticBlack:"#000000",iconFgCommon:qe.gray[500],iconBgCommon:qe.transparent,iconFgHighlight:qe.yellow[400],iconBgHighlight:qe.yellow[400],iconFgSelected:qe.blue[50],iconBgSelected:qe.black,iconSizeXS:16,iconSizeSM:20,iconSizeMD:24,iconSizeLG:32,fontSizeXXS:10,fontSizeXS:12,fontSizeSM:13,fontSizeMD:14,fontSizeLG:16,fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",fontSize:13,textColor:qe.gray[900],textColorSecondary:qe.gray[500],cellBg:qe.white,cellBgHovered:qe.slate[100],cellBgSelected:Bl(qe.zinc[200],.5),cellBgLoading:qe.violet[50],cellLineColor:qe.slate[200],cellLineColorActived:qe.black,cellTextColor:qe.zinc[800],cellTextColorHighlight:qe.violet[500],cellOptionBg:qe.gray[300],cellOptionBgHighlight:qe.slate[200],cellOptionTextColor:qe.black,groupHeaderBgPrimary:qe.slate[50],groupHeaderBgSecondary:qe.slate[100],groupHeaderBgTertiary:qe.slate[200],columnHeaderBg:qe.slate[50],columnHeaderBgHovered:qe.slate[100],columnHeaderBgSelected:qe.slate[200],columnHeaderNameColor:qe.zinc[800],columnResizeHandlerBg:qe.slate[400],columnDraggingPlaceholderBg:Bl(qe.black,.2),columnStatisticBgHovered:qe.gray[200],rowHeaderTextColor:qe.gray[500],appendRowBg:qe.slate[50],appendRowBgHovered:qe.slate[100],avatarBg:qe.gray[100],avatarTextColor:qe.gray[950],avatarSizeXS:16,avatarSizeSM:20,avatarSizeMD:24,themeKey:"light",scrollBarBg:qe.gray[400],interactionLineColorCommon:qe.slate[300],interactionLineColorHighlight:qe.violet[500],searchCursorBg:qe.amber[400],searchTargetIndexBg:qe.yellow[200],commentCountBg:qe.orange[400],commentCountTextColor:qe.white},nI={type:be.Attachment,draw:(t,e)=>{const{ctx:n,theme:r,rect:i}=e;if(!n||!r||!i)return;const{data:a}=t,{textColor:l,cellLineColor:c}=r,{x:h,y:d,width:p,height:m}=i;if(n.fillStyle=l,n.font=`${r.fontSize}px ${r.fontFamily}`,n.textAlign="left",n.textBaseline="middle",a&&a.length>0){const g=`${a.length} 个附件`,x=h+8,b=d+m/2;n.fillText(g,x,b)}else{const x=h+8,b=d+m/2;n.fillStyle=r.textColorSecondary,n.fillText("无附件",x,b)}e.isActive&&(n.strokeStyle=r.cellLineColorActived,n.lineWidth=2,n.strokeRect(h+1,d+1,p-2,m-2))},needsHover:!0},am=new Pi({max:1e3}),lm=new Pi({max:1e3}),xs=(t,e)=>{const{x:n=0,y:r=0,text:i,maxWidth:a,maxLines:l,isUnderline:c,fontSize:h=13,lineHeight:d=22,fill:p="black",textAlign:m="left",verticalAlign:g="middle",needRender:x=!0}=e;let b=[];const C="...",w=t.measureText(C).width;let S="",k=0;const _=`${i}-${h}-${a}-${l}`,R=lm.get(_);if(R)b=R;else{for(let M=0;M<i.length;M++){const I=i[M];if(I===`
`){if(b.length+1===l&&M<i.length-1){b.push({text:S+C,width:k+w}),S="",k=0;break}b.push({text:S,width:k}),S="",k=0;continue}const z=t.measureText(I??"").width;if(k+z>a)if(b.length<l-1)b.push({text:S,width:k}),S=I??"",k=z;else{if(k+w>a){let D=S,P=k;for(;P+w>a;)D=D.substring(0,D.length-1),P-=t.measureText(D[D.length-1]??"").width;S=D,k=P}b.push({text:S+C,width:k+w});break}else S+=I,k+=z}b.length<l&&S!==""&&b.push({text:S,width:k}),lm.set(_,b)}const T=g==="middle"?h/2:0;if(x){p&&(t.fillStyle=p,t.strokeStyle=p),t.textAlign=m,t.textBaseline=g;for(let M=0;M<b.length;M++)if(t.fillText(b[M].text,n,r+M*d+T),c){const I=t.measureText(b[M].text).width;t.beginPath(),t.moveTo(n,r+M*d+h-1),t.lineTo(n+I,r+M*d+h-1),t.stroke()}}return b},jn=(t,e)=>{const{x:n=0,y:r=0,text:i,fill:a,fontSize:l=13,textAlign:c="left",verticalAlign:h="middle",maxWidth:d=1/0,needRender:p=!0,isUnderline:m=!1}=e;let g=0,x="";const b=`${i}-${l}-${d}`,C=am.get(b);if(C)g=C.width,x=C.text;else{const S=t.measureText("...").width;for(let _=0;_<i.length;_++){const R=i[_]??"",T=t.measureText(R).width;if(g+T>d)break;x+=R,g+=T}if(x.length<i.length){for(;g+S>d&&x.length>0;)x=x.slice(0,-1),g-=t.measureText(x[x.length-1]??"").width;x=t.direction==="rtl"?"..."+x:x+"...",g=Math.min(g+S,d)}else x=i;am.set(b,{text:x,width:g})}if(p){const w=h==="middle"?l/2:0,S=c==="right"?n+d:n;a&&(t.fillStyle=a,t.strokeStyle=a),t.textAlign=c,t.textBaseline=h,t.fillText(x,S,r+w),m&&(t.beginPath(),t.moveTo(S,r+w+l/2-1),t.lineTo(S+g,r+w+l/2-1),t.stroke())}return{text:x,width:g}},Ei=(t,e)=>{const{x:n,y:r,points:i,stroke:a,lineWidth:l=1,closed:c=!1}=e,h=i.length;t.save(),t.beginPath(),a&&(t.strokeStyle=a),t.lineWidth=l,t.lineJoin="round",t.translate(n,r),t.moveTo(i[0]??0,i[1]??0);for(let d=2;d<h;d+=2)t.lineTo(i[d]??0,i[d+1]??0);c&&t.closePath(),t.stroke(),t.restore()},it=(t,e)=>{const{x:n,y:r,width:i,height:a,fill:l,stroke:c,radius:h,opacity:d}=e;if(t.beginPath(),l&&(t.fillStyle=l),c&&(t.strokeStyle=c),d&&(t.globalAlpha=d),h==null)t.rect(n,r,i,a);else{const p=typeof h=="number"?{tl:h,tr:h,br:h,bl:h}:{tl:Math.min(h.tl,a/2,i/2),tr:Math.min(h.tr,a/2,i/2),bl:Math.min(h.bl,a/2,i/2),br:Math.min(h.br,a/2,i/2)};t.moveTo(n+p.tl,r),t.arcTo(n+i,r,n+i,r+p.tr,p.tr),t.arcTo(n+i,r+a,n+i-p.br,r+a,p.br),t.arcTo(n,r+a,n,r+a-p.bl,p.bl),t.arcTo(n,r,n+p.tl,r,p.tl)}t.closePath(),l&&t.fill(),c&&t.stroke()},rI=(t,e)=>{const{points:n,radiusAll:r,fill:i,stroke:a}=e,l=function(m,g){const x=g.x-m.x,b=g.y-m.y,C=Math.sqrt(x*x+b*b),w=x/C,S=b/C;return{x,y:g.y-m.y,len:C,nx:w,ny:S,ang:Math.atan2(S,w)}};let c;const h=n.length;let d=n[h-1];t.beginPath(),i&&(t.fillStyle=i),a&&(t.strokeStyle=a);let p=d;for(let m=0;m<h;m++){p=n[m%h];const g=n[(m+1)%h];if(!p||!g)continue;const x=l(p,d),b=l(p,g),C=x.nx*b.ny-x.ny*b.nx,w=x.nx*b.nx-x.ny*-b.ny;let S=Math.asin(C<-1?-1:C>1?1:C),k=1,_=!1;w<0?S<0?S=Math.PI+S:(S=Math.PI-S,k=-1,_=!0):S>0&&(k=-1,_=!0),c=p?.radius!==void 0?p.radius:r;const R=S/2;let T=Math.abs(Math.cos(R)*c/Math.sin(R)),M;T>Math.min(x.len/2,b.len/2)?(T=Math.min(x.len/2,b.len/2),M=Math.abs(T*Math.sin(R)/Math.cos(R))):M=c;let I=p.x+b.nx*T,z=p.y+b.ny*T;I+=-b.ny*M*k,z+=b.nx*M*k,t.arc(I,z,M,x.ang+Math.PI/2*k,b.ang-Math.PI/2*k,_),d=p,p=g}t.closePath(),i&&t.fill(),a&&t.stroke()},Wl=(t,e)=>{const{x:n,y:r,size:i,radius:a=4,fill:l,stroke:c,isChecked:h=!1}=e,d=h?i:i-1;t.beginPath(),it(t,{x:n,y:r,width:d,height:d,radius:a,fill:l,stroke:c}),c&&(t.strokeStyle=c),h&&(t.save(),t.beginPath(),t.moveTo(n+i/4.23,r+i/1.97),t.lineTo(n+i/2.42,r+i/1.44),t.lineTo(n+i/1.29,r+i/3.25),t.lineJoin="round",t.lineCap="round",t.lineWidth=1.9,t.stroke(),t.restore())},oI=(t,e)=>{const{x:n,y:r,radius:i,lineWidth:a=5,value:l,maxValue:c,color:h}=e,d=-Math.PI/2,p=l>c?2*Math.PI:l/c*2*Math.PI;t.save(),t.lineWidth=a,t.strokeStyle=h,t.globalAlpha=.2,t.beginPath(),t.arc(n,r,i,0,2*Math.PI),t.stroke(),t.strokeStyle=h,t.globalAlpha=1,t.beginPath(),t.arc(n,r,i,d,p+d),t.stroke(),t.restore()},iI=(t,e)=>{const{x:n,y:r,width:i,height:a,radius:l=4,value:c,maxValue:h,color:d}=e,p=c>h?i:c/h*i;t.save(),t.fillStyle=d,t.globalAlpha=.2,t.beginPath(),it(t,{x:n,y:r,width:i,height:a,radius:l}),t.fill(),t.save(),t.beginPath(),t.rect(n,r,p,a),t.clip(),t.fillStyle=d,t.globalAlpha=1,it(t,{x:n,y:r,width:i,height:a,radius:l}),t.fill(),t.restore(),t.restore()},sI=(t,e)=>{const{x:n,y:r,width:i,height:a,values:l,displayValues:c=[],color:h,axisColor:d,yAxis:p,font:m,hoverX:g,hoverAmount:x=0}=e,[b,C]=p??[Math.min(...l),Math.max(...l)],w=C-b===0?1:C-b,S=C<=0?r:b>=0?r+a:r+a*(C/w);let k=l.map(D=>Math.min(1,Math.max(0,(D-b)/w)));k.length===1&&(k=[k[0]??0,k[0]??0]),b<=0&&C>=0&&(t.beginPath(),t.moveTo(n,S),t.lineTo(n+i,S),t.globalAlpha=.4,t.lineWidth=1,t.strokeStyle=d,t.stroke(),t.globalAlpha=1),t.beginPath();const _=i/(k.length-1),R=k.map((D,P)=>({x:n+_*P,y:r+a-D*a}));if(R.length>2){const D=R[0];if(!D)return;t.moveTo(D.x,D.y);for(let $=0;$<R.length-2;$++){const Y=R[$],te=R[$+1];if(!Y||!te)continue;const J=(Y.x+te.x)/2,re=(Y.y+te.y)/2;t.quadraticCurveTo(Y.x,Y.y,J,re)}const P=R.length-2,L=R[P],H=R[P+1];L&&H&&t.quadraticCurveTo(L.x,L.y,H.x,H.y)}else{const D=R[0],P=R[1];D&&P&&(t.moveTo(D.x,D.y),t.lineTo(P.x,P.y))}t.strokeStyle=h,t.lineWidth=1+x*.5,t.stroke(),t.lineTo(n+i,S),t.lineTo(n,S),t.closePath(),t.globalAlpha=.2+.2*x;const T=t.createLinearGradient(0,r,0,r+a*1.4);T.addColorStop(0,h);const[M,I,z]=Mx(h);if(T.addColorStop(1,`rgba(${M}, ${I}, ${z}, 0)`),t.fillStyle=T,t.fill(),t.globalAlpha=1,g!=null){t.beginPath();const D=Math.min(l.length-1,Math.max(0,Math.round(g/_)));t.moveTo(n+D*_,r),t.lineTo(n+D*_,r+a),t.lineWidth=1,t.strokeStyle=d,t.stroke(),t.save(),t.font=m,jn(t,{x:n,y:r,text:String(c[D]??l[D]),fill:d}),t.restore()}},aI=(t,e)=>{const{x:n,y:r,width:i,height:a,values:l,displayValues:c=[],color:h,axisColor:d,yAxis:p,font:m,hoverX:g}=e,x=8,[b,C]=p??[Math.min(...l),Math.max(...l)],w=b>0?0:b,S=C-w===0?1:C-w,k=C<=0?r:w>=0?r+a:r+a*(C/S),_=l.map(z=>Math.min(1,Math.max(0,(z-w)/S)));w<=0&&C>=0&&(t.beginPath(),t.moveTo(n,k),t.lineTo(n+i,k),t.globalAlpha=.4,t.lineWidth=.5,t.strokeStyle=d,t.stroke(),t.globalAlpha=1),t.beginPath();const R=2,T=(_.length-1)*R,M=Math.min((i-T)/_.length,x);let I=n;for(const z of _){let D=r+a-z*a;D=D===k?k-.5:D,t.moveTo(I,k),t.lineTo(I+M,k),t.lineTo(I+M,D),t.lineTo(I,D),I+=M+R}if(t.fillStyle=h,t.fill(),g!=null&&g>=0){t.beginPath();const z=Math.min(i/_.length,x+R),D=g>I-n-R?null:Math.min(_.length-1,Math.max(0,Math.floor(g/z)));if(D==null)return;const P=n+D*z+(z-R)/2;t.moveTo(P,r),t.lineTo(P,r+a),t.lineWidth=1,t.strokeStyle=d,t.stroke(),t.save(),t.font=m,jn(t,{x:n,y:r,text:String(c[D]??l[D]),fill:d}),t.restore()}},lI=(t,e)=>{const{x:n,y:r,width:i,height:a,fill:l,stroke:c,defaultText:h,textColor:d,img:p,fontSize:m=10,fontFamily:g}=e;if(t.save(),t.beginPath(),c&&(t.strokeStyle=c),t.arc(n+i/2,r+a/2,i/2,0,Math.PI*2,!1),l&&(t.fillStyle=l),l&&t.fill(),c&&t.stroke(),p){t.clip(),t.drawImage(p,n,r,i,a),c&&t.stroke(),t.restore();return}const x=h.slice(0,1);t.beginPath(),d&&(t.fillStyle=d),t.font=`${m}px ${g}`,jn(t,{x:n+i/2,y:r+a/2-m/2,text:x,textAlign:"center",fontSize:m}),l&&t.fill(),c&&t.stroke(),t.restore()},{cellHorizontalPadding:ul}=nn,Tx={type:be.Boolean,needsHover:!0,needsHoverPosition:!0,draw:(t,e)=>{const{data:n,isMultiple:r,contentAlign:i="center"}=t,{ctx:a,rect:l,theme:c}=e;if(!a||!l||!c)return;const{x:h,y:d,width:p,height:m}=l,{iconSizeSM:g,staticWhite:x,iconBgSelected:b,rowHeaderTextColor:C}=c,w=g/2;if(!r){let S=p/2-w;return i==="left"?S=ul:i==="right"&&(S=p-ul-g),Wl(a,{x:h+S,y:d+m/2-w,size:g,stroke:n?x:C,fill:n?b:void 0,isChecked:n})}if(r&&Array.isArray(n)){a.save(),a.beginPath(),a.rect(h,d,p,m),a.clip();let S=h+ul;const k=d+m/2-w;n.forEach(_=>{_&&(Wl(a,{x:S,y:k,size:g,stroke:x,fill:b,isChecked:!0}),S+=g+ul/2)}),a.restore()}},checkRegion:(t,e,n)=>{const{data:r,readonly:i}=t;if(i)return{type:Xe.Blank};const{hoverCellPosition:a,width:l,height:c,theme:h}=e;if(!a||!h)return{type:Xe.Blank};const{x:d,y:p}=a,{iconSizeSM:m}=h,g=m/2;return dt(d,l/2-g,l/2+g)&&dt(p,c/2-g,c/2+g)?{type:Xe.Update,data:!r||null}:{type:Xe.Blank}},onClick:(t,e,n)=>{const r=Tx.checkRegion?.(t,e,!0);!r||r.type===Xe.Blank||n(r)}},{cellHorizontalPadding:Tl}=nn,cI=4,cm=24,uI=60,dI=126,gd=new Pi({max:10}),fI=t=>{const{id:e="",data:n,readonly:r}=t;if(r)return;const{tableId:i,statusHook:a,fieldOptions:l}=n,[c="",h=""]=e.split("-");!a||(a.checkLoading?.(h,c)??!1)||a.buttonClick({tableId:i,recordId:c,fieldId:h,name:l.label})},hI=(t,e)=>{const{x:n,y:r,width:i,height:a,text:l,maxTextWidth:c,textColor:h,bgColor:d,theme:p,opacity:m=1}=e,{fontSizeXS:g,fontFamily:x}=p;t.save(),t.font=`${g}px ${x}`,it(t,{x:n,y:r,width:i,height:a,radius:cI,fill:d,opacity:m}),jn(t,{text:l,x:n+i/2,y:r+(a-g)/2+.5,fill:h,maxWidth:c,fontSize:g,textAlign:"center"}),t.restore()},um=(t,e,n=!1)=>{const{data:r}=t,{fieldOptions:i}=r,{width:a,ctx:l,theme:c,height:h}=e,{fontSizeXS:d,fontFamily:p}=c,m=`${i.label}-${a}`;if(!n){const w=gd.get(m);if(w)return w}l.save(),l.font=`${d}px ${p}`;const{width:g}=jn(l,{text:i.label,maxWidth:dI-2*Tl,fontSize:d,needRender:!1});l.restore();const b=Math.max(g,uI-2*Tl)+2*Tl,C={x:(a-b)/2,y:(h-cm)/2,width:b,height:cm};return gd.set(m,C),C},jx={type:be.Button,needsHover:!0,needsHoverPosition:!0,needsHoverWhenActive:!0,needsHoverPositionWhenActive:!0,measure:(t,e)=>{const{width:n,height:r,ctx:i,theme:a}=e;if(!i||!a)return{width:n??0,height:r??0,totalHeight:r??0};const l=um(t,{width:n,ctx:i,theme:a,height:r},!0);return{width:n??0,height:Math.max(r??0,l?.height??0),totalHeight:l?.height??r??0}},draw:(t,e)=>{const{data:n,id:r="",readonly:i}=t,{fieldOptions:a,statusHook:l}=n,{ctx:c,rect:h,theme:d}=e;if(!c||!h||!d)return;const{x:p,y:m,width:g,height:x}=h,b=i?Gt.Gray:a.color??Gt.Gray,C=Ol.getHexForColor(b),w=Ol.shouldUseLightTextOnColor(b)?qe.white:qe.black,S=um(t,{width:g,ctx:c,theme:d,height:x}),[k="",_=""]=r.split("-"),R=l?.checkLoading?.(_,k)??!1;return hI(c,{x:p+S.x,y:m+S.y,width:S.width,height:S.height,text:a.label??"",maxTextWidth:S.width-2*Tl,textColor:w,bgColor:C,theme:d,opacity:R?.8:1})},checkRegion:(t,e,n)=>{const{data:r}=t,{fieldOptions:i}=r,{hoverCellPosition:a,width:l}=e,{x:c,y:h}=a,d=`${i.label}-${l}`,p=gd.get(d);return p&&dt(c,p.x,p.x+p.width)&&dt(h,p.y,p.y+p.height)?{type:Xe.Hover,data:{x:p.x,y:p.y,width:p.width,height:p.height}}:{type:Xe.Blank}},onClick:(t,e,n)=>{const r=jx.checkRegion?.(t,e,!0);!r||r.type===Xe.Blank||fI(t)}},{cellHorizontalPadding:ls,cellVerticalPaddingXS:dl}=nn,pI={type:be.Chart,needsHover:!0,needsHoverPosition:!0,draw:(t,e)=>{const{ctx:n,rect:r,theme:i,hoverCellPosition:a}=e;if(!n||!r||!i)return;const{rowHeaderTextColor:l,fontFamily:c}=i,{x:h,y:d,width:p,height:m}=r,{data:g,displayData:x,chartType:b=oa.Line,color:C=l}=t;if(!g?.length||!x?.length)return;const w=a?.x??0,S=a?1:0;b===oa.Bar&&aI(n,{x:h+ls,y:d+dl,width:p-ls*2,height:m-dl*2,values:g,color:C,axisColor:l,font:`8px ${c}`,hoverX:w?w-ls:void 0,displayValues:x}),b===oa.Line&&sI(n,{x:h+ls,y:d+dl,width:p-ls*2,height:m-dl*2,values:g,color:C,axisColor:l,font:`8px ${c}`,hoverX:w?w-ls:void 0,hoverAmount:S,displayValues:x})}},mI={type:be.Date,draw:(t,e)=>{const{ctx:n,theme:r,rect:i}=e;if(!n||!r||!i)return;const{data:a}=t,{textColor:l,cellLineColor:c}=r,{x:h,y:d,width:p,height:m}=i;if(n.fillStyle=l,n.font=`${r.fontSize}px ${r.fontFamily}`,n.textAlign="left",n.textBaseline="middle",a){const g=typeof a=="string"?a:String(a),x=h+8,b=d+m/2;n.fillText(g,x,b)}e.isActive&&(n.strokeStyle=r.cellLineColorActived,n.lineWidth=2,n.strokeRect(h+1,d+1,p-2,m-2))},needsHover:!0};var Fn;(function(t){t.Row="Row",t.Column="Column"})(Fn||(Fn={}));class gI{constructor({rowHeight:e,columnWidth:n,rowCount:r,pureRowCount:i,columnCount:a,containerWidth:l,containerHeight:c,rowInitSize:h=0,columnInitSize:d=0,rowHeightMap:p={},columnWidthMap:m={},freezeColumnCount:g=1}){Object.defineProperty(this,"defaultRowHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultColumnWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pureRowCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rowCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"columnCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_containerWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_containerHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rowHeightMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"columnWidthMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rowInitSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"columnInitSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastRowIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"lastColumnIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"rowMetaDataMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"columnMetaDataMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_freezeColumnCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultRowHeight=e,this.defaultColumnWidth=n,this.rowCount=r,this.pureRowCount=i,this.columnCount=a,this.rowInitSize=h,this.columnInitSize=d,this._containerWidth=l,this._containerHeight=c,this.rowHeightMap=p,this.columnWidthMap=m,this._freezeColumnCount=g}get freezeRegionWidth(){return this.getColumnOffset(this._freezeColumnCount)}get freezeColumnCount(){return this._freezeColumnCount}set freezeColumnCount(e){this._freezeColumnCount=e}get containerWidth(){return this._containerWidth}set containerWidth(e){this._containerWidth=e}get containerHeight(){return this._containerHeight}set containerHeight(e){this._containerHeight=e}get columnWidth(){return this.defaultColumnWidth}set columnWidth(e){this.defaultColumnWidth=e}get rowHeight(){return this.defaultRowHeight}set rowHeight(e){this.defaultRowHeight=e}get totalWidth(){const{offset:e,size:n}=this.getCellMetaData(this.columnCount-1,Fn.Column);return e+n}get totalHeight(){const{offset:e,size:n}=this.getCellMetaData(this.rowCount-1,Fn.Row);return e+n}getRowHeight(e){return this.rowHeightMap[e]??this.defaultRowHeight}getColumnWidth(e){return this.columnWidthMap[e]??this.defaultColumnWidth}getCellMetaData(e,n){let r,i,a,l;const c=n===Fn.Column;if(c?(i=this.columnWidth,l=this.columnInitSize,a=this.lastColumnIndex,r=this.columnMetaDataMap):(i=this.rowHeight,l=this.rowInitSize,a=this.lastRowIndex,r=this.rowMetaDataMap),e>a){const h=r?.[a];a>=0&&h&&(l=h.offset+h.size);for(let d=a+1;d<=e;d++){const p=(c?this.columnWidthMap[d]:this.rowHeightMap[d])??i;r[d]={offset:l,size:p},l+=p}c?this.lastColumnIndex=e:this.lastRowIndex=e}return r[e]||{size:0,offset:0}}findNearestCellIndexLinear(e,n,r){const i=r===Fn.Column?this.columnCount:this.rowCount;let a=1;for(;e<i&&this.getCellMetaData(e,r).offset<n;)e+=a,a*=2;return this.findNearestCellIndexBinary(n,Math.floor(e/2),Math.min(e,i-1),r)}findNearestCellIndexBinary(e,n,r,i){for(;n<=r;){const a=n+Math.floor((r-n)/2),l=this.getCellMetaData(a,i).offset;if(l===e)return a;l<e?n=a+1:l>e&&(r=a-1)}return n>0?n-1:0}findNearestCellIndex(e,n){let r,i;return n===Fn.Column?(r=this.columnMetaDataMap,i=this.lastColumnIndex):(r=this.rowMetaDataMap,i=this.lastRowIndex),(i>0?r[i].offset:0)>=e?this.findNearestCellIndexBinary(e,0,i,n):this.findNearestCellIndexLinear(Math.max(0,i),e,n)}getRowStartIndex(e){return this.findNearestCellIndex(e,Fn.Row)}getRowStopIndex(e,n){const r=this.getCellMetaData(e,Fn.Row),i=n+this._containerHeight;let a=r.offset+r.size,l=e;for(;l<this.rowCount-1&&a<i;)l++,a+=this.getCellMetaData(l,Fn.Row).size;return l}getColumnStartIndex(e){return this.findNearestCellIndex(e,Fn.Column)}getColumnStopIndex(e,n){const r=this.getCellMetaData(e,Fn.Column),i=n+this._containerWidth;let a=r.offset+r.size,l=e;for(;l<this.columnCount-1&&a<i;)l++,a+=this.getCellMetaData(l,Fn.Column).size;return l}getRowOffset(e){return this.getCellMetaData(e,Fn.Row).offset}getColumnOffset(e){return this.getCellMetaData(e,Fn.Column).offset}getColumnRelativeOffset(e,n){const r=this.getColumnOffset(e);return e<this._freezeColumnCount?r:r-n}refreshColumnDimensions({columnCount:e,columnInitSize:n=0,columnWidthMap:r={}}){this.columnCount=e,this.columnInitSize=n,this.columnWidthMap=r,this.lastColumnIndex=-1}}const Du=[],Ud=65536;function dm(t,e){return e*Ud+t}function Ex(t){return t%Ud}function Ix(t,e){return(t-e)/Ud}function xI(t){const e=Ex(t),n=Ix(t,e);return[e,n]}class yI{constructor(){Object.defineProperty(this,"imageLoaded",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),Object.defineProperty(this,"loadedLocations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"visibleWindow",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,width:0,height:0}}),Object.defineProperty(this,"freezeColumnCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isInWindow",{enumerable:!0,configurable:!0,writable:!0,value:e=>{const n=Ex(e),r=Ix(e,n),i=this.visibleWindow;return n<this.freezeColumnCount&&r>=i.y&&r<=i.y+i.height?!0:n>=i.x&&n<=i.x+i.width&&r>=i.y&&r<=i.y+i.height}}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"sendLoaded",{enumerable:!0,configurable:!0,writable:!0,value:Lt.throttle(()=>{this.imageLoaded(this.loadedLocations),this.loadedLocations=[]},20)}),Object.defineProperty(this,"clearOutOfWindow",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const e=Object.keys(this.cache);for(const n of e){const r=this.cache[n];let i=!1;for(let a=0;a<r.cells.length;a++){const l=r.cells[a];if(this.isInWindow(l)){i=!0;break}}i?r.cells=r.cells.filter(this.isInWindow):(r.cancel(),delete this.cache[n])}}})}setCallback(e){this.imageLoaded=e}setWindow(e,n){this.visibleWindow.x===e.x&&this.visibleWindow.y===e.y&&this.visibleWindow.width===e.width&&this.visibleWindow.height===e.height&&this.freezeColumnCount===n||(this.visibleWindow=e,this.freezeColumnCount=n,this.clearOutOfWindow())}loadImage(e,n,r,i){let a=!1;const l=Du.pop()??new Image;let c=!1;const h={img:void 0,cells:[dm(n,r)],url:e,cancel:()=>{c||(c=!0,Du.length<12?Du.unshift(l):a||(l.src=""))}},d=new Promise(p=>l.addEventListener("load",()=>p(null)));requestAnimationFrame(async()=>{try{l.src=e,await d,await l.decode();const p=this.cache[i];if(p!==void 0&&!c){p.img=l;for(const m of p.cells)this.loadedLocations.push(xI(m));a=!0,this.sendLoaded()}}catch{h.cancel()}}),this.cache[i]=h}loadOrGetImage(e,n,r){const i=e,a=this.cache[i];if(a!==void 0){const l=dm(n,r);return a.cells.includes(l)||a.cells.push(l),a.img}else this.loadImage(e,n,r,i)}}class fo{constructor(e=nt.None,n=[]){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ranges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e,this.ranges=n}get isColumnSelection(){return this.type===nt.Columns}get isRowSelection(){return this.type===nt.Rows}get isCellSelection(){return this.type===nt.Cells}get isNoneSelection(){return this.type===nt.None}reset(){return na}set(e,n){if(!Array.isArray(n))throw Error("Ranges of the selection should be an array type!");if(e===nt.Cells&&n.length<2)throw Error("Ranges of type cells should have a length greater than 2!");if([nt.Columns,nt.Rows].includes(e)&&!n.length)throw Error("Ranges of type columns or rows should have a length greater than 1!");return new fo(e,n)}setRanges(e){return new fo(this.type,e)}isOverlap(e,n){return!(e[1]<n[0]||e[0]>n[1])}expand(e){switch(this.type){case nt.Rows:case nt.Columns:{let n=!1;const r=this.ranges.map(i=>this.isOverlap(i,e)?(n=!0,[Math.min(i[0],e[0]),Math.max(i[1],e[1])]):i);return n||r.push(e),new fo(this.type,md(r))}case nt.Cells:return new fo(this.type,[this.ranges[0],e]);default:return na}}merge(e){switch(this.type){case nt.Rows:case nt.Columns:{const n=TE(this.ranges,e);return n.length?new fo(this.type,n):na}case nt.Cells:return new fo(this.type,[this.ranges[0],e]);default:return na}}flatten(){const[e,n]=this.ranges;return this.isCellSelection?[...e,...n]:ta(this.ranges)}serialize(){switch(this.type){case nt.Rows:case nt.Columns:return md(this.ranges);case nt.Cells:{const[e,n]=this.ranges;return[[Math.min(e[0],n[0]),Math.min(e[1],n[1])],[Math.max(e[0],n[0]),Math.max(e[1],n[1])]]}default:return[]}}includes(e){if(e==null)return!1;switch(this.type){case nt.Rows:case nt.Columns:return ME(e,this.ranges);case nt.Cells:return Hl(e,this.ranges[0],this.ranges[1]);default:return!1}}equals(e){return this.ranges.length!==e.length?!1:Lt.isEqual(this.ranges,e)}}const na=new fo(nt.None,[]),wo=(t,e,n=16,r=2)=>`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24" fill="none" stroke="${e.fgColor}" stroke-width="${r}" stroke-linecap="round" stroke-linejoin="round"><g stroke="${e.fgColor}">${t}</g></svg>`,bI=(t,e,n=16,r=1)=>`<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${n}" viewBox="0 0 24 24" fill="${e.fgColor}" stroke="${e.fgColor}" stroke-width="${r}" stroke-linecap="round" stroke-linejoin="round">${t}</svg>`,vI=t=>wo('<circle cx="9" cy="12" r="1" /><circle cx="9" cy="5" r="1" /><circle cx="9" cy="19" r="1" /><circle cx="15" cy="12" r="1" /><circle cx="15" cy="5" r="1" /><circle cx="15" cy="19" r="1" />',t),wI=t=>wo('<polyline points="15 3 21 3 21 9" /><polyline points="9 21 3 21 3 15" /><line x1="21" y1="3" x2="14" y2="10" /><line x1="3" y1="21" x2="10" y2="14" />',t),CI=t=>wo('<line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" />',t),SI=t=>wo('<circle cx="12" cy="12" r="10" /><line x1="12" y1="8" x2="12" y2="12" /><line x1="12" y1="16" x2="12.01" y2="16" />',t),kI=t=>wo('<line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />',t),_I=t=>wo('<polyline points="6 9 12 15 18 9" />',t),RI=t=>wo('<polyline points="9 18 15 12 9 6" />',t),MI=t=>wo('<rect x="3" y="11" width="18" height="11" rx="2" ry="2" /><path d="M7 11V7a5 5 0 0 1 10 0v4" />',t),TI=t=>wo('<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" /><line x1="1" y1="1" x2="23" y2="23" />',t),jI=t=>bI('<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />',t),EI={add:CI,drag:vI,detail:wI,description:SI,close:kI,expand:_I,collapse:RI,lock:MI,eyeOff:TI,star:jI};var Xn;(function(t){t.Add="add",t.Drag="drag",t.Detail="detail",t.Description="description",t.Close="close",t.Expand="expand",t.Collapse="collapse",t.Lock="lock",t.EyeOff="eyeOff",t.Star="star"})(Xn||(Xn={}));const II=(t,e)=>{const{iconBgCommon:n,iconBgSelected:r,iconFgCommon:i,iconFgSelected:a}=e;return t==="selected"?[a,r]:[i,n]};class DI{constructor(e,n){Object.defineProperty(this,"onSettled",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"spriteMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"icons",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inFlight",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.icons={...EI,...e}}drawSprite(e,n){const{sprite:r,variant:i="normal",x:a,y:l,size:c,alpha:h=1,theme:d,colors:p}=n,[m,g]=p??II(i,d),x=c*Math.ceil(window.devicePixelRatio),b=`${g}_${m}_${x}_${r}`;let C=this.spriteMap.get(b);if(C===void 0){const w=this.icons[r];if(w===void 0)return;C=document.createElement("canvas");const S=C.getContext("2d");if(S===null)return;const k=new Image;k.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(w({fgColor:m,bgColor:g}))}`,this.spriteMap.set(b,C);const _=k.decode();if(_===void 0)return;this.inFlight++,_.then(()=>{S.drawImage(k,0,0,x,x)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled?.()})}else h<1&&(e.globalAlpha=h),e.drawImage(C,0,0,x,x,a,l,c,c),h<1&&(e.globalAlpha=1)}}const fm=new Pi({max:100}),Au=4,{cellHorizontalPadding:Ou,cellVerticalPaddingXS:Xs}=nn,AI=(t,e)=>{const n=[];for(let r=0;r<t.length;r++){const{id:i,url:a}=t[r],l=e(a);l!==void 0&&n.push({id:i,img:l})}return n},hm=(t,e)=>`${String(e)}-${t.map(({id:n})=>n).join(",")}`,Dx={type:be.Image,needsHoverWhenActive:!0,needsHoverPositionWhenActive:!0,draw:(t,e)=>{const{rect:n,columnIndex:r,rowIndex:i,theme:a,ctx:l,imageManager:c,isActive:h,spriteManager:d}=e;if(!n||!a||!l)return;const{iconSizeSM:p,cellLineColor:m}=a,{data:g,readonly:x}=t,{x:b,y:C,width:w,height:S}=n,k=!x&&h,_=k?p+2:0,R=S-Xs*2,T=AI(g,D=>c.loadOrGetImage(D,r,i));if(k&&d.drawSprite(l,{sprite:Xn.Add,x:b+Ou-2,y:C+(S-p)/2,size:p,theme:a}),!T.length)return;l.save(),l.beginPath(),l.rect(b,C,w-.5,S),l.clip();const M=hm(g,w),I=[];let z=b+Ou+_;for(const D of T){if(z>b+w)break;const{id:P,img:L}=D,H=L.width*(R/L.height);it(l,{x:z,y:C+Xs,width:H,height:R,radius:Au,stroke:m}),l.save(),it(l,{x:z,y:C+Xs,width:H,height:R,radius:Au}),l.clip(),l.drawImage(L,z,C+Xs,H,R),l.restore(),I.push({id:P,x:z-b,y:Xs,width:H,height:R}),z+=H+Au}fm.set(M,I),l.restore()},checkRegion:(t,e,n)=>{const{data:r,readonly:i}=t,{width:a,height:l,theme:c,isActive:h,hoverCellPosition:d}=e,p=!i&&h,{iconSizeSM:m}=c,{x:g,y:x}=d,b=Ou,C=(l-m)/2;if(p&&Hl([g,x],[b,C],[b+m,C+m]))return{type:Xe.ToggleEditing,data:null};const w=hm(r,a),S=fm.get(w);if(S==null)return{type:Xe.Blank};for(let k=0;k<S.length;k++){const{id:_,x:R,y:T,width:M,height:I}=S[k];if(Hl([g,x],[R,T],[R+M,T+I]))return{type:Xe.Preview,data:_}}return{type:Xe.Blank}},onClick:(t,e,n)=>{const r=Dx.checkRegion?.(t,e,!0);if(!(!r||r.type===Xe.Blank)){if(r.type===Xe.Preview)return t?.onPreview?.(r.data),n(r);n(r)}}},{cellHorizontalPadding:la,cellVerticalPaddingMD:xd,cellTextLineHeight:hs,maxRowCount:OI}=nn,zu=({ctx:t,data:e,rect:n,theme:r,isActive:i})=>{const a=[],{x:l,y:c,width:h,height:d}=n,{fontSizeSM:p}=r,m=h-2*la,g=d-xd,x=i?1/0:Math.max(1,Math.floor(g/hs));let b=1,C=0,w=l+la,S=c+xd,k=[];if(Array.isArray(e))k=e.filter(_=>_!=null).map(_=>String(_));else if(e&&typeof e=="object"){const _=e,R=_.title||_.text||_.url||"";R&&(k=[R])}else e!=null&&(k=[String(e)]);for(const _ of k){const R=xs(t,{text:_,maxLines:x,maxWidth:m,needRender:!1,fontSize:p});for(const{text:T,width:M}of R){if(b>x)break;a.push({x:w,y:S,text:T,width:M,link:_,key:String(C)}),b++,S+=hs,w=l+la}C++}return a},Ax={type:be.Link,needsHover:!0,needsHoverPosition:!0,measure:(t,e)=>{const{data:n}=t,{ctx:r,theme:i,width:a,height:l}=e;if(!r||!i)return{width:a??0,height:l??0,totalHeight:l??0};if(Array.isArray(n)?!n.length:n&&typeof n=="object"?!n.title&&!n.text&&!n.url:!n||n==="")return{width:a,height:l,totalHeight:l};const h=zu({ctx:r,data:n,rect:{x:0,y:0,width:a,height:l},theme:i,isActive:!0}),d=h.length;if(!d)return{width:a,height:l,totalHeight:l};const p=h[d-1].y+hs,m=xd+OI*hs,g=Math.max(Math.min(p,m),l);return{width:a,height:g,totalHeight:p}},draw:(t,e)=>{const{ctx:n,rect:r,theme:i,hoverCellPosition:a,isActive:l}=e;if(!n||!r||!i)return;const{data:c}=t,{x:h,y:d,width:p,height:m}=r,g=a?.x??-1,x=a?.y??-1,{fontSizeSM:b,cellTextColorHighlight:C}=i;n.save(),n.beginPath(),!(Array.isArray(c)?!c.length:c&&typeof c=="object"?!c.title&&!c.text&&!c.url:!c||c==="")&&!l&&(n.rect(h,d,p,m),n.clip());const S=zu({ctx:n,data:c,rect:r,theme:i,isActive:l});n.textAlign="left",n.textBaseline="middle",n.fillStyle=C;let k="",_="";const R=b/2;S.forEach(T=>{const{x:M,y:I,width:z,text:D,link:P,key:L}=T;g>=la&&g<=la+z&&x>=I-d&&x<=I-d+hs&&(k=P,_=L),n.fillText(D,M,I+R)}),k&&S.forEach(T=>{const{x:M,y:I,width:z,key:D}=T;D===_&&Ei(n,{x:M,y:I,points:[0,b-1,z,b-1],stroke:C})}),n.restore()},checkRegion:(t,e,n)=>{const{hoverCellPosition:r,width:i,height:a,isActive:l,theme:c,activeCellBound:h}=e,{x:d,y:p}=r,{fontSizeSM:m}=c,{data:g}=t;if(Ll==null)return{type:Xe.Blank};const{ctx:x,setFontSize:b}=Ll;if(!x)return{type:Xe.Blank};const C=h?.scrollTop??0,w=p+C;b(m);const S=zu({ctx:x,data:g,rect:{x:0,y:0,width:i,height:a},theme:c,isActive:l});for(const k of S){const{x:_,y:R,width:T,link:M}=k;if(d>=_&&d<=_+T&&w>=R&&w<=R+hs){let I=M;if(Array.isArray(g))I=M;else if(g&&typeof g=="object"){const z=g;I=z.url||z.text||z.title||M}else typeof g=="string"&&(I=g);return{type:Xe.Preview,data:I}}}return{type:Xe.Blank}},onClick:(t,e,n)=>{const r=Ax.checkRegion?.(t,e,!0);!r||r.type===Xe.Blank||r.type===Xe.Preview&&t.onClick?.(r.data)}},{cellHorizontalPadding:pm,cellVerticalPaddingXS:mm}=nn,zI={type:be.Loading,draw:(t,e)=>{const{ctx:n,theme:r,rect:i}=e;if(!n||!r||!i)return;const{x:a,y:l,width:c,height:h}=i,{cellBgLoading:d}=r;it(n,{x:a+pm,y:l+mm,width:c-2*pm,height:h-2*mm,radius:4,fill:d})}},Pu=8.5,gm=5,Nu=4,{maxRowCount:PI,cellVerticalPaddingMD:cs,cellHorizontalPadding:mi,cellTextLineHeight:Fu}=nn,NI={type:be.Number,measure:(t,e)=>{const{displayData:n,showAs:r}=t,{ctx:i,theme:a,width:l,height:c}=e;if(!i||!a)return{width:l??0,height:c??0,totalHeight:c??0};if(!n||typeof n=="string"||r!=null)return{width:l,height:c,totalHeight:c};const h=n.length,d=cs+h*Fu,p=Math.min(PI,h);return{width:l,height:Math.max(c,cs+p*Fu),totalHeight:d}},draw:(t,e)=>{const{data:n,displayData:r,showAs:i,contentAlign:a="right"}=t;if(n==null||r==null||r==="")return;const{ctx:l,rect:c,theme:h,isActive:d}=e;if(!l||!c||!h)return;const{x:p,y:m,width:g}=c,{cellTextColor:x}=h,b=i?.showValue??!0,C=a==="left";let w=C?p+mi:p+g-mi,S=g-mi*2;if(i!=null){const{type:R,color:T,maxValue:M}=i;if(R===zl.Ring){const I=Pu+gm,z=C?mi+I:g-mi-I;w=C?p+mi+2*I+Nu:w-2*I-Nu,S=S-2*I-Nu,oI(l,{x:p+z,y:m+cs+Pu-3,value:n,maxValue:M,color:T,radius:Pu,lineWidth:gm})}if(R===zl.Bar){const D=S/2,P=C?mi:g/2;w=C?p+g/2+4:p+g/2-4,S=D-4,iI(l,{x:p+P,y:m+cs+2,width:D,height:8,value:n,maxValue:M,color:T})}}if(!b)return;const k=typeof r=="string";if(k||!d)return xs(l,{x:w,y:m+cs,text:k?r:r.join(", "),maxLines:1,maxWidth:S,fill:x,textAlign:a});let _=m+cs;r.forEach((R,T)=>{const M=T===r.length-1;xs(l,{x:w,y:_,text:M?R:`${R},`,maxLines:1,maxWidth:S,fill:x,textAlign:a}),_+=Fu})}},fl=3,{cellHorizontalPadding:hl}=nn,Ox={type:be.Rating,needsHover:!0,needsHoverPosition:!0,draw:(t,e)=>{const{data:n,icon:r,color:i,max:a,readonly:l}=t,{ctx:c,theme:h,rect:d,hoverCellPosition:p,spriteManager:m}=e;if(!c||!h||!d)return;const{x:g,y:x,width:b,height:C}=d,w=p?.x??0,S=p?.y??0,{iconSizeXS:k,iconFgHighlight:_,cellLineColor:R}=h,T=n??0;c.save(),c.beginPath(),c.rect(g,x,b,C),c.clip();let M=g+hl;const I=(C-k)/2,z=x+I,D=dt(S,I,I+k),P=i??_,L=Bl(P,.3),H=hl+a*(k+fl);for(let $=0;$<a;$++){const Y=T>$,te=w>=M-g&&w<H;let J;Y?J=P:!l&&D&&te?J=L:J=R,m.drawSprite(c,{sprite:r,x:M,y:z,size:k,colors:[J,J],theme:h}),M+=k+fl}c.restore()},checkRegion:(t,e,n)=>{const{data:r,max:i,readonly:a}=t;if(a)return{type:Xe.Blank};const{hoverCellPosition:l,height:c,theme:h}=e;if(!l||!h)return{type:Xe.Blank};const{x:d,y:p}=l,{iconSizeXS:m}=h,g=hl,x=g+i*(m+fl);if(dt(d,g,x)&&dt(p,c/2-m,c/2+m)){if(!n)return{type:Xe.Update,data:null};const b=Math.ceil((d-hl)/(m+fl));return{type:Xe.Update,data:b!==r?b:null}}return{type:Xe.Blank}},onClick:(t,e,n)=>{const r=Ox.checkRegion?.(t,e,!0);!r||r.type===Xe.Blank||n(r)}};var ps;(function(t){t.Content="Content",t.DeleteBtn="DeleteBtn"})(ps||(ps={}));const xm=new Pi({max:10}),FI=6,pl=6,Yo=8,Qs=6,{cellHorizontalPadding:ml,maxRowCount:LI}=nn,HI=(t,e)=>{const{x:n,y:r,width:i,text:a,maxTextWidth:l,textColor:c,bgColor:h,editable:d,theme:p,spriteManager:m}=e,{fontSizeXS:g,iconSizeSM:x,iconSizeXS:b}=p;it(t,{x:n,y:r,width:i,height:x,radius:FI,fill:h}),jn(t,{text:a,x:n+Yo,y:r+(x-g)/2+.5,fill:c,maxWidth:l,fontSize:g}),d&&m.drawSprite(t,{sprite:Xn.Close,x:n+i-b-Yo+2,y:r+2,size:b,theme:p,colors:[c,c]})},zx={type:be.Select,needsHoverPositionWhenActive:!0,measure:(t,e)=>{const{displayData:n,readonly:r}=t,{ctx:i,theme:a,width:l,height:c}=e;if(!i||!a)return{width:l??0,height:c??0,totalHeight:c??0};const{cellTextColor:h,fontSizeXS:d,iconSizeSM:p,iconSizeXS:m}=a;if(!n.length)return{width:l,height:c,totalHeight:c};const g={x:ml,y:Qs,width:l-2*ml};let x=1,b=g.x,C=g.y;const w=r?0:m,S=g.width-pl*2-w,k=Yo*2+w,_=g.x+g.width,R=p+pl,T=`${String(l)}-${n.join(",")}`,M=[];for(const D of n){const{width:P}=jn(i,{text:D,fill:h,maxWidth:S,needRender:!1,fontSize:d}),L=P+k;b!==g.x&&b+L>_&&(x++,b=g.x,C+=R),M.push({type:ps.Content,x:b,y:C+2,width:P+Yo+2,height:R}),r||M.push({type:ps.DeleteBtn,x:b+L-m-Yo+2,y:C+2,width:m,height:R}),b+=L+Yo}xm.set(T,M);const I=Qs+x*R,z=Math.min(LI,x);return{width:l??0,height:Math.max(c??0,Qs+z*R),totalHeight:I}},draw:(t,e)=>{const{ctx:n,rect:r,theme:i,isActive:a,spriteManager:l}=e;if(!n||!r||!i)return;const{displayData:c,choiceMap:h,readonly:d}=t,{x:p,y:m,width:g,height:x}=r,b=!a&&c.length,{fontSizeXS:C,fontFamily:w,iconSizeXS:S,iconSizeSM:k,cellOptionBg:_,cellOptionTextColor:R}=i,T={x:p+ml,y:m+Qs,width:g-2*ml,height:x-Qs},M=k+pl,I=a?1/0:Math.max(1,Math.floor((T.height-k)/M)+1),z=!d&&a,D=z?S:0,P=T.width-pl*2-D,L=Yo*2+D,H=T.x+T.width;let $=1,Y=T.x,te=T.y;n.save(),n.beginPath(),b&&(n.rect(p,m,g,x),n.clip()),n.font=`${C}px ${w}`;for(const J of c){const re=h?.get?.(J),ie=re?.backgroundColor||_,G=re?.color||R,{width:U,text:ce}=jn(n,{text:J,fill:G,maxWidth:P,fontSize:C,needRender:!1}),ue=Math.min(U+L,T.width);if(Y!==T.x&&Y+ue>H&&$<I&&($++,te+=M,Y=T.x),HI(n,{x:Y,y:te,width:ue,text:ce,maxTextWidth:P,textColor:G,bgColor:ie,editable:z,theme:i,spriteManager:l}),Y+=ue+Yo,Y>H&&$>=I)break}n.restore()},checkRegion:(t,e,n)=>{const{data:r,displayData:i,readonly:a}=t,{width:l,isActive:c,hoverCellPosition:h,activeCellBound:d}=e;if(!(!a&&c&&d)||!h)return{type:Xe.Blank};const{scrollTop:m}=d,{x:g,y:x}=h,b=`${String(l)}-${i.join(",")}`,C=xm.get(b);if(!C)return{type:Xe.Blank};for(let w=0;w<C.length;w++){const S=C[w];if(!S)continue;const{type:k,x:_,y:R,width:T,height:M}=S;if(Hl([g,m+x],[_,R],[_+T,R+M])){if(!n)return{type:k===ps.DeleteBtn?Xe.Update:Xe.Preview,data:null};const I=Math.floor(w/2);if(k===ps.DeleteBtn){const z=r.filter((D,P)=>P!==I);return{type:Xe.Update,data:z.length?z:null}}return{type:Xe.Preview,data:r[I]?.id}}}return{type:Xe.Blank}},onClick:(t,e,n)=>{const{readonly:r,isEditingOnClick:i}=t,{isActive:a}=e,l=zx.checkRegion?.(t,e,!0);if(l){if(l.type===Xe.Blank){!r&&a&&i&&n?.(e);return}if(l.type===Xe.Preview)return t?.onPreview?.(l.data);n?.(e)}}},{maxRowCount:BI,cellHorizontalPadding:Lu,cellVerticalPaddingMD:gl,cellTextLineHeight:Zs}=nn,WI={type:be.Text,measure:(t,e)=>{const{displayData:n}=t,{ctx:r,theme:i,width:a,height:l}=e;if(!r||!i)return{width:a??0,height:l??0,totalHeight:l??0};const{cellTextColor:c}=i;if(!n)return{width:a,height:l,totalHeight:l};const h=xs(r,{text:n,maxLines:1/0,lineHeight:Zs,maxWidth:a-Lu*2,fill:c,needRender:!1}).length,d=gl+h*Zs,p=Math.min(BI,h);return{width:a,height:Math.max(l,gl+p*Zs),totalHeight:d}},draw:(t,e)=>{const{displayData:n}=t,{ctx:r,rect:i,theme:a,isActive:l}=e;if(!r||!i||!a)return;const{x:c,y:h,width:d,height:p}=i;if(!n)return;const{cellTextColor:m}=a,g=p-gl;xs(r,{x:c+Lu,y:h+gl,text:n,maxLines:l?1/0:Math.max(Math.floor(g/Zs),1),lineHeight:Zs,maxWidth:d-Lu*2,fill:m})}},$I=6,{cellHorizontalPadding:xl,cellVerticalPaddingSM:Hu}=nn,YI={type:be.User,needsHover:!1,needsHoverPosition:!1,draw:(t,e)=>{const{ctx:n,rect:r,theme:i,imageManager:a,columnIndex:l,rowIndex:c}=e;if(!n||!r||!i)return;const{data:h}=t,{x:d,y:p,width:m,height:g}=r,{fontSizeXS:x,fontSizeSM:b,fontFamily:C,iconSizeSM:w,cellOptionBg:S,cellOptionTextColor:k,avatarBg:_,avatarTextColor:R,avatarSizeMD:T}=i;if(!h.length)return;const M={x:d+xl,y:p+Hu,width:m-2*xl,height:g-Hu},I=Math.max(1,Math.floor((M.height-w)/(w+xl))+1),z=M.width-xl*2;n.save(),n.beginPath(),n.rect(d,p,m,g),n.clip(),n.font=`${x}px ${C}`;let D=1,P=M.x,L=M.y;for(const H of h){const{name:$,avatarUrl:Y}=H,{width:te,text:J}=jn(n,{text:$,fill:k,maxWidth:z,needRender:!1,fontSize:x}),re=te+T+6;P!==M.x&&P+re>M.x+M.width&&D<I&&(D++,L+=w+Hu,P=M.x),it(n,{x:P+4,y:L,width:re,height:w,radius:$I,fill:S}),jn(n,{text:J,x:P+T+4,y:L+4,fill:k,maxWidth:z});const ie=Y?a.loadOrGetImage(Y,l,c):void 0;if(lI(n,{x:P,y:L-2,width:T,height:T,fill:_,stroke:S,defaultText:$,textColor:R,fontSize:b,fontFamily:C,img:ie}),P+=re+8,P>M.x+M.width&&D>=I)break}n.restore()}},{cellScrollBarPaddingY:VI,cellScrollBarMinHeight:qI}=nn,UI=t=>{const{height:e,totalHeight:n,scrollTop:r}=t,i=e-VI*2,a=i/n,l=i*a,c=Math.max(l,qI),h=r/(n-e),d=c-l,p=d>0?d*h:0,m=r*a-p,g=Math.min(r,n-e);return{scrollBarHeight:c,scrollBarScrollTop:m,contentScrollTop:g}},_i=t=>{switch(t){case be.Text:return WI;case be.Link:return Ax;case be.Number:return NI;case be.Boolean:return Tx;case be.Select:case be.MultiSelect:return zx;case be.Image:return Dx;case be.Rating:return Ox;case be.Chart:return pI;case be.User:return YI;case be.Button:return jx;case be.Date:return mI;case be.Attachment:return nI;case be.Loading:default:return zI}};var Or;(function(t){t.Freeze="Freeze",t.Other="Other"})(Or||(Or={}));var pa;(function(t){t.Top="Top",t.Bottom="Bottom"})(pa||(pa={}));const yl=30,GI=2,XI=1200,QI=t=>{const{coordInstance:e,scrollBy:n}=t,r=y.useRef(0),{containerWidth:i,containerHeight:a,freezeRegionWidth:l,rowInitSize:c}=e,[h,d]=y.useState([0,0]),[p,m]=h||[0,0],g=(b,C)=>{const{x:w,y:S}=b;let k=0,_=0;(!C||C===qt.Columns)&&(i-w<yl?k=1:Lt.inRange(w,l,l+yl)&&(k=-1)),(!C||C===qt.Rows)&&(a-S<yl?_=1:Lt.inRange(S,c,c+yl)&&(_=-1)),d([k,_])},x=()=>{d([0,0])};return y.useEffect(()=>{if(p===0&&m===0){r.current=0;return}let b=0;const C=S=>{if(b!==0){const k=S-b;r.current=Math.min(1,r.current+k/XI);const _=Math.floor(r.current*k*GI);n(p*_,m*_)}b=S,w=window.requestAnimationFrame(C)};let w=window.requestAnimationFrame(C);return()=>window.cancelAnimationFrame(w)},[n,p,m]),{onAutoScroll:g,onAutoScrollStop:x}},ZI=(t,e)=>{const[n,r]=y.useState(pd);return{columnFreezeState:n,onColumnFreezeStart:c=>{const{type:h}=c;if(h!==K.ColumnFreezeHandler)return;const{freezeColumnCount:d}=t;r({sourceIndex:d-1,targetIndex:d-1,isFreezing:!0})},onColumnFreezeMove:c=>{const{sourceIndex:h,isFreezing:d}=n;if(!d)return;const{scrollLeft:p}=e,{columnIndex:m,x:g}=c,{columnCount:x}=t,b=t.getColumnWidth(m),C=t.getColumnRelativeOffset(m,p),w=dt(g,C,C+b/2)?m-1:m;r({sourceIndex:h,targetIndex:Math.min(w,x-1),isFreezing:!0})},onColumnFreezeEnd:c=>{const{targetIndex:h,isFreezing:d}=n;d&&(r(()=>pd),c?.(Math.max(h+1,0)))}}},JI=(t,e)=>{const[n,r]=y.useState(-1),[i,a]=y.useState(Fl);return{columnResizeState:i,hoveredColumnResizeIndex:n,setHoveredColumnResizeIndex:r,setColumnResizeState:a,onColumnResizeStart:d=>{const{scrollLeft:p}=e,{type:m,columnIndex:g,x}=d;if(m===K.ColumnResizeHandler){const{columnResizeHandlerWidth:b}=nn,C=t.getColumnRelativeOffset(g,p),w=dt(x,C,C+b/2)?g-1:g;a({x,columnIndex:w,width:t.getColumnWidth(w)})}},onColumnResizeChange:(d,p)=>{const{scrollLeft:m}=e,{type:g,x,columnIndex:b}=d,{columnIndex:C,x:w}=i;if(C>-1){const S=t.getColumnWidth(C),k=Math.max(100,Math.round(S+x-w));return a({x,columnIndex:C,width:k}),p?.(k,C)}if(g===K.ColumnResizeHandler){const{columnResizeHandlerWidth:S}=nn,k=t.getColumnRelativeOffset(b,m),_=dt(x,k,k+S/2)?b-1:b;return r(_)}n!==-1&&r(-1)},onColumnResizeEnd:()=>{a(Fl)}}},Gd=(t,e,n,r)=>{const{x:i,y:a}=e,{scrollLeft:l,scrollTop:c}=n,{freezeRegionWidth:h,rowInitSize:d}=t;if(r===qt.Columns){const p=i<=h?i:l+i,m=t.getColumnStartIndex(p),g=t.getColumnOffset(m),x=t.getColumnWidth(m);return dt(p,g,g+x/2)?m:m+1}if(r===qt.Rows){const p=a<=d?a:c+a,m=t.getRowStartIndex(p),g=t.getRowOffset(m),x=t.getRowHeight(m);return dt(p,g,g+x/2)?m:m+1}return-1/0},KI=(t,e,n,r)=>{const i=y.useRef(0),[a,l]=y.useState(sa),{scrollTop:c,scrollLeft:h}=e;return{dragState:a,setDragState:l,onDragStart:(g,x)=>{if(r===Xo.None)return;const{type:b,rowIndex:C,columnIndex:w,x:S,y:k}=g,{isRowSelection:_,isColumnSelection:R,ranges:T}=n;if(b===K.RowHeaderDragHandler&&r!==Xo.Column){i.current=k;const M=_&&n.includes([C,C])?T:[[C,C]];x(qt.Rows,M),l({type:qt.Rows,ranges:M,delta:k+c-t.getRowOffset(C),isDragging:!1})}if(b===K.ColumnHeader&&r!==Xo.Row){i.current=S;const M=R&&n.includes([w,w])?T:[[w,w]];x(qt.Columns,M),l({type:qt.Columns,ranges:M,delta:S-t.getColumnRelativeOffset(w,h),isDragging:!1})}},onDragChange:g=>{const{type:x,isDragging:b}=a;if(b||![qt.Rows,qt.Columns].includes(x))return;const{x:C,y:w}=g,S=x===qt.Rows?w:C;Math.abs(S-i.current)<5||l(_=>({..._,isDragging:!0}))},onDragEnd:(g,x)=>{const{type:b,isDragging:C}=a;if(!C||!x)return l(sa);if([qt.Columns,qt.Rows].includes(b)){const{ranges:w}=a,S=Gd(t,g,e,b);dt(S,w[0][0],w[w.length-1][1])||x(w,S)}l(sa)}}},Si=(t,e,n,r,i=!1)=>{const a=y.useRef();a.current=e,y.useEffect(()=>{if(n?.addEventListener===void 0)return;const l=n,c=h=>{a.current?.call(l,h)};return l.addEventListener(t,c,{passive:r,capture:i}),()=>{l.removeEventListener(t,c,{capture:i})}},[t,n,r,i])};function eD(){const[t,e]=y.useState(!1);return y.useEffect(()=>{const n=typeof window<"u"&&("ontouchstart"in window||navigator&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)>0||window.matchMedia&&window.matchMedia("(pointer: coarse)").matches);e(!!n)},[]),t}function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yd.apply(null,arguments)}var Px=["shift","alt","meta","mod","ctrl"],tD={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function qo(t){return(t&&tD[t]||t||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function nD(t){return Px.includes(t)}function Bu(t,e){return e===void 0&&(e=","),t.split(e)}function Wu(t,e,n){e===void 0&&(e="+");var r=t.toLocaleLowerCase().split(e).map(function(l){return qo(l)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},a=r.filter(function(l){return!Px.includes(l)});return yd({},i,{keys:a,description:n,hotkey:t})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(t){t.key!==void 0&&Nx([qo(t.key),qo(t.code)])}),document.addEventListener("keyup",function(t){t.key!==void 0&&Fx([qo(t.key),qo(t.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){Uo.clear()})})();var Uo=new Set;function Xd(t){return Array.isArray(t)}function Nn(t,e){e===void 0&&(e=",");var n=Xd(t)?t:t.split(e);return n.every(function(r){return Uo.has(r.trim().toLowerCase())})}function Nx(t){var e=Array.isArray(t)?t:[t];Uo.has("meta")&&Uo.forEach(function(n){return!nD(n)&&Uo.delete(n.toLowerCase())}),e.forEach(function(n){return Uo.add(n.toLowerCase())})}function Fx(t){var e=Array.isArray(t)?t:[t];t==="meta"?Uo.clear():e.forEach(function(n){return Uo.delete(n.toLowerCase())})}function rD(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function oD(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}function iD(t){return Lx(t,["input","textarea","select"])}function Lx(t,e){e===void 0&&(e=!1);var n=t.target,r=t.composed,i=null;return sD(n)&&r?i=t.composedPath()[0]&&t.composedPath()[0].tagName:i=n&&n.tagName,Xd(e)?!!(i&&e&&e.some(function(a){var l;return a.toLowerCase()===((l=i)==null?void 0:l.toLowerCase())})):!!(i&&e&&e)}function sD(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function aD(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(function(n){return e.includes(n)})||t.includes("*"):!0}var lD=function(e,n,r){r===void 0&&(r=!1);var i=n.alt,a=n.meta,l=n.mod,c=n.shift,h=n.ctrl,d=n.keys,p=e.key,m=e.code,g=e.ctrlKey,x=e.metaKey,b=e.shiftKey,C=e.altKey,w=qo(m),S=p.toLowerCase();if(!(d!=null&&d.includes(w))&&!(d!=null&&d.includes(S))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(w))return!1;if(!r){if(i===!C&&S!=="alt"||c===!b&&S!=="shift")return!1;if(l){if(!x&&!g)return!1}else if(a===!x&&S!=="meta"&&S!=="os"||h===!g&&S!=="ctrl"&&S!=="control")return!1}return d&&d.length===1&&(d.includes(S)||d.includes(w))?!0:d?Nn(d):!d},cD=y.createContext(void 0),uD=function(){return y.useContext(cD)};function Hx(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(n,r){return n&&Hx(t[r],e[r])},!0):t===e}var dD=y.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),fD=function(){return y.useContext(dD)};function hD(t){var e=y.useRef(void 0);return Hx(e.current,t)||(e.current=t),e.current}var ym=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},pD=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Br(t,e,n,r){var i=y.useState(null),a=i[0],l=i[1],c=y.useRef(!1),h=n instanceof Array?r instanceof Array?void 0:r:n,d=Xd(t)?t.join(h?.splitKey):t,p=n instanceof Array?n:r instanceof Array?r:void 0,m=y.useCallback(e,p??[]),g=y.useRef(m);p?g.current=m:g.current=e;var x=hD(h),b=fD(),C=b.enabledScopes,w=uD();return pD(function(){if(!(x?.enabled===!1||!aD(C,x?.scopes))){var S=function(M,I){var z;if(I===void 0&&(I=!1),!(iD(M)&&!Lx(M,x?.enableOnFormTags))){if(a!==null){var D=a.getRootNode();if((D instanceof Document||D instanceof ShadowRoot)&&D.activeElement!==a&&!a.contains(D.activeElement)){ym(M);return}}(z=M.target)!=null&&z.isContentEditable&&!(x!=null&&x.enableOnContentEditable)||Bu(d,x?.splitKey).forEach(function(P){var L,H=Wu(P,x?.combinationKey);if(lD(M,H,x?.ignoreModifiers)||(L=H.keys)!=null&&L.includes("*")){if(x!=null&&x.ignoreEventWhen!=null&&x.ignoreEventWhen(M)||I&&c.current)return;if(rD(M,H,x?.preventDefault),!oD(M,H,x?.enabled)){ym(M);return}g.current(M,H),I||(c.current=!0)}})}},k=function(M){M.key!==void 0&&(Nx(qo(M.code)),(x?.keydown===void 0&&x?.keyup!==!0||x!=null&&x.keydown)&&S(M))},_=function(M){M.key!==void 0&&(Fx(qo(M.code)),c.current=!1,x!=null&&x.keyup&&S(M,!0))},R=a||h?.document||document;return R.addEventListener("keyup",_,h?.eventListenerOptions),R.addEventListener("keydown",k,h?.eventListenerOptions),w&&Bu(d,x?.splitKey).forEach(function(T){return w.addHotkey(Wu(T,x?.combinationKey,x?.description))}),function(){R.removeEventListener("keyup",_,h?.eventListenerOptions),R.removeEventListener("keydown",k,h?.eventListenerOptions),w&&Bu(d,x?.splitKey).forEach(function(T){return w.removeHotkey(Wu(T,x?.combinationKey,x?.description))})}}},[a,d,x,C]),l}const mD=t=>{const{isEditing:e,activeCell:n,coordInstance:r,selection:i,scrollToItem:a,setEditing:l,setActiveCell:c,setSelection:h,onUndo:d,onRedo:p,onDelete:m,onRowExpand:g,editorRef:x,scrollBy:b}=t,{pureRowCount:C,columnCount:w}=r;Br("mod+z",()=>{d?.()},{enabled:!e&&i.type!==nt.None,preventDefault:!0,enableOnFormTags:["input","select","textarea"]}),Br(["mod+shift+z","mod+y"],()=>{p?.()},{enabled:!e&&i.type!==nt.None,preventDefault:!0,enableOnFormTags:["input","select","textarea"]}),Br(["up","down","left","right","mod+up","mod+down","mod+left","mod+right","shift+up","shift+down","shift+left","shift+right","mod+shift+up","mod+shift+down","mod+shift+left","mod+shift+right"],(S,k)=>{const{shift:_,mod:R}=k,T=!!R,M=!!_;let[I,z]=i.ranges[M?1:0];T?Nn("up")?z=0:Nn("down")?z=C-1:Nn("left")?I=0:Nn("right")&&(I=w-1):Nn("up")?z=Math.max(z-1,0):Nn("down")?z=Math.min(z+1,C-1):Nn("left")?I=Math.max(I-1,0):Nn("right")&&(I=Math.min(I+1,w-1));const D=[I,z],P=M?[i.ranges[0],D]:[D,D];a([I,z]),!M&&c(D),h(i.setRanges(P))},{enabled:!!(n&&!e),enableOnFormTags:["input","select","textarea"]}),Br(["tab","shift+tab"],()=>{const[S,k]=i.ranges[0];let _=Math.min(S+1,w-1);Nn("shift")&&Nn("tab")&&(_=Math.max(S-1,0));const R=[_,k],T=[R,R];x.current?.saveValue?.(),a([_,k]),l(!1),c(R),h(i.setRanges(T))},{enabled:!!n,enableOnFormTags:["input","select","textarea"]}),Br(["PageUp","PageDown"],()=>{const S=r.containerHeight-r.rowInitSize-1;b(0,Nn("PageUp")?-S:S)},{enabled:!!(n&&!e),enableOnFormTags:["input","select","textarea"]}),Br("mod+a",()=>{const S=[[0,0],[w-1,C-1]];h(i.setRanges(S))},{enabled:!!(n&&!e),enableOnFormTags:["input","select","textarea"]}),Br(["delete","backspace","f2"],()=>{if(Nn("f2"))return l(!0);if(Nn("backspace")||Nn("delete"))return m?.(i)},{enabled:!!(n&&!e),enableOnFormTags:["input","select","textarea"]}),Br(["enter"],S=>{if(S.isComposing)return;const{isColumnSelection:k,ranges:_}=i;if(e){let R=_[0];k&&(R=[R[0],0]);const[T,M]=R,I=Math.min(M+1,C-1),z=[T,I];x.current?.saveValue?.(),setTimeout(()=>{h(i.set(nt.Cells,[z,z])),c(z),l(!1),a(z)})}else l(!0)},{enabled:!!n,enableOnFormTags:["input","select","textarea"]}),Br("esc",()=>{l(!1)},{enabled:!!n,enableOnFormTags:["input","select","textarea"]}),Br("space",()=>{const[,S]=n;g?.(S)},{enabled:!!(n&&!e),enableOnFormTags:["input","select","textarea"]})};function gD(t){const e=y.useRef(null),[n,r]=y.useState({width:0,height:0});return y.useLayoutEffect(()=>{const i=l=>{let c=document.body.clientHeight-window.innerHeight;c=isNaN(c)?0:c;for(const h of l){const{width:d,height:p}=h&&h.contentRect||{};r(m=>m.width===d&&m.height===p?m:{width:Math.floor(d),height:p-c})}},a=new window.ResizeObserver(i);return e.current&&a.observe(e.current,void 0),()=>{a.disconnect()}},[]),{ref:e,...n}}const Bx=t=>{const{coordInstance:e,selectable:n,isMultiSelectionEnable:r,getLinearRow:i,setActiveCell:a,onSelectionChanged:l}=t,c=y.useRef(),h=y.useRef(null),[d,p]=y.useState(!1),[m,g]=y.useState(()=>new fo),{pureRowCount:x}=e;c.current=l;const b=(_,R)=>{if(n!==bn.All&&n!==bn.Cell)return;const{type:T,rowIndex:M,columnIndex:I}=R,{isRowSelection:z,ranges:D}=m,P=_.shiftKey&&!_.metaKey;switch(T){case K.Cell:case K.ActiveCell:{const{realIndex:L}=i(M),H=[I,L],$=P&&!z&&D[0]!=null,Y=[$?D[0]:H,H];return $||a(H),r&&p(!0),g(m.set(nt.Cells,Y))}case K.RowHeaderDragHandler:case K.RowHeaderCheckbox:case K.ColumnHeader:case K.AllCheckbox:case K.RowHeader:case K.AppendRow:return;default:return a(null),g(m.reset())}},C=_=>{const{isCellSelection:R,ranges:T}=m,{rowIndex:M,columnIndex:I}=_;if(!d)return;const{realIndex:z}=i(M),D=[I,z];R&&!m.equals([T[0],D])&&g(m.merge(D))},w=()=>{p(!1)},S=(_,R)=>{const{shiftKey:T,metaKey:M}=_,I=T&&!M,z=M&&!T,{type:D,rowIndex:P,columnIndex:L}=R,{ranges:H,isColumnSelection:$,isRowSelection:Y}=m,te=(J,re)=>{const ie=[J,J];let G;Y&&(r||!r&&H[0][0]===J)?G=m.merge(ie):G=m.set(re,[ie]),G.includes(ie)&&(h.current=J),a(null),g(G)};switch(D){case K.ColumnHeader:{if(n!==bn.All&&n!==bn.Column)return;const J=r&&I&&$?H[0][0]:L,re=[[Math.min(J,L),Math.max(J,L)]];let ie=m.set(nt.Columns,re);if(r&&z&&$&&(ie=m.merge([L,L])),!I||!$){const{isNoneSelection:G,ranges:U}=ie;a(G?null:[U[0][0],0])}return g(ie)}case K.RowHeaderCheckbox:{const{realIndex:J}=i(P);if(n!==bn.All&&n!==bn.Row)return;const re=[J,J];if(r&&I&&Y&&h.current!=null){if(m.includes(re))return;const ie=h.current,G=[Math.min(J,ie),Math.max(J,ie)],U=m.expand(G);return h.current=J,a(null),g(U)}return te(J,nt.Rows)}case K.Cell:{const{realIndex:J}=i(P);return n===bn.Row?te(J,nt.Rows):n===bn.Column?te(L,nt.Columns):void 0}case K.AllCheckbox:{if(n!==bn.All&&n!==bn.Row)return;const J=[[0,x-1]],ie=Y&&m.equals(J)?m.reset():m.set(nt.Rows,J);return g(ie)}}},k=(_,R)=>{const{x:T,y:M,columnIndex:I,rowIndex:z,type:D}=_;if([K.Blank,K.ColumnStatistic,K.GroupStatistic].includes(D))return;const{isCellSelection:P,isRowSelection:L,isColumnSelection:H}=m,$=I>=-1&&z>-1,Y=I>-1&&z===-1;if($){const{realIndex:te}=i(z),J=P?[I,te]:L?[te,te]:H?[I,I]:void 0;if(m.includes(J))return R(m,{x:T,y:M});if(I>-1){const ie=[I,te],G=m.set(nt.Cells,[ie,ie]);return a(ie),g(G),R(G,{x:T,y:M})}}if(Y){if(H&&m.includes([I,I]))return R(m,{x:T,y:M});const J=m.set(nt.Columns,[[I,I]]);a([I,0]),g(J),R(J,{x:T,y:M})}};return Tj(()=>{c.current?.(m)},[m]),bx(()=>{c.current=void 0}),{selection:m,isSelecting:d,setActiveCell:a,setSelection:g,onSelectionStart:b,onSelectionChange:C,onSelectionEnd:w,onSelectionClick:S,onSelectionContextMenu:k}},Wx=(t,e)=>{const{rowCount:n}=t,r=t.getRowStartIndex(e),i=t.getRowStopIndex(r,e);return{startRowIndex:Math.max(0,r),stopRowIndex:Math.max(0,Math.min(n-1,i+1))}},$x=(t,e)=>{const{columnCount:n}=t,r=t.getColumnStartIndex(e),i=t.getColumnStopIndex(r,e);return{startColumnIndex:Math.max(0,r),stopColumnIndex:Math.max(0,Math.min(n-1,i))}},Yx=(t,e,n)=>{const{scrollTop:r,scrollLeft:i}=e;return y.useMemo(()=>{const{startRowIndex:a,stopRowIndex:l}=Wx(t,r),{startColumnIndex:c,stopColumnIndex:h}=$x(t,i);return{startRowIndex:a,stopRowIndex:l,startColumnIndex:c,stopColumnIndex:h}},[t,r,i,n])};ic(t=>({building:!1,displayFieldIds:[],tableId:"",setBuilding:e=>t({building:e}),setDisplayFieldIds:e=>t({displayFieldIds:e}),setTableId:e=>t({tableId:e})}));ic((t,e)=>({collapsedGroupMap:{},setCollapsedGroupMap:(n,r)=>t(i=>({collapsedGroupMap:{...i.collapsedGroupMap,[n]:r}})),getCollapsedGroupIds:n=>e().collapsedGroupMap[n]||[]}));ic(t=>({openHeaderMenu:e=>{t(n=>({...n,headerMenu:e}))},closeHeaderMenu:()=>{t(e=>e.headerMenu==null?e:{...e,headerMenu:void 0})},openRecordMenu:e=>{t(n=>({...n,recordMenu:e}))},closeRecordMenu:()=>{t(e=>e.recordMenu==null?e:{...e,recordMenu:void 0})},openStatisticMenu:e=>{t(n=>({...n,statisticMenu:e}))},closeStatisticMenu:()=>{t(e=>e.statisticMenu==null?e:{...e,statisticMenu:void 0})},setSelection:e=>{t(n=>({...n,selection:e}))},openGroupHeaderMenu:e=>{t(n=>({...n,groupHeaderMenu:e}))},closeGroupHeaderMenu:()=>{t(e=>({...e,groupHeaderMenu:void 0}))}}));const xD=32,yD="data-t-grid-container",lc=(t,e)=>{const{y:n,height:r,editorId:i}=t;return y.useMemo(()=>{const c=document.querySelector(`#${i}`)?.closest(`[${yD}]`)?.getBoundingClientRect();if(!c)return;const h=window.innerHeight,{y:d}=c,p=Math.max(n,d),m=h-d-n-r,g=p>m,b=Math.min((g?n:m)-xD,e??1/0);return{top:g?"unset":r+1,bottom:g?r:"unset",maxHeight:b,isAbove:g}},[i,n,r,e])},bD={[cr.Drag]:Xn.Drag,[cr.Expand]:Xn.Detail},{cellTextLineHeight:bm,rowHeadIconPaddingTop:$u,columnStatisticHeight:bd,columnHeadHeight:ho,columnHeadPadding:Cr,columnHeadMenuSize:us,columnAppendBtnWidth:vm,columnResizeHandlerWidth:wm,columnResizeHandlerPaddingTop:Cm,cellScrollBarWidth:Yu,cellScrollBarPaddingX:vD,cellScrollBarPaddingY:wD,cellVerticalPaddingSM:CD,cellVerticalPaddingMD:$l,cellHorizontalPadding:Qd,columnFreezeHandlerWidth:Sm,columnFreezeHandlerHeight:km}=nn,ma=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,rowIndex:c,columnIndex:h,imageManager:d,spriteManager:p,isActive:m,hoverCellPosition:g,getCellContent:x}=e,b=x([h,c]);_i(b.type).draw(b,{cell:b,ctx:t,theme:l,rect:{x:n,y:r,width:i,height:a},x:n,y:r,width:i,height:a,rowIndex:c,columnIndex:h,imageManager:d,spriteManager:p,hoverCellPosition:g,isActive:m}),b.hidden?p.drawSprite(t,{sprite:Xn.EyeOff,x:n+i-14,y:r-1,size:12,theme:l,colors:[l.cellLineColorActived,l.cellBg]}):m&&b.locked&&p.drawSprite(t,{sprite:Xn.Lock,x:n+i-13,y:r+1,size:12,theme:l,colors:[l.cellLineColorActived,l.cellBg]})},_m=(t,e)=>{const{coordInstance:n,visibleRegion:r,activeCell:i,mouseState:a,scrollState:l,selection:c,isSelecting:h,rowControls:d,rowIndexVisible:p,hoverCellPosition:m,theme:g,columns:x,commentCountMap:b,imageManager:C,spriteManager:w,groupCollection:S,getLinearRow:k,getCellContent:_}=t,{startRowIndex:R,stopRowIndex:T,startColumnIndex:M,stopColumnIndex:I}=r,{freezeColumnCount:z,columnInitSize:D,totalWidth:P,rowCount:L}=n,{isRowSelection:H,isColumnSelection:$}=c,{scrollLeft:Y,scrollTop:te}=l,{columnIndex:J,rowIndex:re,type:ie,isOutOfBounds:G}=a,U=[],ce=[],ue=[],pe=[],He=[];if(!L)return{cellPropList:U,rowHeaderPropList:ce,groupRowList:ue,groupRowHeaderList:pe,appendRowList:He};const V=e===Or.Freeze,se=V?0:Math.max(z,M),ze=V?Math.max(z-1,0):I,Ne=V&&z===0;for(let ae=se;ae<=ze;ae++){const ve=x[ae],je=n.getColumnRelativeOffset(ae,Y),Qe=n.getColumnWidth(ae),Ue=$&&c.includes([ae,ae]),Me=ae===0,Fe=J===ae,st=ve?.customTheme?{...g,...ve.customTheme}:g,{cellBg:Ee,cellBgHovered:Ze,cellBgSelected:Et}=st;for(let mt=R;mt<=T;mt++){const gt=k(mt),{type:Ot}=gt,xt=n.getRowHeight(mt),Dt=n.getRowOffset(mt)-te,an=_([ae,gt.realIndex]).id?.split("-")[0];if(Ot===vt.Group){const{depth:jt,value:gn,isCollapsed:En,realIndex:me}=gt;if(Me&&pe.push({x:.5,y:Dt,width:D,height:xt,spriteManager:w,depth:jt,theme:g,isCollapsed:En,groupCollection:S}),Ne)continue;ue.push({x:je+.5,y:Dt,width:Qe,height:xt,columnIndex:ae,rowIndex:me,depth:jt,theme:g,value:gn,isHover:!1,isCollapsed:En,imageManager:C,spriteManager:w,groupCollection:S});continue}if(Ot===vt.Append){if(Me){const jt=ie===K.AppendRow&&re===mt;He.push({x:.5,y:Dt+.5,width:P-Y,height:xt,theme:g,isHover:jt,spriteManager:w,coordInstance:n})}continue}const{displayIndex:ln,realIndex:Xt}=gt,cn=!G&&!h&&_E.has(ie)&&mt===re,{isCellActive:un,isRowActive:Cn}=jE(i,Xt,ae),{isRowSelected:yt,isCellSelected:Qn}=EE(c,Xt,ae);let Sn;Qn||yt||Ue?Sn=Et:(cn||Cn)&&(Sn=Ze),Me&&ce.push({x:.5,y:Dt+.5,width:D+.5,height:xt,displayIndex:String(ln),isHover:cn||Cn,isChecked:H&&yt,rowIndexVisible:p,rowControls:d,theme:g,spriteManager:w,commentCount:an?b?.[an]:void 0}),!Ne&&U.push({x:je+.5,y:Dt+.5,width:Qe,height:xt,rowIndex:Xt,columnIndex:ae,hoverCellPosition:Fe&&cn?m:null,getCellContent:_,imageManager:C,spriteManager:w,theme:st,fill:un?Ee:Sn??Ee})}}return{cellPropList:U,rowHeaderPropList:ce,groupRowList:ue,groupRowHeaderList:pe,appendRowList:He}},bl=(t,e,n)=>{const{x:r,y:i,width:a,height:l}=e;t.save(),t.beginPath(),t.rect(r,i,a,l),t.clip(),n(t),t.restore()},SD=(t,e,n)=>{const{coordInstance:r,theme:i,shouldRerender:a}=n,{fontFamily:l,fontSizeSM:c,fontSizeXS:h,cellLineColor:d}=i,{rowInitSize:p,freezeRegionWidth:m,containerWidth:g,containerHeight:x}=r,{cellPropList:b,groupRowList:C}=_m(n,Or.Other),{cellPropList:w,groupRowList:S,rowHeaderPropList:k,groupRowHeaderList:_,appendRowList:R}=_m(n,Or.Freeze);R.forEach(T=>ND(t,T)),bl(t,{x:0,y:p+1,width:m+1,height:x-p-1},T=>{w.forEach(M=>{const{x:I,y:z,width:D,height:P,fill:L}=M;it(T,{x:I,y:z,width:D,height:P,fill:L,stroke:d})}),T.font=`${h}px ${l}`,k.forEach(M=>DD(T,M)),S.forEach(M=>Rm(T,M)),_.forEach(M=>kD(T,M))}),bl(t,{x:m+1,y:p+1,width:g-m,height:x-p-1},T=>{b.forEach(M=>{const{x:I,y:z,width:D,height:P,fill:L}=M;it(T,{x:I,y:z,width:D,height:P,fill:L,stroke:d})}),C.forEach(M=>Rm(T,M))}),a&&(bl(e,{x:0,y:p+1,width:m+1,height:x-p-1},T=>{T.font=`${c}px ${l}`,w.forEach(M=>{ma(T,M)})}),bl(e,{x:m+1,y:p+1,width:g-m,height:x-p-1},T=>{T.font=`${c}px ${l}`,b.forEach(M=>{ma(T,M)})}))},kD=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,depth:c,isCollapsed:h,spriteManager:d,groupCollection:p}=e,{iconSizeSM:m,cellLineColor:g,groupHeaderBgPrimary:x,groupHeaderBgSecondary:b,groupHeaderBgTertiary:C}=l;if(p==null)return;const{groupColumns:w}=p;if(!w.length)return;const S=[C,b,x].slice(-w.length);it(t,{x:n,y:r,width:i,height:a,fill:S[c]}),it(t,{x:n,y:r,width:i,height:1,fill:g}),d.drawSprite(t,{sprite:h?Xn.Collapse:Xn.Expand,x:(i-m)/2+(c-1)*16,y:r+(a-m)/2,size:m,theme:l})},Rm=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,columnIndex:c,rowIndex:h,depth:d,value:p,imageManager:m,spriteManager:g,groupCollection:x}=e,{fontSizeSM:b,fontFamily:C,cellLineColor:w,rowHeaderTextColor:S,groupHeaderBgPrimary:k,groupHeaderBgTertiary:_,groupHeaderBgSecondary:R}=l;if(x==null)return;const{groupColumns:T,getGroupCell:M}=x;if(!T.length)return;const I=[_,R,k].slice(-T.length);if(it(t,{x:n,y:r,width:i,height:a,fill:I[d]}),it(t,{x:n,y:r,width:i,height:1,fill:w}),c!==0)return;const z=T[d];if(z==null)return;t.save(),t.beginPath(),t.font=`${b}px ${C}`,jn(t,{x:n+Qd,y:r+CD,text:z.name,fill:S});const D=M(p,d),P=_i(D.type),L=18;P.draw(D,{cell:D,ctx:t,theme:l,rect:{x:n,y:r+L,width:i,height:a-L},x:n,y:r+L,width:i,height:a-L,rowIndex:h,columnIndex:c,imageManager:m,spriteManager:g}),t.restore()},_D=(t,e)=>{const{theme:n,mouseState:r,scrollState:i,coordInstance:a,activeCellBound:l,hoverCellPosition:c,imageManager:h,spriteManager:d,real2RowIndex:p,getLinearRow:m,getCellContent:g}=e;if(l==null)return;const{scrollTop:x,scrollLeft:b}=i,{width:C,height:w,columnIndex:S,rowIndex:k}=l,{rowIndex:_,columnIndex:R}=r,{cellBg:T,cellLineColorActived:M,fontSizeSM:I,fontFamily:z,scrollBarBg:D}=n,{freezeColumnCount:P,freezeRegionWidth:L,containerWidth:H,containerHeight:$,columnCount:Y,rowInitSize:te}=a,J=p(k),re=m(J);if(S>=Y||re?.type!==vt.Row)return;const ie=S<P,G=a.getColumnRelativeOffset(S,b),U=a.getRowOffset(J)-x,{realIndex:ce}=m(_);t.save(),t.beginPath(),t.rect(ie?0:L,te,ie?L+1:H-L,$-te),t.clip(),t.font=`${I}px ${z}`,it(t,{x:G+.5,y:U+.5,width:C,height:w,fill:T,stroke:M,radius:2});const ue=UI(l),{scrollBarHeight:pe,scrollBarScrollTop:He,contentScrollTop:V}=ue;t.save(),t.beginPath(),l.scrollEnable&&(t.translate(0,He),it(t,{x:G+C-Yu-vD,y:U+wD,width:Yu,height:pe,fill:D,radius:Yu/2}),t.restore(),t.save(),t.beginPath(),t.rect(G,U+1,C,w-1),t.clip(),t.translate(0,-V)),ma(t,{x:G+.5,y:U+.5,width:C,height:w,rowIndex:k,columnIndex:S,hoverCellPosition:ce===k&&R===S?c:null,getCellContent:g,isActive:!0,imageManager:h,spriteManager:d,theme:n}),t.restore(),t.restore()},RD=(t,e,n,r,i)=>{const a=Lt.groupBy(t,"activeCellId"),{startColumnIndex:l,stopColumnIndex:c,startRowIndex:h,stopRowIndex:d}=e,p=[],m=[...Array.from({length:n},(g,x)=>x),...Array.from({length:c-Math.max(n,l)+1},(g,x)=>Math.max(n,l)+x)];for(const g of m)for(let x=h;x<=d;x++){const b=i(x).realIndex,C=r([g,b]);if(!C?.id)continue;const w=a[C.id];if(w){const S=Lt.cloneDeep(w);S[0].activeCell=[g,b],p.push(S)}}return p},MD=(t,e)=>{const{collaborators:n,scrollState:r,coordInstance:i,activeCellBound:a,theme:l,real2RowIndex:c,getCellContent:h,visibleRegion:d,getLinearRow:p}=e,{scrollTop:m,scrollLeft:g}=r,{themeKey:x}=l,{freezeColumnCount:b,freezeRegionWidth:C,rowInitSize:w,containerWidth:S,containerHeight:k}=i;if(!n?.length)return;t.save();const _=RD(n,d,b,h,p);for(let R=0;R<_.length;R++){const T=_[R].sort((J,re)=>re.timeStamp-J.timeStamp),{activeCell:M,borderColor:I}=T[0];if(!M)continue;const[z,D]=M,P=c(D),L=i.getColumnRelativeOffset(z,g),H=i.getRowOffset(P)-m,$=i.getColumnWidth(z),Y=a?.columnIndex===z&&a?.rowIndex===P?a.height:i.getRowHeight(P);t.save(),t.beginPath();const te=z<b;t.rect(te?0:C,w,te?C+1:S-C,k-w),t.clip(),it(t,{x:L+.5,y:H+.5,width:$,height:Y,stroke:Bl(Aj(I,x)),radius:2}),t.restore()}t.restore()},TD=(t,e)=>{const{theme:n,scrollState:r,coordInstance:i,real2RowIndex:a,getLinearRow:l,searchCursor:c,imageManager:h,spriteManager:d,getCellContent:p}=e;if(!c)return;const[m,g]=c,{scrollTop:x,scrollLeft:b}=r,{fontSizeSM:C,fontFamily:w}=n,{freezeColumnCount:S,freezeRegionWidth:k,containerWidth:_,containerHeight:R,columnCount:T,rowInitSize:M}=i,I=a(g),z=l(I);if(m>=T||z?.type!==vt.Row)return;const D=m<S,P=i.getColumnRelativeOffset(m,b),L=i.getRowOffset(I)-x,H=i.getColumnWidth(m),$=i.getRowHeight(I);t.save(),t.beginPath(),t.rect(D?0:k,M,D?k+1:_-k,R-M),t.clip(),t.font=`${C}px ${w}`,it(t,{x:P+1,y:L+1,width:H-1,height:$-1,fill:n.searchCursorBg,radius:.5}),t.save(),t.beginPath(),ma(t,{x:P+.5,y:L+.5,width:H,height:$,rowIndex:g,columnIndex:m,getCellContent:p,isActive:!1,imageManager:h,spriteManager:d,theme:n}),t.restore(),t.restore()},jD=(t,e,n)=>{const{theme:r,scrollState:i,coordInstance:a,real2RowIndex:l,getLinearRow:c,imageManager:h,spriteManager:d,getCellContent:p}=e;if(!n)return;const[m,g]=n,{scrollTop:x,scrollLeft:b}=i,{fontSizeSM:C,fontFamily:w,searchTargetIndexBg:S}=r,{freezeColumnCount:k,freezeRegionWidth:_,containerWidth:R,containerHeight:T,columnCount:M,rowInitSize:I}=a,z=l(g),D=c(z);if(m>=M||D?.type!==vt.Row)return;const P=m<k,L=a.getColumnRelativeOffset(m,b),H=a.getRowOffset(z)-x,$=a.getColumnWidth(m),Y=a.getRowHeight(z);t.save(),t.beginPath(),t.rect(P?0:_,I,P?_+1:R-_,T-I),t.clip(),t.font=`${C}px ${w}`,it(t,{x:L+1,y:H+1,width:$-1,height:Y-1,fill:S,radius:.5}),t.save(),t.beginPath(),ma(t,{x:L+.5,y:H+.5,width:$,height:Y,rowIndex:D.realIndex,columnIndex:m,getCellContent:p,isActive:!1,imageManager:h,spriteManager:d,theme:r}),t.restore(),t.restore()},ED=(t,e,n,r,i)=>{const{startColumnIndex:a,stopColumnIndex:l,startRowIndex:c,stopRowIndex:h}=e,d=[],p=[...Array.from({length:n},(g,x)=>x),...Array.from({length:l-Math.max(n,a)+1},(g,x)=>Math.max(n,a)+x)],m=t?.map(g=>`${g.recordId}-${g.fieldId}`)||[];for(const g of p)for(let x=c;x<=h;x++){const b=i(x),{realIndex:C}=b,w=r([g,C]);w?.id&&m.includes(w.id)&&d.push([g,C])}return d},ID=(t,e)=>{const{getCellContent:n,coordInstance:r,visibleRegion:i,searchHitIndex:a,getLinearRow:l}=e,{freezeColumnCount:c}=r;if(!a?.length)return;const h=ED(a,i,c,n,l);for(let d=0;d<h.length;d++)jD(t,e,h[d])},DD=(t,e)=>{const{x:n,y:r,width:i,height:a,displayIndex:l,theme:c,isHover:h,isChecked:d,rowControls:p,spriteManager:m,rowIndexVisible:g,commentCount:x}=e,{cellBg:b,cellBgHovered:C,cellBgSelected:w,cellLineColor:S,rowHeaderTextColor:k,iconSizeXS:_,staticWhite:R,iconBgSelected:T}=c;let M=b;d?M=w:h&&(M=C),it(t,{x:n,y:r,width:i,height:a,fill:M}),Ei(t,{x:n,y:r,points:[0,0,i,0],stroke:S}),Ei(t,{x:n,y:r,points:[0,a,i,a],stroke:S});const I=_/2;if(t.font=`10px ${c.fontFamily}`,x){const D=i/p.length*(2+.5);AD(t,{x:n+D-I,y:r+$u,count:x,theme:c})}if(d||h||!g){const z=i/p.length;for(let D=0;D<p.length;D++){const{type:P,icon:L}=p[D],H=z*(D+.5);if(P===cr.Checkbox)Wl(t,{x:n+H-I,y:r+$u,size:_,stroke:d?R:k,fill:d?T:void 0,isChecked:d});else{if(d&&!h&&g&&P===cr.Expand)continue;(!x||P!==cr.Expand)&&m.drawSprite(t,{sprite:L||bD[P],x:n+H-I,y:r+$u,size:_,theme:c})}}return}jn(t,{x:n+i/2,y:r+$l+1,text:l,textAlign:"center",fill:k})},AD=(t,e)=>{const{theme:n}=e,{commentCountBg:r,commentCountTextColor:i}=n;it(t,{...e,x:e.x,y:e.y,width:18,height:16,stroke:r,radius:3,fill:r}),jn(t,{...e,x:e.x+9,y:e.y+3.5,text:e.count>99?"99+":e.count.toString(),textAlign:"center",verticalAlign:"middle",fontSize:10,fill:i})},OD=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,fill:c,column:h,hasMenu:d,spriteManager:p}=e,{name:m,icon:g,description:x,hasMenu:b,isPrimary:C}=h,{cellLineColor:w,columnHeaderBg:S,iconFgCommon:k,columnHeaderNameColor:_,fontSizeSM:R,iconSizeXS:T}=l;let M=i-Cr*2,I=Cr;const z=d&&b;it(t,{x:n+.5,y:r,width:i-.5,height:a,fill:c??S}),Ei(t,{x:n,y:r,points:[0,a,i,a,i,0],stroke:w}),C&&(M=M-T-Cr,p.drawSprite(t,{sprite:Xn.Lock,x:n+I,y:r+(ho-T)/2,size:T,theme:l}),I+=T+Cr/2),g&&(M=M-T,p.drawSprite(t,{sprite:g,x:n+I,y:r+(ho-T)/2,size:T,theme:l}),I+=T+Cr/2),z&&(M=M-us-Cr,rI(t,{points:[{x:n+i-Cr-us,y:r+ho/2-us/4},{x:n+i-Cr,y:r+ho/2-us/4},{x:n+i-Cr-us/2,y:r+ho/2+us/4}],radiusAll:1,fill:k})),x&&(p.drawSprite(t,{sprite:Xn.Description,x:z?n+i-2*T-Cr:n+i-T-Cr,y:r+(ho-T)/2,size:T,theme:l}),M=M-T-Cr),xs(t,{x:n+I,y:r+$l,text:m,maxLines:Math.floor((a-$l)/bm),lineHeight:bm,fontSize:R,maxWidth:M,fill:_})},zD=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,rowControls:c,isChecked:h,isMultiSelectionEnable:d}=e,{iconSizeXS:p,staticWhite:m,columnHeaderBg:g,cellLineColor:x,rowHeaderTextColor:b,iconBgSelected:C}=l,w=p/2;it(t,{x:n,y:r,width:i,height:a,fill:g}),Ei(t,{x:n,y:r,points:[0,a,i,a],stroke:x}),d&&c.some(S=>S.type===cr.Checkbox)&&Wl(t,{x:i/2-w+.5,y:a/2-w+.5,size:p,stroke:h?m:b,fill:h?C:void 0,isChecked:h})},PD=(t,e,n)=>{const{visibleRegion:r,coordInstance:i,columns:a,theme:l,spriteManager:c,mouseState:h,scrollState:d,selection:p,rowControls:m,isInteracting:g,isColumnHeaderMenuVisible:x,isMultiSelectionEnable:b}=e,{startColumnIndex:C,stopColumnIndex:w}=r,{containerWidth:S,freezeRegionWidth:k,rowInitSize:_,columnInitSize:R,freezeColumnCount:T,pureRowCount:M}=i,{scrollLeft:I}=d,{fontSizeSM:z,fontFamily:D}=l,{isColumnSelection:P,isRowSelection:L,ranges:H}=p,{type:$,columnIndex:Y}=h,te=n===Or.Freeze,J=te?0:Math.max(T,C),re=te?Math.max(T-1,0):w,ie=M-1;t.save(),t.beginPath(),t.rect(te?0:k+1,0,te?k+1:S-k,_+1),t.clip(),t.font=`normal ${z}px ${D}`;for(let U=J;U<=re;U++){const ce=a[U],ue=ce?.customTheme?{...l,...ce.customTheme}:l,{columnHeaderBgHovered:pe,columnHeaderBgSelected:He}=ue,V=i.getColumnRelativeOffset(U,I),se=i.getColumnWidth(U),ze=P&&p.includes([U,U]),Ne=!g&&[K.ColumnHeader,K.ColumnHeaderMenu].includes($)&&Y===U;let ae;ze?ae=He:Ne&&(ae=pe),ce&&OD(t,{x:V+.5,y:.5,width:se,height:_,column:ce,fill:ae,hasMenu:x,theme:ue,spriteManager:c})}const G=L&&Lt.isEqual(H[0],[0,ie]);zD(t,{x:0,y:.5,width:R+1.5,height:_,theme:l,rowControls:m,isChecked:G,isMultiSelectionEnable:b}),t.restore()},ND=(t,e)=>{const{x:n,y:r,width:i,height:a,theme:l,isHover:c,coordInstance:h,spriteManager:d}=e,{appendRowBgHovered:p,iconSizeSM:m,cellBg:g,cellLineColor:x}=l,{columnInitSize:b}=h,C=m/2;t.save(),t.beginPath(),it(t,{x:n+.5,y:r+.5,width:i,height:a,fill:c?p:g}),it(t,{x:n,y:r+a,width:i,height:1,fill:x}),d.drawSprite(t,{sprite:Xn.Add,x:n+b/2-C+.5,y:r+a/2-C+.5,size:m,theme:l}),t.restore()},FD=(t,e)=>{const{coordInstance:n,theme:r,mouseState:i,scrollState:a,isColumnAppendEnable:l,spriteManager:c}=e,{scrollLeft:h,scrollTop:d}=a,{totalWidth:p,totalHeight:m}=n,{type:g}=i;if(!l)return;const{iconSizeSM:x,columnHeaderBg:b,cellLineColor:C,columnHeaderBgHovered:w}=r,S=g===K.AppendColumn,k=p-h;it(t,{x:k+1,y:.5,width:vm,height:m-d,fill:S?w:b}),Ei(t,{x:k+.5,y:ho+.5,points:[0,0,0,m-d-ho],stroke:C});const _=x/2;c.drawSprite(t,{sprite:Xn.Add,x:k+vm/2-_+.5,y:ho/2-_+.5,size:x,theme:r})},LD=(t,e)=>{const{theme:n,scrollState:r,coordInstance:i,isColumnResizable:a,columnResizeState:l,hoveredColumnResizeIndex:c}=e,{columnIndex:h}=l,d=a&&c>-1,p=h>-1;if(!d&&!p)return;const{scrollLeft:m}=r,{rowInitSize:g}=i,{columnResizeHandlerBg:x}=n;let b=0;if(p){const C=i.getColumnWidth(h);b=i.getColumnRelativeOffset(h,m)+C}else{const C=i.getColumnWidth(c);b=i.getColumnRelativeOffset(c,m)+C}it(t,{x:b-wm/2+.5,y:Cm+.5,width:wm,height:g-Cm*2,fill:x,radius:3})},HD=(t,e)=>{const{columns:n,theme:r,mouseState:i,scrollState:a,dragState:l,coordInstance:c}=e,{columnDraggingPlaceholderBg:h,interactionLineColorHighlight:d}=r,{type:p,isDragging:m,ranges:g,delta:x}=l,{containerHeight:b}=c,{x:C}=i,{scrollLeft:w}=a;if(!m||p!==qt.Columns)return;const S=g[0][0];it(t,{x:C-x,y:.5,width:n[S].width,height:b,fill:h});const k=Gd(c,i,a,p),_=c.getColumnRelativeOffset(k,w);it(t,{x:_-.5,y:.5,width:2,height:b,fill:d})},BD=(t,e)=>{const{theme:n,mouseState:r,scrollState:i,dragState:a,coordInstance:l}=e,{columnDraggingPlaceholderBg:c,interactionLineColorHighlight:h}=n,{type:d,isDragging:p,ranges:m,delta:g}=a,{containerWidth:x}=l,{scrollTop:b}=i,{y:C}=r;if(!p||d!==qt.Rows)return;const w=m[0][0];it(t,{x:.5,y:C-g,width:x,height:l.getRowHeight(w),fill:c});const S=Gd(l,r,i,d),_=l.getRowOffset(S)-b;it(t,{x:.5,y:_-.5,width:x,height:2,fill:h})},WD=(t,e)=>{const{coordInstance:n,mouseState:r,scrollState:i,columnFreezeState:a,theme:l}=e,{isFreezing:c,targetIndex:h}=a,{type:d,x:p,y:m}=r;if(d!==K.ColumnFreezeHandler&&!c)return;const{scrollLeft:g}=i,{interactionLineColorHighlight:x}=l,{containerHeight:b,freezeRegionWidth:C}=n,w=c?p:C;if(c){const S=n.getColumnRelativeOffset(h+1,g);it(t,{x:S-1,y:0,width:2,height:b,fill:x})}it(t,{x:w-Sm/2,y:m-km/2,width:Sm,height:km,fill:x,radius:4}),it(t,{x:w-1,y:0,width:2,height:b,fill:x})},$D=t=>{const{imageManager:e,coordInstance:n,visibleRegion:r,getLinearRow:i}=t,{startColumnIndex:a,stopColumnIndex:l,startRowIndex:c,stopRowIndex:h}=r,d=i(c).realIndex,p=i(h).realIndex,{freezeColumnCount:m}=n;e?.setWindow({x:a,y:d,width:l-a,height:p-d},m)},Mm=(t,e,n)=>{const{theme:r,coordInstance:i,scrollState:a,height:l}=e,{interactionLineColorCommon:c}=r,{scrollLeft:h}=a,{freezeRegionWidth:d,containerHeight:p}=i,m=n===pa.Top,g=m?0:p,x=m?p:l;if(h===0)return it(t,{x:d,y:g+.5,width:1,height:x-g,fill:c});t.save(),t.beginPath(),t.shadowColor=c,t.shadowBlur=5,t.shadowOffsetX=3,t.strokeStyle=c,t.moveTo(d+.5,g),t.lineTo(d+.5,x),t.stroke(),t.restore()},YD=(t,e)=>{const{columnHeaderHeight:n}=e;n!==0&&([Or.Freeze,Or.Other].forEach(r=>PD(t,e,r)),FD(t,e))},VD=(t,e,n)=>{const{coordInstance:r,columns:i,theme:a,height:l,visibleRegion:c,mouseState:h,scrollState:d,columnStatistics:p,groupCollection:m,getLinearRow:g}=e;if(p==null)return;const{scrollLeft:x,scrollTop:b}=d;let{startColumnIndex:C,stopColumnIndex:w}=c;const{startRowIndex:S,stopRowIndex:k}=c,{type:_,columnIndex:R,rowIndex:T}=h,{rowInitSize:M,containerHeight:I,containerWidth:z,freezeRegionWidth:D,freezeColumnCount:P}=r,{fontSizeXS:L,fontFamily:H,columnHeaderBg:$,groupHeaderBgTertiary:Y,groupHeaderBgSecondary:te,groupHeaderBgPrimary:J}=a,re=n===Or.Freeze,ie=I+.5;C=re?0:Math.max(P,C),w=re?Math.max(P-1,0):w,t.save(),t.beginPath(),t.rect(re?0:D,M,re?D:z-D,l),t.clip(),t.font=`${L}px ${H}`;const{groupColumns:G}=m??{};for(let U=C;U<=w;U++){const ce=r.getColumnRelativeOffset(U,x),ue=r.getColumnWidth(U),pe=U===0,He=U===R,V=i[U];if(V==null)continue;const{id:se,name:ze,statisticLabel:Ne}=V;if(G!=null){const ve=[Y,te,J].slice(-G.length);for(let je=S;je<=k;je++){const Qe=g(je),Ue=r.getRowHeight(je),{type:Me}=Qe,Fe=r.getRowOffset(je)-b;if(Me===vt.Group){const{id:st,depth:Ee}=Qe,Ze=p[se??ze]?.[st],Et=pe?Math.min(jn(t,{maxWidth:ue,text:Ze??Ne?.label??"Summary",needRender:!1,fontSize:L}).width+Qd,ue):ue-1;Tm(t,{x:pe?ce+ue-Et:ce+1,y:Fe+1,textOffsetY:bd/2-2,width:Et,height:Ue-1,text:Ze,defaultLabel:Ne?.label,bgColor:pe&&Ze?ve[Ee]:void 0,isHovered:He&&je===T&&_===K.GroupStatistic,theme:a})}}}const ae=p[se??ze]?.total;Tm(t,{x:ce,y:ie+1,textOffsetY:$l,width:ue,height:bd,text:ae,bgColor:$,isHovered:He&&_===K.ColumnStatistic,showAlways:Ne?.showAlways,defaultLabel:Ne?.label,theme:a})}t.restore()},Tm=(t,e)=>{const{x:n,y:r,width:i,height:a,text:l,textOffsetY:c,isHovered:h,showAlways:d,theme:p,defaultLabel:m,bgColor:g}=e,{rowHeaderTextColor:x,columnStatisticBgHovered:b,fontSizeXS:C}=p;(l||h||d||g)&&it(t,{x:n,y:r,width:i,height:a,fill:h?b:g});const w={x:n+.5,y:r+(c??.5),textAlign:"right",maxWidth:i-Qd/2,fill:x,fontSize:C};(h||d)&&!l&&jn(t,{...w,text:m||"Summary"}),l&&jn(t,{...w,text:l})},qD=(t,e)=>{const{coordInstance:n,theme:r,columnStatistics:i,height:a}=e,{containerWidth:l}=n,{cellLineColor:c}=r,h=a-bd+.5;i!=null&&([Or.Freeze,Or.Other].forEach(d=>VD(t,e,d)),Ei(t,{x:0,y:h,points:[0,0,l,0],stroke:c}))},UD=(t,e)=>e==null?!0:!(t.theme===e.theme&&t.columns===e.columns&&t.getLinearRow===e.getLinearRow&&t.real2RowIndex===e.real2RowIndex&&t.getCellContent===e.getCellContent&&t.coordInstance===e.coordInstance&&t.visibleRegion===e.visibleRegion&&t.forceRenderFlag===e.forceRenderFlag&&t.hoverCellPosition===e.hoverCellPosition),GD=(t,e)=>{if(!t)return;const{containerWidth:n,containerHeight:r,pixelRatio:i,shouldRerender:a,draw:l}=e,c=Math.ceil(n*i),h=Math.ceil(r*i);(t.width!==c||t.height!==h)&&(t.width=c,t.height=h);const d=t.getContext("2d");d!=null&&(a&&(d.clearRect(0,0,c,h),d.save(),i!==1&&d.scale(i,i),d.beginPath(),d.rect(0,0,n,r),d.clip()),l(d),a&&d.restore())},XD=(t,e,n,r)=>{const{coordInstance:i,scrollState:a,height:l,columnStatistics:c}=n,{isScrolling:h}=a,{containerWidth:d}=i;if(d===0||l===0)return;const p=Math.ceil(window.devicePixelRatio??1),m=Math.ceil(d*p),g=Math.ceil(l*p),x=h||UD(n,r);(t.width!==m||t.height!==g)&&(t.width=m,t.height=g,t.style.width=d+"px",t.style.height=l+"px");const b=t.getContext("2d");b!=null&&(b.clearRect(0,0,m,g),b.save(),p!==1&&b.scale(p,p),b.beginPath(),b.rect(0,0,d,l),b.clip(),GD(e,{containerWidth:d,containerHeight:l,pixelRatio:p,shouldRerender:x,draw:C=>{SD(b,C,{...n,shouldRerender:x})}}),b.save(),b.setTransform(1,0,0,1,0,0),b.drawImage(e,0,0,m,g),b.restore(),YD(b,n),Mm(b,n,pa.Top),MD(b,n),ID(b,n),TD(b,n),_D(b,n),qD(b,n),c!=null&&Mm(b,n,pa.Bottom),LD(b,n),BD(b,n),HD(b,n),WD(b,n),$D(n),b.restore())},QD=SE,{rowHeight:jm}=nn,ZD=(t,e)=>{const{cell:n,rect:r,style:i,theme:a,isEditing:l,onChange:c}=t,{cellLineColorActived:h}=a,{width:d,height:p}=r,{displayData:m,type:g}=n,x=n?.isWrap,b=y.useRef(null),[C,w]=y.useState(m);y.useImperativeHandle(e,()=>({focus:()=>b.current?.focus(),setValue:T=>w(String(T??"")),saveValue:S}));const S=()=>{C===m||!l||(g===be.Number?c?.(Number(C)):c?.(typeof C=="string"?C.trim():C))},k=T=>{const M=T.target.value;w(M)},_=T=>{const{keyCode:M,shiftKey:I}=T;M===Nl.Key.Enter&&!I&&T.preventDefault(),M===Nl.Key.Enter&&I&&T.stopPropagation()},R=y.useMemo(()=>{const T={width:d+4,minHeight:p+4,height:x?"auto":p+4,marginLeft:-2,marginTop:-2,textAlign:g===be.Number?"right":"left"};return p>jm&&(T.paddingBottom=p-jm),T},[g,p,d,x]);return u.jsx(u.Fragment,{children:x?u.jsxs("div",{style:{...R,paddingBottom:16,border:`2px solid ${h}`,...i},className:"relative rounded-md bg-background",children:[u.jsx(QD,{ref:b,className:"w-full resize-none rounded border-none bg-background px-2 pt-1 text-[13px] leading-[1.4rem] focus-visible:outline-none",value:C,minRows:2,maxRows:5,onBlur:S,onKeyDown:_,onChange:k}),u.jsx("div",{className:"absolute bottom-[2px] left-0 w-full rounded-b-md bg-background pb-[2px] pr-1 text-right text-xs text-slate-400 dark:text-slate-600",children:"Shift + Enter"})]}):u.jsx(ac,{ref:b,style:{...R,border:`2px solid ${h}`,...i},value:C,className:"cursor-text border-2 px-2 text-[13px] shadow-none focus-visible:ring-transparent bg-background",onChange:k,onBlur:S,onMouseDown:T=>T.stopPropagation()})})},JD=y.forwardRef(ZD),KD=(t,e)=>{const{cell:n,onChange:r}=t,i=y.useRef(null),[a,l]=y.useState(n.data);y.useImperativeHandle(e,()=>({focus:()=>i.current?.focus(),setValue:h=>l(h),saveValue:Lt.noop}));const c=h=>{if(!h.metaKey&&h.keyCode===Nl.Key.Enter){const d=!a;l(d),r?.(d||null)}};return u.jsx("div",{onKeyDown:c,className:"size-0",children:u.jsx("input",{ref:i,className:"size-0 border-none p-0 shadow-none outline-none"})})},e4=y.forwardRef(KD),t4=(t,e)=>{const{cell:n,style:r,onChange:i,isEditing:a}=t,l=y.useRef(null),[c,h]=y.useState(n.data);y.useImperativeHandle(e,()=>({focus:()=>l.current?.focus(),setValue:m=>h(m),saveValue:()=>{a&&i?.(c?.length?c:null)}}));const d=(c||[]).map(m=>m.url).join(", "),p=()=>{const m=(l.current?.value||"").split(",").map(g=>g.trim()).filter(Boolean).map((g,x)=>({id:`${x}`,url:g}));h(m.length?m:[]),i?.(m.length?m:null)};return u.jsx("div",{className:"rounded-sm border p-2 shadow-sm",style:r,children:u.jsx(ac,{ref:l,defaultValue:d,placeholder:"输入图片URL，逗号分隔",onBlur:p})})},n4=y.forwardRef(t4),r4=(t,e)=>{const{cell:n,style:r,onChange:i,isEditing:a}=t,l=y.useRef(null),[c,h]=y.useState(n.displayData?.join(", ")||"");y.useImperativeHandle(e,()=>({focus:()=>l.current?.focus(),setValue:p=>{const m=Array.isArray(p)?p.join(", "):"";h(m)},saveValue:()=>{if(!a)return;const p=c.split(",").map(m=>parseFloat(m.trim())).filter(m=>!isNaN(m));i?.(p.length?p:null)}}));const d=()=>{const p=c.split(",").map(m=>parseFloat(m.trim())).filter(m=>!isNaN(m));i?.(p.length?p:null)};return u.jsx("div",{className:"rounded-sm border p-2 shadow-sm",style:r,children:u.jsxs("div",{className:"space-y-2",children:[u.jsx(ac,{ref:l,type:"text",value:c,onChange:p=>h(p.target.value),onBlur:d,placeholder:"输入数字，用逗号分隔 (例如: 10, 20, 30)",className:"w-full"}),u.jsx("div",{className:"text-xs text-muted-foreground",children:"输入数字数据，用逗号分隔。例如：10, 20, 30, 40"})]})})},o4=y.forwardRef(r4);function vo(t){return Array.isArray?Array.isArray(t):Ux(t)==="[object Array]"}function i4(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function s4(t){return t==null?"":i4(t)}function Ur(t){return typeof t=="string"}function Vx(t){return typeof t=="number"}function a4(t){return t===!0||t===!1||l4(t)&&Ux(t)=="[object Boolean]"}function qx(t){return typeof t=="object"}function l4(t){return qx(t)&&t!==null}function lr(t){return t!=null}function Vu(t){return!t.trim().length}function Ux(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const c4="Incorrect 'index' type",u4=t=>`Invalid value for key ${t}`,d4=t=>`Pattern length exceeds max of ${t}.`,f4=t=>`Missing ${t} property in key`,h4=t=>`Property 'weight' in key '${t}' must be a positive integer`,Em=Object.prototype.hasOwnProperty;class p4{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=Gx(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Gx(t){let e=null,n=null,r=null,i=1,a=null;if(Ur(t)||vo(t))r=t,e=Im(t),n=vd(t);else{if(!Em.call(t,"name"))throw new Error(f4("name"));const l=t.name;if(r=l,Em.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(h4(l));e=Im(l),n=vd(l),a=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:a}}function Im(t){return vo(t)?t:t.split(".")}function vd(t){return vo(t)?t.join("."):t}function m4(t,e){let n=[],r=!1;const i=(a,l,c)=>{if(lr(a))if(!l[c])n.push(a);else{let h=l[c];const d=a[h];if(!lr(d))return;if(c===l.length-1&&(Ur(d)||Vx(d)||a4(d)))n.push(s4(d));else if(vo(d)){r=!0;for(let p=0,m=d.length;p<m;p+=1)i(d[p],l,c+1)}else l.length&&i(d,l,c+1)}};return i(t,Ur(e)?e.split("."):e,0),r?n:n[0]}const g4={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},x4={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},y4={location:0,threshold:.6,distance:100},b4={useExtendedSearch:!1,getFn:m4,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Pe={...x4,...g4,...y4,...b4};const v4=/[^ ]+/g;function w4(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const a=i.match(v4).length;if(n.has(a))return n.get(a);const l=1/Math.pow(a,.5*t),c=parseFloat(Math.round(l*r)/r);return n.set(a,c),c},clear(){n.clear()}}}class Zd{constructor({getFn:e=Pe.getFn,fieldNormWeight:n=Pe.fieldNormWeight}={}){this.norm=w4(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ur(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Ur(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!lr(e)||Vu(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,a)=>{let l=i.getFn?i.getFn(e):this.getFn(e,i.path);if(lr(l)){if(vo(l)){let c=[];const h=[{nestedArrIndex:-1,value:l}];for(;h.length;){const{nestedArrIndex:d,value:p}=h.pop();if(lr(p))if(Ur(p)&&!Vu(p)){let m={v:p,i:d,n:this.norm.get(p)};c.push(m)}else vo(p)&&p.forEach((m,g)=>{h.push({nestedArrIndex:g,value:m})})}r.$[a]=c}else if(Ur(l)&&!Vu(l)){let c={v:l,n:this.norm.get(l)};r.$[a]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Xx(t,e,{getFn:n=Pe.getFn,fieldNormWeight:r=Pe.fieldNormWeight}={}){const i=new Zd({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(Gx)),i.setSources(e),i.create(),i}function C4(t,{getFn:e=Pe.getFn,fieldNormWeight:n=Pe.fieldNormWeight}={}){const{keys:r,records:i}=t,a=new Zd({getFn:e,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(i),a}function vl(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Pe.distance,ignoreLocation:a=Pe.ignoreLocation}={}){const l=e/t.length;if(a)return l;const c=Math.abs(r-n);return i?l+c/i:c?1:l}function S4(t=[],e=Pe.minMatchCharLength){let n=[],r=-1,i=-1,a=0;for(let l=t.length;a<l;a+=1){let c=t[a];c&&r===-1?r=a:!c&&r!==-1&&(i=a-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[a-1]&&a-r>=e&&n.push([r,a-1]),n}const vi=32;function k4(t,e,n,{location:r=Pe.location,distance:i=Pe.distance,threshold:a=Pe.threshold,findAllMatches:l=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,includeMatches:h=Pe.includeMatches,ignoreLocation:d=Pe.ignoreLocation}={}){if(e.length>vi)throw new Error(d4(vi));const p=e.length,m=t.length,g=Math.max(0,Math.min(r,m));let x=a,b=g;const C=c>1||h,w=C?Array(m):[];let S;for(;(S=t.indexOf(e,b))>-1;){let I=vl(e,{currentLocation:S,expectedLocation:g,distance:i,ignoreLocation:d});if(x=Math.min(I,x),b=S+p,C){let z=0;for(;z<p;)w[S+z]=1,z+=1}}b=-1;let k=[],_=1,R=p+m;const T=1<<p-1;for(let I=0;I<p;I+=1){let z=0,D=R;for(;z<D;)vl(e,{errors:I,currentLocation:g+D,expectedLocation:g,distance:i,ignoreLocation:d})<=x?z=D:R=D,D=Math.floor((R-z)/2+z);R=D;let P=Math.max(1,g-D+1),L=l?m:Math.min(g+D,m)+p,H=Array(L+2);H[L+1]=(1<<I)-1;for(let Y=L;Y>=P;Y-=1){let te=Y-1,J=n[t.charAt(te)];if(C&&(w[te]=+!!J),H[Y]=(H[Y+1]<<1|1)&J,I&&(H[Y]|=(k[Y+1]|k[Y])<<1|1|k[Y+1]),H[Y]&T&&(_=vl(e,{errors:I,currentLocation:te,expectedLocation:g,distance:i,ignoreLocation:d}),_<=x)){if(x=_,b=te,b<=g)break;P=Math.max(1,2*g-b)}}if(vl(e,{errors:I+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>x)break;k=H}const M={isMatch:b>=0,score:Math.max(.001,_)};if(C){const I=S4(w,c);I.length?h&&(M.indices=I):M.isMatch=!1}return M}function _4(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const Yl=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class Qx{constructor(e,{location:n=Pe.location,threshold:r=Pe.threshold,distance:i=Pe.distance,includeMatches:a=Pe.includeMatches,findAllMatches:l=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,isCaseSensitive:h=Pe.isCaseSensitive,ignoreDiacritics:d=Pe.ignoreDiacritics,ignoreLocation:p=Pe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:a,findAllMatches:l,minMatchCharLength:c,isCaseSensitive:h,ignoreDiacritics:d,ignoreLocation:p},e=h?e:e.toLowerCase(),e=d?Yl(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const m=(x,b)=>{this.chunks.push({pattern:x,alphabet:_4(x),startIndex:b})},g=this.pattern.length;if(g>vi){let x=0;const b=g%vi,C=g-b;for(;x<C;)m(this.pattern.substr(x,vi),x),x+=vi;if(b){const w=g-vi;m(this.pattern.substr(w),w)}}else m(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?Yl(e):e,this.pattern===e){let C={isMatch:!0,score:0};return i&&(C.indices=[[0,e.length-1]]),C}const{location:a,distance:l,threshold:c,findAllMatches:h,minMatchCharLength:d,ignoreLocation:p}=this.options;let m=[],g=0,x=!1;this.chunks.forEach(({pattern:C,alphabet:w,startIndex:S})=>{const{isMatch:k,score:_,indices:R}=k4(e,C,w,{location:a+S,distance:l,threshold:c,findAllMatches:h,minMatchCharLength:d,includeMatches:i,ignoreLocation:p});k&&(x=!0),g+=_,k&&R&&(m=[...m,...R])});let b={isMatch:x,score:x?g/this.chunks.length:1};return x&&i&&(b.indices=m),b}}class Ko{constructor(e){this.pattern=e}static isMultiMatch(e){return Dm(e,this.multiRegex)}static isSingleMatch(e){return Dm(e,this.singleRegex)}search(){}}function Dm(t,e){const n=t.match(e);return n?n[1]:null}class R4 extends Ko{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class M4 extends Ko{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class T4 extends Ko{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class j4 extends Ko{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class E4 extends Ko{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class I4 extends Ko{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Zx extends Ko{constructor(e,{location:n=Pe.location,threshold:r=Pe.threshold,distance:i=Pe.distance,includeMatches:a=Pe.includeMatches,findAllMatches:l=Pe.findAllMatches,minMatchCharLength:c=Pe.minMatchCharLength,isCaseSensitive:h=Pe.isCaseSensitive,ignoreDiacritics:d=Pe.ignoreDiacritics,ignoreLocation:p=Pe.ignoreLocation}={}){super(e),this._bitapSearch=new Qx(e,{location:n,threshold:r,distance:i,includeMatches:a,findAllMatches:l,minMatchCharLength:c,isCaseSensitive:h,ignoreDiacritics:d,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Jx extends Ko{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],a=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+a,i.push([r,n-1]);const l=!!i.length;return{isMatch:l,score:l?0:1,indices:i}}}const wd=[R4,Jx,T4,j4,I4,E4,M4,Zx],Am=wd.length,D4=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,A4="|";function O4(t,e={}){return t.split(A4).map(n=>{let r=n.trim().split(D4).filter(a=>a&&!!a.trim()),i=[];for(let a=0,l=r.length;a<l;a+=1){const c=r[a];let h=!1,d=-1;for(;!h&&++d<Am;){const p=wd[d];let m=p.isMultiMatch(c);m&&(i.push(new p(m,e)),h=!0)}if(!h)for(d=-1;++d<Am;){const p=wd[d];let m=p.isSingleMatch(c);if(m){i.push(new p(m,e));break}}}return i})}const z4=new Set([Zx.type,Jx.type]);class P4{constructor(e,{isCaseSensitive:n=Pe.isCaseSensitive,ignoreDiacritics:r=Pe.ignoreDiacritics,includeMatches:i=Pe.includeMatches,minMatchCharLength:a=Pe.minMatchCharLength,ignoreLocation:l=Pe.ignoreLocation,findAllMatches:c=Pe.findAllMatches,location:h=Pe.location,threshold:d=Pe.threshold,distance:p=Pe.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:a,findAllMatches:c,ignoreLocation:l,location:h,threshold:d,distance:p},e=n?e:e.toLowerCase(),e=r?Yl(e):e,this.pattern=e,this.query=O4(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:a}=this.options;e=i?e:e.toLowerCase(),e=a?Yl(e):e;let l=0,c=[],h=0;for(let d=0,p=n.length;d<p;d+=1){const m=n[d];c.length=0,l=0;for(let g=0,x=m.length;g<x;g+=1){const b=m[g],{isMatch:C,indices:w,score:S}=b.search(e);if(C){if(l+=1,h+=S,r){const k=b.constructor.type;z4.has(k)?c=[...c,...w]:c.push(w)}}else{h=0,l=0,c.length=0;break}}if(l){let g={isMatch:!0,score:h/l};return r&&(g.indices=c),g}}return{isMatch:!1,score:1}}}const Cd=[];function N4(...t){Cd.push(...t)}function Sd(t,e){for(let n=0,r=Cd.length;n<r;n+=1){let i=Cd[n];if(i.condition(t,e))return new i(t,e)}return new Qx(t,e)}const Vl={AND:"$and",OR:"$or"},kd={PATH:"$path",PATTERN:"$val"},_d=t=>!!(t[Vl.AND]||t[Vl.OR]),F4=t=>!!t[kd.PATH],L4=t=>!vo(t)&&qx(t)&&!_d(t),Om=t=>({[Vl.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Kx(t,e,{auto:n=!0}={}){const r=i=>{let a=Object.keys(i);const l=F4(i);if(!l&&a.length>1&&!_d(i))return r(Om(i));if(L4(i)){const h=l?i[kd.PATH]:a[0],d=l?i[kd.PATTERN]:i[h];if(!Ur(d))throw new Error(u4(h));const p={keyId:vd(h),pattern:d};return n&&(p.searcher=Sd(d,e)),p}let c={children:[],operator:a[0]};return a.forEach(h=>{const d=i[h];vo(d)&&d.forEach(p=>{c.children.push(r(p))})}),c};return _d(t)||(t=Om(t)),r(t)}function H4(t,{ignoreFieldNorm:e=Pe.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:a,score:l})=>{const c=i?i.weight:null;r*=Math.pow(l===0&&c?Number.EPSILON:l,(c||1)*(e?1:a))}),n.score=r})}function B4(t,e){const n=t.matches;e.matches=[],lr(n)&&n.forEach(r=>{if(!lr(r.indices)||!r.indices.length)return;const{indices:i,value:a}=r;let l={indices:i,value:a};r.key&&(l.key=r.key.src),r.idx>-1&&(l.refIndex=r.idx),e.matches.push(l)})}function W4(t,e){e.score=t.score}function $4(t,e,{includeMatches:n=Pe.includeMatches,includeScore:r=Pe.includeScore}={}){const i=[];return n&&i.push(B4),r&&i.push(W4),t.map(a=>{const{idx:l}=a,c={item:e[l],refIndex:l};return i.length&&i.forEach(h=>{h(a,c)}),c})}class Fi{constructor(e,n={},r){this.options={...Pe,...n},this.options.useExtendedSearch,this._keyStore=new p4(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Zd))throw new Error(c4);this._myIndex=n||Xx(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){lr(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const a=this._docs[r];e(a,r)&&(this.removeAt(r),r-=1,i-=1,n.push(a))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:a,sortFn:l,ignoreFieldNorm:c}=this.options;let h=Ur(e)?Ur(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return H4(h,{ignoreFieldNorm:c}),a&&h.sort(l),Vx(n)&&n>-1&&(h=h.slice(0,n)),$4(h,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Sd(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:a,i:l,n:c})=>{if(!lr(a))return;const{isMatch:h,score:d,indices:p}=n.searchIn(a);h&&i.push({item:a,idx:l,matches:[{score:d,value:a,norm:c,indices:p}]})}),i}_searchLogical(e){const n=Kx(e,this.options),r=(c,h,d)=>{if(!c.children){const{keyId:m,searcher:g}=c,x=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(h,m),searcher:g});return x&&x.length?[{idx:d,item:h,matches:x}]:[]}const p=[];for(let m=0,g=c.children.length;m<g;m+=1){const x=c.children[m],b=r(x,h,d);if(b.length)p.push(...b);else if(c.operator===Vl.AND)return[]}return p},i=this._myIndex.records,a={},l=[];return i.forEach(({$:c,i:h})=>{if(lr(c)){let d=r(n,c,h);d.length&&(a[h]||(a[h]={idx:h,item:c,matches:[]},l.push(a[h])),d.forEach(({matches:p})=>{a[h].matches.push(...p)}))}}),l}_searchObjectList(e){const n=Sd(e,this.options),{keys:r,records:i}=this._myIndex,a=[];return i.forEach(({$:l,i:c})=>{if(!lr(l))return;let h=[];r.forEach((d,p)=>{h.push(...this._findMatches({key:d,value:l[p],searcher:n}))}),h.length&&a.push({idx:c,item:l,matches:h})}),a}_findMatches({key:e,value:n,searcher:r}){if(!lr(n))return[];let i=[];if(vo(n))n.forEach(({v:a,i:l,n:c})=>{if(!lr(a))return;const{isMatch:h,score:d,indices:p}=r.searchIn(a);h&&i.push({score:d,key:e,value:a,idx:l,norm:c,indices:p})});else{const{v:a,n:l}=n,{isMatch:c,score:h,indices:d}=r.searchIn(a);c&&i.push({score:h,key:e,value:a,norm:l,indices:d})}return i}}Fi.version="7.1.0";Fi.createIndex=Xx;Fi.parseIndex=C4;Fi.config=Pe;Fi.parseQuery=Kx;N4(P4);const Y4=(t,e)=>{const{cell:n,style:r,isEditing:i,setEditing:a,onChange:l,rect:c}=t,{data:h,isMultiple:d,choiceSorted:p=[],choiceMap:m={},readonly:g}=n,[x,b]=y.useState(""),C=y.useRef(null),w=y.useMemo(()=>p.map(z=>({id:z.id||z.name,name:z.name,color:z.color,backgroundColor:z.backgroundColor})),[p]),S=y.useMemo(()=>new Fi(w,{keys:["name"],threshold:.3,includeScore:!0}),[w]),k=y.useMemo(()=>x?S.search(x).map(z=>z.item):w,[w,S,x]),_=y.useMemo(()=>h?Array.isArray(h)?h.map(z=>typeof z=="string"?z:z.title||z.id||z.name):[h]:[],[h]),R=y.useCallback(z=>_.includes(z),[_]);le.useImperativeHandle(e,()=>({focus:()=>C.current?.focus(),setValue:()=>{},saveValue:()=>{}}));const T=y.useCallback(z=>{if(!g)if(d){const D=R(z)?_.filter(P=>P!==z):[..._,z];l(D)}else l([z]),a?.(!1)},[g,d,R,_,l,a]),M=y.useCallback(z=>{z.key==="Enter"?(z.preventDefault(),k.length===1?T(k[0].id):d||a?.(!1)):z.key==="Escape"&&(z.preventDefault(),a?.(!1))},[k,T,d,a]),I=y.useMemo(()=>{if(!c)return{};const z={left:c.x,top:c.y+c.height},D=window.innerHeight,P=280;return z.top+P>D?{left:c.x,top:c.y-P}:z},[c]);return y.useEffect(()=>{i&&C.current?.focus()},[i]),y.useEffect(()=>{if(!i)return;const z=P=>{P.target.closest(".select-editor-popup")||a?.(!1)},D=P=>{P.key==="Escape"&&a?.(!1)};return document.addEventListener("mousedown",z),document.addEventListener("keydown",D),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("keydown",D)}},[i,a]),i?u.jsxs("div",{className:"select-editor-popup",style:{position:"fixed",display:"flex",flexDirection:"column",gap:"4px",padding:"8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e4,minWidth:"200px",maxWidth:"300px",...I,...r},children:[u.jsx("input",{ref:C,type:"text",value:x,onChange:z=>b(z.target.value),onKeyDown:M,placeholder:"Search options...",disabled:g,style:{padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"13px",outline:"none"}}),u.jsxs("div",{style:{maxHeight:"240px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"2px"},children:[k.map(z=>{const D=R(z.id);return u.jsxs("div",{onClick:()=>T(z.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",borderRadius:"4px",cursor:g?"not-allowed":"pointer",backgroundColor:D?"#dbeafe":"transparent",color:D?"#1e40af":"#374151",fontSize:"13px",transition:"background-color 0.15s"},onMouseEnter:P=>{g||(P.currentTarget.style.backgroundColor=D?"#bfdbfe":"#f3f4f6")},onMouseLeave:P=>{P.currentTarget.style.backgroundColor=D?"#dbeafe":"transparent"},children:[d&&u.jsx("div",{style:{width:"14px",height:"14px",border:"2px solid #d1d5db",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:D?"#3b82f6":"#ffffff",borderColor:D?"#3b82f6":"#d1d5db"},children:D&&u.jsx("span",{style:{color:"#ffffff",fontSize:"10px"},children:"✓"})}),z.color&&u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:z.color}}),u.jsx("span",{style:{flex:1},children:z.name})]},z.id)}),k.length===0&&u.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#9ca3af",fontSize:"13px"},children:"No options found"})]}),d&&u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("button",{onClick:()=>a?.(!1),style:{padding:"6px 12px",fontSize:"13px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:()=>a?.(!1),disabled:g,style:{padding:"6px 16px",fontSize:"13px",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:g?"not-allowed":"pointer",opacity:g?.5:1},children:"Confirm"})]})]}):null},V4=y.forwardRef(Y4),q4=({value:t,onChange:e,onSave:n,onCancel:r,readonly:i=!1,format:a="yyyy-MM-dd",showTime:l=!1,timeFormat:c="HH:mm",className:h,style:d,rect:p})=>{const m=R=>{if(R)try{const T=ER(R,a,new Date);return bi(T)?T:void 0}catch{return}},[g,x]=y.useState(m(t)),[b,C]=y.useState(()=>{if(!l||!t)return"00:00";try{const R=m(t);return R?Vo(R,c):"00:00"}catch{return"00:00"}}),w=p?lc(p,400):void 0,S=y.useCallback(R=>{if(x(R),!R){e(null);return}try{let T=Vo(R,a);if(l){const[M,I]=b.split(":").map(Number);R.setHours(M,I),T=Vo(R,`${a} ${c}`)}e(T)}catch(T){console.error("Date format error:",T)}},[e,a,l,c,b]),k=y.useCallback(R=>{const T=R.target.value;if(C(T),!!g)try{const[M,I]=T.split(":").map(Number),z=new Date(g);z.setHours(M,I);const D=Vo(z,`${a} ${c}`);e(D)}catch(M){console.error("Time format error:",M)}},[g,e,a,c]),_=y.useCallback(R=>{R.key==="Enter"?(R.preventDefault(),n?.()):R.key==="Escape"&&(R.preventDefault(),r?.())},[n,r]);return u.jsxs("div",{className:h,style:{position:"absolute",display:"flex",flexDirection:"column",gap:"8px",padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"280px",...w,...d},onKeyDown:_,children:[u.jsx(VT,{mode:"single",selected:g,onSelect:S,disabled:i,showOutsideDays:!0,styles:{root:{margin:0}}}),l&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("label",{style:{fontSize:"13px",color:"#6b7280"},children:"Time:"}),u.jsx("input",{type:"time",value:b,onChange:k,disabled:i,style:{padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"13px",flex:1}})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("button",{onClick:()=>{S(void 0),n?.()},style:{padding:"6px 12px",fontSize:"13px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear"}),u.jsx("button",{onClick:n,disabled:i,style:{padding:"6px 16px",fontSize:"13px",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer",opacity:i?.5:1},children:"Confirm"})]})]})},U4=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ys(t,e,n){const r=G4(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&zm(r,"path",a),zm(r,"relativePath",a),r}function G4(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=U4.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function zm(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const X4=[".DS_Store","Thumbs.db"];function Q4(t){return Ni(this,void 0,void 0,function*(){return ql(t)&&Z4(t.dataTransfer)?tA(t.dataTransfer,t.type):J4(t)?K4(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?eA(t):[]})}function Z4(t){return ql(t)}function J4(t){return ql(t)&&ql(t.target)}function ql(t){return typeof t=="object"&&t!==null}function K4(t){return Rd(t.target.files).map(e=>ys(e))}function eA(t){return Ni(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>ys(n))})}function tA(t,e){return Ni(this,void 0,void 0,function*(){if(t.items){const n=Rd(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(nA));return Pm(e0(r))}return Pm(Rd(t.files).map(n=>ys(n)))})}function Pm(t){return t.filter(e=>X4.indexOf(e.name)===-1)}function Rd(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function nA(t){if(typeof t.webkitGetAsEntry!="function")return Nm(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?t0(e):Nm(t,e)}function e0(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?e0(n):[n]],[])}function Nm(t,e){return Ni(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const l=yield a.getFile();return l.handle=a,ys(l)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return ys(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function rA(t){return Ni(this,void 0,void 0,function*(){return t.isDirectory?t0(t):oA(t)})}function t0(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function a(){e.readEntries(l=>Ni(this,void 0,void 0,function*(){if(l.length){const c=Promise.all(l.map(rA));i.push(c),a()}else try{const c=yield Promise.all(i);n(c)}catch(c){r(c)}}),l=>{r(l)})}a()})}function oA(t){return Ni(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=ys(r,t.fullPath);e(i)},r=>{n(r)})})})}function iA(t,e,n,r){const i=document.createElement("input");i.style.display="none",document.body.appendChild(i),i.type="file",t!=="*"&&(i.accept=t),i.multiple=e,i.addEventListener("change",a=>{n(a),document.body.removeChild(i)}),i.addEventListener("cancel",()=>{document.body.removeChild(i)}),r&&r(i),i.dispatchEvent(new MouseEvent("click"))}const sA=({onFilesSelected:t,onFilesSuccessfullySelected:e,onFilesRejected:n,onClear:r,validators:i})=>{const a=y.useCallback(d=>{t?.(d),i?.forEach(p=>{p.onFilesSelected(d)})},[t,i]),l=y.useCallback(d=>{e?.(d),i?.forEach(p=>{p.onFilesSuccessfullySelected(d)})},[i,e]),c=y.useCallback(d=>{n?.(d),i?.forEach(p=>{p.onFilesRejected(d)})},[i,n]),h=y.useCallback(()=>{r?.(),i?.forEach(d=>{var p;(p=d.onClear)==null||p.call(d)})},[i,r]);return{onFilesSelected:a,onFilesSuccessfullySelected:l,onFilesRejected:c,onClear:h}};var aA=Object.defineProperty,Ul=Object.getOwnPropertySymbols,n0=Object.prototype.hasOwnProperty,r0=Object.prototype.propertyIsEnumerable,Fm=(t,e,n)=>e in t?aA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lA=(t,e)=>{for(var n in e||(e={}))n0.call(e,n)&&Fm(t,n,e[n]);if(Ul)for(var n of Ul(e))r0.call(e,n)&&Fm(t,n,e[n]);return t},cA=(t,e)=>{var n={};for(var r in t)n0.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ul)for(var r of Ul(t))e.indexOf(r)<0&&r0.call(t,r)&&(n[r]=t[r]);return n},Lm=(t,e,n)=>new Promise((r,i)=>{var a=h=>{try{c(n.next(h))}catch(d){i(d)}},l=h=>{try{c(n.throw(h))}catch(d){i(d)}},c=h=>h.done?r(h.value):Promise.resolve(h.value).then(a,l);c((n=n.apply(t,e)).next())});const uA=[];function dA(t={}){const{accept:e="*",multiple:n=!0,readAs:r="Text",readFilesContent:i=!0,validators:a=uA,initializeWithCustomParameters:l}=t,[c,h]=y.useState([]),[d,p]=y.useState([]),[m,g]=y.useState([]),[x,b]=y.useState(!1),{onFilesSelected:C,onFilesSuccessfullySelected:w,onFilesRejected:S,onClear:k}=sA(t),_=y.useCallback(()=>{h([]),p([]),g([])},[]),R=y.useCallback(()=>{_(),k?.()},[_,k]),T=y.useCallback(I=>new Promise((z,D)=>{const P=new FileReader;P[`readAs${r}`].call(P,I,t.readAs==="Text"?t.encoding:void 0);const H=$=>{var Y=cA($,[]);D(lA({},Y))};P.onload=()=>Lm(null,null,function*(){return Promise.all(a.map($=>$.validateAfterParsing(t,I,P).catch(Y=>Promise.reject(H(Y))))).then(()=>z({content:P.result,name:I.name,lastModified:I.lastModified,path:I.path,size:I.size,type:I.type})).catch(()=>{})}),P.onerror=()=>{H({name:"FileReaderError",readerError:P.error,causedByFile:I})}}),[t,r,a]);return{openFilePicker:y.useCallback(()=>{const I=e instanceof Array?e.join(","):e;iA(I,n,z=>Lm(null,null,function*(){_(),b(!0);const D=yield Q4(z),P=(yield Promise.all(a.map($=>$.validateBeforeParsing(t,D).catch(Y=>Array.isArray(Y)?Y:[Y])))).flat(1).filter(Boolean);if(h(D),g(P),P.length){h([]),S?.({errors:P}),C?.({errors:P}),b(!1);return}if(!i){C?.({plainFiles:D,filesContent:[]}),b(!1);return}const L=[],H=yield Promise.all(D.map($=>T($).catch(Y=>{L.push(...Array.isArray(Y)?Y:[Y])})));if(b(!1),L.length){h([]),p([]),g($=>[...$,...L]),S?.({errors:L}),C?.({errors:P.concat(L)});return}p(H),h(D),g([]),w?.({filesContent:H,plainFiles:D}),C?.({plainFiles:D,filesContent:H})}),l)},[t,e,_,l,n,S,C,w,T,i,a]),filesContent:d,errors:m,loading:x,plainFiles:c,clear:R}}const fA=({value:t,onChange:e,onSave:n,onCancel:r,readonly:i=!1,maxFiles:a=10,maxSize:l=10*1024*1024,allowedTypes:c=[],onUpload:h,className:d,style:p,rect:m})=>{const[g,x]=y.useState(t||[]),[b,C]=y.useState(!1),{openFilePicker:w}=dA({readAs:"DataURL",accept:c.length>0?c:void 0,multiple:a>1,onFilesSuccessfullySelected:async({plainFiles:R})=>{if(R.find(M=>M.size>l)){console.error(`File size exceeds ${Iu(l)}`);return}if(h){C(!0);try{const M=await h(R),I=[...g,...M].slice(0,a);x(I),e(I.length>0?I:null)}catch(M){console.error("Upload failed:",M)}finally{C(!1)}}}}),S=y.useCallback(R=>{if(i)return;const T=g.filter(M=>M.id!==R);x(T),e(T.length>0?T:null)},[g,i,e]),k=m?lc(m,400):void 0,_=y.useCallback(R=>{window.open(R.url,"_blank","noopener,noreferrer")},[]);return u.jsxs("div",{className:d,style:{position:"absolute",display:"flex",flexDirection:"column",gap:"12px",padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"320px",maxWidth:"480px",...k,...p},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"320px",overflowY:"auto"},children:[g.length===0&&u.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#9ca3af",fontSize:"13px"},children:"No attachments yet"}),g.map(R=>{const T=R.type.startsWith("image/");return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",backgroundColor:"#f9fafb"},children:[T&&R.thumbnailUrl?u.jsx("img",{src:R.thumbnailUrl,alt:R.name,style:{width:"48px",height:"48px",objectFit:"cover",borderRadius:"4px",flexShrink:0}}):u.jsx("div",{style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#e5e7eb",borderRadius:"4px",fontSize:"20px",flexShrink:0},children:"📄"}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:R.name}),u.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af"},children:[Iu(R.size),R.width&&R.height&&` • ${R.width}×${R.height}`]})]}),u.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[u.jsx("button",{onClick:()=>_(R),title:"Preview",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"16px"},children:"👁️"}),u.jsx("button",{onClick:()=>S(R.id),disabled:i,title:"Remove",style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:i?"not-allowed":"pointer",opacity:i?.5:1,fontSize:"16px"},children:"🗑️"})]})]},R.id)})]}),g.length<a&&u.jsx("button",{onClick:()=>w(),disabled:i||b,style:{padding:"10px 16px",fontSize:"13px",fontWeight:500,color:"#3b82f6",backgroundColor:"#ffffff",border:"2px dashed #3b82f6",borderRadius:"6px",cursor:i||b?"not-allowed":"pointer",opacity:i||b?.5:1,transition:"all 0.2s"},children:b?"Uploading...":`📎 Add Attachment (${g.length}/${a})`}),u.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",textAlign:"center"},children:["Max ",a," files • ",Iu(l)," per file",c.length>0&&` • ${c.join(", ")}`]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("button",{onClick:r,style:{padding:"6px 12px",fontSize:"13px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:n,disabled:i,style:{padding:"6px 16px",fontSize:"13px",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer",opacity:i?.5:1},children:"Confirm"})]})]})},Hm={star:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),moon:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),sun:({className:t,style:e})=>u.jsxs("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"12",cy:"12",r:"5"}),u.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),heart:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),flame:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),zap:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M13 2L3 14h8l-1 8 10-12h-8l1-8z"})}),"thumb-up":({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})}),apple:({className:t,style:e})=>u.jsx("svg",{className:t,style:e,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 2c2 0 3 1 3 1s1-1 3-1c3 0 5 2.5 5 5 0 5-5 10-8 13-3-3-8-8-8-13 0-2.5 2-5 5-5zM12 2c-1-2-3-2-4-2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},hA=t=>({yellowBright:"#fbbf24",redBright:"#ef4444",tealBright:"#14b8a6",yellow:"#f59e0b",red:"#dc2626",teal:"#0d9488"})[t]||t,o0=y.forwardRef((t,e)=>{const{value:n,options:r={},readonly:i,className:a,style:l,onChange:c}=t,{icon:h="star",color:d="yellow",max:p=5}=r,[m,g]=y.useState(-1),x=Hm[h]||Hm.star,b=y.useMemo(()=>hA(d),[d]),C=y.useMemo(()=>{const k=parseInt(b.slice(1,3),16),_=parseInt(b.slice(3,5),16),R=parseInt(b.slice(5,7),16);return`rgba(${k}, ${_}, ${R}, 0.3)`},[b]),w=k=>{if(i)return;const _=k+1===n?null:k+1;c?.(_)},S=k=>{i||g(k)};return u.jsx("div",{ref:e,className:a,style:{display:"inline-flex",alignItems:"center",height:"32px",padding:"0 8px",...l},children:Array.from({length:p}).map((k,_)=>{let R={fill:"#d1d5db",color:"#d1d5db"};return n!=null&&_<n?R={fill:b,color:b}:_<=m&&(R={fill:C,color:C}),u.jsx("span",{style:{display:"inline-flex",cursor:i?"not-allowed":"pointer"},onMouseEnter:()=>S(_),onMouseLeave:()=>S(-1),onClick:()=>w(_),children:u.jsx(x,{className:"rating-icon",style:{width:"24px",height:"24px",marginRight:"8px",borderRadius:"4px",transition:"all 0.15s",...R}})},_)})})});o0.displayName="GridRatingEditor";const ds=t=>{try{return new URL(t),!0}catch{try{return new URL(`http://${t}`),!0}catch{return!1}}},wl=t=>t?t.match(/^https?:\/\//i)||t.match(/^mailto:/i)||t.match(/^tel:/i)?t:`http://${t}`:"",pA=({value:t,onChange:e,onSave:n,onCancel:r,readonly:i=!1,validateUrl:a=!0,openInNewTab:l=!0,className:c,style:h,rect:d})=>{const[p,m]=y.useState(t||""),[g,x]=y.useState(""),b=y.useRef(null),C=y.useCallback(R=>{const T=R.target.value;m(T),x(""),T&&a&&!ds(T)&&x("Please enter a valid URL"),e(T||null)},[e,a]),w=y.useCallback(()=>{if(a&&p&&!ds(p)){x("Please enter a valid URL before saving");return}const R=p?wl(p):null;e(R),n?.()},[p,a,e,n]),S=y.useCallback(()=>{if(!p)return;const R=wl(p);l?window.open(R,"_blank","noopener,noreferrer"):window.location.href=R},[p,l]),k=y.useCallback(R=>{R.key==="Enter"?(R.preventDefault(),w()):R.key==="Escape"&&(R.preventDefault(),r?.())},[w,r]),_=d?lc(d,200):void 0;return y.useEffect(()=>{b.current?.focus(),b.current?.select()},[]),u.jsxs("div",{className:c,style:{position:"absolute",display:"flex",flexDirection:"column",gap:"8px",padding:"12px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"300px",..._,...h},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[u.jsx("label",{style:{fontSize:"12px",color:"#6b7280",fontWeight:500},children:"URL"}),u.jsx("input",{ref:b,type:"text",value:p,onChange:C,onKeyDown:k,placeholder:"https://example.com",disabled:i,style:{padding:"8px 10px",border:`1px solid ${g?"#ef4444":"#d1d5db"}`,borderRadius:"4px",fontSize:"14px",outline:"none"}}),g&&u.jsx("span",{style:{fontSize:"12px",color:"#ef4444"},children:g})]}),p&&ds(p)&&u.jsxs("div",{style:{padding:"8px",backgroundColor:"#f9fafb",borderRadius:"4px",fontSize:"12px",color:"#6b7280",wordBreak:"break-all"},children:[u.jsx("div",{style:{marginBottom:"4px",fontWeight:500},children:"Preview:"}),u.jsx("a",{href:wl(p),target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"underline"},children:wl(p)})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("button",{onClick:S,disabled:!p||a&&!ds(p),style:{padding:"6px 12px",fontSize:"13px",color:"#3b82f6",backgroundColor:"#ffffff",border:"1px solid #3b82f6",borderRadius:"4px",cursor:!p||a&&!ds(p)?"not-allowed":"pointer",opacity:!p||a&&!ds(p)?.5:1},children:"Open Link"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:r,style:{padding:"6px 12px",fontSize:"13px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:w,disabled:i||a&&!!g,style:{padding:"6px 16px",fontSize:"13px",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:i||a&&g?"not-allowed":"pointer",opacity:i||a&&g?.5:1},children:"Confirm"})]})]})]})},Bm=t=>t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),Wm=t=>{const e=["#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e"],n=t.split("").reduce((r,i)=>r+i.charCodeAt(0),0);return e[n%e.length]},mA=({value:t,users:e=[],onChange:n,onSave:r,onCancel:i,readonly:a=!1,multiple:l=!1,searchable:c=!0,className:h,style:d,rect:p})=>{const[m,g]=y.useState(""),x=y.useRef(null),b=y.useMemo(()=>new Fi(e||[],{keys:["name","email"],threshold:.3,includeScore:!0}),[e]),C=y.useMemo(()=>m?b.search(m).map(M=>M.item):e||[],[e,b,m]),w=y.useMemo(()=>t?Array.isArray(t)?t:[t]:[],[t]),S=y.useMemo(()=>(e||[]).filter(M=>w.includes(M.id)),[e,w]),k=y.useCallback(M=>w.includes(M),[w]),_=y.useCallback(M=>{if(!a)if(l){const I=k(M)?w.filter(z=>z!==M):[...w,M];n(I.length>0?I:null)}else n(M),r?.()},[a,l,k,w,n,r]),R=y.useCallback(M=>{M.key==="Enter"?(M.preventDefault(),C.length===1?_(C[0].id):r?.()):M.key==="Escape"&&(M.preventDefault(),i?.())},[C,_,r,i]),T=p?lc(p,340):void 0;return y.useEffect(()=>{x.current?.focus()},[]),u.jsxs("div",{className:h,style:{position:"absolute",display:"flex",flexDirection:"column",gap:"8px",padding:"8px",backgroundColor:"#ffffff",border:"1px solid #d1d5db",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"360px",...T,...d},children:[S.length>0&&l&&u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",padding:"8px",backgroundColor:"#f9fafb",borderRadius:"6px"},children:S.map(M=>{const I=Wm(M.name);return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"16px",fontSize:"12px"},children:[M.avatar?u.jsx("img",{src:M.avatar,alt:M.name,style:{width:"20px",height:"20px",borderRadius:"50%",objectFit:"cover"}}):u.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:I,color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:600},children:Bm(M.name)}),u.jsx("span",{children:M.name}),!a&&u.jsx("button",{onClick:()=>_(M.id),style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center",border:"none",borderRadius:"50%",backgroundColor:"transparent",cursor:"pointer",fontSize:"12px",color:"#9ca3af"},children:"×"})]},M.id)})}),c&&u.jsx("input",{ref:x,type:"text",value:m,onChange:M=>g(M.target.value),onKeyDown:R,placeholder:"Search users...",disabled:a,style:{padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"13px",outline:"none"}}),u.jsxs("div",{style:{maxHeight:"280px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"2px"},children:[C.map(M=>{const I=k(M.id),z=Wm(M.name);return u.jsxs("div",{onClick:()=>_(M.id),style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",borderRadius:"6px",cursor:a?"not-allowed":"pointer",backgroundColor:I?"#dbeafe":"transparent",transition:"background-color 0.15s"},onMouseEnter:D=>{a||(D.currentTarget.style.backgroundColor=I?"#bfdbfe":"#f3f4f6")},onMouseLeave:D=>{D.currentTarget.style.backgroundColor=I?"#dbeafe":"transparent"},children:[l&&u.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #d1d5db",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:I?"#3b82f6":"#ffffff",borderColor:I?"#3b82f6":"#d1d5db",flexShrink:0},children:I&&u.jsx("span",{style:{color:"#ffffff",fontSize:"11px"},children:"✓"})}),M.avatar?u.jsx("img",{src:M.avatar,alt:M.name,style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",flexShrink:0}}):u.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:z,color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:600,flexShrink:0},children:Bm(M.name)}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.name}),M.email&&u.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:M.email})]})]},M.id)}),C.length===0&&u.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#9ca3af",fontSize:"13px"},children:"No users found"})]}),l&&u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[u.jsx("button",{onClick:i,style:{padding:"6px 12px",fontSize:"13px",color:"#6b7280",backgroundColor:"#f3f4f6",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:r,disabled:a,style:{padding:"6px 16px",fontSize:"13px",color:"#ffffff",backgroundColor:"#3b82f6",border:"none",borderRadius:"4px",cursor:a?"not-allowed":"pointer",opacity:a?.5:1},children:"Confirm"})]})]})},$m=new Set([be.Boolean,be.Rating,be.Button]),gA=(t,e)=>{const{theme:n,isEditing:r,coordInstance:i,scrollState:a,activeCell:l,selection:c,activeCellBound:h,scrollToItem:d,onUndo:p,onRedo:m,onCopy:g,onPaste:x,onChange:b,onDelete:C,onRowExpand:w,setEditing:S,setActiveCell:k,setSelection:_,real2RowIndex:R,getCellContent:T,scrollBy:M}=t,{scrollLeft:I,scrollTop:z}=a,{rowIndex:D,realRowIndex:P,columnIndex:L}=y.useMemo(()=>{const[ae,ve]=l??[-1,-1];return{rowIndex:R(ve)??-1,realRowIndex:ve,columnIndex:ae}},[l,R]),H=y.useMemo(()=>T([L,P]),[L,P,T]),{type:$,readonly:Y,editorWidth:te}=H,J=!Y&&r&&l,re=te??i.getColumnWidth(L),ie=h?.height??i.getRowHeight(D),G=y.useRef(null),U=y.useRef(null),ce=y.useMemo(()=>`editor-container-${Oj(8)}`,[]);y.useImperativeHandle(e,()=>({focus:()=>G.current?.focus?.(),saveValue:()=>G.current?.saveValue?.()})),y.useEffect(()=>{H.type!==be.Loading&&(!l||r||G.current?.setValue?.(H.data))},[H,l,r]),y.useEffect(()=>{$!==be.Loading&&(!l||c.type===nt.None||requestAnimationFrame(()=>(G.current||U.current)?.focus?.()))},[$,l,c,r]),mD({editorRef:G,isEditing:r,activeCell:l,selection:c,coordInstance:i,onUndo:p,onRedo:m,onDelete:C,onRowExpand:w,setEditing:S,setActiveCell:k,setSelection:_,scrollToItem:d,scrollBy:M});const ue=y.useMemo(()=>J?{pointerEvents:"auto",minWidth:re,minHeight:ie}:{pointerEvents:"none",opacity:0,width:0,height:0},[J,ie,re]),pe=y.useMemo(()=>{const{rowInitSize:ae,columnInitSize:ve,containerWidth:je,containerHeight:Qe}=i,Ue=Lt.clamp(i.getColumnRelativeOffset(L,I),ve,je-re),Me=Lt.clamp(i.getRowOffset(D)-z,ae,Qe-ie);return{x:Ue,y:Me,width:re,height:ie,editorId:ce}},[i,D,L,re,ie,I,z,ce]),He=y.useMemo(()=>{if(Y||!r)return null;const ae=je=>{b?.([L,P],{...H,data:je})},{customEditor:ve}=H;if(ve)return ve({rect:pe,theme:n,style:ue,cell:H,isEditing:r,setEditing:S,onChange:ae},G);switch($){case be.Text:case be.Number:return u.jsx(JD,{ref:G,rect:pe,theme:n,style:ue,cell:H,isEditing:r,onChange:ae});case be.Link:return u.jsx(pA,{value:H?.data||null,rect:pe,style:ue,onChange:ae});case be.Boolean:return u.jsx(e4,{ref:G,rect:pe,theme:n,cell:H,onChange:ae});case be.Rating:return u.jsx("div",{ref:G,children:u.jsx(o0,{value:H?.data||null,rect:pe,style:ue,onChange:ae,options:{icon:H?.icon,color:H?.color,max:H?.max}})});case be.Select:case be.MultiSelect:return u.jsx(V4,{ref:G,rect:pe,theme:n,cell:H,style:ue,isEditing:r,setEditing:S,onChange:ae});case be.Image:return u.jsx(n4,{ref:G,rect:pe,theme:n,cell:{...H,url:H?.url||""},style:ue,isEditing:r,onChange:ae});case be.Date:return u.jsx("div",{ref:G,children:u.jsx(q4,{value:H?.data||null,rect:pe,style:ue,onChange:je=>ae(je)})});case be.User:return u.jsx("div",{ref:G,children:u.jsx(mA,{value:H?.data||null,users:[],rect:pe,style:ue,onChange:je=>ae(je)})});case be.Attachment:return u.jsx("div",{ref:G,children:u.jsx(fA,{value:H?.data||null,rect:pe,style:ue,onChange:je=>ae(je)})});case be.Chart:return u.jsx(o4,{ref:G,rect:pe,theme:n,cell:H,style:ue,isEditing:r,onChange:ae});default:return null}},[pe,n,Y,$,H,L,P,ue,r,b,S]),V=ae=>{!l||r||JE(ae.nativeEvent)&&($m.has($)||(S(!0),G.current?.setValue?.(null)))},se=ae=>{!l||r||x?.(c,ae)},ze=ae=>{!l||r||g?.(c,ae)},Ne=y.useMemo(()=>$m.has($)?{position:"absolute",zIndex:10,top:pe.y,left:pe.x,width:0,height:0,overflow:"hidden"}:{position:"absolute",zIndex:10,top:pe.y,left:pe.x,minWidth:re,minHeight:ie},[$,pe.y,pe.x,re,ie]);return u.jsx("div",{id:ce,className:"click-outside-ignore",style:{pointerEvents:"none",position:"absolute",left:0,top:0,width:"100%"},children:u.jsxs("div",{style:Ne,onKeyDown:V,onPaste:se,onCopy:ze,children:[He,u.jsx("input",{style:{opacity:0},ref:U})]})})},xA=y.forwardRef(gA),yA=(t,e)=>{const{onEditField:n,onDuplicateField:r,onInsertFieldLeft:i,onInsertFieldRight:a,onFilterByField:l,onSortByField:c,onGroupByField:h,onFreezeToField:d,onHideField:p,onDeleteField:m}=t,[g,x]=y.useState(!1),[b,C]=y.useState({x:0,y:0}),[w,S]=y.useState(-1),[k,_]=y.useState({left:0,top:0,transformOrigin:"top left"}),R=y.useRef(null);y.useImperativeHandle(e,()=>({show:(I,z)=>{C(I),S(z),x(!0)},hide:()=>{x(!1),S(-1)}})),y.useEffect(()=>{if(g&&R.current){const I={width:R.current.offsetWidth||192,height:R.current.offsetHeight||400},z=_x(b,I,{preferredPlacement:"bottom-start",padding:8});_({left:z.left,top:z.top,transformOrigin:z.transformOrigin||"top left"})}},[g,b]),y.useEffect(()=>{if(!g)return;const I=P=>{R.current&&!R.current.contains(P.target)&&x(!1)},z=P=>{P.key==="Escape"&&x(!1)},D=setTimeout(()=>{document.addEventListener("mousedown",I),document.addEventListener("keydown",z)},0);return()=>{clearTimeout(D),document.removeEventListener("mousedown",I),document.removeEventListener("keydown",z)}},[g]);const T=I=>{I(),x(!1)};if(!g)return null;const M=[{label:"编辑字段",icon:"✓",onClick:()=>T(()=>n?.(w))},{label:"复制字段",icon:"□",onClick:()=>T(()=>r?.(w))},{label:"← 在左侧插入字段",icon:"←",onClick:()=>T(()=>i?.(w))},{label:"→ 在右侧插入字段",icon:"→",onClick:()=>T(()=>a?.(w))},{label:"按此字段筛选",icon:"🔍",onClick:()=>T(()=>l?.(w))},{label:"↓↑ 按此字段排序",icon:"↓↑",onClick:()=>T(()=>c?.(w))},{label:"按此字段分组",icon:"≡",onClick:()=>T(()=>h?.(w))},{label:"冻结至此字段",icon:"⊞",onClick:()=>T(()=>d?.(w))},{label:"隐藏字段",icon:"👁",onClick:()=>T(()=>p?.(w))},{label:"删除字段",icon:"🗑",onClick:()=>T(()=>m?.(w)),className:"text-red-600 hover:bg-red-50"}];return u.jsx("div",{ref:R,style:{position:"fixed",zIndex:9999,left:`${k.left}px`,top:`${k.top}px`,transformOrigin:k.transformOrigin,backgroundColor:"white",border:"2px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",padding:"4px 0",minWidth:"192px",maxWidth:"240px",width:"max-content",opacity:k.left===0&&k.top===0?0:1},onClick:I=>I.stopPropagation(),children:M.map((I,z)=>u.jsxs("button",{style:{width:"100%",display:"flex",alignItems:"center",padding:"8px 12px",textAlign:"left",backgroundColor:"transparent",border:"none",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap",color:I.className?.includes("red")?"#dc2626":"#374151"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor=I.className?.includes("red")?"#fef2f2":"#f9fafb"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="transparent"},onClick:I.onClick,children:[u.jsx("span",{style:{marginRight:"12px",width:"16px",textAlign:"center"},children:I.icon}),I.label]},z))})},bA=y.forwardRef(yA),vA=(t,e)=>{const{onDeleteRow:n,onDuplicateRow:r,onInsertRowAbove:i,onInsertRowBelow:a,onExpandRow:l}=t,[c,h]=y.useState(!1),[d,p]=y.useState({x:0,y:0}),[m,g]=y.useState(-1),[x,b]=y.useState({left:0,top:0,transformOrigin:"top left"}),C=y.useRef(null);y.useImperativeHandle(e,()=>({show:(k,_)=>{p(k),g(_),h(!0)},hide:()=>{h(!1),g(-1)}})),y.useEffect(()=>{if(c&&C.current){const k={width:C.current.offsetWidth||160,height:C.current.offsetHeight||200},_=_x(d,k,{preferredPlacement:"bottom-start",padding:8});b({left:_.left,top:_.top,transformOrigin:_.transformOrigin||"top left"})}},[c,d]),y.useEffect(()=>{if(!c)return;const k=T=>{C.current&&!C.current.contains(T.target)&&h(!1)},_=T=>{T.key==="Escape"&&h(!1)},R=setTimeout(()=>{document.addEventListener("mousedown",k),document.addEventListener("keydown",_)},0);return()=>{clearTimeout(R),document.removeEventListener("mousedown",k),document.removeEventListener("keydown",_)}},[c]);const w=k=>{k(),h(!1)};if(!c)return null;const S=[l&&{label:"展开记录",icon:"🔍",onClick:()=>w(()=>l(m))},r&&{label:"复制记录",icon:"📋",onClick:()=>w(()=>r(m))},i&&{label:"在上方插入",icon:"↑",onClick:()=>w(()=>i(m))},a&&{label:"在下方插入",icon:"↓",onClick:()=>w(()=>a(m))},{type:"divider"},n&&{label:"删除记录",icon:"🗑",onClick:()=>w(()=>n(m)),className:"text-red-600 hover:bg-red-50"}].filter(Boolean);return u.jsx("div",{ref:C,style:{position:"fixed",zIndex:9999,left:`${x.left}px`,top:`${x.top}px`,transformOrigin:x.transformOrigin,backgroundColor:"white",border:"2px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",padding:"4px 0",minWidth:"160px",maxWidth:"220px",width:"max-content",opacity:x.left===0&&x.top===0?0:1},onClick:k=>k.stopPropagation(),children:S.map((k,_)=>k.type==="divider"?u.jsx("div",{style:{height:"1px",backgroundColor:"#e5e7eb",margin:"4px 0"}},_):u.jsxs("button",{style:{width:"100%",display:"flex",alignItems:"center",padding:"8px 12px",textAlign:"left",backgroundColor:"transparent",border:"none",cursor:"pointer",fontSize:"14px",whiteSpace:"nowrap",color:k.className?.includes("red")?"#dc2626":"#374151"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=k.className?.includes("red")?"#fef2f2":"#f9fafb"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent"},onClick:k.onClick,children:[u.jsx("span",{style:{marginRight:"12px",width:"16px",textAlign:"center"},children:k.icon}),k.label]},_))})},wA=y.forwardRef(vA),CA=({onSelect:t,onClose:e},n)=>{const[r,i]=y.useState(!1),[a,l]=y.useState({x:0,y:0});if(y.useImperativeHandle(n,()=>({show:d=>{l(d),i(!0)},hide:()=>{i(!1),e?.()}})),!r)return null;const c=[{type:"text",label:"单行文本",icon:"📝"},{type:"number",label:"数字",icon:"🔢"},{type:"checkbox",label:"复选框",icon:"☑️"},{type:"select",label:"单选",icon:"🔘"},{type:"multipleSelect",label:"多选",icon:"☑️"},{type:"date",label:"日期",icon:"📅"},{type:"user",label:"用户",icon:"👤"},{type:"attachment",label:"附件",icon:"📎"},{type:"link",label:"关联",icon:"🔗"},{type:"rating",label:"评分",icon:"⭐"}],h=d=>{t?.(d),i(!1)};return u.jsx("div",{style:{position:"fixed",left:a.x,top:a.y,background:"white",border:"1px solid #ddd",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:1e4},children:c.map(({type:d,label:p,icon:m})=>u.jsxs("div",{onClick:()=>h(d),style:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{children:m}),u.jsx("span",{children:p})]},d))})},SA=y.forwardRef(CA),kA=({onSave:t,onClose:e},n)=>{const[r,i]=y.useState(!1),[a,l]=y.useState(null),[c,h]=y.useState(-1),[d,p]=y.useState({x:0,y:0,width:300}),[m,g]=y.useState("");if(y.useImperativeHandle(n,()=>({show:(b,C,w)=>{l(b),h(C),g(b.name),w&&p({x:w.x,y:w.y,width:w.width||300}),i(!0)},hide:()=>{i(!1),e?.()}})),!r||!a)return null;const x=()=>{a&&t?.(c,{...a,name:m}),i(!1)};return u.jsxs("div",{style:{position:"fixed",left:d.x,top:d.y,width:d.width,background:"white",border:"1px solid #ddd",borderRadius:"8px",padding:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e4},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:600},children:"编辑字段属性"}),u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:"字段名称"}),u.jsx("input",{type:"text",value:m,onChange:b=>g(b.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end",marginTop:"16px"},children:[u.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",border:"1px solid #ddd",borderRadius:"4px",background:"white",cursor:"pointer"},children:"取消"}),u.jsx("button",{onClick:x,style:{padding:"8px 16px",border:"none",borderRadius:"4px",background:"#1890ff",color:"white",cursor:"pointer"},children:"保存"})]})]})},_A=y.forwardRef(kA),RA=[{value:"sum({values})",label:"求和",description:"计算所有值的总和"},{value:"average({values})",label:"平均值",description:"计算所有值的平均值"},{value:"count({values})",label:"计数",description:"计算值的数量"},{value:"max({values})",label:"最大值",description:"找出最大值"},{value:"min({values})",label:"最小值",description:"找出最小值"},{value:"concatenate({values})",label:"连接",description:"连接所有值为文本"}],MA=({onConfirm:t,onCancel:e},n)=>{const[r,i]=y.useState(!1),[a,l]=y.useState("formula"),[c,h]=y.useState(""),[d,p]=y.useState({}),m=y.useRef(null);y.useImperativeHandle(n,()=>({show:(C,w)=>{l(C),w?(h(w.expression||""),p(w.formatting||{})):(h(""),p({})),i(!0)},hide:()=>{i(!1)}})),y.useEffect(()=>{if(!r)return;const C=k=>{m.current&&!m.current.contains(k.target)&&(i(!1),e?.())},w=k=>{k.key==="Escape"&&(i(!1),e?.())},S=setTimeout(()=>{document.addEventListener("mousedown",C),document.addEventListener("keydown",w)},0);return()=>{clearTimeout(S),document.removeEventListener("mousedown",C),document.removeEventListener("keydown",w)}},[r,e]);const g=()=>{if(c.trim()){const C={expression:c.trim(),formatting:Object.keys(d).length>0?d:void 0};t?.(C),i(!1)}},x=()=>{i(!1),e?.()},b=C=>{h(C.value)};return r?u.jsxs("div",{ref:m,style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"0",minWidth:"500px",maxWidth:"600px",width:"max-content",zIndex:10001,maxHeight:"80vh",overflow:"hidden"},onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{style:{padding:"20px 24px 16px",borderBottom:"1px solid #f3f4f6"},children:[u.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#111827"},children:a==="formula"?"配置公式字段":"配置汇总字段"}),u.jsx("p",{style:{margin:"4px 0 0",fontSize:"14px",color:"#6b7280"},children:a==="formula"?"设置公式表达式和格式":"选择汇总函数和格式"})]}),u.jsx("div",{style:{padding:"20px 24px",maxHeight:"60vh",overflow:"auto"},children:a==="formula"?u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{children:[u.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"#374151"},children:["公式表达式 ",u.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),u.jsx("textarea",{value:c,onChange:C=>h(C.target.value),placeholder:"输入公式表达式，例如：{字段1} + {字段2}",style:{width:"100%",minHeight:"80px",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",fontFamily:"monospace",outline:"none",resize:"vertical"},onFocus:C=>{C.currentTarget.style.borderColor="#3b82f6"},onBlur:C=>{C.currentTarget.style.borderColor="#d1d5db"}}),u.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:["提示：使用 ","{字段名}"," 来引用其他字段"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"数字格式"}),u.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[u.jsxs("select",{value:d.type||"decimal",onChange:C=>p({...d,type:C.target.value}),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"decimal",children:"小数"}),u.jsx("option",{value:"percent",children:"百分比"}),u.jsx("option",{value:"currency",children:"货币"})]}),u.jsx("input",{type:"number",min:"0",max:"10",value:d.precision||2,onChange:C=>p({...d,precision:parseInt(C.target.value)}),placeholder:"精度",style:{width:"80px",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"}}),u.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:"位小数"})]})]})]}):u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{children:[u.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"#374151"},children:["汇总函数 ",u.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:RA.map(C=>u.jsxs("button",{onClick:()=>b(C),style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"4px",padding:"12px",border:c===C.value?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:c===C.value?"#f0f9ff":"white",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:w=>{c!==C.value&&(w.currentTarget.style.borderColor="#3b82f6",w.currentTarget.style.backgroundColor="#f8fafc")},onMouseLeave:w=>{c!==C.value&&(w.currentTarget.style.borderColor="#e5e7eb",w.currentTarget.style.backgroundColor="white")},children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#111827"},children:C.label}),u.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:C.description})]},C.value))})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"数字格式"}),u.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[u.jsxs("select",{value:d.type||"decimal",onChange:C=>p({...d,type:C.target.value}),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"decimal",children:"小数"}),u.jsx("option",{value:"percent",children:"百分比"}),u.jsx("option",{value:"currency",children:"货币"})]}),u.jsx("input",{type:"number",min:"0",max:"10",value:d.precision||2,onChange:C=>p({...d,precision:parseInt(C.target.value)}),placeholder:"精度",style:{width:"80px",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",outline:"none"}}),u.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:"位小数"})]})]})]})}),u.jsxs("div",{style:{padding:"16px 24px 20px",borderTop:"1px solid #f3f4f6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("button",{onClick:x,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="white"},children:"取消"}),u.jsx("button",{onClick:g,disabled:!c.trim(),style:{padding:"8px 16px",border:"none",borderRadius:"6px",background:c.trim()?"#3b82f6":"#d1d5db",color:c.trim()?"white":"#9ca3af",fontSize:"14px",cursor:c.trim()?"pointer":"not-allowed",transition:"all 0.2s"},onMouseEnter:C=>{c.trim()&&(C.currentTarget.style.backgroundColor="#2563eb")},onMouseLeave:C=>{c.trim()&&(C.currentTarget.style.backgroundColor="#3b82f6")},children:"确认"})]})]}):null},TA=y.forwardRef(MA),qu=[{type:"singleLineText",name:"单行文本",icon:"📝",description:"用于输入短文本内容"},{type:"longText",name:"长文本",icon:"📄",description:"用于输入多行文本内容"},{type:"number",name:"数字",icon:"🔢",description:"用于输入数值"},{type:"singleSelect",name:"单选",icon:"🔘",description:"从预设选项中选择一个"},{type:"multipleSelect",name:"多选",icon:"☑️",description:"从预设选项中选择多个"},{type:"date",name:"日期",icon:"📅",description:"选择日期"},{type:"checkbox",name:"复选框",icon:"☑️",description:"是/否选择"},{type:"user",name:"用户",icon:"👤",description:"选择系统用户"},{type:"rating",name:"评分",icon:"⭐",description:"星级评分"}],Ym=[{type:"attachment",name:"附件",icon:"📎",description:"上传文件附件"},{type:"link",name:"关联",icon:"🔗",description:"关联其他表格记录"},{type:"formula",name:"公式",icon:"🧮",description:"基于其他字段计算得出"},{type:"rollup",name:"汇总",icon:"📊",description:"汇总关联字段的数据"},{type:"autoNumber",name:"自动编号",icon:"#️⃣",description:"自动生成递增数字"}],Vm=[{type:"createdTime",name:"创建时间",icon:"🕒",description:"记录创建时间"},{type:"lastModifiedTime",name:"修改时间",icon:"🕐",description:"记录最后修改时间"},{type:"createdBy",name:"创建者",icon:"👤",description:"记录创建者"},{type:"lastModifiedBy",name:"修改者",icon:"👤",description:"记录最后修改者"}],jA=({onConfirm:t,onCancel:e},n)=>{const[r,i]=y.useState(!1),[a,l]=y.useState({x:0,y:0}),[c,h]=y.useState({x:0,y:0}),[d,p]=y.useState("create"),[m,g]=y.useState("singleLineText"),[x,b]=y.useState(""),[C,w]=y.useState(!1),[S,k]=y.useState(!1),[_,R]=y.useState(),T=y.useRef(null),M=y.useRef(null),[I,z]=y.useState(null),[D,P]=y.useState("decimal"),[L,H]=y.useState(2),[$,Y]=y.useState(""),[te,J]=y.useState("number");y.useImperativeHandle(n,()=>({show:(V={x:100,y:100},se="create",ze)=>{l(V),p(se),g(ze?.type||"singleLineText"),b(ze?.name||""),R(ze?.options),w(!1),k(!1),P("decimal"),H(2),Y(""),J("number"),i(!0),h(V)},hide:()=>{i(!1),w(!1),k(!1)}})),y.useEffect(()=>{if(!r)return;const V=Ne=>{T.current&&!T.current.contains(Ne.target)&&(i(!1),e?.())},se=Ne=>{Ne.key==="Escape"&&(i(!1),e?.())},ze=setTimeout(()=>{document.addEventListener("mousedown",V),document.addEventListener("keydown",se)},0);return()=>{clearTimeout(ze),document.removeEventListener("mousedown",V),document.removeEventListener("keydown",se)}},[r,e]),y.useEffect(()=>{if(!r)return;const V=T.current;if(!V)return;const se=window.requestAnimationFrame(()=>{const ze=V.getBoundingClientRect(),Ne=window.innerWidth,ae=window.innerHeight,ve=12;let je=a.x,Qe=a.y;je+ze.width>Ne-ve&&(je=Math.max(ve,Ne-ze.width-ve)),je<ve&&(je=ve),Qe+ze.height>ae-ve&&(Qe=Math.max(ve,ae-ze.height-ve)),Qe<ve&&(Qe=ve),je=Math.round(je)+2,Qe=Math.round(Qe),h({x:je,y:Qe})});return()=>window.cancelAnimationFrame(se)},[r,a]);const re=V=>{g(V),V==="formula"||V==="rollup"?(k(!0),z({type:V,options:_})):w(!0)},ie=()=>{w(!1),k(!1)},G=V=>{R(V),k(!1),w(!0)},U=()=>{k(!1),w(!1)};y.useEffect(()=>{if(!S||!I)return;const V=window.requestAnimationFrame(()=>{M.current?.show(I.type,I.options)});return()=>window.cancelAnimationFrame(V)},[S,I]);const ce=()=>{if(x.trim()){let V=_;m==="number"&&(V={formatting:{type:D,precision:L},defaultValue:$!==""?Number($):void 0,display:te}),t?.({type:m,name:x.trim(),options:V}),i(!1)}},ue=()=>{i(!1),e?.()},pe=()=>[...qu,...Ym,...Vm].find(se=>se.type===m)||qu[0];if(!r)return null;if(S)return u.jsx(TA,{ref:M,onConfirm:G,onCancel:U});const He=pe();return u.jsxs("div",{ref:T,style:{position:"fixed",left:c.x,top:c.y,backgroundColor:"white",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"0",minWidth:"400px",maxWidth:"500px",width:"max-content",zIndex:1e4},onClick:V=>V.stopPropagation(),children:[u.jsx("div",{style:{padding:"20px 24px 16px",borderBottom:"1px solid #f3f4f6",display:"flex",alignItems:"center",justifyContent:"space-between"},children:u.jsxs("div",{children:[u.jsxs("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#111827",display:"flex",alignItems:"center",gap:"8px"},children:[C&&u.jsx("button",{onClick:ie,style:{background:"none",border:"none",cursor:"pointer",fontSize:"16px",color:"#6b7280",padding:"4px",display:"flex",alignItems:"center"},children:"←"}),d==="create"?"添加字段":"编辑字段"]}),!C&&u.jsx("p",{style:{margin:"4px 0 0",fontSize:"14px",color:"#6b7280"},children:"选择字段类型"})]})}),u.jsx("div",{style:{padding:"16px 24px"},children:C?u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"字段名称"}),u.jsx("input",{type:"text",value:x,onChange:V=>b(V.target.value),placeholder:"请输入字段名称",autoFocus:!0,style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",outline:"none",transition:"border-color 0.2s"},onFocus:V=>{V.currentTarget.style.borderColor="#3b82f6"},onBlur:V=>{V.currentTarget.style.borderColor="#d1d5db"}})]}),u.jsxs("div",{style:{padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",marginBottom:"12px"},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:500,color:"#374151",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"16px"},children:He.icon}),He.name]}),u.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:He.description}),_&&u.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#e0f2fe",borderRadius:"4px",border:"1px solid #0ea5e9"},children:[u.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"#0c4a6e",marginBottom:"2px"},children:"配置信息"}),u.jsx("div",{style:{fontSize:"11px",color:"#075985",fontFamily:"monospace",wordBreak:"break-all"},children:_.expression})]})]}),m==="number"&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"格式类型"}),u.jsxs("select",{value:D,onChange:V=>P(V.target.value),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"},children:[u.jsx("option",{value:"decimal",children:"小数 (1.23)"}),u.jsx("option",{value:"percent",children:"百分比 (12%)"}),u.jsx("option",{value:"currency",children:"货币 (¥1.23)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"精度"}),u.jsx("input",{type:"number",min:0,max:10,value:L,onChange:V=>H(parseInt(V.target.value)||0),style:{width:"120px",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"默认值"}),u.jsx("input",{type:"number",value:$,onChange:V=>Y(V.target.value),placeholder:"请输入默认值",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:500,color:"#374151"},children:"显示样式"}),u.jsx("div",{style:{display:"flex",gap:"8px"},children:[{id:"number",name:"数字"},{id:"ring",name:"环形"},{id:"bar",name:"条形"}].map(V=>u.jsx("button",{onClick:()=>J(V.id),style:{padding:"8px 12px",borderRadius:"6px",border:te===V.id?"2px solid #3b82f6":"1px solid #d1d5db",background:te===V.id?"#eff6ff":"white",cursor:"pointer",fontSize:"13px"},children:V.name},V.id))})]})]})]}):u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{margin:"0 0 12px",fontSize:"14px",fontWeight:600,color:"#374151"},children:"基础字段"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:qu.map(V=>u.jsxs("button",{onClick:()=>re(V.type),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:se=>{se.currentTarget.style.borderColor="#3b82f6",se.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:se=>{se.currentTarget.style.borderColor="#e5e7eb",se.currentTarget.style.backgroundColor="white"},children:[u.jsx("span",{style:{fontSize:"20px"},children:V.icon}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#111827",marginBottom:"2px"},children:V.name}),u.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:V.description})]})]},V.type))})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("h4",{style:{margin:"0 0 12px",fontSize:"14px",fontWeight:600,color:"#374151"},children:"高级字段"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:Ym.map(V=>u.jsxs("button",{onClick:()=>re(V.type),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:se=>{se.currentTarget.style.borderColor="#3b82f6",se.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:se=>{se.currentTarget.style.borderColor="#e5e7eb",se.currentTarget.style.backgroundColor="white"},children:[u.jsx("span",{style:{fontSize:"20px"},children:V.icon}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#111827",marginBottom:"2px"},children:V.name}),u.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:V.description})]})]},V.type))})]}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 12px",fontSize:"14px",fontWeight:600,color:"#374151"},children:"系统字段"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:Vm.map(V=>u.jsxs("button",{onClick:()=>re(V.type),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseEnter:se=>{se.currentTarget.style.borderColor="#3b82f6",se.currentTarget.style.backgroundColor="#f8fafc"},onMouseLeave:se=>{se.currentTarget.style.borderColor="#e5e7eb",se.currentTarget.style.backgroundColor="white"},children:[u.jsx("span",{style:{fontSize:"20px"},children:V.icon}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#111827",marginBottom:"2px"},children:V.name}),u.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:V.description})]})]},V.type))})]})]})}),u.jsxs("div",{style:{padding:"16px 24px 20px",borderTop:"1px solid #f3f4f6",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("button",{onClick:ue,style:{padding:"8px 16px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="white"},children:"取消"}),C&&u.jsx("button",{onClick:ce,disabled:!x.trim(),style:{padding:"8px 16px",border:"none",borderRadius:"6px",background:x.trim()?"#3b82f6":"#d1d5db",color:x.trim()?"white":"#9ca3af",fontSize:"14px",cursor:x.trim()?"pointer":"not-allowed",transition:"all 0.2s"},onMouseEnter:V=>{x.trim()&&(V.currentTarget.style.backgroundColor="#2563eb")},onMouseLeave:V=>{x.trim()&&(V.currentTarget.style.backgroundColor="#3b82f6")},children:"确认"})]})]})},EA=y.forwardRef(jA),IA=({onConfirm:t,onCancel:e},n)=>{const[r,i]=y.useState(!1),[a,l]=y.useState("column"),[c,h]=y.useState(""),[d,p]=y.useState(-1),m=y.useRef(null);y.useImperativeHandle(n,()=>({show:(w,S,k)=>{l(w),h(S),p(k),i(!0)},hide:()=>{i(!1)}})),y.useEffect(()=>{if(!r)return;const w=_=>{m.current&&!m.current.contains(_.target)&&(i(!1),e?.())},S=_=>{_.key==="Escape"&&(i(!1),e?.())},k=setTimeout(()=>{document.addEventListener("mousedown",w),document.addEventListener("keydown",S)},0);return()=>{clearTimeout(k),document.removeEventListener("mousedown",w),document.removeEventListener("keydown",S)}},[r,e]);const g=()=>{t?.(a,d),i(!1)},x=()=>{i(!1),e?.()};if(!r)return null;const b=a==="column"?"字段":"记录",C=a==="column"?"📋":"📝";return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:w=>{w.target===w.currentTarget&&x()},children:u.jsxs("div",{ref:m,style:{backgroundColor:"white",border:"2px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",padding:"0",minWidth:"400px",maxWidth:"500px",width:"max-content",maxHeight:"80vh",overflow:"hidden"},onClick:w=>w.stopPropagation(),children:[u.jsx("div",{style:{padding:"24px 24px 16px",borderBottom:"1px solid #f3f4f6"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#fef2f2",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"⚠️"}),u.jsxs("div",{children:[u.jsxs("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#111827"},children:["确认删除",b]}),u.jsx("p",{style:{margin:"4px 0 0",fontSize:"14px",color:"#6b7280"},children:"此操作无法撤销"})]})]})}),u.jsxs("div",{style:{padding:"20px 24px"},children:[u.jsxs("div",{style:{padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",marginBottom:"16px"},children:[u.jsxs("div",{style:{fontSize:"14px",color:"#374151",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"16px"},children:C}),u.jsxs("strong",{children:["即将删除的",b,"："]})]}),u.jsx("div",{style:{fontSize:"16px",fontWeight:500,color:"#111827",fontFamily:a==="column"?"inherit":"monospace",wordBreak:"break-all"},children:c})]}),u.jsx("div",{style:{padding:"12px",backgroundColor:"#fef3c7",borderRadius:"6px",border:"1px solid #f59e0b"},children:u.jsxs("div",{style:{fontSize:"14px",color:"#92400e",display:"flex",alignItems:"flex-start",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"16px",marginTop:"2px"},children:"⚠️"}),u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:500,marginBottom:"4px"},children:["删除",b,"会："]}),u.jsx("ul",{style:{margin:0,paddingLeft:"16px",fontSize:"13px",lineHeight:"1.5"},children:a==="column"?u.jsxs(u.Fragment,{children:[u.jsx("li",{children:"永久删除此字段及其所有数据"}),u.jsx("li",{children:"删除所有依赖此字段的公式和关联"}),u.jsx("li",{children:"影响使用此字段的视图和筛选器"})]}):u.jsxs(u.Fragment,{children:[u.jsx("li",{children:"永久删除此记录及其所有数据"}),u.jsx("li",{children:"删除所有与此记录相关的关联"}),u.jsx("li",{children:"此操作无法撤销"})]})})]})]})})]}),u.jsxs("div",{style:{padding:"16px 24px 24px",borderTop:"1px solid #f3f4f6",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:x,style:{padding:"10px 20px",border:"1px solid #d1d5db",borderRadius:"6px",background:"white",color:"#374151",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.backgroundColor="#f9fafb",w.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:w=>{w.currentTarget.style.backgroundColor="white",w.currentTarget.style.borderColor="#d1d5db"},children:"取消"}),u.jsx("button",{onClick:g,style:{padding:"10px 20px",border:"none",borderRadius:"6px",background:"#dc2626",color:"white",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.backgroundColor="#b91c1c"},onMouseLeave:w=>{w.currentTarget.style.backgroundColor="#dc2626"},children:"确认删除"})]})]})})},i0=y.forwardRef(IA),DA=(t,e)=>{const{columns:n,onColumnsChange:r,onAddColumn:i,onEditColumn:a,onDuplicateColumn:l,onDeleteColumn:c,onInsertColumnLeft:h,onInsertColumnRight:d,onStartEditColumn:p}=t,m=y.useRef(null),g=y.useRef(null),x=y.useRef(null),b=y.useRef(null),C=y.useRef(null),[w,S]=y.useState(-1);y.useImperativeHandle(e,()=>({showFieldTypeSelector:G=>{S(-1),m.current?.show(G)},showColumnContextMenu:(G,U)=>{g.current?.show(G,U)},showFieldPropertyEditor:(G,U,ce)=>{x.current?.show(G,U,ce)},showFieldTypeSelectModal:(G={x:100,y:100},U="create",ce)=>{b.current?.show(G,U,ce)},hideAll:()=>{m.current?.hide(),g.current?.hide(),x.current?.hide(),b.current?.hide(),C.current?.hide()}}));const k=G=>{w>=0?(h?.(w,G),d?.(w,G)):i?.(G),S(-1)},_=()=>{S(-1)},R=G=>{const U=G.type;w>=0?(h?.(w,U,G.name,G.options),d?.(w,U,G.name,G.options)):i?.(U,void 0,G.name,G.options),S(-1)},T=()=>{S(-1)},M=G=>{const U=n[G];if(U){if(p){p(G,U);return}const ce=U.type||"singleLineText";b.current?.show({x:100,y:100},"edit",{type:ce,name:U.name})}},I=G=>{l?.(G)},z=G=>{S(G),b.current?.show({x:100,y:100},"create")},D=G=>{S(G+1),b.current?.show({x:100,y:100},"create")},P=G=>{},L=G=>{},H=G=>{},$=G=>{},Y=G=>{},te=G=>{console.log("🗑️ handleDeleteField 被调用:",{columnIndex:G,column:n[G]});const U=n[G];U?(console.log("🗑️ 准备调用 onDeleteColumn:",{columnIndex:G,columnName:U.name}),c?.(G)):console.error("🗑️ 无法找到要删除的列:",G)},J=(G,U)=>{G==="column"&&c?.(U)},re=(G,U)=>{if(G>=n.length){const ue={type:U.type,name:U.name||"新字段",description:U.description||"",icon:U.icon||"A"};i?.(ue);return}a?.(G,U)},ie=()=>{};return u.jsxs(u.Fragment,{children:[u.jsx(SA,{ref:m,onSelect:k,onCancel:_}),u.jsx(bA,{ref:g,onEditField:M,onDuplicateField:I,onInsertFieldLeft:z,onInsertFieldRight:D,onFilterByField:P,onSortByField:L,onGroupByField:H,onFreezeToField:$,onHideField:Y,onDeleteField:te}),u.jsx(_A,{ref:x,onSave:re,onCancel:ie}),u.jsx(EA,{ref:b,onConfirm:R,onCancel:T}),u.jsx(i0,{ref:C,onConfirm:J})]})},AA=y.forwardRef(DA),cc=(...t)=>t.filter(Boolean).join(" "),qm=y.forwardRef(function({className:e,children:n,variant:r,...i},a){return u.jsx("button",{ref:a,className:cc("ld-btn",r&&`ld-btn-${r}`,e),...i,children:n})});y.forwardRef(function({className:e,...n},r){return u.jsx("input",{ref:r,className:cc("ld-input",e),...n})});y.forwardRef(function({className:e,...n},r){return u.jsx("textarea",{ref:r,className:cc("ld-textarea",e),...n})});const OA=({children:t})=>u.jsx(u.Fragment,{children:t}),zA=({className:t,children:e,...n})=>u.jsx("div",{className:cc("ld-dialog",t),...n,children:e}),PA=({children:t})=>u.jsx("div",{className:"ld-dialog-header",children:t}),NA=({children:t})=>u.jsx("div",{className:"ld-dialog-title",children:t}),FA=({children:t})=>u.jsx("div",{className:"ld-dialog-footer",children:t}),LA=({children:t})=>u.jsx("div",{className:"ld-scroll-area",children:t});y.forwardRef((t,e)=>{const{title:n="添加字段",description:r,content:i,selectedFieldId:a,children:l,onConfirm:c}=t,[h,d]=y.useState(!1),[p,m]=y.useState(a);y.useImperativeHandle(e,()=>({onOpen:()=>d(!0),onClose:()=>d(!1)})),y.useEffect(()=>{m(a)},[a]);const g=()=>{c?.(p),d(!1)},x=y.useMemo(()=>u.jsx(PA,{children:u.jsx(NA,{children:n})}),[n]);return u.jsx(OA,{open:h,onOpenChange:d,children:u.jsxs(zA,{className:"w-[640px] max-w-full",children:[x,u.jsxs(LA,{children:[i,r&&u.jsx("div",{className:"text-sm text-muted-foreground",children:r})]}),u.jsxs(FA,{children:[u.jsx(qm,{onClick:()=>d(!1),children:"取消"}),u.jsx(qm,{onClick:g,children:"确认"})]})]})})});const HA=t=>{const{cellLoadings:e,columnLoadings:n,coordInstance:r,scrollState:i}=t;if(!e.length&&!n.length)return null;const{scrollLeft:a,scrollTop:l}=i,{rowInitSize:c,freezeColumnCount:h,freezeRegionWidth:d,containerWidth:p,containerHeight:m}=r;return u.jsxs("div",{className:"pointer-events-none absolute left-0 top-0 z-10",children:[n.map(({index:g,progress:x,onCancel:b})=>{const C=r.getColumnWidth(g),w=r.getColumnRelativeOffset(g,a);return g<h||w+C-24>=d&&w<=p?u.jsx("div",{className:"absolute rounded-sm",style:{left:w,top:0,width:C,height:24},children:u.jsx("div",{className:"pointer-events-auto absolute right-1 top-1 cursor-pointer rounded-full bg-background",onClick:b,children:u.jsxs("div",{className:"absolute right-0 top-0 flex size-6 items-center justify-center rounded-full",style:{background:`conic-gradient(currentColor ${x*360}deg, rgba(0,0,0,0.1) 0deg)`},children:[u.jsx("div",{className:"absolute inset-1 animate-ping rounded-full bg-foreground/15"}),u.jsx("div",{className:"flex size-5 items-center justify-center rounded-full bg-background",children:u.jsx(Pj,{className:"size-3"})})]})})},`loading-${g}`):null}),e.map(([g,x])=>{const b=r.getRowHeight(x),C=r.getRowOffset(x),w=r.getColumnWidth(g),S=r.getColumnRelativeOffset(g,a),k=C-l,R=g<h||S+w-24>=d&&S<=p,T=k>=c-4&&k<=m-c+4;return!R||!T?null:u.jsx("div",{className:"absolute rounded-sm",style:{left:S,top:C-l,width:w,height:b},children:u.jsxs("div",{className:"absolute right-1 top-1 rounded-full bg-background",children:[u.jsx("div",{className:"absolute inset-1 animate-ping rounded-full bg-amber-500/30"}),u.jsx("div",{className:"absolute inset-0 animate-[spin_1.2s_linear_infinite] rounded-full border-2 border-dotted border-transparent border-t-amber-500"}),u.jsx("div",{className:"size-6 p-1",children:u.jsx(zj,{className:"size-4 text-amber-500"})})]})},`loading-${g}-${x}`)})]})};ic(t=>({tooltipInfo:null,setTooltipInfo:e=>t({tooltipInfo:e}),clearTooltip:()=>t({tooltipInfo:null})}));const BA={basic:{name:"基础字段",icon:Zo,color:"#3b82f6"},select:{name:"选择字段",icon:Di,color:"#8b5cf6"},datetime:{name:"日期时间",icon:Qo,color:"#06b6d4"},link:{name:"链接字段",icon:Jo,color:"#10b981"},advanced:{name:"高级字段",icon:Ai,color:"#f59e0b"},collab:{name:"协作字段",icon:Ss,color:"#ec4899"}},Um=[{id:"text",name:"单行文本",icon:Dd,description:"简短的文本内容",category:"basic",color:"#3b82f6",popular:!0,keywords:["文本","text","单行"]},{id:"longText",name:"长文本",icon:Zo,description:"多行文本，支持换行",category:"basic",color:"#10b981",popular:!0,keywords:["长文本","textarea","多行"]},{id:"number",name:"数字",icon:tc,description:"数值和计算",category:"basic",color:"#f59e0b",popular:!0,keywords:["数字","number","数值"]},{id:"singleSelect",name:"单选",icon:da,description:"从多个选项中选择一个",category:"select",color:"#8b5cf6",popular:!0,keywords:["单选","select","选项"]},{id:"multipleSelect",name:"多选",icon:Di,description:"可以选择多个选项",category:"select",color:"#ec4899",popular:!0,keywords:["多选","multi","标签"]},{id:"checkbox",name:"复选框",icon:Cs,description:"是/否 二选一",category:"select",color:"#84cc16",keywords:["复选框","checkbox","是否"]},{id:"date",name:"日期",icon:Qo,description:"日期和时间",category:"datetime",color:"#06b6d4",popular:!0,keywords:["日期","date","时间"]},{id:"link",name:"链接",icon:Jo,description:"网址链接",category:"link",color:"#6366f1",keywords:["链接","url","网址"]},{id:"email",name:"邮箱",icon:xa,description:"电子邮件地址",category:"link",color:"#14b8a6",keywords:["邮箱","email","邮件"]},{id:"phone",name:"电话",icon:ya,description:"电话号码",category:"link",color:"#ef4444",keywords:["电话","phone","手机"]},{id:"rating",name:"评分",icon:xo,description:"星级评分",category:"advanced",color:"#eab308",keywords:["评分","rating","星级"]},{id:"formula",name:"公式",icon:Ai,description:"基于其他字段计算得出",category:"advanced",color:"#8b5cf6",popular:!0,keywords:["公式","formula","计算","函数"]},{id:"user",name:"成员",icon:Ss,description:"选择用户或成员",category:"collab",color:"#64748b",keywords:["用户","user","成员","人员"]},{id:"attachment",name:"附件",icon:nc,description:"上传文件和图片",category:"collab",color:"#f97316",keywords:["附件","attachment","文件","图片"]}];function WA({isOpen:t,onClose:e,onConfirm:n,onSelect:r,triggerRef:i}){const[a,l]=y.useState(""),[c,h]=y.useState("all"),[d,p]=y.useState("select"),[m,g]=y.useState(null),[x,b]=y.useState(""),[C,w]=y.useState({}),[S,k]=y.useState(""),_=y.useRef(null),[R,T]=y.useState({top:0,left:0,maxHeight:400}),M=y.useMemo(()=>{let D=Um;if(c==="popular"?D=D.filter(P=>P.popular):c!=="all"&&(D=D.filter(P=>P.category===c)),a.trim()){const P=a.toLowerCase();D=D.filter(L=>L.name.toLowerCase().includes(P)||L.description.toLowerCase().includes(P)||L.keywords?.some(H=>H.toLowerCase().includes(P)))}return D},[c,a]);y.useEffect(()=>{if(!t||!i?.current)return;const P=i.current.getBoundingClientRect(),L={width:window.innerWidth,height:window.innerHeight};let H=P.bottom+4,$=P.left,Y=400;const te=d==="select"?320:420,J=8;$=Math.min(Math.max($,J),L.width-te-J);const re=L.height-H-J;re<220?(H=P.top-4,Y=Math.min(400,P.top-J)):Y=Math.min(400,re),T({top:H,left:$,maxHeight:Y})},[t,i,d]),y.useEffect(()=>{t&&(p("select"),g(null),b(""),w({}),k(""))},[t]);const I=D=>{const P=Um.find(L=>L.id===D)||null;g(P),n?(w(D==="singleSelect"||D==="multipleSelect"?{options:[]}:{}),p("configure")):(r?.(D),e())},z=D=>{D.key==="Escape"&&e()};return y.useEffect(()=>{if(!t)return;const D=P=>{_.current&&!_.current.contains(P.target)&&i?.current&&typeof i.current.contains=="function"&&!i.current.contains(P.target)&&e()};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[t,e,i]),t?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:50},onClick:e}),u.jsx("div",{ref:_,style:{position:"fixed",top:R.top,left:R.left,width:d==="select"?"320px":"420px",maxHeight:R.maxHeight,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"8px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)",zIndex:51,display:"flex",flexDirection:"column",overflow:"hidden",animation:"slideDown 200ms cubic-bezier(0.16, 1, 0.3, 1)"},onKeyDown:z,tabIndex:-1,children:d==="select"?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{padding:"12px",borderBottom:`1px solid ${E.colors.border.subtle}`},children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ri,{size:16,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:E.colors.text.tertiary,pointerEvents:"none"}}),u.jsx("input",{type:"text",value:a,onChange:D=>l(D.target.value),placeholder:"搜索字段类型...",autoFocus:!0,style:{width:"100%",padding:"8px 10px 8px 32px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",transition:sn.presets.all,boxSizing:"border-box"},onFocus:D=>{D.target.style.borderColor=E.colors.border.focus,D.target.style.boxShadow=`0 0 0 2px ${E.colors.border.focus}20`},onBlur:D=>{D.target.style.borderColor=E.colors.border.subtle,D.target.style.boxShadow="none"}})]})}),u.jsx("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${E.colors.border.subtle}`,display:"flex",gap:"4px",flexWrap:"wrap",backgroundColor:E.colors.surface.hover},children:[{id:"all",name:"全部"},{id:"popular",name:"常用"},...Object.entries(BA).map(([D,P])=>({id:D,name:P.name}))].map(D=>{const P=c===D.id;return u.jsx("button",{onClick:()=>h(D.id),style:{padding:"4px 8px",fontSize:"11px",fontWeight:P?500:400,color:P?E.colors.text.primary:E.colors.text.secondary,backgroundColor:P?E.colors.surface.base:"transparent",border:`1px solid ${P?E.colors.border.default:"transparent"}`,borderRadius:"4px",cursor:"pointer",transition:sn.presets.all,whiteSpace:"nowrap"},onMouseEnter:L=>{P||(L.currentTarget.style.backgroundColor=E.colors.surface.base)},onMouseLeave:L=>{P||(L.currentTarget.style.backgroundColor="transparent")},children:D.name},D.id)})}),u.jsx("div",{style:{flex:1,overflowY:"auto",padding:"4px"},children:M.length===0?u.jsxs("div",{style:{padding:"24px 16px",textAlign:"center",color:E.colors.text.secondary,fontSize:"13px"},children:[u.jsx(Ri,{size:24,style:{color:E.colors.text.tertiary,marginBottom:"8px"}}),u.jsx("div",{children:"没有找到匹配的字段类型"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:M.map(D=>{const P=D.icon;return u.jsxs("button",{onClick:()=>I(D.id),style:{padding:"8px 12px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 150ms cubic-bezier(0.4, 0.0, 0.2, 1)",display:"flex",alignItems:"center",gap:"10px",position:"relative"},onMouseEnter:L=>{L.currentTarget.style.backgroundColor=E.colors.surface.hover},onMouseLeave:L=>{L.currentTarget.style.backgroundColor="transparent"},children:[u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",backgroundColor:`${D.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(P,{size:14,style:{color:D.color}})}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"2px",display:"flex",alignItems:"center",gap:"4px"},children:[D.name,D.popular&&u.jsx(xo,{size:10,style:{color:E.colors.text.warning,fill:E.colors.text.warning}})]}),u.jsx("div",{style:{fontSize:"11px",color:E.colors.text.secondary,lineHeight:"1.3"},children:D.description})]})]},D.id)})})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"12px",borderBottom:`1px solid ${E.colors.border.subtle}`,display:"flex",flexDirection:"column",gap:"8px"},children:[u.jsx("input",{type:"text",value:x,onChange:D=>b(D.target.value),placeholder:"字段名称（可选）",autoFocus:!0,style:{width:"100%",padding:"8px 10px",fontSize:"14px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}}),u.jsxs("div",{style:{fontSize:"12px",color:E.colors.text.secondary,display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{style:{padding:"4px 8px",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"4px",backgroundColor:E.colors.surface.hover},children:m?.name}),u.jsx("button",{onClick:()=>p("select"),style:{marginLeft:"auto",background:"transparent",border:"none",color:E.colors.text.link,cursor:"pointer",fontSize:"12px"},children:"更改类型"})]})]}),u.jsx("div",{style:{padding:"12px",overflowY:"auto",maxHeight:R.maxHeight-120},children:m?.id==="singleSelect"||m?.id==="multipleSelect"?u.jsx(YA,{value:C,onChange:w}):m?.id==="formula"?u.jsx($A,{value:C,onChange:w}):u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary},children:"该字段暂无额外配置"})}),u.jsxs("div",{style:{padding:"12px",borderTop:`1px solid ${E.colors.border.subtle}`,display:"flex",gap:"8px",justifyContent:"flex-end",backgroundColor:E.colors.surface.base,position:"sticky",bottom:0},children:[u.jsx("button",{onClick:e,style:{padding:"8px 12px",fontSize:"13px",background:"transparent",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",color:E.colors.text.primary},children:"取消"}),u.jsx("button",{onClick:D=>{if(console.log("🔥 创建字段按钮被点击"),console.log("selectedType:",m),console.log("fieldName:",x),console.log("fieldOptions:",C),console.log("onConfirm:",n),D.stopPropagation(),!m){console.error("❌ selectedType 为 null");return}const P={type:m.id,name:x,options:{...C,description:S}};console.log("准备调用 onConfirm，参数:",P),n?.(P),e()},style:{padding:"8px 12px",fontSize:"13px",background:E.colors.primary[600],color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",pointerEvents:"auto"},children:"创建字段"})]})]})}),u.jsx("style",{children:`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-8px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]}):null}function $A({value:t,onChange:e}){const[n,r]=y.useState(t?.formula||""),[i,a]=y.useState(t?.description||""),l=d=>{r(d),e({...t,formula:d})},c=d=>{a(d),e({...t,description:d})},h=()=>{l("SUM({数字字段1}, {数字字段2})")};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:E.colors.text.primary,marginBottom:"4px"},children:"公式"}),u.jsx("div",{style:{position:"relative"},children:u.jsx("textarea",{value:n,onChange:d=>l(d.target.value),placeholder:"输入公式，例如：SUM({字段1}, {字段2})",style:{width:"100%",minHeight:"80px",padding:"8px 10px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",resize:"vertical",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',lineHeight:"1.4"},onFocus:d=>{d.target.style.borderColor=E.colors.border.focus,d.target.style.boxShadow=`0 0 0 2px ${E.colors.border.focus}20`},onBlur:d=>{d.target.style.borderColor=E.colors.border.subtle,d.target.style.boxShadow="none"}})}),u.jsxs("button",{onClick:h,style:{padding:"6px 12px",fontSize:"12px",background:E.colors.surface.hover,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",color:E.colors.text.primary,alignSelf:"flex-start",display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx(Ai,{size:12}),"使用 AI 生成公式"]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:E.colors.text.primary},children:"描述"}),u.jsx("input",{type:"text",value:i,onChange:d=>c(d.target.value),placeholder:"描述此字段的用途（可选）",style:{width:"100%",padding:"6px 8px",fontSize:"12px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]})]})}function YA({value:t,onChange:e}){const n=t?.options??[],r=()=>{const l=[...n,{id:`${Date.now()}`,name:`选项${n.length+1}`}];e({...t,options:l})},i=(l,c)=>{const h=n.slice();h[l]={...h[l],name:c},e({...t,options:h})},a=l=>{const c=n.filter((h,d)=>d!==l);e({...t,options:c})};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:E.colors.text.primary,marginBottom:"4px"},children:"选项"}),n.length===0&&u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary},children:"暂无选项"}),n.map((l,c)=>u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u.jsx("input",{value:l.name,onChange:h=>i(c,h.target.value),style:{flex:1,padding:"6px 8px",fontSize:"13px",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px"}}),u.jsx("button",{onClick:()=>a(c),style:{padding:"6px 8px",fontSize:"12px",background:"transparent",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer"},children:"删除"})]},l.id)),u.jsx("button",{onClick:r,style:{padding:"8px 12px",fontSize:"13px",background:E.colors.surface.hover,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",alignSelf:"flex-start"},children:"+ 添加选项"})]})}function Gl({config:t,onChange:e,isMultiple:n=!1}){const[r,i]=y.useState(""),a=["#ef4444","#f97316","#f59e0b","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#3b82f6","#6366f1","#8b5cf6","#a855f7","#ec4899","#f43f5e","#64748b"],l=()=>{if(r.trim()){const d=a[Math.floor(Math.random()*a.length)];e({...t,options:[...t.options,{id:`option-${Date.now()}`,label:r.trim(),color:d}]}),i("")}},c=(d,p)=>{e({...t,options:t.options.map(m=>m.id===d?{...m,...p}:m)})},h=d=>{e({...t,options:t.options.filter(p=>p.id!==d)})};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:n?"选项列表（可多选）":"选项列表（单选）"}),u.jsx("p",{style:{fontSize:"12px",color:E.colors.text.secondary,marginBottom:"12px"},children:"添加选项，用户可以从中选择。拖动可以调整顺序。"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"12px"},children:t.options.map((d,p)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",transition:sn.presets.all},children:[u.jsx(Cg,{size:16,style:{color:E.colors.text.tertiary,cursor:"grab"}}),u.jsx("input",{type:"color",value:d.color,onChange:m=>c(d.id,{color:m.target.value}),style:{width:"28px",height:"28px",border:"none",borderRadius:"4px",cursor:"pointer"}}),u.jsx("input",{type:"text",value:d.label,onChange:m=>c(d.id,{label:m.target.value}),placeholder:"选项名称",style:{flex:1,padding:"6px 10px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:"transparent",border:"none",outline:"none"}}),u.jsx("button",{onClick:()=>h(d.id),style:{padding:"4px",backgroundColor:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",transition:sn.presets.all,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=E.colors.surface.hover},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent"},children:u.jsx(Oi,{size:14,style:{color:E.colors.text.secondary}})})]},d.id))}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),onKeyDown:d=>{d.key==="Enter"&&(d.preventDefault(),l())},placeholder:"输入新选项名称...",style:{flex:1,padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",transition:sn.presets.all},onFocus:d=>{d.target.style.borderColor=E.colors.border.focus},onBlur:d=>{d.target.style.borderColor=E.colors.border.subtle}}),u.jsxs("button",{onClick:l,disabled:!r.trim(),style:{padding:"8px 16px",fontSize:"13px",fontWeight:500,color:r.trim()?E.colors.text.inverse:E.colors.text.tertiary,backgroundColor:r.trim()?E.colors.primary[500]:E.colors.surface.disabled,border:"none",borderRadius:"6px",cursor:r.trim()?"pointer":"not-allowed",transition:sn.presets.all,display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx(ua,{size:14}),"添加"]})]})]}),n&&u.jsx("div",{children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:E.colors.text.primary,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:t.allowOther||!1,onChange:d=>e({...t,allowOther:d.target.checked}),style:{cursor:"pointer"}}),"允许用户添加自定义选项"]})})]})}function s0({config:t,onChange:e}){return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"数字格式"}),u.jsx("div",{style:{display:"flex",gap:"8px"},children:[{value:"number",label:"数字"},{value:"currency",label:"货币"},{value:"percent",label:"百分比"}].map(n=>u.jsx("button",{onClick:()=>e({...t,format:n.value}),style:{flex:1,padding:"8px 12px",fontSize:"13px",fontWeight:500,color:t.format===n.value?E.colors.text.primary:E.colors.text.secondary,backgroundColor:t.format===n.value?E.colors.surface.selected:E.colors.surface.base,border:`1px solid ${t.format===n.value?E.colors.border.focus:E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",transition:sn.presets.all},children:n.label},n.value))})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"小数位数"}),u.jsx("input",{type:"number",value:t.precision??0,onChange:n=>e({...t,precision:parseInt(n.target.value)||0}),min:0,max:10,style:{width:"100%",padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"最小值（可选）"}),u.jsx("input",{type:"number",value:t.min??"",onChange:n=>e({...t,min:n.target.value?parseFloat(n.target.value):void 0}),placeholder:"无限制",style:{width:"100%",padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"最大值（可选）"}),u.jsx("input",{type:"number",value:t.max??"",onChange:n=>e({...t,max:n.target.value?parseFloat(n.target.value):void 0}),placeholder:"无限制",style:{width:"100%",padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]})]})]})}function a0({config:t,onChange:e}){return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsx("div",{children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:E.colors.text.primary,cursor:"pointer"},children:[u.jsx("input",{type:"checkbox",checked:t.includeTime||!1,onChange:n=>e({...t,includeTime:n.target.checked}),style:{cursor:"pointer"}}),"包含时间"]})}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"日期格式"}),u.jsxs("select",{value:t.dateFormat||"YYYY-MM-DD",onChange:n=>e({...t,dateFormat:n.target.value}),style:{width:"100%",padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",cursor:"pointer"},children:[u.jsx("option",{value:"YYYY-MM-DD",children:"2024-10-16"}),u.jsx("option",{value:"MM/DD/YYYY",children:"10/16/2024"}),u.jsx("option",{value:"DD/MM/YYYY",children:"16/10/2024"})]})]}),t.includeTime&&u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"时间格式"}),u.jsx("div",{style:{display:"flex",gap:"8px"},children:[{value:"24h",label:"24小时制"},{value:"12h",label:"12小时制"}].map(n=>u.jsx("button",{onClick:()=>e({...t,timeFormat:n.value}),style:{flex:1,padding:"8px 12px",fontSize:"13px",fontWeight:500,color:t.timeFormat===n.value?E.colors.text.primary:E.colors.text.secondary,backgroundColor:t.timeFormat===n.value?E.colors.surface.selected:E.colors.surface.base,border:`1px solid ${t.timeFormat===n.value?E.colors.border.focus:E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",transition:sn.presets.all},children:n.label},n.value))})]})]})}function l0({config:t,onChange:e}){return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"最大评分"}),u.jsx("input",{type:"number",value:t.maxRating??5,onChange:n=>e({...t,maxRating:parseInt(n.target.value)||5}),min:1,max:10,style:{width:"100%",padding:"8px 12px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:"评分图标"}),u.jsx("div",{style:{display:"flex",gap:"8px"},children:[{value:"star",label:"⭐ 星星"},{value:"heart",label:"❤️ 爱心"},{value:"thumbsup",label:"👍 点赞"}].map(n=>u.jsx("button",{onClick:()=>e({...t,icon:n.value}),style:{flex:1,padding:"8px 12px",fontSize:"13px",fontWeight:500,color:t.icon===n.value?E.colors.text.primary:E.colors.text.secondary,backgroundColor:t.icon===n.value?E.colors.surface.selected:E.colors.surface.base,border:`1px solid ${t.icon===n.value?E.colors.border.focus:E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",transition:sn.presets.all},children:n.label},n.value))})]})]})}const VA={basic:{name:"基础字段",icon:Zo,color:"#3b82f6"},select:{name:"选择字段",icon:Di,color:"#8b5cf6"},datetime:{name:"日期时间",icon:Qo,color:"#06b6d4"},link:{name:"链接字段",icon:Jo,color:"#10b981"},advanced:{name:"高级字段",icon:Ai,color:"#f59e0b"},collab:{name:"协作字段",icon:Ss,color:"#ec4899"}},Uu=[{id:"text",name:"单行文本",icon:Dd,description:"简短的文本内容",category:"basic",color:"#3b82f6",popular:!0,keywords:["文本","text","单行"]},{id:"longText",name:"长文本",icon:Zo,description:"多行文本，支持换行",category:"basic",color:"#10b981",popular:!0,keywords:["长文本","textarea","多行"]},{id:"number",name:"数字",icon:tc,description:"数值和计算",category:"basic",color:"#f59e0b",popular:!0,keywords:["数字","number","数值"]},{id:"singleSelect",name:"单选",icon:da,description:"从多个选项中选择一个",category:"select",color:"#8b5cf6",popular:!0,keywords:["单选","select","选项"]},{id:"multipleSelect",name:"多选",icon:Di,description:"可以选择多个选项",category:"select",color:"#ec4899",popular:!0,keywords:["多选","multi","标签"]},{id:"checkbox",name:"复选框",icon:Cs,description:"是/否 二选一",category:"select",color:"#84cc16",keywords:["复选框","checkbox","是否"]},{id:"date",name:"日期",icon:Qo,description:"日期和时间",category:"datetime",color:"#06b6d4",popular:!0,keywords:["日期","date","时间"]},{id:"link",name:"链接",icon:Jo,description:"网址链接",category:"link",color:"#6366f1",keywords:["链接","url","网址"]},{id:"email",name:"邮箱",icon:xa,description:"电子邮件地址",category:"link",color:"#14b8a6",keywords:["邮箱","email","邮件"]},{id:"phone",name:"电话",icon:ya,description:"电话号码",category:"link",color:"#ef4444",keywords:["电话","phone","手机"]},{id:"rating",name:"评分",icon:xo,description:"星级评分",category:"advanced",color:"#eab308",keywords:["评分","rating","星级"]},{id:"formula",name:"公式",icon:Ai,description:"基于其他字段计算得出",category:"advanced",color:"#8b5cf6",popular:!0,keywords:["公式","formula","计算","函数"]},{id:"user",name:"成员",icon:Ss,description:"选择用户或成员",category:"collab",color:"#64748b",keywords:["用户","user","成员","人员"]},{id:"attachment",name:"附件",icon:nc,description:"上传文件和图片",category:"collab",color:"#f97316",keywords:["附件","attachment","文件","图片"]}],qA=t=>({text:"text",singleLineText:"text",longText:"longText",number:"number",select:"singleSelect",singleSelect:"singleSelect",multipleSelect:"multipleSelect",date:"date",checkbox:"checkbox",attachment:"attachment",link:"link",user:"user",rating:"rating",formula:"formula",email:"email",phone:"phone"})[t]||"text",UA=(t,e)=>{if(!e)switch(t){case"singleSelect":case"multipleSelect":return{options:[]};case"formula":return{formula:"",description:""};case"number":return{format:"number",precision:0};case"date":return{includeTime:!1,dateFormat:"YYYY-MM-DD"};case"rating":return{maxRating:5,icon:"star",color:"#f59e0b"};default:return{}}switch(t){case"singleSelect":case"multipleSelect":return e.choices&&Array.isArray(e.choices)?{options:e.choices.map((n,r)=>({id:n.id||`option_${r}`,label:n.name||n.text||`选项${r+1}`,color:n.color||"#3b82f6"})),allowOther:e.allowOther||!1}:{options:[],allowOther:!1};case"formula":return{formula:e.expression||"",description:e.description||""};case"number":return{format:e.format||"number",precision:e.precision??0,min:e.min,max:e.max,prefix:e.prefix,suffix:e.suffix};case"date":return{includeTime:e.includeTime||!1,dateFormat:e.dateFormat||"YYYY-MM-DD",timeFormat:e.timeFormat||"24h"};case"rating":return{maxRating:e.maxRating??5,icon:e.icon||"star",color:e.color||"#f59e0b"};default:return e}};function GA({isOpen:t,onClose:e,onConfirm:n,triggerRef:r,initialData:i}){const[a,l]=y.useState(""),[c,h]=y.useState("all"),[d,p]=y.useState("configure"),[m,g]=y.useState(null),[x,b]=y.useState(""),[C,w]=y.useState({}),[S,k]=y.useState(""),_=y.useRef(null),[R,T]=y.useState({top:0,left:0,maxHeight:400}),M=y.useMemo(()=>{let D=Uu;if(c==="popular"?D=D.filter(P=>P.popular):c!=="all"&&(D=D.filter(P=>P.category===c)),a.trim()){const P=a.toLowerCase();D=D.filter(L=>L.name.toLowerCase().includes(P)||L.description.toLowerCase().includes(P)||L.keywords?.some(H=>H.toLowerCase().includes(P)))}return D},[c,a]);y.useEffect(()=>{if(!t||!r?.current)return;const P=r.current.getBoundingClientRect(),L={width:window.innerWidth,height:window.innerHeight};let H=P.bottom+4,$=P.left,Y=400;const te=d==="select"?320:420,J=8;$=Math.min(Math.max($,J),L.width-te-J);const re=L.height-H-J;re<220?(H=P.top-4,Y=Math.min(400,P.top-J)):Y=Math.min(400,re),T({top:H,left:$,maxHeight:Y})},[t,r,d]),y.useEffect(()=>{if(t&&i){p("configure"),b(i.name||""),k(i.description||"");const D=qA(i.type);console.log("🔍 字段类型映射:",{apiType:i.type,menuType:D});const P=Uu.find(H=>H.id===D);g(P||null);const L=UA(D,i.options);console.log("🔍 处理后的选项数据:",L),w(L)}else t&&(p("select"),g(null),b(""),w({}),k(""))},[t,i]);const I=D=>{const P=Uu.find(L=>L.id===D)||null;g(P),w(D==="singleSelect"||D==="multipleSelect"?{options:[]}:D==="formula"?{formula:"",description:""}:{}),p("configure")},z=D=>{D.key==="Escape"&&e()};return y.useEffect(()=>{if(!t)return;const D=P=>{_.current&&!_.current.contains(P.target)&&r?.current&&typeof r.current.contains=="function"&&!r.current.contains(P.target)&&e()};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[t,e,r]),t?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:50},onClick:e}),u.jsx("div",{ref:_,style:{position:"fixed",top:R.top,left:R.left,width:d==="select"?"320px":"420px",maxHeight:R.maxHeight,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"8px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)",zIndex:51,display:"flex",flexDirection:"column",overflow:"hidden",animation:"slideDown 200ms cubic-bezier(0.16, 1, 0.3, 1)"},onKeyDown:z,tabIndex:-1,children:d==="select"?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{padding:"12px",borderBottom:`1px solid ${E.colors.border.subtle}`},children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ri,{size:16,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",color:E.colors.text.tertiary,pointerEvents:"none"}}),u.jsx("input",{type:"text",value:a,onChange:D=>l(D.target.value),placeholder:"搜索字段类型...",autoFocus:!0,style:{width:"100%",padding:"8px 10px 8px 32px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",transition:sn.presets.all,boxSizing:"border-box"}})]})}),u.jsx("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${E.colors.border.subtle}`,display:"flex",gap:"4px",flexWrap:"wrap",backgroundColor:E.colors.surface.hover},children:[{id:"all",name:"全部"},{id:"popular",name:"常用"},...Object.entries(VA).map(([D,P])=>({id:D,name:P.name}))].map(D=>{const P=c===D.id;return u.jsx("button",{onClick:()=>h(D.id),style:{padding:"4px 8px",fontSize:"11px",fontWeight:P?500:400,color:P?E.colors.text.primary:E.colors.text.secondary,backgroundColor:P?E.colors.surface.base:"transparent",border:`1px solid ${P?E.colors.border.default:"transparent"}`,borderRadius:"4px",cursor:"pointer",transition:sn.presets.all,whiteSpace:"nowrap"},children:D.name},D.id)})}),u.jsx("div",{style:{flex:1,overflowY:"auto",padding:"4px"},children:M.length===0?u.jsxs("div",{style:{padding:"24px 16px",textAlign:"center",color:E.colors.text.secondary,fontSize:"13px"},children:[u.jsx(Ri,{size:24,style:{color:E.colors.text.tertiary,marginBottom:"8px"}}),u.jsx("div",{children:"没有找到匹配的字段类型"})]}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:M.map(D=>{const P=D.icon;return u.jsxs("button",{onClick:()=>I(D.id),style:{padding:"8px 12px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 150ms cubic-bezier(0.4, 0.0, 0.2, 1)",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",backgroundColor:`${D.color}15`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(P,{size:14,style:{color:D.color}})}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"2px",display:"flex",alignItems:"center",gap:"4px"},children:[D.name,D.popular&&u.jsx(xo,{size:10,style:{color:E.colors.text.warning,fill:E.colors.text.warning}})]}),u.jsx("div",{style:{fontSize:"11px",color:E.colors.text.secondary,lineHeight:"1.3"},children:D.description})]})]},D.id)})})})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"12px",borderBottom:`1px solid ${E.colors.border.subtle}`,display:"flex",flexDirection:"column",gap:"8px"},children:[u.jsx("input",{type:"text",value:x,onChange:D=>b(D.target.value),placeholder:"字段名称（可选）",autoFocus:!0,style:{width:"100%",padding:"8px 10px",fontSize:"14px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}}),u.jsxs("div",{style:{fontSize:"12px",color:E.colors.text.secondary,display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{style:{padding:"4px 8px",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"4px",backgroundColor:E.colors.surface.hover},children:m?.name}),u.jsx("button",{onClick:()=>p("select"),style:{marginLeft:"auto",background:"transparent",border:"none",color:E.colors.text.link,cursor:"pointer",fontSize:"12px"},children:"更改类型"})]})]}),u.jsx("div",{style:{padding:"12px",overflowY:"auto",maxHeight:R.maxHeight-120},children:XA(m?.id,C,w)}),u.jsxs("div",{style:{padding:"12px",borderTop:`1px solid ${E.colors.border.subtle}`,display:"flex",gap:"8px",justifyContent:"flex-end",backgroundColor:E.colors.surface.base,position:"sticky",bottom:0},children:[u.jsx("button",{onClick:e,style:{padding:"8px 12px",fontSize:"13px",background:"transparent",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",color:E.colors.text.primary},children:"取消"}),u.jsx("button",{onClick:D=>{if(D.stopPropagation(),!m){console.error("❌ selectedType 为 null");return}const P={type:m.id,name:x,options:{...C,description:S}};n(P),e()},style:{padding:"8px 12px",fontSize:"13px",background:E.colors.primary[600],color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",pointerEvents:"auto"},children:"保存"})]})]})}),u.jsx("style",{children:`
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-8px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      `})]}):null}function XA(t,e,n){if(!t)return u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary},children:"请选择字段类型"});switch(t){case"singleSelect":return u.jsx(Gl,{config:e,onChange:n,isMultiple:!1});case"multipleSelect":return u.jsx(Gl,{config:e,onChange:n,isMultiple:!0});case"formula":return u.jsx(QA,{value:e,onChange:n});case"number":return u.jsx(s0,{config:e,onChange:n});case"date":return u.jsx(a0,{config:e,onChange:n});case"rating":return u.jsx(l0,{config:e,onChange:n});case"text":case"longText":case"checkbox":case"link":case"email":case"phone":case"user":case"attachment":default:return u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary,textAlign:"center",padding:"20px",backgroundColor:E.colors.surface.hover,borderRadius:"6px",border:`1px solid ${E.colors.border.subtle}`},children:"该字段类型暂无额外配置选项"})}}function QA({value:t,onChange:e}){const[n,r]=y.useState(t?.formula||""),[i,a]=y.useState(t?.description||""),l=d=>{r(d),e({...t,formula:d})},c=d=>{a(d),e({...t,description:d})},h=()=>{l("SUM({数字字段1}, {数字字段2})")};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:E.colors.text.primary,marginBottom:"4px"},children:"公式"}),u.jsx("div",{style:{position:"relative"},children:u.jsx("textarea",{value:n,onChange:d=>l(d.target.value),placeholder:"输入公式，例如：SUM({字段1}, {字段2})",style:{width:"100%",minHeight:"80px",padding:"8px 10px",fontSize:"13px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none",resize:"vertical",fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',lineHeight:"1.4"},onFocus:d=>{d.target.style.borderColor=E.colors.border.focus,d.target.style.boxShadow=`0 0 0 2px ${E.colors.border.focus}20`},onBlur:d=>{d.target.style.borderColor=E.colors.border.subtle,d.target.style.boxShadow="none"}})}),u.jsxs("button",{onClick:h,style:{padding:"6px 12px",fontSize:"12px",background:E.colors.surface.hover,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",cursor:"pointer",color:E.colors.text.primary,alignSelf:"flex-start",display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx(Ai,{size:12}),"使用 AI 生成公式"]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:500,color:E.colors.text.primary},children:"描述"}),u.jsx("input",{type:"text",value:i,onChange:d=>c(d.target.value),placeholder:"描述此字段的用途（可选）",style:{width:"100%",padding:"6px 8px",fontSize:"12px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"6px",outline:"none"}})]})]})}var c0={},Gu={},Gm;function u0(){return Gm||(Gm=1,(function(t){(function(e,n){n(t)})(Vd,function(e){var n=typeof window>"u"?this:window,r=Date.now||function(){return+new Date},i=60,a=1e3,l={},c=1;e.requestAnimationFrame=(function(){var h=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame,d=!!h;if(h&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(h.toString())&&(d=!1),d)return function(C,w){h(C,w)};var p=60,m={},g=1,x=null,b=+new Date;return function(C,w){var S=g++;return m[S]=C,x===null&&(x=setInterval(function(){var k=+new Date,_=m;m={};for(var R in _)_.hasOwnProperty(R)&&(_[R](k),b=k);k-b>2500&&(clearInterval(x),x=null)},1e3/p)),S}})(),e.stop=function(h){var d=l[h]!==null;return d&&(l[h]=null),d},e.isRunning=function(h){return l[h]!==null},e.start=function(h,d,p,m,g,x){var b=r(),C=b,w=0,S=0,k=c++;if(k%20===0){var _={};for(var R in l)_[R]=!0;l=_}var T=function(M){var I=M!==!0,z=r();if(!l[k]||d&&!d(k)){l[k]=null,p(i-S/((z-b)/a),k,!1);return}if(I)for(var D=Math.round((z-C)/(a/i))-1,P=0;P<Math.min(D,4);P++)T(!0),S++;m&&(w=(z-b)/m,w>1&&(w=1));var L=g?g(w):w;(h(L,z,I)===!1||w===1)&&I?(l[k]=null,p(i-S/((z-b)/a),k,w===1||m===void 0)):I&&(C=z,e.requestAnimationFrame(T,x))};return l[k]=!0,e.requestAnimationFrame(T,x),k}})})(Gu)),Gu}var Xu={exports:{}},Xm;function ZA(){return Xm||(Xm=1,(function(t){(function(e,n){t.exports=n(u0())})(Vd,function(e){var n=function(){},r=function(l,c){this.__callback=l,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:n,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var h in c)this.options[h]=c[h]},i=function(l){return Math.pow(l-1,3)+1},a=function(l){return(l/=.5)<1?.5*Math.pow(l,3):.5*(Math.pow(l-2,3)+2)};return r.prototype={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(l,c,h,d){l!==null&&(this.__clientWidth=l),c!==null&&(this.__clientHeight=c),h!==null&&(this.__contentWidth=h),d!==null&&(this.__contentHeight=d),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition:function(l,c){this.__clientLeft=l||0,this.__clientTop=c||0},setSnapSize:function(l,c){this.__snapWidth=l,this.__snapHeight=c},getValues:function(){return{left:this.__scrollLeft,top:this.__scrollTop,right:this.__scrollLeft+this.__clientWidth/this.__zoomLevel,bottom:this.__scrollTop+this.__clientHeight/this.__zoomLevel,zoom:this.__zoomLevel}},getPoint:function(l,c){var h=this.getValues();return{left:l/h.zoom,top:c/h.zoom}},getScrollMax:function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo:function(l,c,h,d,p){if(!this.options.zooming)throw new Error("Zooming is not enabled!");p&&(this.__zoomComplete=p),this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1);var m=this.__zoomLevel;h===void 0&&(h=this.__clientWidth/2),d===void 0&&(d=this.__clientHeight/2),l=Math.max(Math.min(l,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(l);var g=l/m,x=g*(this.__scrollLeft+h)-h,b=g*(this.__scrollTop+d)-d;x>this.__maxScrollLeft?x=this.__maxScrollLeft:x<0&&(x=0),b>this.__maxScrollTop?b=this.__maxScrollTop:b<0&&(b=0),this.__publish(x,b,l,c)},zoomBy:function(l,c,h,d,p){this.zoomTo(this.__zoomLevel*l,c,h,d,p)},scrollTo:function(l,c,h,d){if(this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1),d!==void 0&&d!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");l*=d,c*=d,this.__computeScrollMax(d)}else d=this.__zoomLevel;this.options.scrollingX?this.options.paging?l=Math.round(l/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(l=Math.round(l/this.__snapWidth)*this.__snapWidth):l=this.__scrollLeft,this.options.scrollingY?this.options.paging?c=Math.round(c/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(c=Math.round(c/this.__snapHeight)*this.__snapHeight):c=this.__scrollTop,l=Math.max(Math.min(this.__maxScrollLeft,l),0),c=Math.max(Math.min(this.__maxScrollTop,c),0),l===this.__scrollLeft&&c===this.__scrollTop&&(h=!1),this.__publish(l,c,d,h)},scrollBy:function(l,c,h){var d=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,p=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(d+(l||0),p+(c||0),h)},doMouseZoom:function(l,c,h,d){var p=l>0?.97:1.03;return this.zoomTo(this.__zoomLevel*p,!1,h-this.__clientLeft,d-this.__clientTop)},doTouchStart:function(l,c){if(l.length===void 0)throw new Error("Invalid touch list: "+l);if(c instanceof Date&&(c=c.valueOf()),typeof c!="number")throw new Error("Invalid timestamp value: "+c);this.__interruptedAnimation=!0,this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(e.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var h,d,p=l.length===1;p?(h=l[0].pageX,d=l[0].pageY):(h=Math.abs(l[0].pageX+l[1].pageX)/2,d=Math.abs(l[0].pageY+l[1].pageY)/2),this.__initialTouchLeft=h,this.__initialTouchTop=d,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=h,this.__lastTouchTop=d,this.__lastTouchMove=c,this.__lastScale=1,this.__enableScrollX=!p&&this.options.scrollingX,this.__enableScrollY=!p&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!p,this.__isSingleTouch=p,this.__positions=[]},doTouchMove:function(l,c,h){if(l.length===void 0)throw new Error("Invalid touch list: "+l);if(c instanceof Date&&(c=c.valueOf()),typeof c!="number")throw new Error("Invalid timestamp value: "+c);if(this.__isTracking){var d,p;l.length===2?(d=Math.abs(l[0].pageX+l[1].pageX)/2,p=Math.abs(l[0].pageY+l[1].pageY)/2):(d=l[0].pageX,p=l[0].pageY);var m=this.__positions;if(this.__isDragging){var g=d-this.__lastTouchLeft,x=p-this.__lastTouchTop,b=this.__scrollLeft,C=this.__scrollTop,w=this.__zoomLevel;if(h!==void 0&&this.options.zooming){var S=w;if(w=w/this.__lastScale*h,w=Math.max(Math.min(w,this.options.maxZoom),this.options.minZoom),S!==w){var k=d-this.__clientLeft,_=p-this.__clientTop;b=(k+b)*w/S-k,C=(_+C)*w/S-_,this.__computeScrollMax(w)}}if(this.__enableScrollX){b-=g*this.options.speedMultiplier;var R=this.__maxScrollLeft;(b>R||b<0)&&(this.options.bouncing?b+=g/2*this.options.speedMultiplier:b>R?b=R:b=0)}if(this.__enableScrollY){C-=x*this.options.speedMultiplier;var T=this.__maxScrollTop;(C>T||C<0)&&(this.options.bouncing?C+=x/2*this.options.speedMultiplier:C>T?C=T:C=0)}m.length>60&&m.splice(0,30),m.push(b,C,c),this.__publish(b,C,w)}else{var M=this.options.locking?3:0,I=5,z=Math.abs(d-this.__initialTouchLeft),D=Math.abs(p-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&z>=M,this.__enableScrollY=this.options.scrollingY&&D>=M,m.push(this.__scrollLeft,this.__scrollTop,c),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(z>=I||D>=I),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=d,this.__lastTouchTop=p,this.__lastTouchMove=c,this.__lastScale=h}},doTouchEnd:function(l){if(l instanceof Date&&(l=l.valueOf()),typeof l!="number")throw new Error("Invalid timestamp value: "+l);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&l-this.__lastTouchMove<=100){for(var c=this.__positions,h=c.length-1,d=h,p=h;p>0&&c[p]>this.__lastTouchMove-100;p-=3)d=p;if(d!==h){var m=c[h]-c[d],g=this.__scrollLeft-c[d-2],x=this.__scrollTop-c[d-1];this.__decelerationVelocityX=g/m*(1e3/60),this.__decelerationVelocityY=x/m*(1e3/60);var b=this.options.paging||this.options.snapping?4:1;(Math.abs(this.__decelerationVelocityX)>b||Math.abs(this.__decelerationVelocityY)>b)&&this.__startDeceleration(l)}else this.options.scrollingComplete()}else l-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel)),this.__positions.length=0}},__publish:function(l,c,h,d){var p=this.__isAnimating;if(p&&(e.stop(p),this.__isAnimating=!1),d&&this.options.animating){this.__scheduledLeft=l,this.__scheduledTop=c,this.__scheduledZoom=h;var m=this.__scrollLeft,g=this.__scrollTop,x=this.__zoomLevel,b=l-m,C=c-g,w=h-x,S=(function(R,T,M){M&&(this.__scrollLeft=m+b*R,this.__scrollTop=g+C*R,this.__zoomLevel=x+w*R,this.__callback&&this.__callback(this.__scrollLeft,this.__scrollTop,this.__zoomLevel))}).bind(this),k=(function(R){return this.__isAnimating===R}).bind(this),_=(function(R,T,M){T===this.__isAnimating&&(this.__isAnimating=!1),(this.__didDecelerationComplete||M)&&this.options.scrollingComplete(),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))}).bind(this);this.__isAnimating=e.start(S,k,_,this.options.animationDuration,p?i:a)}else this.__scheduledLeft=this.__scrollLeft=l,this.__scheduledTop=this.__scrollTop=c,this.__scheduledZoom=this.__zoomLevel=h,this.__callback&&this.__callback(l,c,h),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},__computeScrollMax:function(l){l===void 0&&(l=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*l-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*l-this.__clientHeight,0)},__startDeceleration:function(l){if(this.options.paging){var c=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),h=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),d=this.__clientWidth,p=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(c/d)*d,this.__minDecelerationScrollTop=Math.floor(h/p)*p,this.__maxDecelerationScrollLeft=Math.ceil(c/d)*d,this.__maxDecelerationScrollTop=Math.ceil(h/p)*p}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;var m=(function(C,w,S){this.__stepThroughDeceleration(S)}).bind(this),g=this.options.snapping?4:.1,x=(function(){var C=Math.abs(this.__decelerationVelocityX)>=g||Math.abs(this.__decelerationVelocityY)>=g;return C||(this.__didDecelerationComplete=!0),C}).bind(this),b=(function(C,w,S){this.__isDecelerating=!1,this.__didDecelerationComplete&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,this.options.snapping)}).bind(this);this.__isDecelerating=e.start(m,x,b)},__stepThroughDeceleration:function(l){var c=this.__scrollLeft+this.__decelerationVelocityX,h=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var d=Math.max(Math.min(this.__maxDecelerationScrollLeft,c),this.__minDecelerationScrollLeft);d!==c&&(c=d,this.__decelerationVelocityX=0);var p=Math.max(Math.min(this.__maxDecelerationScrollTop,h),this.__minDecelerationScrollTop);p!==h&&(h=p,this.__decelerationVelocityY=0)}if(l?this.__publish(c,h,this.__zoomLevel):(this.__scrollLeft=c,this.__scrollTop=h),!this.options.paging){var m=.95;this.__decelerationVelocityX*=m,this.__decelerationVelocityY*=m}if(this.options.bouncing){var g=0,x=0,b=this.options.penetrationDeceleration,C=this.options.penetrationAcceleration;c<this.__minDecelerationScrollLeft?g=this.__minDecelerationScrollLeft-c:c>this.__maxDecelerationScrollLeft&&(g=this.__maxDecelerationScrollLeft-c),h<this.__minDecelerationScrollTop?x=this.__minDecelerationScrollTop-h:h>this.__maxDecelerationScrollTop&&(x=this.__maxDecelerationScrollTop-h),g!==0&&(g*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=g*b:this.__decelerationVelocityX=g*C),x!==0&&(x*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=x*b:this.__decelerationVelocityY=x*C)}}},r})})(Xu)),Xu.exports}(function(t){(function(e,n){n(t,u0(),ZA())})(Vd,function(e,n,r){e.animate=n,e.Scroller=r})})(c0);const JA=(t,e)=>{const{coordInstance:n,containerWidth:r,containerHeight:i,scrollWidth:a,scrollHeight:l,left:c=0,top:h=0,containerRef:d,smoothScrollX:p,smoothScrollY:m,scrollBarVisible:g,scrollEnable:x=!0,scrollState:b,getLinearRow:C,setScrollState:w,onScrollChanged:S,onVisibleRegionChanged:k}=t;y.useImperativeHandle(e,()=>({scrollTo:(U,ce)=>{if(T.current&&U!=null&&(T.current.scrollLeft=U),M.current&&ce!=null){const ue=M.current,pe=ue.scrollHeight-ue.clientHeight;let He=0;if(pe>0&&l>ue.scrollHeight+5){const V=ce/(l-ue.clientHeight);He=pe*V-ce}M.current.scrollTop=ce+He}},scrollBy:(U,ce)=>{T.current?.scrollBy(U,0),M.current?.scrollBy(0,ce)}}));const _=eD(),R=y.useRef(null),T=y.useRef(null),M=y.useRef(null),I=y.useRef(null),z=y.useRef(0),D=y.useRef(0),P=(U,ce)=>{if(!M.current||!T.current)return;const ue=U.target,{scrollTop:pe,scrollLeft:He}=ue,{rowInitSize:V,columnInitSize:se}=n;let ze={};if(ce==="vertical"){const Me=D.current-pe,Fe=ue.scrollHeight-ue.clientHeight;if(D.current=pe,Fe>0&&(Math.abs(Me)>2e3||pe===0||pe===Fe)&&l>ue.scrollHeight+5){const Et=pe/Fe,mt=(l-ue.clientHeight)*Et;z.current=mt-pe}const st=pe+z.current,Ee=n.getRowStartIndex(st),Ze=n.getRowOffset(Ee);ze={scrollTop:m?st:Ze-V}}if(ce==="horizontal"){const Me=n.getColumnStartIndex(He),Fe=n.getColumnOffset(Me);ze={scrollLeft:p?He:Fe-se}}const{startRowIndex:Ne,stopRowIndex:ae}=Wx(n,ze.scrollTop??b.scrollTop),{startColumnIndex:ve,stopColumnIndex:je}=$x(n,ze.scrollLeft??b.scrollLeft),Qe=C(Ne).realIndex,Ue=C(ae).realIndex;k?.({x:ve,y:Qe,width:je-ve,height:Ue-Qe}),S?.(ze.scrollLeft??b.scrollLeft,ze.scrollTop??b.scrollTop),w(Me=>({...Me,...ze,isScrolling:!0})),H()},L=y.useCallback(()=>{w(U=>({...U,isScrolling:!1})),I.current=null},[w]),H=y.useCallback(()=>{I.current!==null&&KE(I.current),I.current=eI(L,200)},[L]),$=y.useCallback((U,ce)=>{if(T.current&&(T.current.scrollLeft=T.current.scrollLeft+U),M.current){const ue=ce;M.current.scrollTop=M.current.scrollTop+ue}},[]),Y=y.useCallback((U,ce)=>{T.current&&(T.current.scrollLeft=U),M.current&&(M.current.scrollTop=ce)},[]),te=y.useCallback(U=>{if(!x)return;U.preventDefault(),U.stopPropagation();const[ce,ue]=Rx({event:U,pageHeight:n.containerHeight-n.rowInitSize-1,lineHeight:n.rowHeight});$(ce,ue)},[x,$,n]),J=y.useCallback(U=>{R.current&&R.current.doTouchStart(U.changedTouches,U.timeStamp)},[]),re=y.useCallback(U=>{U.preventDefault(),R.current&&R.current.doTouchMove(U.changedTouches,U.timeStamp)},[]),ie=y.useCallback(U=>{R.current&&(T.current&&M.current&&R.current?.scrollTo(T.current.scrollLeft,M.current.scrollTop),R.current.doTouchEnd(U.timeStamp))},[]);y.useEffect(()=>{if(!_)return;const U={scrollingX:!0,scrollingY:!0,animationDuration:200};R.current=new c0.Scroller(Y,U)},[Y,_]),y.useEffect(()=>{R.current&&(scrollTo({}),R.current.setDimensions(r,i,a,l))},[i,r,a,l]);const G=y.useMemo(()=>{let U=0,ce=0;const ue=[];for(;U<l;){const pe=Math.min(5e6,l-U);ue.push(u.jsx("div",{style:{width:0,height:pe}},ce++)),U+=pe}return ue},[l]);return Si("wheel",te,d.current,!1),Si("touchstart",J,d.current,!1),Si("touchmove",re,d.current,!1),Si("touchend",ie,d.current,!1),u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:T,className:bo("scrollbar scrollbar-thumb-foreground/40 scrollbar-thumb-rounded-md scrollbar-h-[10px] cursor-pointer will-change-transform",!g&&"opacity-0 pointer-events-none"),style:{position:"absolute",bottom:2,left:c,width:r-c,height:16,overflowX:"scroll",overflowY:"hidden"},onScroll:U=>P(U,"horizontal"),children:u.jsx("div",{style:{position:"absolute",width:a,height:1}})}),u.jsx("div",{ref:M,className:bo("scrollbar scrollbar-thumb-foreground/40 scrollbar-thumb-rounded-md scrollbar-w-[10px] scrollbar-min-thumb cursor-pointer will-change-transform",!g&&"opacity-0 pointer-events-none"),style:{position:"absolute",right:2,top:h,width:16,height:i-h,overflowX:"hidden",overflowY:"scroll"},onScroll:U=>P(U,"vertical"),children:u.jsx("div",{className:"flex w-px shrink-0 flex-col",children:G})})]})},KA=y.forwardRef(JA),{cellScrollBarPaddingY:e5}=nn,t5=(t,e)=>{const{containerRef:n,style:r,scrollEnable:i,activeCellBound:a,setCellScrollTop:l}=t,{height:c,totalHeight:h}=a,d=y.useRef(null),p=y.useRef(0),m=y.useRef(0);y.useImperativeHandle(e,()=>({reset:()=>{d.current&&(d.current.scrollTop=0,l(0))}}));const g=w=>{if(!d.current)return;const S=w.target,{scrollTop:k}=S,_=m.current-k,R=S.scrollHeight-S.clientHeight;if(m.current=k,R>0&&(Math.abs(_)>2e3||k===0||k===R)&&h>S.scrollHeight+5){const M=k/R,I=(h-S.clientHeight)*M;p.current=I-k}const T=k+p.current;l(T)},x=y.useCallback(w=>{if(d.current){const S=w;d.current.scrollTop=d.current.scrollTop+S}},[]),b=y.useCallback(w=>{if(!i)return;w.preventDefault();const[,S]=Rx({event:w});x(S)},[i,x]),C=y.useMemo(()=>{let w=0,S=0;const k=[];for(;w<h;){const _=Math.min(5e6,h-w);k.push(u.jsx("div",{style:{width:0,height:_}},S++)),w+=_}return k},[h]);return Si("wheel",b,n.current,!1),u.jsx("div",{ref:d,className:"scrollbar scrollbar-thumb-rounded-sm scrollbar-w-2 absolute w-[10px] cursor-pointer overflow-x-hidden overflow-y-scroll opacity-0 will-change-transform",style:{...r,height:c-e5*2},onScroll:g,children:u.jsx("div",{className:"flex shrink-0 flex-col",children:C})})},n5=y.forwardRef(t5),d0=t=>{const{theme:e,width:n,height:r,columns:i,commentCountMap:a,isEditing:l,rowControls:c,visibleRegion:h,imageManager:d,spriteManager:p,activeCell:m,activeCellBound:g,collaborators:x,searchCursor:b,searchHitIndex:C,dragState:w,scrollState:S,columnFreezeState:k,hoverCellPosition:_,mouseState:R,selection:T,isSelecting:M,isInteracting:I,coordInstance:z,forceRenderFlag:D,groupCollection:P,rowIndexVisible:L,columnStatistics:H,columnResizeState:$,columnHeaderHeight:Y,hoveredColumnResizeIndex:te,isColumnFreezable:J,isRowAppendEnable:re,isColumnResizable:ie,isColumnAppendEnable:G,isMultiSelectionEnable:U,isColumnHeaderMenuVisible:ce,getCellContent:ue,real2RowIndex:pe,getLinearRow:He}=t,{containerWidth:V}=z,{x:se,y:ze,columnIndex:Ne,rowIndex:ae,type:ve,isOutOfBounds:je}=R,Qe=I||ve===K.ColumnFreezeHandler,Ue=y.useRef(null),Me=y.useRef(),Fe=y.useMemo(()=>{const Ze=document.createElement("canvas");return Ze.style.opacity="0",Ze.style.position="fixed",Ze},[]),st=y.useMemo(()=>({type:ve,rowIndex:ae,columnIndex:Ne,isOutOfBounds:je,x:0,y:0}),[Ne,ae,ve,je]),Ee=y.useMemo(()=>Qe?{x:se,y:ze}:null,[se,ze,Qe]);return y.useEffect(()=>{const Ze=Ue.current;if(Ze==null)return;const Et=Me.current,mt={theme:e,width:n,height:r,columns:i,commentCountMap:a,isEditing:l,rowControls:c,visibleRegion:h,imageManager:d,spriteManager:p,activeCell:m,activeCellBound:g,collaborators:x,searchCursor:b,searchHitIndex:C,dragState:w,scrollState:S,columnFreezeState:k,hoverCellPosition:_,mouseState:Ee?{...st,...Ee}:st,selection:T,isSelecting:M,isInteracting:Qe,coordInstance:z,forceRenderFlag:D,groupCollection:P,rowIndexVisible:L,columnStatistics:H,columnResizeState:$,columnHeaderHeight:Y,hoveredColumnResizeIndex:te,isColumnFreezable:J,isRowAppendEnable:re,isColumnResizable:ie,isColumnAppendEnable:G,isColumnHeaderMenuVisible:ce,isMultiSelectionEnable:U,getCellContent:ue,real2RowIndex:pe,getLinearRow:He,devicePixelRatio:window.devicePixelRatio||1};Me.current=mt,XD(Ze,Fe,mt,Et)},[e,n,r,i,a,l,c,h,d,p,m,g,x,b,C,w,st,S,k,Ee,T,M,Qe,z,D,P,L,H,$,Y,_,te,J,re,ie,G,ce,U,Fe,ue,pe,He]),u.jsx("canvas",{ref:Ue,style:{backgroundColor:e.cellBg,pointerEvents:"none"}})},{columnAppendBtnWidth:Qm,columnHeadHeight:Cl}=nn,r5=(t,e)=>{const{theme:n,width:r,height:i,columns:a,commentCountMap:l,draggable:c,selectable:h,rowControls:d,mouseState:p,scrollState:m,imageManager:g,spriteManager:x,coordInstance:b,columnStatistics:C,forceRenderFlag:w,rowIndexVisible:S,groupCollection:k,isMultiSelectionEnable:_,activeCellBound:R,columnHeaderHeight:T,collapsedGroupIds:M,collaborators:I,searchCursor:z,searchHitIndex:D,activeCell:P,getLinearRow:L,real2RowIndex:H,setActiveCell:$,setMouseState:Y,scrollToItem:te,scrollBy:J,getCellContent:re,onUndo:ie,onRedo:G,onCopy:U,onPaste:ce,onDelete:ue,onRowAppend:pe,onRowExpand:He,onRowOrdered:V,onCellEdited:se,onCellDblClick:ze,onSelectionChanged:Ne,onColumnFreeze:ae,onColumnAppend:ve,onColumnResize:je,onColumnOrdered:Qe,onContextMenu:Ue,onGroupHeaderContextMenu:Me,onItemHovered:Fe,onItemClick:st,onColumnHeaderClick:Ee,onColumnHeaderDblClick:Ze,onColumnHeaderMenuClick:Et,onRowHeaderMenuClick:mt,onCellContextMenu:gt,onColumnStatisticClick:Ot,onCollapsedGroupChanged:xt,onDragStart:Dt}=t;y.useImperativeHandle(e,()=>({isEditing:()=>ut,resetState:ft,setSelection:oe=>{const{type:fe,ranges:ye}=oe;switch(fe){case nt.Cells:{const xe=ye[0];$(xe),te(xe);break}case nt.Columns:{const xe=[ye[0][0],0];$(xe),te(xe);break}default:{$(null);break}}Zt(oe)}}));const Bt=y.useRef(null),an=y.useRef(null),ln=y.useRef(null),Xt=y.useRef(null),cn=y.useRef(null),un=y.useRef(Bn),Cn=y.useRef(Bn),yt=Dj(Bt),[Qn,Sn]=y.useState(0),[jt,gn]=y.useState(null),[En,me]=y.useState("default"),[ut,Re]=y.useState(!1),{containerHeight:ke,freezeColumnCount:Wt}=b,{scrollTop:Be,scrollLeft:At,isScrolling:_r}=m,{type:dr}=p,Qt=pe!=null,In=ae!=null,Rr=je!=null,Mr=ve!=null,Zn=Et!=null,Co=Yx(b,m,w),{columnResizeState:fr,hoveredColumnResizeIndex:ei,setHoveredColumnResizeIndex:Jn,setColumnResizeState:De,onColumnResizeStart:Ge,onColumnResizeChange:We,onColumnResizeEnd:Ct}=JI(b,m),{selection:$t,isSelecting:rn,setSelection:Zt,onSelectionStart:Wn,onSelectionChange:Yt,onSelectionEnd:hr,onSelectionClick:So,onSelectionContextMenu:Li}=Bx({selectable:h,coordInstance:b,isMultiSelectionEnable:_,getLinearRow:L,setActiveCell:$,onSelectionChanged:Ne}),{dragState:ko,setDragState:Qr,onDragStart:_o,onDragChange:Zr,onDragEnd:ti}=KI(b,m,$t,c),{columnFreezeState:Ro,onColumnFreezeStart:Mo,onColumnFreezeMove:Dn,onColumnFreezeEnd:To}=ZI(b,m),{isDragging:Le,type:ni}=ko,{isFreezing:jo}=Ro,Ms=fr.columnIndex>-1,{isCellSelection:Hi,ranges:Jr}=$t,Kn=rn||Le||Ms||jo,[Eo,Kr]=P??[],Ts=()=>{const oe=yt.elX,fe=yt.elY,{freezeRegionWidth:ye,totalWidth:xe,rowInitSize:Se,columnInitSize:$e,columnCount:Je}=b,ht=fe<0?-1/0:fe<=Se?-1:b.getRowStartIndex(Be+fe),Rt=oe<0?-1/0:At+oe>xe&&At+oe<xe+Qm?-2:oe<=ye?oe<=$e?-1:b.getColumnStartIndex(oe):b.getColumnStartIndex(At+oe);return{x:oe,y:fe,rowIndex:ht,columnIndex:Math.min(Rt,Je-1)}},Bi=oe=>{const{rowIndex:fe,columnIndex:ye,x:xe,y:Se}=oe,{realIndex:$e,type:Je}=L(fe);if(ye>-1&&Je===vt.Row){const Rt=re([ye,$e]),on=_i(Rt.type);if(on?.needsHoverPosition||on?.needsHoverPositionWhenActive&&P&&Lt.isEqual(P,[ye,$e])){const Pt=b.getColumnOffset(ye);return{x:ye<Wt?xe-Pt:xe-Pt+At,y:Se-b.getRowOffset(fe)+Be}}}return null},{onAutoScroll:eo,onAutoScrollStop:Wi}=QI({coordInstance:b,scrollBy:J}),er=y.useMemo(()=>R==null?null:{...R,scrollTop:R.scrollEnable?Qn:0},[R,Qn]),Tr=()=>{const oe=Ts(),{x:fe,y:ye}=oe,{totalHeight:xe,totalWidth:Se}=b,$e=At+fe>Se+Qm||Be+ye>xe&&!dt(ye,ke,i),Je=zE({position:oe,dragState:ko,selection:$t,isSelecting:rn,columnResizeState:fr,columnStatistics:C,coordInstance:b,scrollState:m,rowControls:d,isFreezing:jo,isOutOfBounds:$e,isColumnResizable:Rr,isColumnAppendEnable:Mr,isMultiSelectionEnable:_,isColumnHeaderMenuVisible:Zn,isColumnFreezable:In,activeCellBound:er,activeCell:P,columns:a,height:i,theme:n,getLinearRow:L,real2RowIndex:H});un.current=Je;const{x:ht,y:Rt,width:on,height:Pt,...pn}=Je;return{...oe,isOutOfBounds:$e,...pn}},$i=oe=>{if(!_r){if(jo)return me("grab");if(Le)return me("grabbing");switch(oe){case K.AppendRow:return P!=null?void 0:me("pointer");case K.AppendColumn:case K.GroupStatistic:case K.ColumnStatistic:case K.ColumnHeaderMenu:case K.ColumnDescription:case K.ColumnPrimaryIcon:case K.RowGroupControl:case K.RowHeaderExpandHandler:return me("pointer");case K.ColumnFreezeHandler:return me("grab");case K.AllCheckbox:case K.RowHeaderCheckbox:return[bn.None,bn.Column,bn.Cell].includes(h)?me("not-allowed"):me("pointer");case K.RowHeaderDragHandler:return c===Xo.Column||c===Xo.None?me("not-allowed"):me("grabbing");case K.ColumnResizeHandler:return me("ew-resize");case K.FillHandler:return me("crosshair");default:me("default")}}},ri=oe=>{const fe=Tr();So(oe,fe);const{type:ye,rowIndex:xe,columnIndex:Se}=fe;if(dr!==ye)return;const{realIndex:$e}=L(xe);switch(ye){case K.AppendRow:{if(P!=null)return Zt($t.reset()),$(null);const Rt=L(xe-1);pe?.(Rt.realIndex);return}case K.AppendColumn:return ve?.();case K.RowHeaderExpandHandler:return He?.($e);case K.ColumnHeader:return Ee?.(Se,{x:b.getColumnRelativeOffset(Se,At),y:0,width:b.getColumnWidth(Se),height:Cl});case K.ColumnHeaderMenu:return Et?.(Se,{x:b.getColumnRelativeOffset(Se,At),y:0,width:b.getColumnWidth(Se),height:Cl});case K.GroupStatistic:case K.ColumnStatistic:{const{x:Rt,y:on,width:Pt,height:pn}=un.current;return Ot?.(Se,{x:Rt,y:on,width:Pt,height:pn})}case K.Cell:case K.ActiveCell:{const Rt=re([Se,$e]),Pt=_i(Rt.type)?.onClick,pn=Lt.isEqual(cn.current,P)&&Lt.isEqual(P,[Se,$e]);Pt&&jt&&Pt(Rt,{position:{x:fe.x,y:fe.y},cell:Rt,rowIndex:$e,columnIndex:Se,width:b.getColumnWidth(Se),height:b.getRowHeight(xe),theme:n,hoverCellPosition:jt,activeCellBound:er,isActive:pn},(Do=>{const{type:Nr,data:to}=Do;if(Nr===Xe.Update)return se?.([Se,$e],{...Rt,data:to});if(Nr===Xe.ToggleEditing)return Re(!0)}));return}case K.RowGroupControl:{const{rowIndex:Rt}=fe,on=L(Rt);if(on.type!==vt.Group)return;const{id:Pt}=on;if(M==null)return xt?.(new Set([Pt]));if(M.has(Pt)){const pn=new Set(M);return pn.delete(Pt),xt?.(pn)}return xt?.(new Set([...M,Pt]))}}const{type:Je,...ht}=un.current;st?.(Je,ht,[Se,$e])},Yi=()=>{const oe=Tr(),{type:fe,rowIndex:ye,columnIndex:xe}=oe,{realIndex:Se}=L(ye);if([K.Cell,K.ActiveCell].includes(fe)&&Lt.isEqual(Jr[0],[xe,Se]))return re([xe,Se]).readonly?ze?.([xe,Se]):(ln.current?.focus?.(),Re(!0));if(fe===K.ColumnHeader&&Lt.isEqual(Jr[0],[xe,xe]))return Ze?.(xe,{x:b.getColumnRelativeOffset(xe,At),y:0,width:b.getColumnWidth(xe),height:Cl})},oi=oe=>{const fe=oe.detail;fe===1&&ri(oe),fe===2&&Yi()},ii=oe=>{if(oe.preventDefault(),oe.button===hd.Right)return;const fe=Tr();Y(fe);const{rowIndex:ye,columnIndex:xe,type:Se}=fe,{realIndex:$e}=L(ye);Hi&&Lt.isEqual(Jr[0],[xe,$e])&&Se===K.Cell||(Re(!1),ln.current?.saveValue?.()),_o(fe,(Je,ht)=>{if(Je===qt.Columns&&Dt?.(Je,ta(ht)),Je===qt.Rows){const Rt=ta(ht).map(on=>L(on).realIndex);Dt?.(Je,Rt)}}),Mo(fe),cn.current=P,Wn(oe,fe),Rr&&Ge(fe)},Io=oe=>{const{columnIndex:fe,rowIndex:ye,type:xe}=oe,{realIndex:Se}=L(ye),$e=re([fe,Se]),Je=_i($e.type),ht=Je?.needsHover,Rt=Je?.needsHoverPosition,on=Je?.needsHoverWhenActive,Pt=Je?.needsHoverPositionWhenActive,pn=xe===K.ActiveCell;if((Rt||Pt&&pn)&&jt){const Do=Je?.checkRegion?.($e,{position:jt,cell:$e,rowIndex:ye,columnIndex:fe,width:b.getColumnWidth(fe),height:b.getRowHeight(ye),theme:n,isActive:pn,activeCellBound:er,hoverCellPosition:jt})??{type:Xe.Blank},{type:Nr}=Do;if(Nr===Xe.Hover){const{x:to,y:js,width:qi,height:St}=Do.data,pt=b.getColumnOffset(fe),Es=b.getRowOffset(ye);Fe?.(K.CellValue,{x:fe<b.freezeColumnCount?to+pt:to+pt-At,y:js+Es-Be,width:qi,height:St},[fe,Se])}return Nr!==Xe.Blank?me("pointer"):void 0}(ht||on&&pn)&&me("pointer")},Pr=()=>{const oe=Tr(),fe=Bi(oe);if(gn(fe),Y(oe),$i(oe.type),Io(oe),rn&&eo(oe),Le&&eo(oe,ni),Yt(oe),We(oe,(ye,xe)=>{je?.(a[xe],ye,xe)}),Zr(oe),Dn(oe),!Kn&&!Lt.isEqual(un.current,Cn.current)){const{type:ye,...xe}=un.current,{columnIndex:Se,rowIndex:$e}=oe;Fe?.(ye,xe,[Se,L($e).realIndex])}Cn.current={...un.current}},Vi=()=>{const oe=Tr();Y(oe),Wi(),ti(oe,(fe,ye)=>{if(ni===qt.Columns&&Qe?.(ta(fe),ye),ni===qt.Rows){const{type:xe}=L(ye-1),{type:Se,realIndex:$e}=L(ye),Je=ta(fe).map(ht=>L(ht).realIndex);if(xe===vt.Row&&Se===vt.Append||xe===vt.Group&&Se===vt.Row&&$e!==0)return V?.(Je,$e+1);V?.(Je,$e)}$(null),Zt($t.reset()),me("default")}),To(fe=>{ae?.(fe),Y(ia)}),hr(),Ct()},ne=()=>{if(Kn)return;const{type:oe,...fe}=Bn;Fe?.(oe,fe,[-1/0,-1/0]),Y(ia),Jn(-1)},Ce=oe=>{oe.cancelable&&oe.preventDefault();const fe=Tr(),{type:ye,x:xe,y:Se,rowIndex:$e,columnIndex:Je}=fe;if(ye===K.RowGroupHeader||ye===K.RowGroupControl){const ht=L($e);if(ht.type!==vt.Group)return;const{id:Rt}=ht;return Me?.(Rt,{x:xe,y:Se})}if(ye===K.ColumnHeader&&Je!==void 0)return Et?.(Je,{x:oe.clientX,y:oe.clientY,width:b.getColumnWidth(Je),height:Cl});if(ye===K.RowHeader&&$e!==void 0)return mt?.($e,{x:oe.clientX,y:oe.clientY});if((ye===K.Cell||ye===K.ActiveCell)&&$e!==void 0&&Je!==void 0)return gt?.($e,Je,{x:oe.clientX,y:oe.clientY});Ue&&Li(fe,(ht,Rt)=>Ue(ht,{x:oe.clientX,y:oe.clientY}))},ft=()=>{$(null),Qr(sa),Y(ia),Zt($t.reset()),Jn(-1),De(Fl)};return Si("mousemove",Pr,Kn?window:Bt.current,!0),Si("mouseup",Vi,Kn?window:Bt.current,!0),Ej(an,()=>{Re(!1),ln.current?.saveValue?.()}),y.useLayoutEffect(()=>{Eo==null||Kr==null||Xt.current?.reset()},[Eo,Kr]),u.jsx("div",{ref:an,style:{width:r,height:i,cursor:En,position:"absolute",inset:0},children:u.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[u.jsx("div",{ref:Bt,"data-t-grid-stage":!0,style:{width:"100%",height:"100%"},onClick:oi,onMouseDown:ii,onMouseLeave:ne,onContextMenu:Ce,children:u.jsx(d0,{theme:n,width:r,height:i,columns:a,commentCountMap:l,columnStatistics:C,coordInstance:b,rowControls:d,imageManager:g,spriteManager:x,visibleRegion:Co,collaborators:I,searchCursor:z,searchHitIndex:D,activeCellBound:er,activeCell:P,mouseState:p,scrollState:m,dragState:ko,selection:$t,groupCollection:k,forceRenderFlag:w,rowIndexVisible:S,columnResizeState:fr,columnFreezeState:Ro,columnHeaderHeight:T,hoverCellPosition:jt,hoveredColumnResizeIndex:ei,isRowAppendEnable:Qt,isColumnFreezable:In,isColumnResizable:Rr,isColumnAppendEnable:Mr,isColumnHeaderMenuVisible:Zn,isEditing:ut,isSelecting:rn,isInteracting:Kn,isMultiSelectionEnable:_,getCellContent:re,real2RowIndex:H,getLinearRow:L})}),er?.scrollEnable&&u.jsx(n5,{ref:Xt,style:{top:b.getRowOffset(er.rowIndex)+4,left:b.getColumnRelativeOffset(er.columnIndex+1,At)-10},containerRef:an,activeCellBound:er,setCellScrollTop:Sn,scrollEnable:dr===K.ActiveCell}),u.jsx(xA,{ref:ln,theme:n,isEditing:ut,selection:$t,activeCell:P,scrollState:m,coordInstance:b,activeCellBound:er,onCopy:U,onPaste:ce,onUndo:ie,onRedo:G,onDelete:ue,onChange:se,onRowExpand:He,setEditing:Re,setSelection:Zt,setActiveCell:$,getCellContent:re,real2RowIndex:H,scrollToItem:te,scrollBy:J})]})})},o5=y.forwardRef(r5),{columnAppendBtnWidth:i5,columnHeadHeight:s5}=nn,a5=t=>{const{width:e,height:n,theme:r,columns:i,columnStatistics:a,coordInstance:l,scrollState:c,collaborators:h,searchCursor:d,mouseState:p,rowControls:m,imageManager:g,spriteManager:x,forceRenderFlag:b,rowIndexVisible:C,groupCollection:w,collapsedGroupIds:S,columnHeaderHeight:k,getCellContent:_,getLinearRow:R,real2RowIndex:T,setActiveCell:M,setMouseState:I,onRowAppend:z,onRowExpand:D,onColumnAppend:P,onColumnHeaderClick:L,onSelectionChanged:H,onColumnStatisticClick:$,onCollapsedGroupChanged:Y}=t,te=z!=null,J=P!=null,{scrollTop:re,scrollLeft:ie}=c,{totalHeight:G,containerHeight:U,freezeRegionWidth:ce,totalWidth:ue,columnInitSize:pe,rowCount:He,rowInitSize:V}=l,se=y.useRef(null),ze=Yx(l,c,b),{selection:Ne,setSelection:ae}=Bx({coordInstance:l,getLinearRow:R,setActiveCell:M,onSelectionChanged:H}),ve=(Ue,Me)=>{const Fe=Me<0?-1/0:Me<=V?-1:l.getRowStartIndex(re+Me);return[Ue<0?-1/0:ie+Ue>ue&&ie+Ue<ue+i5?-2:Ue<=ce?Ue<=pe?-1:l.getColumnStartIndex(Ue):l.getColumnStartIndex(ie+Ue),Fe]},je=Ue=>{I(Ue),setTimeout(()=>I(ia),500)},Qe=Ue=>{const Me=Ue.changedPointers[0],Fe=Me?.offsetX??Me?.layerX,st=Me?.offsetY??Me?.layerY,[Ee,Ze]=ve(Fe,st),Et={x:Fe,y:st,rowIndex:Ze,columnIndex:Ee,isOutOfBounds:!1},mt=kx({columnStatistics:a,scrollState:c,coordInstance:l,getLinearRow:R,position:{x:Fe,y:st,rowIndex:Ze,columnIndex:Ee},height:n});if(mt!=null&&Ee!==void 0){const{type:gt,...Ot}=mt;return $?.(Ee,{...Ot})}if(Ze===-1&&Ee!==void 0&&Ee>-1)return je({...Et,type:K.ColumnHeader}),L?.(Ee,{x:l.getColumnRelativeOffset(Ee,ie)??0,y:0,width:l.getColumnWidth(Ee)??0,height:s5});if(J&&Ze!==void 0&&Ze>=-1&&Ee===-2)return je({...Et,type:K.AppendColumn}),P?.();if(te&&Ze===He-1&&Ee!==void 0&&Ee>=-1)return je({...Et,type:K.AppendRow}),z?.();if(Ze!==void 0&&Ze>=0){const gt=R(Ze);if(gt.type===vt.Group&&Fe<V){const{id:xt}=gt;if(S==null)return Y?.(new Set([xt]));if(S.has(xt)){const Dt=new Set(S);return Dt.delete(xt),Y?.(Dt)}return Y?.(new Set([...S,xt]))}if(re+st>G&&!dt(st,U,n))return;if(Ee!==void 0&&Ee>=0){const xt=_([Ee,Ze]),Bt=_i(xt.type)?.onClick;if(Bt){const an=l.getColumnOffset(Ee)??0;Bt(xt,{position:{x:Fe,y:st},cell:xt,rowIndex:Ze,columnIndex:Ee,width:l.getColumnWidth(Ee)??0,height:l.getRowHeight(Ze)??0,theme:r,hoverCellPosition:{x:Ee<l.freezeColumnCount?Fe-an:Fe-an+ie,y:st-(l.getRowOffset(Ze)??0)+re},activeCellBound:void 0,isActive:!1},ln=>{})}}const Ot=[0,Ze];M(Ot),ae(Ne.set(nt.Cells,[Ot,Ot])),je({...Et,type:K.Cell}),D?.(gt.realIndex)}};return u.jsx("div",{ref:se,style:{width:e,height:n},onTouchEnd:Ue=>{const Me=Ue.changedTouches[0];if(Me){const Fe=Ue.currentTarget.getBoundingClientRect(),st=Me.clientX-Fe.left,Ee=Me.clientY-Fe.top;Qe({changedPointers:[{offsetX:st,layerX:st,offsetY:Ee,layerY:Ee}]})}},onClick:Ue=>{const Me=Ue.currentTarget.getBoundingClientRect(),Fe=Ue.clientX-Me.left,st=Ue.clientY-Me.top;Qe({changedPointers:[{offsetX:Fe,layerX:Fe,offsetY:st,layerY:st}]})},children:u.jsx(d0,{theme:r,width:e,height:n,columns:i,columnStatistics:a,collaborators:h,searchCursor:d,coordInstance:l,rowControls:m,imageManager:g,spriteManager:x,visibleRegion:ze,rowIndexVisible:C,groupCollection:w,activeCell:null,activeCellBound:null,mouseState:p,scrollState:c,dragState:sa,selection:na,isSelecting:!1,forceRenderFlag:b,columnHeaderHeight:k,columnFreezeState:pd,columnResizeState:Fl,hoverCellPosition:null,hoveredColumnResizeIndex:-1,isRowAppendEnable:te,isColumnAppendEnable:J,getCellContent:_,real2RowIndex:T,getLinearRow:R})})},l5=t=>({text:"text",singleLineText:"text",longText:"longText",number:"number",select:"singleSelect",singleSelect:"singleSelect",multipleSelect:"multipleSelect",date:"date",checkbox:"checkbox",attachment:"attachment",link:"link",user:"user",rating:"rating",formula:"formula",email:"email",phone:"phone"})[t]||"text",{scrollBuffer:Zm,appendRowHeight:Jm,groupHeaderHeight:c5,cellScrollBuffer:Km,columnAppendBtnWidth:u5,columnStatisticHeight:d5,rowHeight:f5,columnWidth:Js,columnHeadHeight:h5}=nn,p5=(t,e)=>{const{columns:n,commentCountMap:r,groupCollection:i,collapsedGroupIds:a,draggable:l=Xo.All,selectable:c=bn.All,columnStatistics:h,freezeColumnCount:d=1,rowCount:p,rowHeight:m=f5,rowControls:g=[{type:cr.Checkbox}],theme:x,isTouchDevice:b,smoothScrollX:C=!0,smoothScrollY:w=!0,scrollBufferX:S=Zm,scrollBufferY:k=Zm,scrollBarVisible:_=!0,rowIndexVisible:R=!0,isMultiSelectionEnable:T=!0,style:M,customIcons:I,collaborators:z,searchCursor:D,searchHitIndex:P,groupPoints:L,columnHeaderHeight:H=h5,getCellContent:$,onUndo:Y,onRedo:te,onCopy:J,onPaste:re,onDelete:ie,onRowAppend:G,onRowExpand:U,onRowOrdered:ce,onCellEdited:ue,onCellDblClick:pe,onColumnAppend:He,onColumnResize:V,onColumnOrdered:se,onDragStart:ze,onSelectionChanged:Ne,onVisibleRegionChanged:ae,onColumnFreeze:ve,onColumnHeaderClick:je,onColumnHeaderDblClick:Qe,onColumnStatisticClick:Ue,onCollapsedGroupChanged:Me,onGroupHeaderContextMenu:Fe,onItemHovered:st,onItemClick:Ee,onScrollChanged:Ze,onAddColumn:Et,onEditColumn:mt,onDuplicateColumn:gt,onDeleteColumn:Ot,onStartEditColumn:xt}=t;y.useImperativeHandle(e,()=>({resetState:()=>In.current?.resetState(),forceUpdate:()=>cn(Lt.uniqueId("grid_")),getActiveCell:()=>Sn,setSelection:ne=>{In.current?.setSelection(ne)},getRowOffset:ne=>{const{scrollTop:Ce}=yt,ft=Dn(ne);return(Le.getRowOffset(ft)??0)-Ce},scrollBy:Eo,scrollTo:Kn,scrollToItem:oi,setActiveCell:jt,getScrollState:()=>yt,getCellIndicesAtPosition:(ne,Ce)=>{const{scrollLeft:ft,scrollTop:oe}=yt,fe=Le.getRowStartIndex(oe+Ce),ye=Le.getColumnStartIndex(ft+ne),{type:xe,realIndex:Se}=Mo(fe);return xe!==vt.Row?null:[ye,Se]},getContainer:()=>Qt.current,setCellLoading:ne=>{En(ne)},setColumnLoadings:ne=>{ut(ne)},getCellBounds:ne=>{const[Ce,ft]=ne,oe=Dn(ft),{scrollLeft:fe,scrollTop:ye}=yt,xe=Le.getColumnRelativeOffset(Ce,fe),Se=Le.getColumnWidth(Ce);if(xe==null||Se==null)return null;const $e=Le.getRowOffset(oe)??0,Je=Le.getRowHeight(oe)??0;return{x:xe,y:$e-ye,width:Se,height:Je}},isEditing:()=>In.current?.isEditing()}));const Dt=G!=null,Bt=He!=null,an=g.length,ln=n.reduce((ne,Ce)=>ne+(Ce.width||Js),Bt?S+u5:S),[Xt,cn]=y.useState(Lt.uniqueId("grid_")),[un,Cn]=y.useState(ia),[yt,Qn]=y.useState(kE),[Sn,jt]=vx(null),[gn,En]=y.useState([]),[me,ut]=y.useState([]),[Re,ke]=y.useState(!1),[Wt,Be]=y.useState(!1),[At,_r]=y.useState(-1),dr=y.useRef(null),Qt=y.useRef(null),In=y.useRef(null),Rr=y.useRef(null),Mr=y.useRef(null),Zn=y.useRef(null),Co=y.useRef(null),fr=y.useRef(null),{ref:ei,width:Jn,height:De}=gD(),[Ge,We]=Sn??[],Ct=un.type,rn=h!=null?De-d5:De,Zt=n.length,Wn=Math.min(d,Zt),Yt=y.useMemo(()=>({...tI,...x}),[x]),{iconSizeMD:hr}=Yt,So=y.useMemo(()=>!R&&!an?0:Math.max(an,2)*hr,[an,R,hr]),Li=y.useMemo(()=>({linearRows:[],real2LinearRowMap:null,pureRowCount:p,rowCount:Dt?p+1:p,rowHeightMap:Dt?{[p]:Jm}:void 0}),[Dt,p]),ko=y.useMemo(()=>{if(!L?.length)return null;let ne=0,Ce=0,ft=null,oe=Number.MAX_VALUE;const fe=[],ye={},xe={};return L.forEach(Se=>{const{type:$e}=Se;if($e===vt.Group){const{id:Je,value:ht,depth:Rt,isCollapsed:on}=Se,Pt=Rt>oe;if(on){if(oe=Math.min(oe,Rt),Pt)return}else if(!Pt)oe=Number.MAX_VALUE;else return;ye[Ce]=c5,fe.push({id:Je,type:vt.Group,depth:Rt,value:ht,realIndex:ne,isCollapsed:!!on}),ft=ht,Ce++}if($e===vt.Row){const Je=Se.count;for(let ht=0;ht<Je;ht++)xe[ne+ht]=Ce+ht,fe.push({type:vt.Row,displayIndex:ht+1,realIndex:ne+ht});ne+=Je,Ce+=Je,Dt&&(ye[Ce]=Jm,fe.push({type:vt.Append,value:ft,realIndex:ne-1}),Ce++)}}),{linearRows:fe,real2LinearRowMap:xe,pureRowCount:ne,rowCount:Ce,rowHeightMap:ye}},[L,Dt]),{rowCount:Qr,pureRowCount:_o,rowHeightMap:Zr,linearRows:ti,real2LinearRowMap:Ro}=y.useMemo(()=>({...Li,...ko}),[Li,ko]),Mo=y.useCallback(ne=>ti.length?ti[ne]??{type:vt.Row,realIndex:-2}:ne>=_o?{type:vt.Append,realIndex:ne-1,value:null}:{type:vt.Row,displayIndex:ne+1,realIndex:ne},[ti,_o]),Dn=y.useCallback(ne=>Ro==null?ne:Ro[ne]??ne,[Ro]),To=y.useMemo(()=>n.reduce((ne,Ce,ft)=>({...ne,[ft]:Ce.width||Js}),{}),[n]),Le=y.useMemo(()=>new gI({rowHeight:m,columnWidth:Js,pureRowCount:_o,rowCount:Qr,columnCount:Zt,freezeColumnCount:Wn,containerWidth:Jn,containerHeight:rn,rowInitSize:H,columnInitSize:So,rowHeightMap:Zr,columnWidthMap:To}),[m,_o,Qr,Zr,H]),ni=Le.totalHeight+k;y.useMemo(()=>{Le.refreshColumnDimensions({columnInitSize:So,columnCount:Zt,columnWidthMap:To}),cn(Lt.uniqueId("grid_"))},[Le,So,Zt,To]),y.useMemo(()=>{Le.containerWidth=Jn,Le.containerHeight=rn,Le.freezeColumnCount=Wn,cn(Lt.uniqueId("grid_"))},[Le,Jn,rn,Wn]);const jo=y.useMemo(()=>{if(Ge==null||We==null)return null;const ne=$([Ge,We]),Ce=_i(ne.type),ft=Le.getColumnWidth(Ge)??0,oe=Le.getRowHeight(Dn(We))??0;if(Ce?.measure&&Ll?.ctx!=null){const fe=Ce.measure(ne,{theme:Yt,ctx:Ll.ctx,width:ft,height:oe}),{width:ye,height:xe,totalHeight:Se=xe}=fe;return{x:Le.getColumnOffset(Ge)??0,y:Le.getRowOffset(Dn(We))??0,rowIndex:We,columnIndex:Ge,width:ye,height:xe,totalHeight:Se,scrollTop:0,scrollEnable:Se>xe}}return{x:Le.getColumnOffset(Ge)??0,y:Le.getRowOffset(Dn(We))??0,rowIndex:We,columnIndex:Ge,width:ft,height:oe,totalHeight:oe,scrollTop:0,scrollEnable:!1}},[Ge,We,Le,Yt,$,Dn]),Ms=Ct!==K.None&&!(Ct===K.ActiveCell&&jo?.scrollEnable),Hi=y.useMemo(()=>new DI(I,()=>cn(Lt.uniqueId("grid_"))),[I]),Jr=y.useMemo(()=>{const ne=new yI;return ne.setCallback(()=>cn(Lt.uniqueId("grid_"))),ne},[]),Kn=y.useCallback((ne,Ce)=>{dr.current?.scrollTo(ne,Ce)},[]),Eo=y.useCallback((ne,Ce)=>{dr.current?.scrollBy(ne,Ce)},[]),Kr=y.useCallback(()=>{const ne=Qt.current;if(ne){const Ce=ne.getBoundingClientRect(),{totalWidth:ft}=Le,{scrollLeft:oe}=yt,fe={getBoundingClientRect:()=>({left:Ce.left+ft-oe,top:Ce.top,right:Ce.left+ft-oe+40,bottom:Ce.top+H,width:40,height:H})};Co.current=fe}ke(!0)},[Le,yt.scrollLeft,H]),Ts=y.useCallback(ne=>{Et?.(ne.type,n.length,ne.name,ne.options),ke(!1)},[Et,n.length]),Bi=y.useCallback(()=>{ke(!1)},[]),eo=y.useCallback(ne=>{const Ce=n[ne];if(!Ce)return;const ft=Qt.current;if(ft){const oe=ft.getBoundingClientRect(),fe=Le.getColumnRelativeOffset(ne,yt.scrollLeft),ye={getBoundingClientRect:()=>({left:oe.left+fe,top:oe.top,right:oe.left+fe+(Ce.width||Js),bottom:oe.top+H,width:Ce.width||Js,height:H})};fr.current=ye}_r(ne),Be(!0)},[n,Le,yt.scrollLeft,H]),Wi=y.useCallback(ne=>{if(At>=0){const Ce={...n[At],name:ne.name,type:ne.type,options:ne.options};mt?.(At,Ce)}Be(!1),_r(-1)},[At,n,mt]),er=y.useCallback(()=>{Be(!1),_r(-1)},[]),Tr=y.useCallback((ne,Ce)=>{Rr.current?.showColumnContextMenu({x:Ce.x,y:Ce.y},ne)},[]),$i=y.useCallback((ne,Ce)=>{Mr.current?.show(Ce,ne)},[]),ri=y.useCallback((ne,Ce,ft)=>{Mr.current?.show(ft,ne)},[]),Yi=y.useCallback(ne=>{const ft=Qt.current?.getBoundingClientRect(),oe=(ft?.left??0)+window.scrollX,fe=(ft?.top??0)+window.scrollY,ye=oe+Le.getColumnRelativeOffset(ne+1,yt.scrollLeft),xe=fe+H,Se=n[ne];Se&&Rr.current?.showFieldPropertyEditor(Se,ne,{x:ye,y:xe,width:520})},[n,Le,yt.scrollLeft,H]),oi=y.useCallback(ne=>{try{const{containerHeight:Ce,containerWidth:ft,freezeRegionWidth:oe,freezeColumnCount:fe,rowInitSize:ye}=Le,{scrollTop:xe,scrollLeft:Se}=yt,[$e,Je]=ne,ht=Dn(Je);if(!($e<fe)){const to=Le.getColumnOffset($e)??0,js=Le.getColumnWidth($e)??0,qi=Math.min(to-Se-oe,0),St=Math.max(to+js-Se-ft,0),pt=Se+qi+St;if(pt!==Se){const Es=qi<0?-Km:St>0?Km:0;Kn(pt+Es,void 0)}}const on=Le.getRowHeight(ht)??0,Pt=Le.getRowOffset(ht)??0,pn=Math.min(Pt-xe-ye,0),Do=Math.max(Pt+on-xe-Ce,0),Nr=xe+pn+Do;Nr!==xe&&Kn(void 0,Nr)}catch(Ce){console.error("scrollToItem error",Ce)}},[Le,yt,Kn,Dn]),ii=()=>{Qt.current?.focus()},Io=y.useCallback((ne,Ce)=>{const[ft,oe]=ne.ranges[0]??[];if(oe==null||oe<0)return;const ye=Qt.current?.getBoundingClientRect(),xe=(ye?.left??0)+window.scrollX,Se=(ye?.top??0)+window.scrollY;Mr.current?.show({x:xe+Ce.x,y:Se+Ce.y},oe)},[]),{rowInitSize:Pr}=Le;y.useEffect(()=>{if(Qt.current){const ne=Qt.current.getBoundingClientRect();(ne.width===0||ne.height===0)&&console.warn("[Grid] 警告：Grid容器尺寸为0，表格可能无法正常显示。",`尺寸: ${ne.width}x${ne.height}`,`
建议：确保Grid的父容器有明确的宽高设置。`,`
示例：<div style={{ width: "100%", height: "600px" }}><Grid ... /></div>`)}},[]);const Vi=y.useCallback((ne,Ce)=>{if(Qe){Qe(ne,Ce);return}Yi(ne)},[Qe,Yi]);return u.jsxs("div",{ref:ei,style:{width:"100%",height:"100%",...M},children:[u.jsx("div",{"data-t-grid-container":!0,ref:Qt,tabIndex:0,style:{width:"100%",height:"100%",position:"relative",outline:"none",minWidth:"200px",minHeight:"150px"},onMouseDown:ii,children:b?u.jsx(a5,{width:Jn,height:De,theme:Yt,columns:n,commentCountMap:r,mouseState:un,scrollState:yt,rowControls:g,collaborators:z,searchCursor:D,searchHitIndex:P,imageManager:Jr,spriteManager:Hi,coordInstance:Le,columnStatistics:h,collapsedGroupIds:a,columnHeaderHeight:H,forceRenderFlag:Xt,rowIndexVisible:R,groupCollection:i,getLinearRow:Mo,real2RowIndex:Dn,getCellContent:$,setMouseState:Cn,setActiveCell:jt,onDelete:ie,onRowAppend:G,onRowExpand:U,onCellEdited:ue,onContextMenu:Io,onColumnAppend:Kr,onColumnHeaderClick:je,onColumnStatisticClick:Ue,onCollapsedGroupChanged:Me,onSelectionChanged:Ne}):u.jsx(o5,{ref:In,width:Jn,height:De,theme:Yt,columns:n,commentCountMap:r,draggable:l,selectable:c,collaborators:z,searchCursor:D,searchHitIndex:P,rowControls:g,imageManager:Jr,spriteManager:Hi,coordInstance:Le,columnStatistics:h,collapsedGroupIds:a,columnHeaderHeight:H,isMultiSelectionEnable:T,activeCell:Sn,mouseState:un,scrollState:yt,activeCellBound:jo,forceRenderFlag:Xt,rowIndexVisible:R,groupCollection:i,getLinearRow:Mo,real2RowIndex:Dn,getCellContent:$,setMouseState:Cn,setActiveCell:jt,scrollToItem:oi,scrollBy:Eo,onUndo:Y,onRedo:te,onCopy:J,onPaste:re,onDelete:ie,onDragStart:ze,onRowAppend:G,onRowExpand:U,onRowOrdered:ce,onCellEdited:ue,onCellDblClick:pe,onContextMenu:Io,onColumnAppend:Kr,onColumnResize:V,onColumnOrdered:se,onColumnHeaderClick:je,onColumnStatisticClick:Ue,onColumnHeaderDblClick:Vi,onColumnHeaderMenuClick:Tr,onRowHeaderMenuClick:$i,onCellContextMenu:ri,onCollapsedGroupChanged:Me,onGroupHeaderContextMenu:Fe,onSelectionChanged:Ne,onColumnFreeze:ve,onItemHovered:st,onItemClick:Ee})}),u.jsx(KA,{ref:dr,coordInstance:Le,top:Pr,left:So,containerWidth:Jn,containerHeight:rn,scrollWidth:ln,scrollHeight:ni,smoothScrollX:C,smoothScrollY:w,scrollBarVisible:_,containerRef:Qt,scrollState:yt,scrollEnable:Ms,getLinearRow:Mo,setScrollState:Qn,onScrollChanged:Ze,onVisibleRegionChanged:ae}),u.jsx(HA,{cellLoadings:gn,columnLoadings:me,coordInstance:Le,scrollState:yt}),u.jsx(AA,{ref:Rr,columns:n,onAddColumn:Et,onEditColumn:mt,onDuplicateColumn:gt,onDeleteColumn:Ot,onStartEditColumn:eo}),u.jsx(WA,{isOpen:Re,onClose:Bi,onConfirm:Ts,triggerRef:Co}),u.jsx(GA,{isOpen:Wt,onClose:er,onConfirm:Wi,triggerRef:fr,initialData:At>=0?{type:l5(n[At]?.type||"text"),name:n[At]?.name||"",options:n[At]?.options||{},description:n[At]?.description||""}:void 0}),u.jsx(wA,{ref:Mr,onDeleteRow:ne=>{const Ce=`record-${ne}`;Zn.current?.show("row",Ce,ne)},onDuplicateRow:ne=>{},onInsertRowAbove:ne=>{G?.(ne)},onInsertRowBelow:ne=>{G?.(ne+1)},onExpandRow:ne=>U?.(ne)}),u.jsx(i0,{ref:Zn,onConfirm:(ne,Ce)=>{ne==="row"&&ie?.({type:bn.Row})}})]})},m5=y.forwardRef(p5),g5=y.createContext(null);function x5({children:t}){const[e,n]=y.useState(()=>typeof window<"u"&&localStorage.getItem("app_theme")||"light"),[r,i]=y.useState(()=>typeof window<"u"&&localStorage.getItem("app_language")||"zh-CN"),[a,l]=y.useState(!1),c=d=>{n(d),localStorage.setItem("app_theme",d)},h=d=>{i(d),localStorage.setItem("app_language",d)};return y.useEffect(()=>{if(typeof document<"u"){const d=e==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;document.documentElement.setAttribute("data-theme",d),document.documentElement.classList.toggle("dark",d==="dark")}},[e]),u.jsx(g5.Provider,{value:{theme:e,language:r,setTheme:c,setLanguage:h,isLoading:a,setIsLoading:l},children:t})}const y5=y.createContext(null);function b5({baseId:t,apiClient:e,children:n}){const r=Rs(),[i,a]=y.useState(t),{data:l=[],isLoading:c}=gs({queryKey:["bases"],queryFn:()=>e.getBases()}),{data:h}=gs({queryKey:["base",i],queryFn:()=>i?e.getBase(i):null,enabled:!!i}),d=Gn({mutationFn:x=>e.createBase(x),onSuccess:()=>{r.invalidateQueries({queryKey:["bases"]})}}),p=Gn({mutationFn:({id:x,data:b})=>e.updateBase(x,b),onSuccess:(x,{id:b})=>{r.invalidateQueries({queryKey:["base",b]}),r.invalidateQueries({queryKey:["bases"]})}}),m=Gn({mutationFn:x=>e.deleteBase(x),onSuccess:()=>{r.invalidateQueries({queryKey:["bases"]})}}),g=y.useCallback(x=>{a(x)},[]);return u.jsx(y5.Provider,{value:{bases:l,currentBase:h||null,isLoading:c,switchBase:g,createBase:d.mutateAsync,updateBase:(x,b)=>p.mutateAsync({id:x,data:b}),deleteBase:m.mutateAsync},children:n})}const ct={SingleLineText:"singleLineText",LongText:"longText",Number:"number",SingleSelect:"singleSelect",MultipleSelect:"multipleSelect",Date:"date",CreatedTime:"createdTime",LastModifiedTime:"lastModifiedTime",Link:"link",User:"user",CreatedBy:"createdBy",LastModifiedBy:"lastModifiedBy",Checkbox:"checkbox",Rating:"rating",Attachment:"attachment",Button:"button",Formula:"formula",Rollup:"rollup",Count:"count",AutoNumber:"autoNumber",Email:"email",Phone:"phone",URL:"url"},Ln={isTextValue(t){return typeof t=="string"||t===null},isNumberValue(t){return typeof t=="number"||t===null},isBooleanValue(t){return typeof t=="boolean"||t===null},isStringArrayValue(t){return Array.isArray(t)&&t.every(e=>typeof e=="string")||t===null},isUserReference(t){return typeof t=="object"&&t!==null&&"id"in t&&"name"in t&&typeof t.id=="string"&&typeof t.name=="string"},isUserReferenceArray(t){return Array.isArray(t)&&t.every(Ln.isUserReference)||t===null},isAttachment(t){return typeof t=="object"&&t!==null&&"id"in t&&"name"in t&&"url"in t&&"size"in t&&"type"in t&&typeof t.id=="string"&&typeof t.name=="string"&&typeof t.url=="string"&&typeof t.size=="number"&&typeof t.type=="string"},isAttachmentArray(t){return Array.isArray(t)&&t.every(Ln.isAttachment)||t===null},isLinkRecord(t){return typeof t=="object"&&t!==null&&"id"in t&&typeof t.id=="string"},isLinkRecordArray(t){return Array.isArray(t)&&t.every(Ln.isLinkRecord)||t===null}},v5={validateForFieldType(t,e){switch(e){case ct.SingleLineText:case ct.LongText:case ct.Email:case ct.Phone:case ct.URL:case ct.Date:case ct.CreatedTime:case ct.LastModifiedTime:return Ln.isTextValue(t);case ct.Number:case ct.Rating:case ct.AutoNumber:case ct.Count:case ct.Rollup:return Ln.isNumberValue(t);case ct.Checkbox:return Ln.isBooleanValue(t);case ct.SingleSelect:return Ln.isTextValue(t);case ct.MultipleSelect:return Ln.isStringArrayValue(t);case ct.User:return Ln.isUserReferenceArray(t);case ct.CreatedBy:case ct.LastModifiedBy:return Ln.isUserReference(t)||t===null;case ct.Attachment:return Ln.isAttachmentArray(t);case ct.Link:return Ln.isLinkRecordArray(t);case ct.Formula:return Ln.isTextValue(t)||Ln.isNumberValue(t)||Ln.isBooleanValue(t);case ct.Button:return t===null;default:return!1}}};function Md(t){return typeof t=="string"}function w5(t){return typeof t=="number"&&!isNaN(t)}function C5(t){return typeof t=="boolean"}function S5(t){return Array.isArray(t)}function eg(t){return t==null}function Sl(t,e=""){return Md(t)?t:e}function tg(t,e=0){return w5(t)?t:e}class k5{static validateValue(e,n,r,i){const a=[];if(i?.required&&eg(e))return a.push({code:"REQUIRED",message:"This field is required",value:e}),{isValid:!1,errors:a};if(eg(e))return{isValid:!0,value:null,errors:[]};const l=this.validateByType(e,n,r);if(l.isValid||a.push(...l.errors),i?.custom){const c=i.custom(e);c&&a.push(c)}return{isValid:a.length===0,value:l.value,errors:a}}static validateByType(e,n,r){switch(n){case ct.SingleLineText:case ct.LongText:return this.validateTextValue(e,r);case ct.Number:return this.validateNumberValue(e,r);case ct.SingleSelect:return this.validateSingleSelectValue(e,r);case ct.MultipleSelect:return this.validateMultipleSelectValue(e,r);case ct.Date:return this.validateDateValue(e,r);case ct.Checkbox:return this.validateCheckboxValue(e);case ct.Rating:return this.validateRatingValue(e,r);case ct.Email:return this.validateEmailValue(e);case ct.Phone:return this.validatePhoneValue(e);case ct.URL:return this.validateURLValue(e);default:return v5.validateForFieldType(e,n)?{isValid:!0,value:e,errors:[]}:{isValid:!1,value:void 0,errors:[{code:"INVALID_TYPE",message:`Invalid value for field type ${n}`,value:e}]}}}static validateTextValue(e,n){const r=Sl(e),i=[];return n.maxLength&&r.length>n.maxLength&&i.push({code:"MAX_LENGTH_EXCEEDED",message:`Text exceeds maximum length of ${n.maxLength} characters`,value:e}),{isValid:i.length===0,value:r||null,errors:i}}static validateNumberValue(e,n){const r=tg(e),i=[];if(r===0&&e!==0&&e!=="0")return i.push({code:"INVALID_NUMBER",message:"Value must be a valid number",value:e}),{isValid:!1,value:null,errors:i};n.min!==void 0&&r<n.min&&i.push({code:"MIN_VALUE_VIOLATION",message:`Value must be at least ${n.min}`,value:e}),n.max!==void 0&&r>n.max&&i.push({code:"MAX_VALUE_VIOLATION",message:`Value must be at most ${n.max}`,value:e});const a=n.precision??0,l=parseFloat(r.toFixed(a));return{isValid:i.length===0,value:l,errors:i}}static validateSingleSelectValue(e,n){return Md(e)?n.options.find(i=>i.id===e)?{isValid:!0,value:e,errors:[]}:{isValid:!1,value:null,errors:[{code:"INVALID_SELECT_OPTION",message:"Selected value is not a valid option",value:e}]}:{isValid:!1,value:null,errors:[{code:"INVALID_SELECT_VALUE",message:"Select value must be a string",value:e}]}}static validateMultipleSelectValue(e,n){if(!S5(e)||!e.every(Md))return{isValid:!1,value:null,errors:[{code:"INVALID_MULTI_SELECT_VALUE",message:"Multi-select value must be an array of strings",value:e}]};const r=new Set(n.options.map(a=>a.id)),i=e.filter(a=>!r.has(a));return i.length>0?{isValid:!1,value:null,errors:[{code:"INVALID_MULTI_SELECT_OPTIONS",message:`Invalid options: ${i.join(", ")}`,value:e}]}:{isValid:!0,value:e,errors:[]}}static validateDateValue(e,n){let r=null;if(e instanceof Date)r=e;else if(typeof e=="string"||typeof e=="number"){const i=new Date(e);isNaN(i.getTime())||(r=i)}return r===null?{isValid:!1,value:null,errors:[{code:"INVALID_DATE",message:"Value must be a valid date",value:e}]}:{isValid:!0,value:r.toISOString(),errors:[]}}static validateCheckboxValue(e){return C5(e)?{isValid:!0,value:e,errors:[]}:{isValid:!1,value:null,errors:[{code:"INVALID_BOOLEAN",message:"Checkbox value must be a boolean",value:e}]}}static validateRatingValue(e,n){const r=tg(e);if(r===0&&e!==0&&e!=="0")return{isValid:!1,value:null,errors:[{code:"INVALID_RATING",message:"Rating value must be a number",value:e}]};const i=n.max??5;return r<0||r>i?{isValid:!1,value:null,errors:[{code:"RATING_OUT_OF_RANGE",message:`Rating must be between 0 and ${i}`,value:e}]}:{isValid:!0,value:Math.round(r),errors:[]}}static validateEmailValue(e){const n=Sl(e);return n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?{isValid:!0,value:n,errors:[]}:{isValid:!1,value:null,errors:[{code:"INVALID_EMAIL",message:"Value must be a valid email address",value:e}]}:{isValid:!0,value:null,errors:[]}}static validatePhoneValue(e){const n=Sl(e);if(!n)return{isValid:!0,value:null,errors:[]};const r=/^[\+]?[1-9][\d]{0,15}$/,i=n.replace(/[\s\-\(\)]/g,"");return r.test(i)?{isValid:!0,value:n,errors:[]}:{isValid:!1,value:null,errors:[{code:"INVALID_PHONE",message:"Value must be a valid phone number",value:e}]}}static validateURLValue(e){const n=Sl(e);if(!n)return{isValid:!0,value:null,errors:[]};try{return new URL(n),{isValid:!0,value:n,errors:[]}}catch{return{isValid:!1,value:null,errors:[{code:"INVALID_URL",message:"Value must be a valid URL",value:e}]}}}}class zr{constructor(e){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tableId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isPrimary",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"createdTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastModifiedTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validationRules",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id,this.name=e.name,this.type=e.type,this.tableId=e.tableId,this.options=e.options,this.description=e.description,this.isComputed=e.isComputed,this.isPrimary=e.isPrimary,this.createdTime=e.createdTime,this.lastModifiedTime=e.lastModifiedTime,this.validationRules=e.validationRules}isEmpty(e){return e==null||e===""}validate(e){return!0}validateDetailed(e){return k5.validateValue(e,this.type,this.options,this.validationRules)}toConfig(){return{id:this.id,name:this.name,type:this.type,tableId:this.tableId,options:this.options,description:this.description,isComputed:this.isComputed,isPrimary:this.isPrimary,createdTime:this.createdTime,lastModifiedTime:this.lastModifiedTime}}clone(){return Object.create(Object.getPrototypeOf(this),{...Object.getOwnPropertyDescriptors(this)})}}class kl extends zr{constructor(e){super(e)}get textOptions(){return this.options}validate(e){return this.isEmpty(e)?!this.validationRules?.required:!(typeof e!="string"||this.textOptions.maxLength!==void 0&&e.length>this.textOptions.maxLength)}format(e){return e==null||e===""?"":String(e)}toCellValue(e){if(this.isEmpty(e))return null;if(typeof e!="string")return String(e);let n=e;return this.type===ct.SingleLineText&&(n=e.replace(/[\r\n]+/g," ")),this.textOptions.maxLength!==void 0&&(n=n.slice(0,this.textOptions.maxLength)),n||null}fromCellValue(e){return e==null?this.textOptions.defaultValue??"":String(e)}getDefaultValue(){return this.textOptions.defaultValue??""}isEmpty(e){return e==null||e===""}}class _5 extends zr{constructor(e){super(e)}get numberOptions(){return this.options}validate(e){return this.isEmpty(e)?!this.validationRules?.required:!(typeof e!="number"||isNaN(e)||!isFinite(e)||this.numberOptions.min!==void 0&&e<this.numberOptions.min||this.numberOptions.max!==void 0&&e>this.numberOptions.max)}format(e){if(e==null)return"";const n=e,r=this.numberOptions.precision??0,i=this.numberOptions.formatting||{};let a=n.toFixed(r);if(i.showThousandsSeparator){const l=a.split(".");l[0]=(l[0]??"").replace(/\B(?=(\d{3})+(?!\d))/g,","),a=l.join(".")}switch(i.type){case"currency":return`${i.symbol||"$"}${a}`;case"percent":return`${a}%`;default:return a}}toCellValue(e){if(this.isEmpty(e))return null;let n;if(typeof e=="number")n=e;else if(typeof e=="string"){const i=e.replace(/,/g,"").replace(/[^0-9.-]/g,"");n=parseFloat(i)}else return null;if(isNaN(n)||!isFinite(n))return null;const r=this.numberOptions.precision??0;return n=parseFloat(n.toFixed(r)),this.numberOptions.min!==void 0&&(n=Math.max(n,this.numberOptions.min)),this.numberOptions.max!==void 0&&(n=Math.min(n,this.numberOptions.max)),n}fromCellValue(e){return e??this.numberOptions.defaultValue??null}getDefaultValue(){return this.numberOptions.defaultValue??null}isEmpty(e){return e==null||e===""}parseFormatted(e){if(!e||e.trim()==="")return null;const n=e.replace(/,/g,"").replace(/[$%€£¥]/g,"").replace(/\s/g,"").trim(),r=parseFloat(n);return isNaN(r)||!isFinite(r)?null:r}}class R5 extends zr{constructor(e){super(e)}get checkboxOptions(){return this.options}validate(e){return this.isEmpty(e)?!this.validationRules?.required:typeof e=="boolean"}format(e){return e==null?"":e?"✓":""}toCellValue(e){if(this.isEmpty(e))return this.checkboxOptions.defaultValue??null;if(typeof e=="boolean")return e;if(typeof e=="string"){const n=e.toLowerCase();if(n==="true"||n==="yes"||n==="1")return!0;if(n==="false"||n==="no"||n==="0"||n==="")return!1}return typeof e=="number"?e!==0:!!e}fromCellValue(e){return e==null?this.checkboxOptions.defaultValue??!1:!!e}getDefaultValue(){return this.checkboxOptions.defaultValue??!1}isEmpty(e){return e==null}}class M5 extends zr{validate(e){return this.isEmpty(e)?!0:typeof e=="string"?this.options.options?.some(n=>n.id===e)??!1:Array.isArray(e)?e.every(n=>this.options.options?.some(r=>r.id===n)??!1):!1}format(e){return this.isEmpty(e)?"":typeof e=="string"?this.options.options?.find(r=>r.id===e)?.name??"":Array.isArray(e)?e.map(r=>this.options.options?.find(a=>a.id===r)?.name).filter(Boolean).join(", "):""}getEmptyValue(){return null}toCellValue(e){return this.isEmpty(e)?null:typeof e=="string"?e:Array.isArray(e)?e.filter(n=>typeof n=="string"):null}fromCellValue(e){return e==null?null:typeof e=="string"||Array.isArray(e)?e:null}getOption(e){return this.options.options?.find(n=>n.id===e)}getOptions(e){return e.map(n=>this.getOption(n)).filter(n=>n!==void 0)}}class T5 extends zr{constructor(e){super(e)}get dateOptions(){return this.options}validate(e){if(this.isEmpty(e))return!this.validationRules?.required;if(typeof e=="string"){const n=new Date(e);return bi(n)}return e instanceof Date?bi(e):!1}format(e){if(e==null)return"";try{const n=_p(e);if(!bi(n))return"";const r=this.dateOptions.dateFormat??"YYYY-MM-DD",i=this.dateOptions.timeFormat==="12"?"hh:mm a":"HH:mm";return this.dateOptions.includeTime?Vo(n,`${r} ${i}`):Vo(n,r)}catch{return""}}toCellValue(e){if(this.isEmpty(e))return null;try{let n;if(typeof e=="string")n=new Date(e);else if(e instanceof Date)n=e;else return null;return bi(n)?n.toISOString():null}catch{return null}}fromCellValue(e){if(e==null)return this.dateOptions.defaultValue?new Date(this.dateOptions.defaultValue):null;try{const n=_p(e);return bi(n)?n:null}catch{return null}}getDefaultValue(){return this.dateOptions.defaultValue??null}isEmpty(e){return e==null||e===""}}class j5 extends zr{constructor(e){super(e)}get ratingOptions(){return this.options}validate(e){if(this.isEmpty(e))return!this.validationRules?.required;if(typeof e!="number")return!1;const n=this.ratingOptions.max??5;return e>=0&&e<=n&&Number.isInteger(e)}format(e){if(e==null)return"";const n=this.ratingOptions.max??5,i=this.getIcon().repeat(e),a="☆".repeat(Math.max(0,n-e));return i+a}toCellValue(e){if(this.isEmpty(e))return null;let n;if(typeof e=="number")n=e;else if(typeof e=="string")n=parseInt(e,10);else return null;if(isNaN(n))return null;const r=this.ratingOptions.max??5;return Math.max(0,Math.min(r,Math.floor(n)))}fromCellValue(e){return e??this.ratingOptions.defaultValue??0}getDefaultValue(){return this.ratingOptions.defaultValue??0}isEmpty(e){return e==null}getIcon(){return{star:"★",heart:"♥",thumbs:"👍",fire:"🔥",smile:"😊"}[this.ratingOptions.icon??"star"]??"★"}}class E5 extends zr{validate(e){return this.isEmpty(e)||typeof e=="string"?!0:Array.isArray(e)?e.every(n=>!!(typeof n=="string"||n&&typeof n=="object"&&"id"in n)):!!(e&&typeof e=="object"&&"id"in e)}format(e){if(this.isEmpty(e))return"";if(typeof e=="string")return e;if(e&&typeof e=="object"&&"id"in e){const n=e;return n.title??n.id}return Array.isArray(e)?e.map(n=>typeof n=="string"?n:n&&typeof n=="object"&&"id"in n?n.title??n.id:"").filter(Boolean).join(", "):""}getEmptyValue(){return null}toCellValue(e){return this.isEmpty(e)?null:typeof e=="string"||Array.isArray(e)||e&&typeof e=="object"?e:null}fromCellValue(e){return e??null}isManyRelationship(){return this.options.relationship==="manyMany"||this.options.relationship==="manyOne"}getLinkedIds(e){return this.isEmpty(e)?[]:typeof e=="string"?[e]:e&&typeof e=="object"&&"id"in e?[e.id]:Array.isArray(e)?e.map(n=>typeof n=="string"?n:n&&typeof n=="object"&&"id"in n?n.id:"").filter(Boolean):[]}}class I5 extends zr{validate(e){return this.isEmpty(e)||typeof e=="string"||e&&typeof e=="object"&&"id"in e?!0:Array.isArray(e)?e.every(n=>!!(typeof n=="string"||n&&typeof n=="object"&&"id"in n)):!1}format(e){if(this.isEmpty(e))return"";if(typeof e=="string")return e;if(e&&typeof e=="object"&&"id"in e){const n=e;return n.name??n.email??n.id}return Array.isArray(e)?e.map(n=>{if(typeof n=="string")return n;if(n&&typeof n=="object"&&"id"in n){const r=n;return r.name??r.email??r.id}return""}).filter(Boolean).join(", "):""}getEmptyValue(){return null}toCellValue(e){return this.isEmpty(e)?null:e}fromCellValue(e){return e??null}getUserIds(e){return this.isEmpty(e)?[]:typeof e=="string"?[e]:e&&typeof e=="object"&&"id"in e?[e.id]:Array.isArray(e)?e.map(n=>typeof n=="string"?n:n&&typeof n=="object"&&"id"in n?n.id:"").filter(Boolean):[]}isMultiple(){return this.options.isMultiple??!1}}class D5 extends zr{validate(e){return this.isEmpty(e)?!0:Array.isArray(e)?e.every(n=>n&&typeof n=="object"&&"id"in n&&"name"in n&&"size"in n&&"type"in n):!1}format(e){return this.isEmpty(e)?"":Array.isArray(e)?e.map(r=>r.name).join(", "):""}getEmptyValue(){return[]}toCellValue(e){return this.isEmpty(e)?null:Array.isArray(e)?e:null}fromCellValue(e){return e==null?[]:Array.isArray(e)?e:[]}getTotalSize(e){return this.fromCellValue(e).reduce((r,i)=>r+(i.size||0),0)}getCount(e){return this.fromCellValue(e).length}hasImages(e){return this.fromCellValue(e).some(r=>r.type.startsWith("image/"))}getImages(e){return this.fromCellValue(e).filter(r=>r.type.startsWith("image/"))}}class A5 extends zr{constructor(e){super(e),this.isComputed=!0}validate(e){return!0}format(e){if(this.isEmpty(e))return"";const n=this.options.formatting;switch(n?.type){case"number":if(typeof e=="number"){const r=n.precision??0;return e.toFixed(r)}return String(e);case"date":return e instanceof Date||typeof e=="string",String(e);case"boolean":return e?"true":"false";case"text":default:return String(e)}}getEmptyValue(){return null}toCellValue(e){return e}fromCellValue(e){return e??null}getExpression(){return this.options.expression??""}hasValidExpression(){return!!(this.options.expression&&this.options.expression.trim().length>0)}}class O5 extends zr{constructor(e){super(e),this.isComputed=!0}validate(e){return!0}format(e){if(this.isEmpty(e))return"";const n=this.options.formatting;switch(n?.type){case"number":if(typeof e=="number"){const r=n.precision??0;return e.toFixed(r)}return String(e);case"date":return e instanceof Date||typeof e=="string",String(e);case"text":default:return Array.isArray(e)?e.join(", "):String(e)}}getEmptyValue(){return null}toCellValue(e){return e}fromCellValue(e){return e??null}getRollupConfig(){return{linkFieldId:this.options.expression?.linkFieldId,foreignFieldId:this.options.expression?.foreignFieldId,func:this.options.expression?.func}}hasValidConfig(){const e=this.getRollupConfig();return!!(e.linkFieldId&&e.foreignFieldId&&e.func)}getRollupFunc(){return this.options.expression?.func}}function _l(t){const e={id:t.id,name:t.name,type:t.type,tableId:t.tableId,options:t.options,description:t.description,isComputed:t.isComputed,isPrimary:t.isPrimary,createdTime:t.createdTime,lastModifiedTime:t.lastModifiedTime};switch(t.type){case"singleLineText":case"longText":return new kl(e);case"number":return new _5(e);case"checkbox":return new R5(e);case"singleSelect":case"multipleSelect":return new M5(e);case"date":return new T5(e);case"rating":return new j5(e);case"link":return new E5(e);case"user":return new I5(e);case"attachment":return new D5(e);case"formula":return new A5(e);case"rollup":case"count":return new O5(e);case"autoNumber":case"createdTime":case"lastModifiedTime":case"createdBy":case"lastModifiedBy":return new kl(e);case"button":return new kl(e);default:return console.warn(`Unknown field type: ${t.type}, using TextField`),new kl(e)}}const z5=y.createContext(null);function P5({tableId:t,apiClient:e,children:n}){const r=Rs(),{data:i=[],isLoading:a}=gs({queryKey:["fields",t],queryFn:()=>e.getFields(t),enabled:!!t}),l=y.useMemo(()=>i.map(g=>_l(g)),[i]),c=g=>l.find(x=>x.id===g),h=Gn({mutationFn:g=>e.createField(t,g),onSuccess:()=>{r.invalidateQueries({queryKey:["fields",t]})}}),d=Gn({mutationFn:({id:g,data:x})=>e.updateField(t,g,x),onSuccess:()=>{r.invalidateQueries({queryKey:["fields",t]})}}),p=Gn({mutationFn:g=>e.deleteField(t,g),onSuccess:()=>{r.invalidateQueries({queryKey:["fields",t]})}}),m=Gn({mutationFn:({id:g,newType:x})=>e.convertField(t,g,x),onSuccess:()=>{r.invalidateQueries({queryKey:["fields",t]})}});return u.jsx(z5.Provider,{value:{fields:l,getField:c,isLoading:a,createField:async g=>{const x=await h.mutateAsync(g);return _l(x)},updateField:async(g,x)=>{const b=await d.mutateAsync({id:g,data:x});return _l(b)},deleteField:p.mutateAsync,convertField:async(g,x)=>{const b=await m.mutateAsync({id:g,newType:x});return _l(b)}},children:n})}const N5=y.createContext(null);function F5({baseId:t,tableId:e,apiClient:n,children:r}){const i=y.useMemo(()=>({permissions:null,isLoading:!1,hasPermission:()=>!0,canCreateField:()=>!0,canEditField:()=>!0,canDeleteField:()=>!0,canCreateRecord:()=>!0,canEditRecord:()=>!0,canDeleteRecord:()=>!0,canEditCell:()=>!0,canCreateView:()=>!0,canEditView:()=>!0,canDeleteView:()=>!0,canComment:()=>!0,getCurrentUserRole:()=>"owner"}),[t,e]);return u.jsx(N5.Provider,{value:i,children:r})}const L5=y.createContext(null);function H5({children:t,apiClient:e}){const[n,r]=y.useState(null),[i,a]=y.useState(()=>typeof window<"u"?localStorage.getItem("auth_token"):null),l=y.useCallback(async d=>{try{const p={id:"1",name:"Test User",email:d.email},m="mock-token-"+Date.now();r(p),a(m),localStorage.setItem("auth_token",m),localStorage.setItem("auth_user",JSON.stringify(p))}catch(p){throw console.error("Sign in failed:",p),p}},[e]),c=y.useCallback(async()=>{r(null),a(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")},[]),h=y.useCallback(d=>{r(p=>{if(!p)return null;const m={...p,...d};return localStorage.setItem("auth_user",JSON.stringify(m)),m})},[]);return y.useEffect(()=>{if(i&&!n&&typeof window<"u"){const d=localStorage.getItem("auth_user");if(d)try{r(JSON.parse(d))}catch(p){console.error("Failed to parse stored user:",p)}}},[i,n]),u.jsx(L5.Provider,{value:{user:n,token:i,isAuthenticated:!!i,signIn:l,signOut:c,updateUser:h},children:t})}const B5=y.createContext(null);function W5({baseId:t,tableId:e,apiClient:n,children:r}){const i=Rs(),[a,l]=y.useState(e),{data:c=[],isLoading:h}=gs({queryKey:["tables",t],queryFn:()=>n.getTables(t),enabled:!!t}),{data:d}=gs({queryKey:["table",a],queryFn:()=>a?n.getTable(a):null,enabled:!!a}),p=Gn({mutationFn:b=>n.createTable(t,b),onSuccess:()=>{i.invalidateQueries({queryKey:["tables",t]})}}),m=Gn({mutationFn:({id:b,data:C})=>n.updateTable(b,C),onSuccess:(b,{id:C})=>{i.invalidateQueries({queryKey:["table",C]}),i.invalidateQueries({queryKey:["tables",t]})}}),g=Gn({mutationFn:b=>n.deleteTable(b),onSuccess:()=>{i.invalidateQueries({queryKey:["tables",t]})}}),x=y.useCallback(b=>{l(b)},[]);return u.jsx(B5.Provider,{value:{tables:c,currentTable:d||null,isLoading:h,switchTable:x,createTable:p.mutateAsync,updateTable:(b,C)=>m.mutateAsync({id:b,data:C}),deleteTable:g.mutateAsync},children:r})}class ms{constructor(e){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tableId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"group",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"columnMeta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"createdTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastModifiedTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id,this.name=e.name,this.type=e.type,this.tableId=e.tableId,this.order=e.order,this.filter=e.filter,this.sort=e.sort,this.group=e.group,this.options=e.options,this.columnMeta=e.columnMeta,this.createdTime=e.createdTime,this.lastModifiedTime=e.lastModifiedTime}updateFilter(e){this.filter=e,this.lastModifiedTime=new Date().toISOString()}updateSort(e){this.sort=e,this.lastModifiedTime=new Date().toISOString()}updateGroup(e){this.group=e,this.lastModifiedTime=new Date().toISOString()}updateColumnMeta(e,n){this.columnMeta||(this.columnMeta={}),this.columnMeta[e]={...this.columnMeta[e],...n},this.lastModifiedTime=new Date().toISOString()}getColumnMeta(e){return this.columnMeta?.[e]}toApiFormat(){return{id:this.id,name:this.name,type:this.type,tableId:this.tableId,order:this.order,filter:this.filter,sort:this.sort,group:this.group,options:this.options,columnMeta:this.columnMeta,createdTime:this.createdTime||"",lastModifiedTime:this.lastModifiedTime||""}}clone(){return new ms({...this.toApiFormat()})}}const $5=y.createContext(null);function Y5({tableId:t,viewId:e,apiClient:n,children:r}){const i=Rs(),{data:a=[],isLoading:l}=gs({queryKey:["views",t],queryFn:()=>n.getViews(t),enabled:!!t}),c=y.useMemo(()=>a.map(C=>new ms(C)),[a]),h=y.useMemo(()=>e?c.find(C=>C.id===e)||null:c[0]||null,[e,c]),d=C=>c.find(w=>w.id===C),p=Gn({mutationFn:C=>n.createView(t,C),onSuccess:()=>{i.invalidateQueries({queryKey:["views",t]})}}),m=Gn({mutationFn:({id:C,data:w})=>n.updateView(t,C,w),onSuccess:(C,{id:w})=>{i.invalidateQueries({queryKey:["views",t]}),i.invalidateQueries({queryKey:["view",w]})}}),g=Gn({mutationFn:C=>n.deleteView(t,C),onSuccess:()=>{i.invalidateQueries({queryKey:["views",t]})}}),x=Gn({mutationFn:async({id:C,name:w})=>{const S=d(C);if(!S)throw new Error("View not found");const k=await n.createView(t,{name:w,type:S.type,tableId:t});return(S.filter||S.sort||S.group||S.columnMeta||S.options)&&await n.updateView(t,k.id,{filter:S.filter,sort:S.sort,group:S.group,columnMeta:S.columnMeta,options:S.options}),k},onSuccess:()=>{i.invalidateQueries({queryKey:["views",t]})}}),b=C=>{};return u.jsx($5.Provider,{value:{views:c,currentView:h,isLoading:l,switchView:b,createView:async C=>{const w=await p.mutateAsync(C);return new ms(w)},updateView:async(C,w)=>{const S=await m.mutateAsync({id:C,data:w});return new ms(S)},deleteView:g.mutateAsync,duplicateView:async(C,w)=>{const S=await x.mutateAsync({id:C,name:w});return new ms(S)},getView:d},children:r})}class V5{constructor(e){Object.defineProperty(this,"sdk",{enumerable:!0,configurable:!0,writable:!0,value:e})}async getBases(){return this.sdk.listBases()}async getBase(e){return this.sdk.getBase(e)}async getTables(e){return this.sdk.listTables({baseId:e})}async getTable(e){return this.sdk.getTable(e)}async createTable(e,n){return this.sdk.createTable({baseId:e,name:n.name,...n})}async updateTable(e,n){return this.sdk.updateTable(e,n)}async deleteTable(e){await this.sdk.deleteTable(e)}async getTablePermission(e){return console.warn("LuckDB SDK does not support getTablePermission yet"),{canEdit:!0,canDelete:!0,canCreate:!0}}async getFields(e){return this.sdk.listFields({tableId:e})}async getField(e,n){return this.sdk.getField(n)}async createField(e,n){return this.sdk.createField({tableId:e,...n})}async updateField(e,n,r){return this.sdk.updateField(n,r)}async deleteField(e,n){await this.sdk.deleteField(n)}async getRecords(e,n){const r=await this.sdk.listRecords({tableId:e,...n});return{data:r.data||[],total:r.total||0,page:n?.page||1,pageSize:n?.pageSize||50}}async getRecord(e,n){return this.sdk.getRecord(n)}async createRecord(e,n){return this.sdk.createRecord({tableId:e,data:n.fields||n})}async updateRecord(e,n,r,i){return this.sdk.updateRecord(e,n,{data:{[r]:i}})}async deleteRecord(e,n){await this.sdk.deleteRecord(e,n)}async getViews(e){return this.sdk.listViews({tableId:e})}async getView(e,n){return this.sdk.getView(n)}async createView(e,n){return this.sdk.createView({tableId:e,...n})}async updateView(e,n,r){return this.sdk.updateView(n,r)}async deleteView(e,n){await this.sdk.deleteView(n)}}class q5{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async getBases(){return this.client.getBases()}async getBase(e){return this.client.getBase(e)}async getTables(e){return this.client.getTables(e)}async getTable(e){return this.client.getTable(e)}async createTable(e,n){return this.client.createTable(e,n)}async updateTable(e,n){return this.client.updateTable(e,n)}async deleteTable(e){return this.client.deleteTable(e)}async getTablePermission(e){return this.client.getTablePermission(e)}async getFields(e){return this.client.getFields(e)}async getField(e,n){return this.client.getField(e,n)}async createField(e,n){return this.client.createField(e,n)}async updateField(e,n,r){return this.client.updateField(e,n,r)}async deleteField(e,n){return this.client.deleteField(e,n)}async getRecords(e,n){return this.client.getRecords(e,n)}async getRecord(e,n){return this.client.getRecord(e,n)}async createRecord(e,n){return this.client.createRecord(e,n)}async updateRecord(e,n,r,i){return this.client.updateRecord(e,n,r,i)}async deleteRecord(e,n){return this.client.deleteRecord(e,n)}async getViews(e){return this.client.getViews(e)}async getView(e,n){return this.client.getView(e,n)}async createView(e,n){return this.client.createView(e,n)}async updateView(e,n,r){return this.client.updateView(e,n,r)}async deleteView(e,n){return this.client.deleteView(e,n)}}function $r(t){return"login"in t&&"auth"in t?new V5(t):new q5(t)}const U5=new pj({defaultOptions:{queries:{staleTime:1e3*60*5,retry:3,refetchOnWindowFocus:!1}}});function G5({baseId:t,tableId:e,viewId:n,wsUrl:r,userId:i,apiClient:a,sdk:l,children:c}){const h=l?$r(l):a?$r(a):(()=>{throw new Error("Either apiClient or sdk must be provided")})(),d=a||h;return u.jsx(mj,{client:U5,children:u.jsx(H5,{children:u.jsx(x5,{children:t?u.jsx(b5,{baseId:t,apiClient:d,children:u.jsx(F5,{baseId:t,tableId:e,apiClient:d,children:e?u.jsx(W5,{baseId:t,tableId:e,apiClient:d,children:u.jsx(Y5,{tableId:e,viewId:n,apiClient:d,children:u.jsx(P5,{tableId:e,apiClient:d,children:c})})}):c})}):c})})})}class X5{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.client=uS.create({baseURL:e.baseURL,timeout:e.timeout||3e4,headers:{"Content-Type":"application/json",...e.token?{Authorization:`Bearer ${e.token}`}:{}}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>(e.params?e.params._t=Date.now():e.params={_t:Date.now()},e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>(e.response?.status===401&&this.config.onUnauthorized?.(),this.config.onError?.(e),Promise.reject(e)))}setToken(e){this.config.token=e,this.client.defaults.headers.common.Authorization=`Bearer ${e}`}clearToken(){this.config.token=void 0,delete this.client.defaults.headers.common.Authorization}async getBases(){return(await this.client.get("/base")).data}async getBase(e){return(await this.client.get(`/base/${e}`)).data}async createBase(e){return(await this.client.post("/base",e)).data}async updateBase(e,n){return(await this.client.patch(`/base/${e}`,n)).data}async deleteBase(e){await this.client.delete(`/base/${e}`)}async getTables(e){return(await this.client.get(`/base/${e}/table`)).data}async getTable(e){return(await this.client.get(`/table/${e}`)).data}async createTable(e,n){return(await this.client.post(`/base/${e}/table`,n)).data}async updateTable(e,n){return(await this.client.patch(`/table/${e}`,n)).data}async deleteTable(e){await this.client.delete(`/table/${e}`)}async getTablePermission(e){return(await this.client.get(`/table/${e}/permission`)).data}async getFields(e){return(await this.client.get(`/table/${e}/field`)).data}async getField(e,n){return(await this.client.get(`/table/${e}/field/${n}`)).data}async createField(e,n){return(await this.client.post(`/table/${e}/field`,n)).data}async updateField(e,n,r){return(await this.client.patch(`/table/${e}/field/${n}`,r)).data}async deleteField(e,n){await this.client.delete(`/table/${e}/field/${n}`)}async convertField(e,n,r,i){return(await this.client.patch(`/table/${e}/field/${n}/convert`,{type:r,options:i})).data}async getRecords(e,n){return(await this.client.get(`/table/${e}/record`,{params:n})).data}async getRecord(e,n){return(await this.client.get(`/table/${e}/record/${n}`)).data}async createRecord(e,n){return(await this.client.post(`/table/${e}/record`,n)).data}async updateRecord(e,n,r,i){return(await this.client.patch(`/table/${e}/record/${n}`,{fieldId:r,value:i})).data}async batchUpdateRecords(e,n){return(await this.client.patch(`/table/${e}/record/batch`,{records:n})).data}async deleteRecord(e,n){await this.client.delete(`/table/${e}/record/${n}`)}async batchDeleteRecords(e,n){await this.client.delete(`/table/${e}/record/batch`,{data:{recordIds:n}})}async getViews(e){return(await this.client.get(`/table/${e}/view`)).data}async getView(e,n){return(await this.client.get(`/table/${e}/view/${n}`)).data}async createView(e,n){return(await this.client.post(`/table/${e}/view`,n)).data}async updateView(e,n,r){return(await this.client.patch(`/table/${e}/view/${n}`,r)).data}async deleteView(e,n){await this.client.delete(`/table/${e}/view/${n}`)}async getComments(e,n){return(await this.client.get(`/table/${e}/record/${n}/comment`)).data}async createComment(e,n,r){return(await this.client.post(`/table/${e}/record/${n}/comment`,r)).data}async updateComment(e,n,r,i){return(await this.client.patch(`/table/${e}/record/${n}/comment/${r}`,i)).data}async deleteComment(e,n,r){await this.client.delete(`/table/${e}/record/${n}/comment/${r}`)}async get(e,n){return(await this.client.get(e,n)).data}async post(e,n,r){return(await this.client.post(e,n,r)).data}async patch(e,n,r){return(await this.client.patch(e,n,r)).data}async delete(e,n){return(await this.client.delete(e,n)).data}}var ng;(function(t){t.String="string",t.Number="number",t.Boolean="boolean",t.DateTime="dateTime"})(ng||(ng={}));var rg;(function(t){t.Text="text",t.SingleLineText="singleLineText",t.LongText="longText",t.User="user",t.Attachment="attachment",t.Checkbox="checkbox",t.Select="select",t.MultipleSelect="multipleSelect",t.SingleSelect="singleSelect",t.Date="date",t.Number="number",t.Rating="rating",t.Formula="formula",t.Rollup="rollup",t.Link="link",t.CreatedTime="createdTime",t.LastModifiedTime="lastModifiedTime",t.CreatedBy="createdBy",t.LastModifiedBy="lastModifiedBy",t.AutoNumber="autoNumber",t.Button="button",t.Email="email",t.Phone="phone",t.URL="url"})(rg||(rg={}));var og;(function(t){t.Star="star",t.Moon="moon",t.Sun="sun",t.Zap="zap",t.Flame="flame",t.Heart="heart",t.Apple="apple",t.ThumbUp="thumb-up"})(og||(og={}));const Td={grid:{type:"grid",name:"表格视图",icon:n2,color:"#3b82f6",gradient:"from-blue-500 to-blue-600"},kanban:{type:"kanban",name:"看板视图",icon:jk,color:"#10b981",gradient:"from-green-500 to-green-600"},calendar:{type:"calendar",name:"日历视图",icon:Qo,color:"#06b6d4",gradient:"from-cyan-500 to-cyan-600"},gantt:{type:"gantt",name:"甘特视图",icon:KS,color:"#ec4899",gradient:"from-pink-500 to-pink-600"},gallery:{type:"gallery",name:"画册视图",icon:nc,color:"#8b5cf6",gradient:"from-purple-500 to-purple-600"},form:{type:"form",name:"表单视图",icon:Zo,color:"#f59e0b",gradient:"from-amber-500 to-amber-600"},list:{type:"list",name:"列表视图",icon:Di,color:"#6366f1",gradient:"from-indigo-500 to-indigo-600"}};function Q5(t){return Td[t||"grid"]||Td.grid}function Z5(t){return Q5(t).icon}const J5=Object.values(Td);function K5({onSelect:t,onClose:e}){const n=y.useRef(null);y.useEffect(()=>{const i=l=>{n.current&&!n.current.contains(l.target)&&e()},a=setTimeout(()=>{document.addEventListener("mousedown",i)},0);return()=>{clearTimeout(a),document.removeEventListener("mousedown",i)}},[e]);const r=i=>{i.key==="Escape"&&e()};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-[998]",style:{backgroundColor:"transparent"},onClick:e,"aria-hidden":"true"}),u.jsxs("div",{ref:n,onKeyDown:r,className:ge("absolute top-full left-0 mt-2","bg-white rounded-xl border shadow-xl","py-2 min-w-[240px]","z-[999]","animate-in fade-in-0 slide-in-from-top-2 duration-200"),style:{backgroundColor:E.colors.surface.base,borderColor:E.colors.border.subtle,boxShadow:E.elevation.xl},role:"menu","aria-label":"创建视图类型",children:[u.jsx("div",{className:"px-4 py-2 text-xs font-semibold uppercase tracking-wide",style:{color:E.colors.text.secondary},children:"选择视图类型"}),u.jsx("div",{className:"mx-2 my-1 h-px",style:{backgroundColor:E.colors.border.subtle}}),u.jsx("div",{className:"px-1",children:J5.map(i=>{const a=i.icon;return u.jsxs("button",{onClick:()=>t(i.type),className:ge("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg","text-sm text-left","transition-all duration-200 ease-out","hover:bg-gray-50 hover:translate-x-0.5","focus:outline-none focus:bg-gray-50","group"),style:{color:E.colors.text.primary},role:"menuitem",children:[u.jsx("div",{className:ge("flex-shrink-0 flex items-center justify-center","w-9 h-9 rounded-lg","bg-gradient-to-br",i.gradient,"transition-all duration-200","group-hover:scale-110 group-hover:shadow-md"),children:u.jsx(a,{size:18,className:"text-white",strokeWidth:2})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium truncate",children:i.name}),u.jsx("div",{className:"text-xs truncate mt-0.5",style:{color:E.colors.text.secondary},children:eO(i.type)})]}),u.jsx("div",{className:ge("flex-shrink-0 w-0 opacity-0","transition-all duration-200","group-hover:w-4 group-hover:opacity-100"),children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:E.colors.text.secondary},children:u.jsx("path",{d:"M6 4L10 8L6 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},i.type)})}),u.jsx("div",{className:"mx-2 mt-2 pt-2 border-t",style:{borderColor:E.colors.border.subtle},children:u.jsx("div",{className:"px-2 py-1.5 text-xs text-center",style:{color:E.colors.text.tertiary},children:"更多视图类型即将推出"})})]})]})}function eO(t){return{grid:"经典表格，强大灵活",kanban:"看板拖拽，可视化工作流",calendar:"时间视图，日程管理",gantt:"甘特图，项目进度跟踪",gallery:"卡片展示，图片预览",form:"表单收集，数据录入",list:"简洁列表，快速浏览"}[t]||"高效的数据视图"}function ig({id:t,label:e,type:n,active:r,onClick:i,onRename:a,onDelete:l,isMobile:c,isTouch:h}){const[d,p]=y.useState(!1),[m,g]=y.useState(!1),[x,b]=y.useState(null),C=y.useRef(null),w=Z5(n);return u.jsxs("div",{role:"tab","aria-selected":r,"data-state":r?"active":"inactive",onMouseEnter:()=>p(!0),onMouseLeave:()=>{p(!1),g(!1)},className:ge("relative group cursor-pointer select-none",c?"h-8 px-2":"h-9 px-3",c?"min-w-[64px]":"min-w-[80px]",h&&"min-h-[44px]"),children:[u.jsxs("button",{onClick:i,className:ge("relative z-10 flex items-center justify-center gap-2","w-full h-full rounded-md","font-medium whitespace-nowrap",c?"text-xs":"text-sm",!r&&"text-gray-600",r&&"text-blue-700",!r&&"bg-transparent",!r&&d&&"bg-gray-50",r&&"bg-blue-50","transition-all duration-200 ease-out",!r&&d&&"scale-[1.02]","active:scale-[0.98]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),children:[u.jsx(w,{size:c?14:16,className:ge("flex-shrink-0 transition-colors duration-200",!r&&"text-gray-400",r&&"text-blue-600",d&&!r&&"text-gray-600")}),u.jsx("span",{className:"truncate",children:e}),(a||l)&&u.jsx("div",{ref:C,onClick:S=>{S.stopPropagation();const k=C.current?.getBoundingClientRect();k&&b({top:k.bottom+6,left:Math.max(8,k.right-160)}),g(_=>!_)},className:ge("flex-shrink-0 p-0.5 rounded","transition-all duration-200","hover:bg-gray-200/50",m&&"rotate-90"),"aria-label":"更多操作",title:"更多操作",children:u.jsx(fk,{size:14,className:ge("transition-colors duration-200",!r&&"text-gray-400",r&&"text-blue-600")})})]}),r&&u.jsx("div",{className:ge("absolute bottom-0 left-0 right-0 h-0.5","bg-gradient-to-r from-blue-500 to-blue-600","rounded-full","transition-all duration-300 ease-out","animate-in slide-in-from-bottom-1"),style:{marginLeft:c?"4px":"8px",marginRight:c?"4px":"8px"}}),m&&x&&Kl.createPortal(u.jsxs("div",{className:ge("fixed z-[9999]","min-w-[160px] rounded-lg border bg-white shadow-xl","py-1","animate-in fade-in-0 slide-in-from-top-2 duration-150"),style:{top:x.top,left:x.left,borderColor:E.colors.border.subtle},onClick:S=>S.stopPropagation(),children:[a&&u.jsx("button",{className:ge("w-full px-3 py-2 text-left text-sm","text-gray-700","transition-colors duration-150","hover:bg-gray-50","focus:outline-none focus:bg-gray-50"),onClick:()=>{g(!1),a(t)},children:"重命名"}),l&&u.jsx("button",{className:ge("w-full px-3 py-2 text-left text-sm","text-red-600","transition-colors duration-150","hover:bg-red-50","focus:outline-none focus:bg-red-50"),onClick:()=>{g(!1),l(t)},children:"删除"})]}),document.body)]})}function tO({tabs:t,activeTabKey:e,onTabChange:n,views:r,activeViewId:i,onViewChange:a,onCreateView:l,onRenameView:c,onDeleteView:h,onAdd:d,isMobile:p=!1,isTouch:m=!1,className:g}){const[x,b]=y.useState(!1),C=y.useCallback(_=>{n?.(_)},[n]),w=y.useCallback(_=>{a?.(_)},[a]),S=y.useCallback(_=>{l?.(_),b(!1)},[l]),k=!!(r&&r.length>0);return u.jsxs("div",{className:ge("flex items-center justify-between","relative",p?"h-12 px-3":"h-14 px-4","border-b",g),style:{backgroundColor:E.colors.surface.base,borderColor:E.colors.border.subtle},role:"banner",children:[u.jsxs("div",{role:"tablist",className:ge("flex items-center","gap-1"),children:[k?u.jsx(u.Fragment,{children:r.map(_=>u.jsx(ig,{id:_.id,label:_.name,type:_.type,active:i===_.id,onClick:()=>w(_.id),onRename:c?R=>{c(R,_.name)}:void 0,onDelete:h?R=>{h(R)}:void 0,isMobile:p,isTouch:m},_.id))}):u.jsx(u.Fragment,{children:t?.map(_=>u.jsx(ig,{id:_.key,label:_.label,active:e===_.key,onClick:()=>C(_.key),isMobile:p,isTouch:m},_.key))}),l&&u.jsxs("div",{className:"relative ml-1",children:[u.jsx(fd,{icon:ua,variant:"ghost",size:"sm",onClick:()=>b(!x),className:ge("transition-all duration-200",x&&"bg-gray-100 rotate-45"),"aria-label":"添加视图",title:"添加视图"}),x&&u.jsx(K5,{onSelect:S,onClose:()=>b(!1)})]})]}),d&&u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(fd,{icon:ua,variant:"primary",size:p?"sm":"md",onClick:d,className:ge("rounded-lg shadow-sm","hover:shadow-md","transition-all duration-200"),"aria-label":"添加新项",title:"添加新项"})})]})}const Qu={basic:{name:"基础类型",icon:Zo,color:"#3b82f6"},select:{name:"选择类型",icon:Di,color:"#8b5cf6"},datetime:{name:"日期时间",icon:Qo,color:"#06b6d4"},link:{name:"链接类型",icon:Jo,color:"#10b981"},advanced:{name:"高级类型",icon:Ai,color:"#f59e0b"},collab:{name:"协作类型",icon:Ss,color:"#ec4899"}},nO=[{id:"text",name:"单行文本",icon:Dd,description:"简短的文本内容",example:"如：姓名、标题、标签",category:"basic",color:"#3b82f6",popular:!0,keywords:["文本","text","单行"]},{id:"longText",name:"长文本",icon:Zo,description:"多行文本，支持换行",example:"如：描述、备注、说明",category:"basic",color:"#10b981",popular:!0,keywords:["长文本","textarea","多行"]},{id:"number",name:"数字",icon:tc,description:"数值和计算",example:"如：价格、数量、得分",category:"basic",color:"#f59e0b",popular:!0,keywords:["数字","number","数值"]},{id:"singleSelect",name:"单选",icon:da,description:"从多个选项中选择一个",example:"如：状态、优先级、类型",category:"select",color:"#8b5cf6",popular:!0,keywords:["单选","select","选项"]},{id:"multipleSelect",name:"多选",icon:Di,description:"可以选择多个选项",example:"如：标签、分类、技能",category:"select",color:"#ec4899",popular:!0,keywords:["多选","multi","标签"]},{id:"checkbox",name:"复选框",icon:Cs,description:"是/否 二选一",example:"如：已完成、是否启用",category:"select",color:"#84cc16",keywords:["复选框","checkbox","是否"]},{id:"date",name:"日期",icon:Qo,description:"日期和时间",example:"如：创建时间、截止日期",category:"datetime",color:"#06b6d4",popular:!0,keywords:["日期","date","时间"]},{id:"duration",name:"时长",icon:td,description:"时间段或持续时间",example:"如：工时、时长",category:"datetime",color:"#0ea5e9",keywords:["时长","duration","持续"]},{id:"link",name:"链接",icon:Jo,description:"网址链接",example:"如：网站、文档链接",category:"link",color:"#6366f1",keywords:["链接","url","网址"]},{id:"email",name:"邮箱",icon:xa,description:"电子邮件地址",example:"如：联系邮箱",category:"link",color:"#14b8a6",keywords:["邮箱","email","邮件"]},{id:"phone",name:"电话",icon:ya,description:"电话号码",example:"如：手机号、座机",category:"link",color:"#ef4444",keywords:["电话","phone","手机"]},{id:"location",name:"地址",icon:Nk,description:"地理位置",example:"如：公司地址、配送地址",category:"link",color:"#22c55e",keywords:["地址","location","位置"]},{id:"rating",name:"评分",icon:xo,description:"星级评分",example:"如：满意度、重要性",category:"advanced",color:"#eab308",keywords:["评分","rating","星级"]},{id:"progress",name:"进度",icon:td,description:"百分比进度条",example:"如：完成度、进展",category:"advanced",color:"#a855f7",keywords:["进度","progress","百分比"]},{id:"user",name:"成员",icon:Ss,description:"选择用户或成员",example:"如：负责人、参与者",category:"collab",color:"#64748b",keywords:["用户","user","成员","人员"]},{id:"attachment",name:"附件",icon:nc,description:"上传文件和图片",example:"如：图片、文档、视频",category:"collab",color:"#f97316",keywords:["附件","attachment","文件","图片"]}];function rO({isOpen:t,onClose:e,onConfirm:n}){console.log("🔍 AddFieldDialog 渲染:",{isOpen:t,hasOnClose:!!e,hasOnConfirm:!!n});const[r,i]=y.useState("selectType"),[a,l]=y.useState(null),[c,h]=y.useState(""),[d,p]=y.useState(""),[m,g]=y.useState("all"),[x,b]=y.useState({}),C=y.useMemo(()=>{let M=nO;if(m==="popular"?M=M.filter(I=>I.popular):m!=="all"&&(M=M.filter(I=>I.category===m)),d.trim()){const I=d.toLowerCase();M=M.filter(z=>z.name.toLowerCase().includes(I)||z.description.toLowerCase().includes(I)||z.keywords?.some(D=>D.toLowerCase().includes(I)))}return M},[m,d]),w=()=>{i("selectType"),l(null),h(""),p(""),g("all"),b({})},S=M=>{l(M),h("");let I={};M.id==="singleSelect"||M.id==="multipleSelect"?I={options:[]}:M.id==="number"?I={format:"number",precision:0}:M.id==="date"?I={includeTime:!1,dateFormat:"YYYY-MM-DD"}:M.id==="rating"&&(I={maxRating:5,icon:"star"}),b(I),i("configure")},k=()=>{i("selectType"),l(null)},_=()=>{console.log("🔍 AddFieldDialogV2 handleConfirm 被调用:",{fieldName:c.trim(),selectedTypeId:a?.id,hasOnConfirm:!!n}),a&&c.trim()?(console.log("🔍 调用 onConfirm:",{fieldName:c.trim(),fieldType:a.id}),n(c.trim(),a.id,x),w(),e()):console.error("❌ 无法确认：缺少字段名称或类型",{hasFieldName:!!c.trim(),hasSelectedType:!!a})},R=()=>{w(),e()},T=M=>{M.key==="Escape"?r==="configure"?k():R():M.key==="Enter"&&r==="configure"&&_()};return t?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(4px)",zIndex:60,animation:"fadeIn 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"},onClick:R}),u.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:r==="selectType"?"720px":"560px",maxHeight:"85vh",backgroundColor:E.colors.surface.base,borderRadius:"16px",boxShadow:"0 24px 48px -12px rgba(0, 0, 0, 0.18), 0 0 1px rgba(0, 0, 0, 0.3)",zIndex:61,display:"flex",flexDirection:"column",overflow:"hidden",animation:"slideUp 300ms cubic-bezier(0.16, 1, 0.3, 1)",transition:"width 300ms cubic-bezier(0.4, 0.0, 0.2, 1)"},children:r==="selectType"?u.jsx(oO,{searchQuery:d,onSearchChange:p,selectedCategory:m,onCategoryChange:g,filteredTypes:C,onSelectType:S,onClose:R}):u.jsx(iO,{selectedType:a,fieldName:c,onFieldNameChange:h,fieldConfig:x,onFieldConfigChange:b,onBack:k,onConfirm:_,onClose:R,onKeyPress:T})}),u.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translate(-50%, -48%) scale(0.96);
          }
          to {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
          }
        }

        @keyframes slideInStagger {
          from {
            opacity: 0;
            transform: translateY(8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]}):null}function oO({searchQuery:t,onSearchChange:e,selectedCategory:n,onCategoryChange:r,filteredTypes:i,onSelectType:a,onClose:l}){const c=y.useMemo(()=>{const d={};return n==="all"||n==="popular"?i.forEach(p=>{d[p.category]||(d[p.category]=[]),d[p.category].push(p)}):d[n]=i,d},[i,n]),h=[{id:"all",name:"全部类型"},{id:"popular",name:"常用",icon:xo},...Object.entries(Qu).map(([d,p])=>({id:d,name:p.name,icon:p.icon}))];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"24px 24px 20px",borderBottom:`1px solid ${E.colors.border.subtle}`},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[u.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:E.colors.text.primary,margin:0,letterSpacing:"-0.01em"},children:"选择字段类型"}),u.jsx("button",{onClick:l,style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:sn.presets.all,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=E.colors.surface.hover},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:u.jsx(Oi,{size:20,style:{color:E.colors.text.secondary}})})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ri,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:E.colors.text.tertiary,pointerEvents:"none"}}),u.jsx("input",{type:"text",value:t,onChange:d=>e(d.target.value),placeholder:"搜索字段类型...",autoFocus:!0,style:{width:"100%",padding:"10px 16px 10px 40px",fontSize:"14px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"8px",outline:"none",transition:sn.presets.all,boxSizing:"border-box"},onFocus:d=>{d.target.style.borderColor=E.colors.border.focus,d.target.style.boxShadow=`0 0 0 3px ${E.colors.border.focus}15`},onBlur:d=>{d.target.style.borderColor=E.colors.border.subtle,d.target.style.boxShadow="none"}})]})]}),u.jsx("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${E.colors.border.subtle}`,display:"flex",gap:"8px",flexWrap:"wrap",backgroundColor:E.colors.surface.hover},children:h.map(d=>{const p=n===d.id,m=d.icon;return u.jsxs("button",{onClick:()=>r(d.id),style:{padding:"6px 12px",fontSize:"13px",fontWeight:p?500:400,color:p?E.colors.text.primary:E.colors.text.secondary,backgroundColor:p?E.colors.surface.base:"transparent",border:`1px solid ${p?E.colors.border.default:"transparent"}`,borderRadius:"6px",cursor:"pointer",transition:sn.presets.all,display:"flex",alignItems:"center",gap:"6px",boxShadow:p?Tn.xs:"none"},onMouseEnter:g=>{p||(g.currentTarget.style.backgroundColor=E.colors.surface.base)},onMouseLeave:g=>{p||(g.currentTarget.style.backgroundColor="transparent")},children:[m&&u.jsx(m,{size:14}),d.name]},d.id)})}),u.jsx("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:Object.keys(c).length===0?u.jsxs("div",{style:{padding:"48px 24px",textAlign:"center",color:E.colors.text.secondary},children:[u.jsx(Ri,{size:48,style:{color:E.colors.text.tertiary,marginBottom:"16px"}}),u.jsx("div",{style:{fontSize:"14px"},children:"没有找到匹配的字段类型"}),u.jsx("div",{style:{fontSize:"13px",marginTop:"8px",color:E.colors.text.tertiary},children:"试试其他关键词"})]}):Object.entries(c).map(([d,p],m)=>u.jsxs("div",{style:{marginBottom:"16px"},children:[(n==="all"||n==="popular")&&u.jsxs("div",{style:{padding:"8px 16px 8px 16px",fontSize:"12px",fontWeight:600,color:E.colors.text.secondary,textTransform:"uppercase",letterSpacing:"0.05em",display:"flex",alignItems:"center",gap:"8px"},children:[le.createElement(Qu[d].icon,{size:14}),Qu[d].name]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",padding:"0 8px"},children:p.map((g,x)=>{const b=g.icon;return u.jsxs("button",{onClick:()=>a(g),style:{padding:"16px",backgroundColor:E.colors.surface.base,border:`1px solid ${E.colors.border.subtle}`,borderRadius:"10px",cursor:"pointer",textAlign:"left",transition:"all 200ms cubic-bezier(0.4, 0.0, 0.2, 1)",display:"flex",gap:"12px",position:"relative",overflow:"hidden",animation:`slideInStagger 300ms cubic-bezier(0.16, 1, 0.3, 1) ${m*100+x*40}ms both`},onMouseEnter:C=>{C.currentTarget.style.backgroundColor=E.colors.surface.hover,C.currentTarget.style.borderColor=E.colors.border.strong,C.currentTarget.style.transform="translateY(-2px)",C.currentTarget.style.boxShadow=Tn.sm},onMouseLeave:C=>{C.currentTarget.style.backgroundColor=E.colors.surface.base,C.currentTarget.style.borderColor=E.colors.border.subtle,C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="none"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",backgroundColor:`${g.color}10`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:u.jsx(b,{size:22,style:{color:g.color}})}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:500,color:E.colors.text.primary,marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[g.name,g.popular&&u.jsx(xo,{size:12,style:{color:E.colors.text.warning,fill:E.colors.text.warning}})]}),u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary,lineHeight:"1.4"},children:g.description})]}),u.jsx(Id,{size:18,style:{color:E.colors.text.tertiary,flexShrink:0,opacity:0,transition:sn.presets.all},className:"arrow-icon"})]},g.id)})})]},d))}),u.jsx("style",{children:`
        button:hover .arrow-icon {
          opacity: 1 !important;
        }
      `})]})}function iO({selectedType:t,fieldName:e,onFieldNameChange:n,fieldConfig:r,onFieldConfigChange:i,onBack:a,onConfirm:l,onClose:c,onKeyPress:h}){const d=t.icon,p=()=>{switch(t.id){case"singleSelect":return u.jsx(Gl,{config:r,onChange:i,isMultiple:!1});case"multipleSelect":return u.jsx(Gl,{config:r,onChange:i,isMultiple:!0});case"number":return u.jsx(s0,{config:r,onChange:i});case"date":return u.jsx(a0,{config:r,onChange:i});case"rating":return u.jsx(l0,{config:r,onChange:i});default:return u.jsx("div",{style:{padding:"16px",backgroundColor:E.colors.surface.hover,borderRadius:"8px",fontSize:"13px",color:E.colors.text.secondary,textAlign:"center"},children:"此字段类型暂无额外配置项"})}};return u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{padding:"24px 24px 20px",borderBottom:`1px solid ${E.colors.border.subtle}`},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("button",{onClick:a,style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:sn.presets.all,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=E.colors.surface.hover},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent"},children:u.jsx(Id,{size:20,style:{color:E.colors.text.secondary,transform:"rotate(180deg)"}})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:`${t.color}10`,display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(d,{size:20,style:{color:t.color}})}),u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:E.colors.text.primary,margin:0,letterSpacing:"-0.01em"},children:t.name}),u.jsx("div",{style:{fontSize:"12px",color:E.colors.text.secondary,marginTop:"2px"},children:t.description})]})]})]}),u.jsx("button",{onClick:c,style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"6px",cursor:"pointer",transition:sn.presets.all,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=E.colors.surface.hover},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent"},children:u.jsx(Oi,{size:20,style:{color:E.colors.text.secondary}})})]})}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsxs("label",{style:{display:"block",fontSize:"13px",fontWeight:500,color:E.colors.text.primary,marginBottom:"8px"},children:["字段名称 ",u.jsx("span",{style:{color:E.colors.text.error},children:"*"})]}),u.jsx("input",{type:"text",value:e,onChange:m=>n(m.target.value),onKeyDown:h,placeholder:`如：${t.example||"请输入字段名称"}`,autoFocus:!0,style:{width:"100%",padding:"12px 16px",fontSize:"14px",color:E.colors.text.primary,backgroundColor:E.colors.surface.base,border:`2px solid ${E.colors.border.subtle}`,borderRadius:"8px",outline:"none",transition:sn.presets.all,boxSizing:"border-box"},onFocus:m=>{m.target.style.borderColor=E.colors.border.focus,m.target.style.boxShadow=`0 0 0 3px ${E.colors.border.focus}15`},onBlur:m=>{m.target.style.borderColor=E.colors.border.subtle,m.target.style.boxShadow="none"}}),t.example&&u.jsxs("div",{style:{fontSize:"12px",color:E.colors.text.tertiary,marginTop:"6px"},children:["💡 示例：",t.example]})]}),p()]}),u.jsxs("div",{style:{padding:"16px 24px",borderTop:`1px solid ${E.colors.border.subtle}`,display:"flex",justifyContent:"flex-end",gap:"12px",backgroundColor:E.colors.surface.hover},children:[u.jsx("button",{onClick:a,style:{padding:"10px 18px",fontSize:"14px",fontWeight:500,color:E.colors.text.secondary,backgroundColor:"transparent",border:`1px solid ${E.colors.border.subtle}`,borderRadius:"8px",cursor:"pointer",transition:sn.presets.all},onMouseEnter:m=>{m.currentTarget.style.backgroundColor=E.colors.surface.base,m.currentTarget.style.borderColor=E.colors.border.default},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.borderColor=E.colors.border.subtle},children:"返回"}),u.jsx("button",{onClick:()=>{alert("测试按钮被点击了！"),console.log("🔍 测试按钮被点击")},style:{padding:"10px 24px",fontSize:"14px",fontWeight:500,color:"white",backgroundColor:"red",border:"none",borderRadius:"8px",cursor:"pointer",marginRight:"10px"},children:"测试按钮"}),u.jsxs("button",{onClick:m=>{m.preventDefault(),m.stopPropagation(),console.log("🔍 创建字段按钮被点击",{fieldName:e,fieldNameTrimmed:e.trim(),isDisabled:!e.trim(),buttonElement:m.target,eventType:m.type}),alert("按钮被点击了！"),l()},disabled:!1,style:{padding:"10px 24px",fontSize:"14px",fontWeight:500,color:e.trim()?E.colors.text.inverse:E.colors.text.tertiary,backgroundColor:e.trim()?E.colors.primary[600]:E.colors.surface.disabled,border:"none",borderRadius:"8px",cursor:e.trim()?"pointer":"not-allowed",transition:sn.presets.all,display:"flex",alignItems:"center",gap:"8px",boxShadow:e.trim()?Tn.xs:"none"},onMouseEnter:m=>{e.trim()&&(m.currentTarget.style.backgroundColor=E.colors.primary[700],m.currentTarget.style.boxShadow=Tn.sm,m.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:m=>{e.trim()&&(m.currentTarget.style.backgroundColor=E.colors.primary[600],m.currentTarget.style.boxShadow=Tn.xs,m.currentTarget.style.transform="translateY(0)")},children:[u.jsx(Cs,{size:16}),"创建字段"]})]})]})}const sO={sm:{trigger:"h-8 px-2 text-xs",option:"px-2 py-1.5 text-xs",icon:12},md:{trigger:"h-9 px-3 text-sm",option:"px-3 py-2 text-sm",icon:14},lg:{trigger:"h-10 px-4 text-base",option:"px-4 py-2.5 text-base",icon:16}},aO={default:{trigger:"bg-white border-gray-300 text-gray-900 hover:bg-gray-50 hover:border-gray-400",focus:"border-blue-500 ring-2 ring-blue-500/20"},ghost:{trigger:"bg-transparent border-transparent text-gray-700 hover:bg-gray-100",focus:"border-gray-300 ring-2 ring-gray-500/20"},outline:{trigger:"bg-transparent border-gray-300 text-gray-900 hover:bg-gray-50",focus:"border-blue-500 ring-2 ring-blue-500/20"}},Ii=y.forwardRef(({value:t,onChange:e,options:n,placeholder:r="请选择...",label:i,description:a,disabled:l=!1,loading:c=!1,error:h,size:d="md",variant:p="default",className:m,searchable:g=!1,clearable:x=!1,multiple:b=!1,placement:C="bottom-start",renderTrigger:w,renderOption:S,onOpen:k,onClose:_,onSearch:R},T)=>{const[M,I]=y.useState(!1),[z,D]=y.useState(""),[P,L]=y.useState(-1),H=y.useRef(null),$=y.useRef(null),Y=y.useRef(null),te=sO[d],J=aO[p],re=n.find(V=>V.value===t)||null,ie=g&&z?n.filter(V=>V.label.toLowerCase().includes(z.toLowerCase())||V.description?.toLowerCase().includes(z.toLowerCase())):n;y.useEffect(()=>{const V=se=>{$.current&&!$.current.contains(se.target)&&H.current&&!H.current.contains(se.target)&&(I(!1),D(""),L(-1),_?.())};if(M)return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[M,_]);const G=y.useCallback(V=>{if(!M){(V.key==="Enter"||V.key===" "||V.key==="ArrowDown")&&(V.preventDefault(),I(!0),k?.());return}switch(V.key){case"Escape":V.preventDefault(),I(!1),D(""),L(-1),_?.(),H.current?.focus();break;case"ArrowDown":V.preventDefault(),L(se=>se<ie.length-1?se+1:0);break;case"ArrowUp":V.preventDefault(),L(se=>se>0?se-1:ie.length-1);break;case"Enter":if(V.preventDefault(),P>=0&&P<ie.length){const se=ie[P];se.disabled||(e?.(se.value),I(!1),D(""),L(-1),_?.())}break;case"Tab":I(!1),D(""),L(-1),_?.();break}},[M,ie,P,e,k,_]),U=y.useCallback(V=>{V.disabled||(e?.(V.value),I(!1),D(""),L(-1),_?.())},[e,_]),ce=y.useCallback(V=>{V.stopPropagation(),e?.(void 0)},[e]),ue=y.useCallback(V=>{const se=V.target.value;D(se),L(-1),R?.(se)},[R]),He=y.useCallback(()=>{if(!H.current)return{top:0,left:0};const V=H.current.getBoundingClientRect(),se=window.pageYOffset||document.documentElement.scrollTop,ze=window.pageXOffset||document.documentElement.scrollLeft;let Ne=V.bottom+se+4,ae=V.left+ze;return C.includes("top")&&(Ne=V.top+se-4),C.includes("end")&&(ae=V.right+ze),{top:Ne,left:ae}},[C])();return u.jsxs("div",{className:ge("relative",m),children:[i&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i}),u.jsxs("button",{ref:T||H,type:"button",disabled:l,onClick:()=>{!l&&!c&&(I(!M),M?_?.():(k?.(),setTimeout(()=>Y.current?.focus(),0)))},onKeyDown:G,className:ge("flex items-center justify-between","border rounded-md","transition-all duration-200","focus:outline-none",te.trigger,J.trigger,l&&"opacity-50 cursor-not-allowed",c&&"opacity-75 cursor-wait",h&&"border-red-500",M&&J.focus,m),style:{borderColor:h?E.colors.border.error:void 0},"aria-expanded":M,"aria-haspopup":"listbox","aria-label":i||r,children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[re?.icon&&u.jsx(re.icon,{size:te.icon,className:"flex-shrink-0 text-gray-500"}),u.jsx("span",{className:ge("truncate",!re&&"text-gray-500"),children:re?.label||r})]}),u.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[x&&re&&u.jsx("button",{onClick:ce,className:"p-0.5 rounded hover:bg-gray-200 transition-colors","aria-label":"清除选择",children:u.jsxs("svg",{width:te.icon,height:te.icon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),u.jsx(Ed,{size:te.icon,className:ge("text-gray-400 transition-transform duration-200",M&&"rotate-180")})]})]}),a&&u.jsx("p",{className:"mt-1 text-xs text-gray-500",children:a}),h&&u.jsx("p",{className:"mt-1 text-xs text-red-600",children:h}),M&&Kl.createPortal(u.jsxs("div",{ref:$,className:ge("absolute z-50","bg-white border rounded-lg shadow-lg","w-64 max-h-60 overflow-hidden","animate-in fade-in-0 slide-in-from-top-2 duration-200"),style:{top:He.top,left:He.left,borderColor:E.colors.border.subtle,boxShadow:Tn.lg},onKeyDown:G,role:"listbox","aria-label":i||"选项列表",children:[g&&u.jsx("div",{className:"p-2 border-b",style:{borderColor:E.colors.border.subtle},children:u.jsx("input",{ref:Y,type:"text",value:z,onChange:ue,placeholder:"搜索...",className:ge("w-full px-2 py-1 text-sm border rounded","focus:outline-none focus:ring-2 focus:ring-blue-500/20","border-gray-300")})}),u.jsx("div",{className:"max-h-48 overflow-y-auto",children:ie.length===0?u.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:z?"未找到匹配项":"暂无选项"}):ie.map((V,se)=>{const ze=V.value===t,Ne=se===P;return u.jsxs("button",{onClick:()=>U(V),disabled:V.disabled,className:ge("w-full flex items-center gap-2 text-left","transition-colors duration-150",te.option,"hover:bg-gray-50 focus:bg-gray-50","focus:outline-none",Ne&&"bg-blue-50",ze&&"bg-blue-50 text-blue-700",V.disabled&&"opacity-50 cursor-not-allowed"),role:"option","aria-selected":ze,children:[u.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:ze?u.jsx(Cs,{size:12,className:"text-blue-600"}):u.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300"})}),V.icon&&u.jsx(V.icon,{size:te.icon,className:"flex-shrink-0 text-gray-500"}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-medium truncate",children:V.label}),V.description&&u.jsx("div",{className:"text-xs text-gray-500 truncate",children:V.description})]})]},String(V.value))})})]}),document.body)]})});Ii.displayName="Combobox";function lO({isOpen:t,position:e,fieldId:n,fieldName:r,onClose:i,onEdit:a,onCopy:l,onInsertLeft:c,onInsertRight:h,onFilter:d,onSort:p,onGroup:m,onFreeze:g,onToggleVisibility:x,onDelete:b,fieldVisible:C=!0,fieldLocked:w=!1}){if(!t||!e)return null;const S=[{id:"edit",label:"编辑字段",icon:kg,onClick:()=>a(n),primary:!0,disabled:!1},{id:"copy",label:"复制字段",icon:uk,onClick:()=>l(n),disabled:!1},{id:"insert-left",label:"在左侧插入字段",icon:rk,onClick:()=>c(n),disabled:!1},{id:"insert-right",label:"在右侧插入字段",icon:Id,onClick:()=>h(n),disabled:!1},{id:"filter",label:"按此字段筛选",icon:ca,onClick:()=>d(n),disabled:!1},{id:"sort",label:"按此字段排序",icon:bg,onClick:()=>p(n),disabled:!1},{id:"group",label:"按此字段分组",icon:Mk,onClick:()=>m(n),disabled:!1},{id:"freeze",label:"冻结至此字段",icon:vk,onClick:()=>g(n),disabled:!1},{id:"toggle-visibility",label:C?"隐藏字段":"显示字段",icon:C?vg:wg,onClick:()=>x(n),disabled:w},{id:"delete",label:"删除字段",icon:_g,onClick:()=>b(n),destructive:!0,disabled:w}];return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:i}),u.jsxs("div",{className:"absolute bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-50",style:{left:e.x,top:e.y,backgroundColor:E.colors.surface.base,borderColor:E.colors.border.subtle,boxShadow:Tn.lg,minWidth:"180px"},children:[u.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 mb-1",style:{borderBottomColor:E.colors.border.subtle},children:[u.jsx("div",{className:"text-xs font-medium text-gray-500",style:{color:E.colors.text.secondary},children:"字段操作"}),u.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",style:{color:E.colors.text.primary},children:r})]}),S.map(k=>{const _=k.icon;return u.jsxs("button",{onClick:()=>{k.disabled||(k.onClick(),i())},disabled:k.disabled,className:ge("w-full px-3 py-2 text-left text-sm flex items-center gap-3 transition-colors duration-150","focus:outline-none",k.disabled?"text-gray-400 cursor-not-allowed":k.destructive?"text-red-600 hover:bg-red-50":k.primary?"text-blue-600 hover:bg-blue-50 font-medium":"text-gray-700 hover:bg-gray-50"),style:{color:k.disabled?E.colors.text.disabled:k.destructive?E.colors.text.error:k.primary?E.colors.text.accent:E.colors.text.primary,backgroundColor:"transparent"},onMouseEnter:R=>{k.disabled||(R.currentTarget.style.backgroundColor=k.destructive?E.colors.surface.destructive:k.primary?E.colors.surface.selected:E.colors.surface.hover)},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent"},children:[u.jsx(_,{size:16,className:ge(k.disabled&&"opacity-50")}),u.jsx("span",{className:"flex-1",children:k.label}),k.primary&&u.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-current flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-current rounded-full"})})]},k.id)}),w&&u.jsx("div",{className:"px-3 py-2 border-t border-gray-100 mt-1",style:{borderTopColor:E.colors.border.subtle},children:u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",style:{color:E.colors.text.tertiary},children:[u.jsx(Sg,{size:12}),u.jsx("span",{children:"主键字段，部分操作不可用"})]})})]})]})}const cO={text:l2,number:tc,singleSelect:ak,multipleSelect:da,date:Qo,attachment:Lk,checkbox:da,email:xa,phone:ya,url:Jo,rating:xo,formula:Kk,lookup:Ri,rollup:QS,createdTime:td,lastModifiedTime:kg,createdBy:p2,lastModifiedBy:f2};function f0(t){return cO[t]||Zo}function uO({field:t,index:e,onToggle:n,onContextMenu:r,onDragStart:i,onDragEnd:a,onDragOver:l,onDrop:c,isDragging:h=!1}){const d=f0(t.type);return u.jsxs("div",{draggable:!t.locked,onDragStart:p=>i(e,p),onDragEnd:a,onDragOver:l,onDrop:p=>c(e,p),onContextMenu:p=>!t.locked&&r(t.id,p),className:ge("flex items-center gap-3 px-3 py-2","border-b border-gray-100 last:border-b-0","transition-all duration-150","hover:bg-gray-50",h&&"opacity-50",t.locked&&"bg-gray-50"),style:{borderBottomColor:E.colors.border.subtle},children:[!t.locked&&u.jsx(Cg,{size:14,className:"text-gray-400 cursor-grab hover:text-gray-600 flex-shrink-0",style:{color:E.colors.text.tertiary}}),t.locked&&u.jsx(Sg,{size:14,className:"text-gray-400 flex-shrink-0",style:{color:E.colors.text.tertiary}}),u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx(d,{size:16,className:"text-gray-500 flex-shrink-0",style:{color:E.colors.text.secondary}}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:ge("text-sm truncate",t.locked?"font-semibold":"font-medium"),style:{color:E.colors.text.primary},title:t.name,children:t.name}),u.jsx("div",{className:"text-xs truncate mt-0.5",style:{color:E.colors.text.tertiary},children:t.type})]})]}),u.jsx("button",{onClick:p=>{p.stopPropagation(),n(t.id,!t.visible)},className:ge("p-1 rounded transition-colors duration-150","hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"),style:{color:t.visible?E.colors.text.primary:E.colors.text.tertiary},"aria-label":t.visible?"隐藏字段":"显示字段",children:t.visible?u.jsx(wg,{size:14}):u.jsx(vg,{size:14})}),!t.locked&&u.jsx("button",{onClick:p=>{p.stopPropagation(),r(t.id,p)},className:ge("p-1 rounded transition-colors duration-150","hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"),style:{color:E.colors.text.secondary},"aria-label":"更多操作",children:u.jsx(pk,{size:14})})]})}function dO({fields:t,onFieldToggle:e,onFieldReorder:n,onFieldEdit:r,onFieldDelete:i,onFieldGroup:a,onFieldCopy:l,onFieldInsertLeft:c,onFieldInsertRight:h,onFieldFilter:d,onFieldSort:p,onFieldFreeze:m,disabled:g=!1,className:x}){const[b,C]=y.useState(null),[w,S]=y.useState(null),[k,_]=y.useState(null),R=y.useCallback((H,$)=>{C(H),$.dataTransfer.effectAllowed="move",$.dataTransfer.setData("text/html",$.currentTarget.outerHTML),$.currentTarget.style.opacity="0.5"},[]),T=y.useCallback(H=>{H.currentTarget.style.opacity="1",C(null)},[]),M=y.useCallback(H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},[]),I=y.useCallback((H,$)=>{H.preventDefault(),b!==null&&b!==$&&n(b,$),C(null)},[b,n]),z=y.useCallback((H,$)=>{$.preventDefault(),$.stopPropagation();const Y=$.currentTarget.getBoundingClientRect();_({x:Y.right,y:Y.top}),S(H)},[]),D=t.map(H=>({value:H,label:H.name,icon:f0(H.type),disabled:H.locked,description:H.type})),P=y.useCallback(()=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Xk,{size:14}),u.jsx("span",{children:"字段配置"})]}),[]),L=y.useCallback((H,$)=>u.jsx(uO,{field:H.value,index:t.findIndex(Y=>Y.id===H.value.id),onToggle:e,onContextMenu:z,onDragStart:R,onDragEnd:T,onDragOver:M,onDrop:I,isDragging:b===t.findIndex(Y=>Y.id===H.value.id)}),[t,e,z,R,T,M,I,b]);return u.jsxs("div",{className:ge("relative",x),children:[u.jsx(Ii,{value:null,onChange:()=>{},options:D,placeholder:"字段配置",disabled:g,size:"sm",variant:"default",searchable:!0,renderTrigger:P,renderOption:L,className:"min-w-[120px]"}),u.jsx(lO,{isOpen:!!w,position:k,fieldId:w||"",fieldName:t.find(H=>H.id===w)?.name||"",onClose:()=>S(null),onEdit:r,onCopy:l||(()=>{}),onInsertLeft:c||(()=>{}),onInsertRight:h||(()=>{}),onFilter:d||(()=>{}),onSort:p||(()=>{}),onGroup:a,onFreeze:m||(()=>{}),onToggleVisibility:H=>{const $=t.find(Y=>Y.id===H);$&&e(H,!$.visible)},onDelete:i,fieldVisible:t.find(H=>H.id===w)?.visible,fieldLocked:t.find(H=>H.id===w)?.locked})]})}function Rl({height:t,size:e=16}){const n=()=>{switch(t){case"short":return"gap-0.5";case"medium":return"gap-1";case"tall":return"gap-1.5";case"extra-tall":return"gap-2";default:return"gap-1"}};return u.jsxs("div",{className:sg("flex items-center gap-1"),children:[u.jsxs("div",{className:sg("flex flex-col",n()),children:[u.jsx("div",{className:"w-3 h-0.5 bg-current opacity-60"}),u.jsx("div",{className:"w-4 h-0.5 bg-current"}),u.jsx("div",{className:"w-3 h-0.5 bg-current opacity-60"})]}),u.jsx(Ed,{size:e*.75,className:"opacity-50"})]})}const fO=[{value:"short",label:"低",icon:()=>u.jsx(Rl,{height:"short"}),description:"紧凑显示，适合大量数据"},{value:"medium",label:"中等",icon:()=>u.jsx(Rl,{height:"medium"}),description:"标准显示，平衡美观与效率"},{value:"tall",label:"高",icon:()=>u.jsx(Rl,{height:"tall"}),description:"宽松显示，提升可读性"},{value:"extra-tall",label:"超高",icon:()=>u.jsx(Rl,{height:"extra-tall"}),description:"最大显示，最佳可读性"}];function hO({value:t="medium",onChange:e,disabled:n=!1,className:r}){const i=(a,l)=>{const c=a.icon;return u.jsxs("div",{className:"flex items-center gap-3 px-3 py-2",children:[u.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:l?u.jsx(Cs,{size:12,className:"text-blue-600"}):u.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300"})}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(c,{})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("div",{className:"font-medium text-sm",children:a.label}),a.description&&u.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:a.description})]})]})};return u.jsx(Ii,{value:t,onChange:e,options:fO,placeholder:"行高配置",disabled:n,size:"sm",variant:"default",renderOption:i,className:r})}function sg(...t){return t.filter(Boolean).join(" ")}const pO={equals:"等于",not_equals:"不等于",contains:"包含",not_contains:"不包含",starts_with:"开头是",ends_with:"结尾是",greater_than:"大于",less_than:"小于",greater_equal:"大于等于",less_equal:"小于等于",is_empty:"为空",is_not_empty:"不为空",in:"在列表中",not_in:"不在列表中"};function mO({field:t,operator:e,value:n,onChange:r}){if(["is_empty","is_not_empty"].includes(e))return u.jsx("div",{className:"px-3 py-2 text-sm rounded-md border",style:{backgroundColor:E.colors.surface.disabled,borderColor:E.colors.border.subtle,color:E.colors.text.tertiary},children:"无需输入值"});switch(t.type){case"select":const a=t.options?.map(c=>({value:c,label:c}))||[];return u.jsx(Ii,{value:n,onChange:r,options:a,placeholder:"选择选项",size:"sm",className:"min-w-[120px]"});case"boolean":const l=[{value:!0,label:"是"},{value:!1,label:"否"}];return u.jsx(Ii,{value:n,onChange:r,options:l,placeholder:"选择",size:"sm",className:"min-w-[80px]"});case"date":return u.jsx("input",{type:"date",value:n||"",onChange:c=>r(c.target.value),className:ge("px-3 py-2 text-sm rounded-md border","focus:outline-none focus:ring-2 focus:ring-blue-500/20","border-gray-300"),style:{minWidth:"140px"}});case"number":return u.jsx("input",{type:"number",value:n||"",onChange:c=>r(c.target.value?Number(c.target.value):""),placeholder:"请输入数字",className:ge("px-3 py-2 text-sm rounded-md border","focus:outline-none focus:ring-2 focus:ring-blue-500/20","border-gray-300"),style:{minWidth:"120px"}});case"text":default:return u.jsx("input",{type:"text",value:n||"",onChange:c=>r(c.target.value),placeholder:"请输入",className:ge("px-3 py-2 text-sm rounded-md border","focus:outline-none focus:ring-2 focus:ring-blue-500/20","border-gray-300"),style:{minWidth:"120px"}})}}function gO({condition:t,fields:e,operators:n,onUpdate:r,onDelete:i,showDelete:a=!0,className:l}){const[c,h]=y.useState(t),d=e.find(w=>w.id===c.fieldId),p=c.operator;y.useEffect(()=>{r(c)},[c,r]);const m=y.useCallback(w=>{const S=e.find(R=>R.id===w);if(!S)return;const k=n.filter(R=>({equals:{valueTypes:["text","number","date","select","boolean"]},not_equals:{valueTypes:["text","number","date","select","boolean"]},contains:{valueTypes:["text"]},not_contains:{valueTypes:["text"]},starts_with:{valueTypes:["text"]},ends_with:{valueTypes:["text"]},greater_than:{valueTypes:["number","date"]},less_than:{valueTypes:["number","date"]},greater_equal:{valueTypes:["number","date"]},less_equal:{valueTypes:["number","date"]},is_empty:{valueTypes:["text","number","date","select","attachment"]},is_not_empty:{valueTypes:["text","number","date","select","attachment"]},in:{valueTypes:["text","number","select"]},not_in:{valueTypes:["text","number","select"]}})[R]?.valueTypes.includes(S.type)),_=k.includes(p)?p:k[0]||"equals";h(R=>({...R,fieldId:w,operator:_,value:""}))},[e,n,p]),g=y.useCallback(w=>{h(S=>({...S,operator:w,value:""}))},[]),x=y.useCallback(w=>{h(S=>({...S,value:w}))},[]),b=e.map(w=>({value:w.id,label:w.name,description:w.type})),C=n.map(w=>({value:w,label:pO[w]}));return u.jsxs("div",{className:ge("flex items-center gap-3 p-4 rounded-lg border","bg-gray-50/50",l),style:{borderColor:E.colors.border.subtle,backgroundColor:E.colors.surface.hover},children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(Ii,{value:c.fieldId,onChange:m,options:b,placeholder:"选择字段",size:"sm",className:"min-w-[120px]"})}),u.jsx("div",{className:"flex-shrink-0",children:u.jsx(Ii,{value:c.operator,onChange:g,options:C,placeholder:"选择条件",size:"sm",className:"min-w-[100px]"})}),d&&u.jsx("div",{className:"flex-1",children:u.jsx(mO,{field:d,operator:p,value:c.value,onChange:x})}),a&&u.jsx("div",{className:"flex-shrink-0",children:u.jsx(Mn,{icon:_g,variant:"ghost",size:"sm",onClick:i,className:"text-red-500 hover:text-red-700 hover:bg-red-50","aria-label":"删除条件"})})]})}const xO={equals:{label:"等于",valueTypes:["text","number","date","select","boolean"]},not_equals:{label:"不等于",valueTypes:["text","number","date","select","boolean"]},contains:{label:"包含",valueTypes:["text"]},not_contains:{label:"不包含",valueTypes:["text"]},starts_with:{label:"开头是",valueTypes:["text"]},ends_with:{label:"结尾是",valueTypes:["text"]},greater_than:{label:"大于",valueTypes:["number","date"]},less_than:{label:"小于",valueTypes:["number","date"]},greater_equal:{label:"大于等于",valueTypes:["number","date"]},less_equal:{label:"小于等于",valueTypes:["number","date"]},is_empty:{label:"为空",valueTypes:["text","number","date","select","attachment"]},is_not_empty:{label:"不为空",valueTypes:["text","number","date","select","attachment"]},in:{label:"在列表中",valueTypes:["text","number","select"]},not_in:{label:"不在列表中",valueTypes:["text","number","select"]}};function h0(t){return Object.entries(xO).filter(([e,n])=>n.valueTypes.includes(t)).map(([e])=>e)}function yO(t){const e=t[0],n=e?h0(e.type):["equals"];return{id:`condition_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,fieldId:e?.id||"",operator:n[0],value:""}}function bO({isOpen:t,onClose:e,fields:n,conditions:r,onConditionsChange:i,className:a}){const[l,c]=y.useState(r),h=y.useCallback(()=>{const b=yO(n);c(C=>[...C,b])},[n]),d=y.useCallback(b=>{c(C=>C.filter(w=>w.id!==b))},[]),p=y.useCallback(b=>{c(C=>C.map(w=>w.id===b.id?b:w))},[]),m=y.useCallback(()=>{i(l),e()},[l,i,e]),g=y.useCallback(()=>{c([])},[]),x=y.useCallback(()=>{c(r)},[r]);return t?Kl.createPortal(u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:e,children:u.jsxs("div",{className:ge("relative w-full max-w-2xl mx-4","bg-white rounded-lg shadow-xl","animate-in fade-in-0 zoom-in-95 duration-200",a),style:{boxShadow:Tn.xl},onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",style:{borderColor:E.colors.border.subtle},children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md",style:{backgroundColor:E.colors.primary[50]},children:u.jsx(ca,{size:16,style:{color:E.colors.primary[600]}})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold",style:{color:E.colors.text.primary},children:"设置筛选条件"}),u.jsx("p",{className:"text-sm mt-1",style:{color:E.colors.text.secondary},children:"定义数据筛选规则，支持多条件组合"})]})]}),u.jsx(Mn,{icon:Oi,variant:"ghost",size:"sm",onClick:e,"aria-label":"关闭"})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"space-y-4",children:l.length===0?u.jsxs("div",{className:"text-center py-8",style:{color:E.colors.text.tertiary},children:[u.jsx(ca,{size:32,className:"mx-auto mb-3 opacity-50"}),u.jsx("p",{className:"text-sm",children:"暂无筛选条件"}),u.jsx("p",{className:"text-xs mt-1",children:"点击下方按钮添加筛选条件"})]}):l.map((b,C)=>u.jsx(gO,{condition:b,fields:n,operators:h0(n.find(w=>w.id===b.fieldId)?.type||"text"),onUpdate:p,onDelete:()=>d(b.id),showDelete:l.length>1},b.id))}),u.jsx("div",{className:"mt-6",children:u.jsx(Mn,{icon:ua,variant:"secondary",onClick:h,className:"w-full",children:"添加条件"})})]}),u.jsxs("div",{className:"flex items-center justify-between p-6 border-t",style:{borderColor:E.colors.border.subtle},children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Mn,{variant:"ghost",size:"sm",onClick:g,disabled:l.length===0,children:"清除全部"}),u.jsx(Mn,{variant:"ghost",size:"sm",onClick:x,disabled:JSON.stringify(l)===JSON.stringify(r),children:"重置"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Mn,{variant:"secondary",onClick:e,children:"取消"}),u.jsx(Mn,{variant:"primary",onClick:m,children:"确定"})]})]})]})}),document.body):null}function vO({isActive:t,conditionCount:e,onClick:n,onClear:r,variant:i="default",size:a="md",className:l}){const c=e>0;return i==="compact"?u.jsxs("div",{className:ge("relative",l),children:[u.jsx(Mn,{icon:ca,variant:t?"primary":"secondary",size:a,onClick:n,className:ge("transition-all duration-200",t&&"shadow-md"),"aria-label":`筛选${c?` (${e} 个条件)`:""}`}),c&&u.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium",style:{backgroundColor:E.colors.primary[500],color:E.colors.text.inverse},children:e>9?"9+":e}),c&&r&&u.jsx("button",{onClick:h=>{h.stopPropagation(),r()},className:ge("absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center","bg-red-500 text-white text-xs hover:bg-red-600","transition-colors duration-200"),"aria-label":"清除筛选",children:u.jsx(Oi,{size:10})})]}):u.jsxs("div",{className:ge("relative",l),children:[u.jsx(Mn,{icon:ca,variant:t?"primary":"secondary",size:a,onClick:n,className:ge("transition-all duration-200",t&&"shadow-md"),children:"筛选"}),c&&u.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-medium",style:{backgroundColor:E.colors.primary[500],color:E.colors.text.inverse},children:e>9?"9+":e})]})}function wO(t,e,n){return e.length===0?t:t.filter(r=>e.every(i=>{const a=n.find(h=>h.id===i.fieldId);if(!a)return!0;const l=r[a.id],c=i.value;switch(i.operator){case"equals":return l===c;case"not_equals":return l!==c;case"contains":return String(l).toLowerCase().includes(String(c).toLowerCase());case"not_contains":return!String(l).toLowerCase().includes(String(c).toLowerCase());case"starts_with":return String(l).toLowerCase().startsWith(String(c).toLowerCase());case"ends_with":return String(l).toLowerCase().endsWith(String(c).toLowerCase());case"greater_than":return Number(l)>Number(c);case"less_than":return Number(l)<Number(c);case"greater_equal":return Number(l)>=Number(c);case"less_equal":return Number(l)<=Number(c);case"is_empty":return l==null||l==="";case"is_not_empty":return l!=null&&l!=="";case"in":return Array.isArray(c)&&c.includes(l);case"not_in":return Array.isArray(c)&&!c.includes(l);default:return!0}}))}function CO({data:t,fields:e,conditions:n,onConditionsChange:r,onFilteredDataChange:i,buttonVariant:a="default",buttonSize:l="md",className:c}){const[h,d]=y.useState(!1),p=y.useMemo(()=>wO(t,n,e),[t,n,e]);le.useEffect(()=>{i?.(p)},[p,i]);const m=y.useCallback(()=>{d(!0)},[]),g=y.useCallback(()=>{d(!1)},[]),x=y.useCallback(()=>{r([])},[r]),b=y.useCallback(C=>{r(C)},[r]);return u.jsxs("div",{className:c,children:[u.jsx(vO,{isActive:n.length>0,conditionCount:n.length,onClick:m,onClear:n.length>0?x:void 0,variant:a,size:l}),u.jsx(bO,{isOpen:h,onClose:g,fields:e,conditions:n,onConditionsChange:b})]})}const SO={showUndoRedo:!0,showAddNew:!0,showFieldConfig:!0,showRowHeight:!0,showFilter:!0,showSort:!0,showGroup:!0,showSearch:!0};function kO({config:t,fields:e,fieldConfigMode:n="combobox",onFieldToggle:r,onFieldReorder:i,onFieldEdit:a,onFieldDelete:l,onFieldGroup:c,onFieldCopy:h,onFieldInsertLeft:d,onFieldInsertRight:p,onFieldFilter:m,onFieldSort:g,onFieldFreeze:x,rowHeight:b="medium",onRowHeightChange:C,filterFields:w,filterConditions:S=[],onFilterConditionsChange:k,onFilteredDataChange:_,onAddRecord:R,onUndo:T,onRedo:M,onFilter:I,onSort:z,onGroup:D,onSearch:P,isMobile:L=!1,className:H}){const $={...SO,...t};return u.jsxs("div",{className:ge("flex items-center gap-2","px-4 py-2 border-b",H),style:{borderColor:E.colors.border.subtle,backgroundColor:E.colors.surface.base},role:"toolbar","aria-label":"数据操作工具栏",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[$.showAddNew&&R&&u.jsx(Mn,{variant:"primary",size:"sm",icon:ua,onClick:R,children:"添加记录"}),$.showFieldConfig&&e&&n==="combobox"&&u.jsx(dO,{fields:e,onFieldToggle:r,onFieldReorder:i,onFieldEdit:a,onFieldDelete:l,onFieldGroup:c,onFieldCopy:h,onFieldInsertLeft:d,onFieldInsertRight:p,onFieldFilter:m,onFieldSort:g,onFieldFreeze:x}),$.showRowHeight&&u.jsx(hO,{value:b,onChange:C})]}),($.showFilter||$.showSort||$.showGroup)&&u.jsx("div",{className:"w-px h-6 bg-gray-300",style:{backgroundColor:E.colors.border.default}}),u.jsxs("div",{className:"flex items-center gap-2",children:[$.showFilter&&w&&u.jsx(CO,{data:[],fields:w,conditions:S,onConditionsChange:k||(()=>{}),onFilteredDataChange:_,buttonVariant:"default",buttonSize:"sm"}),$.showSort&&z&&u.jsx(Mn,{variant:"secondary",size:"sm",icon:bg,onClick:z,children:!L&&"排序"}),$.showGroup&&D&&u.jsx(Mn,{variant:"secondary",size:"sm",icon:Sk,onClick:D,children:!L&&"分组"})]}),$.showUndoRedo&&u.jsx("div",{className:"w-px h-6 bg-gray-300",style:{backgroundColor:E.colors.border.default}}),$.showUndoRedo&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Mn,{variant:"ghost",size:"sm",icon:u2,onClick:T,"aria-label":"撤销",title:"撤销"}),u.jsx(Mn,{variant:"ghost",size:"sm",icon:Yk,onClick:M,"aria-label":"重做",title:"重做"})]})]})}class _O extends y.Component{constructor(e){super(e),Object.defineProperty(this,"reportError",{enumerable:!0,configurable:!0,writable:!0,value:(n,r)=>{}}),Object.defineProperty(this,"handleRetry",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({hasError:!1,error:null,errorInfo:null})}}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),this.props.onError?.(e,n),this.reportError(e,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:u.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg border border-gray-200",children:[u.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[u.jsx(s2,{className:"h-8 w-8 text-red-500"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grid 渲染出错"})]}),u.jsx("p",{className:"text-gray-600 text-center mb-6 max-w-md",children:"表格组件遇到了一个错误。这可能是由于数据格式问题或网络连接不稳定导致的。"}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:this.handleRetry,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[u.jsx(qk,{className:"h-4 w-4 mr-2"}),"重试"]}),u.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"刷新页面"})]}),!1]}):this.props.children}}function RO({message:t="正在加载..."}){return u.jsxs("div",{className:"flex flex-col items-center justify-center",style:{minHeight:"400px",color:E.colors.text.secondary},children:[u.jsxs("div",{className:"relative",children:[[0,1,2].map(e=>u.jsx("div",{className:"absolute inset-0",style:{width:"48px",height:"48px",borderRadius:"50%",border:`2px solid ${E.colors.primary[500]}`,opacity:.6-e*.2,animation:`pulse 1.5s ease-in-out ${e*.15}s infinite`}},e)),u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",backgroundColor:E.colors.primary[50],display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:E.colors.primary[500]}})})]}),u.jsx("p",{className:"mt-6 text-sm",style:{color:E.colors.text.secondary,fontWeight:E.typography.fontWeight.medium},children:t}),u.jsx("div",{className:"mt-3 flex gap-1.5",children:[0,1,2].map(e=>u.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:E.colors.primary[400],animation:`bounce 1.4s ease-in-out ${e*.16}s infinite`}},e))}),u.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            transform: scale(1);
            opacity: 0.6;
          }
          50% {
            transform: scale(1.3);
            opacity: 0.1;
          }
        }

        @keyframes bounce {
          0%, 80%, 100% {
            transform: translateY(0);
            opacity: 0.5;
          }
          40% {
            transform: translateY(-8px);
            opacity: 1;
          }
        }
      `})]})}function MO({title:t="暂无数据",description:e="开始添加第一条记录吧",actionLabel:n="添加记录",onAction:r,icon:i}){return u.jsxs("div",{className:"flex flex-col items-center justify-center",style:{minHeight:"400px",padding:"48px 24px"},children:[u.jsx("div",{style:{width:"96px",height:"96px",borderRadius:E.radius.xl,backgroundColor:E.colors.surface.hover,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px",border:`1px solid ${E.colors.border.subtle}`},children:i||u.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:E.colors.text.tertiary,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M9 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2H14"}),u.jsx("polyline",{points:"14 2 14 8 20 8"}),u.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),u.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]})}),u.jsx("h3",{style:{fontSize:"18px",fontWeight:E.typography.fontWeight.semibold,color:E.colors.text.primary,marginBottom:"8px",letterSpacing:E.typography.letterSpacing.tight},children:t}),u.jsx("p",{style:{fontSize:"14px",color:E.colors.text.secondary,textAlign:"center",maxWidth:"320px",marginBottom:"24px",lineHeight:"1.6"},children:e}),r&&u.jsxs("button",{onClick:r,className:"group",style:{height:"40px",padding:"0 24px",borderRadius:E.radius.md,backgroundColor:E.colors.primary[500],color:"white",fontSize:"14px",fontWeight:E.typography.fontWeight.medium,border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 150ms cubic-bezier(0.4, 0.0, 0.2, 1)",boxShadow:Tn.sm},onMouseEnter:a=>{a.currentTarget.style.backgroundColor=E.colors.primary[600],a.currentTarget.style.boxShadow=Tn.md,a.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor=E.colors.primary[500],a.currentTarget.style.boxShadow=Tn.sm,a.currentTarget.style.transform="translateY(0)"},onMouseDown:a=>{a.currentTarget.style.transform="translateY(0) scale(0.98)"},onMouseUp:a=>{a.currentTarget.style.transform="translateY(-1px) scale(1)"},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),n]})]})}function TO({title:t="出错了",message:e="加载数据时遇到问题，请稍后重试",actionLabel:n="重新加载",onAction:r,secondaryActionLabel:i="联系支持",onSecondaryAction:a}){return u.jsxs("div",{className:"flex flex-col items-center justify-center",style:{minHeight:"400px",padding:"48px 24px"},children:[u.jsx("div",{style:{width:"96px",height:"96px",borderRadius:E.radius.xl,backgroundColor:E.colors.semantic.error.bg,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px",border:`1px solid ${E.colors.semantic.error.border}`},children:u.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:E.colors.semantic.error.text,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),u.jsx("h3",{style:{fontSize:"18px",fontWeight:E.typography.fontWeight.semibold,color:E.colors.text.primary,marginBottom:"8px",letterSpacing:E.typography.letterSpacing.tight},children:t}),u.jsx("p",{style:{fontSize:"14px",color:E.colors.text.secondary,textAlign:"center",maxWidth:"400px",marginBottom:"24px",lineHeight:"1.6"},children:e}),u.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[r&&u.jsxs("button",{onClick:r,style:{height:"40px",padding:"0 24px",borderRadius:E.radius.md,backgroundColor:E.colors.primary[500],color:"white",fontSize:"14px",fontWeight:E.typography.fontWeight.medium,border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 150ms cubic-bezier(0.4, 0.0, 0.2, 1)",boxShadow:Tn.sm},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=E.colors.primary[600],l.currentTarget.style.boxShadow=Tn.md,l.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor=E.colors.primary[500],l.currentTarget.style.boxShadow=Tn.sm,l.currentTarget.style.transform="translateY(0)"},children:[u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"23 4 23 10 17 10"}),u.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),n]}),a&&u.jsx("button",{onClick:a,style:{height:"40px",padding:"0 24px",borderRadius:E.radius.md,backgroundColor:"transparent",color:E.colors.text.secondary,fontSize:"14px",fontWeight:E.typography.fontWeight.medium,border:`1px solid ${E.colors.border.default}`,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"all 150ms cubic-bezier(0.4, 0.0, 0.2, 1)"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=E.colors.surface.hover,l.currentTarget.style.borderColor=E.colors.border.strong,l.currentTarget.style.color=E.colors.text.primary},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.borderColor=E.colors.border.default,l.currentTarget.style.color=E.colors.text.secondary},children:i})]})]})}function jO({state:t="idle",loadingMessage:e,emptyStateProps:n,errorStateProps:r,gridProps:i,gridRef:a,rowHeight:l,onAddColumn:c,onEditColumn:h,onDeleteColumn:d,onColumnResize:p,onColumnOrdered:m,className:g}){return u.jsx("div",{className:ge("flex min-h-0 flex-1 flex-col",g),role:"main","aria-label":"主内容区",children:u.jsxs("div",{className:"relative flex min-h-0 flex-1",children:[t==="loading"&&u.jsx("div",{role:"status","aria-live":"polite","aria-label":"正在加载",className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:E.colors.surface.base},children:u.jsx(RO,{message:e})}),t==="empty"&&u.jsx("div",{role:"status","aria-live":"polite","aria-label":"无数据",className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:E.colors.surface.base},children:u.jsx(MO,{...n})}),t==="error"&&u.jsx("div",{role:"alert","aria-live":"assertive","aria-label":"发生错误",className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:E.colors.surface.base},children:u.jsx(TO,{...r})}),t==="idle"&&u.jsx(_O,{children:u.jsx(m5,{ref:a,...i,rowHeight:l,onAddColumn:c,onEditColumn:h,onDeleteColumn:d,onColumnResize:p,onColumnOrdered:m})})]})})}function EO({recordCount:t=0,children:e,isMobile:n=!1,className:r}){return u.jsxs("div",{className:ge("border-t flex items-center",n?"h-9 px-2 text-xs flex-col gap-1 justify-center":"h-10 px-4 text-sm justify-between",r),style:{borderColor:E.colors.border.subtle,backgroundColor:E.colors.surface.base,color:E.colors.text.secondary},role:"status","aria-live":"polite","aria-label":"状态栏",children:[u.jsx("div",{"aria-label":`共 ${t} 条记录`,className:"flex items-center gap-2",children:u.jsxs("span",{className:"font-medium",children:["共 ",t," 条记录"]})}),!n&&e&&u.jsx("div",{className:"flex items-center gap-2",children:e})]})}const ag={sm:640,lg:1024};function IO(){if(typeof window>"u")return"desktop";const t=window.innerWidth;return t<ag.sm?"mobile":t<ag.lg?"tablet":"desktop"}function DO(){return typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function ra({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=h=>{h.key==="Enter"&&a&&(h.preventDefault(),a())};return u.jsx("div",{className:"w-full",children:u.jsx("input",{ref:l,type:"text",value:e||"",onChange:h=>n(h.target.value),onKeyDown:c,placeholder:t.description||`请输入${t.name}`,disabled:t.locked,className:ge("w-full h-9 px-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})})}function AO({field:t,value:e,onChange:n,error:r,autoFocus:i}){const a=y.useRef(null);return y.useEffect(()=>{i&&a.current&&a.current.focus()},[i]),u.jsx("div",{className:"w-full",children:u.jsx("textarea",{ref:a,value:e||"",onChange:l=>n(l.target.value),placeholder:t.description||`请输入${t.name}`,disabled:t.locked,rows:4,className:ge("w-full px-3 py-2 rounded-md text-sm","border transition-all resize-vertical","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})})}function OO({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=g=>{g.key==="Enter"&&a&&(g.preventDefault(),a())},h=g=>{const x=g.target.value;if(x===""||x==="-"||x===".")n(x);else{const b=Number(x);isNaN(b)||n(b)}},{min:d,max:p,precision:m}=t.options||{};return u.jsx("div",{className:"w-full",children:u.jsx("input",{ref:l,type:"number",value:e??"",onChange:h,onKeyDown:c,placeholder:t.description||`请输入${t.name}`,disabled:t.locked,min:d,max:p,step:m!==void 0?Math.pow(10,-m):"any",className:ge("w-full h-9 px-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})})}function lg({field:t,value:e,onChange:n,error:r}){const i=!!e;return u.jsxs("div",{className:"w-full flex items-center gap-3",children:[u.jsx("button",{type:"button",role:"switch","aria-checked":i,disabled:t.locked,onClick:()=>n(!i),className:ge("relative inline-flex h-6 w-11 shrink-0 rounded-full","border-2 border-transparent transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",i?"bg-blue-600":"bg-gray-200"),style:{backgroundColor:i?"#3b82f6":t.locked?E.colors.surface.disabled:"#e5e7eb"},children:u.jsx("span",{"aria-hidden":"true",className:ge("pointer-events-none inline-block h-5 w-5 rounded-full","bg-white shadow-lg ring-0 transition-transform",i?"translate-x-5":"translate-x-0")})}),u.jsx("span",{className:"text-sm text-gray-700",children:i?"已选中":"未选中"})]})}function cg({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=p=>{p.key==="Enter"&&a&&(p.preventDefault(),a())},h=e?e instanceof Date?Vo(e,"yyyy-MM-dd"):typeof e=="string"?e.split("T")[0]:"":"",d=p=>{const m=p.target.value;n(m||null)};return u.jsx("div",{className:"w-full",children:u.jsx("input",{ref:l,type:"date",value:h,onChange:d,onKeyDown:c,disabled:t.locked,className:ge("w-full h-9 px-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})})}function zO({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null),c=t.options?.choices||[];y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const h=d=>{d.key==="Enter"&&a&&(d.preventDefault(),a())};return c.length===0?u.jsx("div",{className:"w-full h-9 px-3 rounded-md text-sm flex items-center bg-gray-50 text-gray-500 border border-gray-300",children:"暂无选项"}):u.jsxs("div",{className:"w-full relative",children:[u.jsxs("select",{ref:l,value:e||"",onChange:d=>n(d.target.value||null),onKeyDown:h,disabled:t.locked,className:ge("w-full h-9 pl-3 pr-8 rounded-md text-sm appearance-none","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default},children:[u.jsx("option",{value:"",children:"-- 请选择 --"}),c.map(d=>u.jsx("option",{value:d.id,children:d.name},d.id))]}),u.jsx(Ed,{size:16,className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"})]})}function ug({field:t,value:e,onChange:n,error:r}){const i=t.options?.choices||[],a=Array.isArray(e)?e:[],[l,c]=y.useState(!1),h=m=>{const g=a.includes(m)?a.filter(x=>x!==m):[...a,m];n(g)},d=m=>{n(a.filter(g=>g!==m))},p=i.filter(m=>a.includes(m.id));return i.length===0?u.jsx("div",{className:"w-full h-9 px-3 rounded-md text-sm flex items-center bg-gray-50 text-gray-500 border border-gray-300",children:"暂无选项"}):u.jsxs("div",{className:"w-full",children:[p.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.map(m=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",style:{backgroundColor:m.color?`${m.color}20`:"#dbeafe",color:m.color||"#1e40af"},children:[m.name,u.jsx("button",{type:"button",onClick:()=>d(m.id),className:"hover:bg-black/10 rounded p-0.5 transition-colors",disabled:t.locked,children:u.jsx(Oi,{size:12})})]},m.id))}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>c(!l),disabled:t.locked,className:ge("w-full h-9 px-3 rounded-md text-sm text-left","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default},children:p.length===0?u.jsx("span",{className:"text-gray-500",children:"选择选项..."}):u.jsxs("span",{className:"text-gray-700",children:["已选 ",p.length," 项"]})}),l&&!t.locked&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),u.jsx("div",{className:"absolute z-20 mt-1 w-full max-h-60 overflow-auto rounded-md bg-white shadow-lg border border-gray-200",style:{backgroundColor:E.colors.surface.base,borderColor:E.colors.border.default},children:i.map(m=>{const g=a.includes(m.id);return u.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 hover:bg-gray-50 cursor-pointer transition-colors",style:{backgroundColor:g?"#f0f9ff":void 0},children:[u.jsx("input",{type:"checkbox",checked:g,onChange:()=>h(m.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),u.jsx("span",{className:"text-sm",children:m.name})]},m.id)})})]})]})]})}function PO({field:t,value:e,onChange:n,error:r}){const i=t.options?.max||5,a=typeof e=="number"?e:0,l=c=>{t.locked||n(a===c?0:c)};return u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:i},(c,h)=>h+1).map(c=>{const h=c<=a;return u.jsx("button",{type:"button",onClick:()=>l(c),disabled:t.locked,className:ge("p-1 rounded transition-all","hover:scale-110 active:scale-95",t.locked&&"cursor-not-allowed opacity-50"),"aria-label":`评分 ${c}`,children:u.jsx(xo,{size:24,className:ge("transition-all",h?"fill-yellow-400 text-yellow-400":"fill-none text-gray-300")})},c)}),u.jsx("span",{className:"ml-2 text-sm text-gray-600",children:a>0?`${a} / ${i}`:"未评分"})]}),r&&u.jsx("p",{className:"mt-1 text-xs text-red-600",children:r})]})}function dg({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=h=>{h.key==="Enter"&&a&&(h.preventDefault(),a())};return u.jsx("div",{className:"w-full",children:u.jsxs("div",{className:"relative",children:[u.jsx(Jo,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u.jsx("input",{ref:l,type:"url",value:e||"",onChange:h=>n(h.target.value),onKeyDown:c,placeholder:"https://example.com",disabled:t.locked,className:ge("w-full h-9 pl-9 pr-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})]})})}function NO({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=h=>{h.key==="Enter"&&a&&(h.preventDefault(),a())};return u.jsx("div",{className:"w-full",children:u.jsxs("div",{className:"relative",children:[u.jsx(xa,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u.jsx("input",{ref:l,type:"email",value:e||"",onChange:h=>n(h.target.value),onKeyDown:c,placeholder:"example@email.com",disabled:t.locked,className:ge("w-full h-9 pl-9 pr-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})]})})}function FO({field:t,value:e,onChange:n,error:r,autoFocus:i,onEnter:a}){const l=y.useRef(null);y.useEffect(()=>{i&&l.current&&l.current.focus()},[i]);const c=h=>{h.key==="Enter"&&a&&(h.preventDefault(),a())};return u.jsx("div",{className:"w-full",children:u.jsxs("div",{className:"relative",children:[u.jsx(ya,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u.jsx("input",{ref:l,type:"tel",value:e||"",onChange:h=>n(h.target.value),onKeyDown:c,placeholder:"138****8888",disabled:t.locked,className:ge("w-full h-9 pl-9 pr-3 rounded-md text-sm","border transition-all","focus:outline-none focus:ring-2",r?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-blue-200",t.locked&&"bg-gray-50 cursor-not-allowed"),style:{backgroundColor:t.locked?E.colors.surface.disabled:E.colors.surface.base,borderColor:r?"#fca5a5":E.colors.border.default}})]})})}const LO={text:ra,singleLineText:ra,longText:AO,number:OO,boolean:lg,checkbox:lg,date:cg,dateTime:cg,singleSelect:zO,multipleSelect:ug,multiSelect:ug,rating:PO,link:dg,url:dg,email:NO,phone:FO,user:ra,attachment:ra,formula:()=>null,rollup:()=>null,count:()=>null,createdTime:()=>null,lastModifiedTime:()=>null,createdBy:()=>null,lastModifiedBy:()=>null,autoNumber:()=>null,button:()=>null};function HO(t){const e=LO[t];return e||(console.warn(`No editor found for field type: ${t}, using TextEditor as fallback`),ra)}function BO(t){return!["formula","rollup","count","createdTime","lastModifiedTime","createdBy","lastModifiedBy","autoNumber","button"].includes(t)}const WO=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,$O=/^https?:\/\/.+/,YO=/^1[3-9]\d{9}$/;function VO(t,e,n){if(t.required&&(e==null||e===""||Array.isArray(e)&&e.length===0))return n.required;if(e==null||e==="")return null;switch(t.type){case"number":{const r=Number(e);if(isNaN(r))return n.invalidFormat;if(t.options?.min!==void 0&&r<t.options.min)return`最小值为 ${t.options.min}`;if(t.options?.max!==void 0&&r>t.options.max)return`最大值为 ${t.options.max}`;break}case"link":{if(!$O.test(e))return"请输入有效的链接（以 http:// 或 https:// 开头）";break}case"email":{if(!WO.test(e))return"请输入有效的邮箱地址";break}case"phone":{if(!YO.test(e))return"请输入有效的手机号码";break}case"date":{const r=new Date(e);if(isNaN(r.getTime()))return"请输入有效的日期";break}case"rating":{const r=Number(e),i=t.options?.max||5;if(isNaN(r)||r<0||r>i)return`评分范围: 0-${i}`;break}case"singleSelect":{const r=t.options?.choices||[];if(r.length>0&&!r.find(i=>i.id===e||i.name===e))return"请选择有效的选项";break}case"multipleSelect":{if(!Array.isArray(e))return"请选择至少一个选项";const r=t.options?.choices||[];if(r.length>0){const i=r.map(l=>l.id);if(e.filter(l=>!i.includes(l)).length>0)return"包含无效的选项"}break}}return null}function qO(t,e,n){const r={};for(const i of t){if(i.visible===!1||i.locked)continue;const a=e[i.id],l=VO(i,a,n);l&&(r[i.id]=l)}return r}function UO(t){return Object.keys(t).length>0}const GO={title:"添加记录",cancel:"取消",save:"保存",saving:"保存中...",required:"此字段为必填项",invalidFormat:"格式不正确"};function XO(t){const{isOpen:e,onClose:n,fields:r,tableId:i,adapter:a,onSuccess:l,onError:c,defaultValues:h={},customEditors:d={},transformBeforeSubmit:p,locale:m}=t,g={...GO,...m},[x,b]=y.useState(h),[C,w]=y.useState({}),[S,k]=y.useState(!1),[_,R]=y.useState(null),T=y.useRef(null),M=y.useRef(null),I=y.useCallback(()=>{b(h),w({}),R(null)},[h]),D=[...r.filter($=>$.visible!==!1&&!$.locked&&BO($.type))].sort(($,Y)=>$.isPrimary&&!Y.isPrimary?-1:!$.isPrimary&&Y.isPrimary?1:0),P=y.useCallback(($,Y)=>{b(te=>({...te,[$]:Y})),w(te=>{const J={...te};return delete J[$],J}),R(null)},[]),L=y.useCallback(async()=>{const $=qO(D,x,g);if(w($),!UO($)){if(!a){R("未配置数据适配器，无法保存"),console.error("AddRecordDialog: adapter is required for submission");return}k(!0),R(null);try{let Y={...x};p&&(Y=p(Y));const J=await $r(a).createRecord(i,{fields:Y});l&&l(J),I(),n()}catch(Y){console.error("Failed to create record:",Y),R(Y.message||"保存失败，请重试"),c&&c(Y)}finally{k(!1)}}},[D,x,g,a,i,p,l,c,n,I]);y.useEffect(()=>{if(!e)return;const $=Y=>{Y.key==="Escape"&&!S&&n()};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[e,S,n]),y.useEffect(()=>(e?(M.current=document.activeElement,document.body.style.overflow="hidden",setTimeout(()=>{const $=T.current?.querySelector("input:not([disabled]), textarea:not([disabled]), select:not([disabled])");$&&$.focus()},100)):(document.body.style.overflow="",M.current&&M.current.focus()),()=>{document.body.style.overflow=""}),[e]),y.useEffect(()=>{if(!e||!T.current)return;const $=Y=>{if(Y.key!=="Tab")return;const te=T.current.querySelectorAll('button:not([disabled]), input:not([disabled]), textarea:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'),J=te[0],re=te[te.length-1];Y.shiftKey&&document.activeElement===J?(Y.preventDefault(),re?.focus()):!Y.shiftKey&&document.activeElement===re&&(Y.preventDefault(),J?.focus())};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[e]);const H=y.useCallback(()=>{S||L()},[S,L]);return e?Kl.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4","aria-modal":"true",role:"dialog","aria-labelledby":"add-record-dialog-title",children:[u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>!S&&n(),"aria-hidden":"true"}),u.jsxs("div",{ref:T,className:ge("relative z-[1001] w-full rounded-lg bg-white","max-w-2xl max-h-[90vh] flex flex-col","shadow-2xl","animate-in fade-in-0 zoom-in-95 duration-200"),style:{backgroundColor:E.colors.surface.base,boxShadow:Tn.xl},children:[u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",style:{borderColor:E.colors.border.subtle},children:[u.jsx("h3",{id:"add-record-dialog-title",className:"text-lg font-semibold",style:{color:E.colors.text.primary},children:g.title}),u.jsx("button",{type:"button",onClick:n,disabled:S,className:ge("p-1 rounded-md text-gray-500 hover:text-gray-700","hover:bg-gray-100 transition-colors","focus:outline-none focus:ring-2 focus:ring-blue-500",S&&"cursor-not-allowed opacity-50"),"aria-label":"关闭",children:u.jsx(Oi,{size:20})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[D.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:u.jsx("p",{children:"暂无可编辑的字段"})}):u.jsx("div",{className:"space-y-4",children:D.map($=>{const Y=d[$.type]||HO($.type),te=C[$.id],J=x[$.id];return u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{htmlFor:`field-${$.id}`,className:"flex items-center gap-1 text-sm font-medium",style:{color:E.colors.text.primary},children:[u.jsx("span",{children:$.name}),$.required&&u.jsx("span",{className:"text-red-500","aria-label":"必填",children:"*"}),$.isPrimary&&u.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-blue-100 text-blue-700","aria-label":"主字段",children:"主字段"})]}),u.jsx(Y,{field:$,value:J,onChange:re=>P($.id,re),error:te,autoFocus:D.indexOf($)===0,onEnter:H}),te&&u.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[u.jsx(mp,{size:12}),te]}),$.description&&!te&&u.jsx("p",{className:"text-xs text-gray-500",children:$.description})]},$.id)})}),_&&u.jsxs("div",{className:"mt-4 p-3 rounded-md bg-red-50 border border-red-200 flex items-start gap-2",role:"alert",children:[u.jsx(mp,{size:16,className:"text-red-600 mt-0.5"}),u.jsx("p",{className:"text-sm text-red-700",children:_})]})]}),u.jsxs("div",{className:"flex justify-end gap-2 px-6 py-4 border-t",style:{borderColor:E.colors.border.subtle},children:[u.jsx("button",{type:"button",onClick:n,disabled:S,className:ge("px-4 h-9 rounded-md text-sm font-medium","border transition-all","hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",S&&"cursor-not-allowed opacity-50"),style:{borderColor:E.colors.border.default,color:E.colors.text.primary},children:g.cancel}),u.jsx("button",{type:"button",onClick:L,disabled:S||D.length===0,className:ge("px-4 h-9 rounded-md text-sm font-medium","bg-blue-600 text-white","hover:bg-blue-700 active:bg-blue-800","transition-all shadow-sm hover:shadow-md","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-blue-600"),children:S?u.jsxs(u.Fragment,{children:[u.jsx(Ak,{size:16,className:"inline-block mr-2 animate-spin"}),g.saving]}):g.save})]})]})]}),document.body):null}const QO=[{key:"table",label:"表"},{key:"chart",label:"示图"}];function ZO(t){const{state:e="idle",loadingMessage:n,emptyStateProps:r,errorStateProps:i,showHeader:a=!0,showToolbar:l=!0,showStatus:c=!0,tabs:h=QO,defaultTabKey:d="table",onAdd:p,views:m,activeViewId:g,onViewChange:x,onCreateView:b,onRenameView:C,onDeleteView:w,apiClient:S,sdk:k,tableId:_,fields:R,onFieldToggle:T,onFieldReorder:M,onFieldEdit:I,onFieldDelete:z,onFieldGroup:D,onFieldCopy:P,onFieldInsertLeft:L,onFieldInsertRight:H,onFieldFilter:$,onFieldSort:Y,onFieldFreeze:te,onAddField:J,onAddColumn:re,onEditColumn:ie,onDeleteColumn:G,onUpdateField:U,fieldConfigMode:ce="combobox",rowHeight:ue="medium",onRowHeightChange:pe,filterFields:He,filterConditions:V=[],onFilterConditionsChange:se,onFilteredDataChange:ze,toolbarConfig:Ne,onToolbar:ae,gridProps:ve,statusContent:je,className:Qe,style:Ue}=t,Me=y.useRef(null),[Fe,st]=y.useState(d),[Ee,Ze]=y.useState("desktop"),[Et,mt]=y.useState(!1),[gt,Ot]=y.useState(ue),[xt,Dt]=y.useState({}),[Bt,an]=y.useState([]),[ln,Xt]=y.useState(!1),[cn,un]=y.useState(!1),[Cn,yt]=y.useState(!1),[Qn,Sn]=y.useState(null),[jt,gn]=y.useState([]),[En,me]=y.useState(""),[ut,Re]=y.useState(!1),ke=oE();y.useEffect(()=>{const De=()=>{Ze(IO()),mt(DO())};return De(),window.addEventListener("resize",De),()=>window.removeEventListener("resize",De)},[]),y.useEffect(()=>{Ot(ue)},[ue]),y.useEffect(()=>{if(!_||!(k||S))return;(async()=>{try{Re(!0);const We=await $r(k||S).getViews(_);gn(We),!g&&We.length>0&&me(We[0].id),console.log("✅ 视图数据自动加载完成:",{viewsCount:We.length,activeViewId:g||We[0]?.id})}catch(Ge){console.error("❌ 加载视图数据失败:",Ge),ke.showToast({type:"error",message:"加载视图数据失败"})}finally{Re(!1)}})()},[_,k,S,g,ke]),y.useEffect(()=>{g&&me(g)},[g]);const Wt=y.useCallback(async De=>{if(x){x(De);return}me(De),ke.showToast({type:"info",message:"视图切换成功"})},[x,ke]),Be=y.useCallback(async De=>{if(b){b(De);return}try{if(!_||!(k||S)){console.error("❌ 缺少 sdk/apiClient 或 tableId");return}const Ge=$r(k||S),We=De==="grid"?"表格视图":"看板视图",$t=jt.filter(Yt=>Yt.type!==De?!1:new RegExp(`^${We} \\d+$`).test(Yt.name)).map(Yt=>{const hr=Yt.name.match(new RegExp(`^${We} (\\d+)$`));return hr?parseInt(hr[1],10):0}).filter(Yt=>Yt>0).sort((Yt,hr)=>Yt-hr);let rn=1;for(const Yt of $t)if(Yt===rn)rn++;else break;const Zt=`${We} ${rn}`,Wn=await Ge.createView(_,{tableId:_,name:Zt,type:De});gn(Yt=>[...Yt,Wn]),me(Wn.id),ke.showToast({type:"success",message:`已创建${Zt}并自动切换`})}catch(Ge){console.error("❌ 创建视图失败:",Ge),ke.showToast({type:"error",message:"创建视图失败"})}},[b,k,S,_,jt,ke]),At=y.useCallback(async(De,Ge)=>{if(C){C(De,Ge);return}try{if(!_||!(k||S))return;const Ct=await $r(k||S).updateView(_,De,{name:Ge});gn($t=>$t.map(rn=>rn.id===De?Ct:rn)),ke.showToast({type:"success",message:"重命名成功"})}catch(We){console.error("❌ 重命名视图失败:",We),ke.showToast({type:"error",message:"重命名失败"})}},[C,k,S,_,ke]),_r=y.useCallback(async De=>{if(w){w(De);return}try{if(!_||!(k||S))return;await $r(k||S).deleteView(_,De),gn(We=>We.filter(Ct=>Ct.id!==De)),me(We=>We===De?jt[0]?.id||"":We),ke.showToast({type:"success",message:"已删除视图"})}catch(Ge){console.error("❌ 删除视图失败:",Ge),ke.showToast({type:"error",message:"删除失败"})}},[w,k,S,_,ke,jt]),dr=y.useCallback(async(De,Ge,We)=>{if(J){J(De,Ge);return}try{if(!_||!(k||S)){console.error("❌ 缺少 sdk/apiClient 或 tableId");return}await $r(k||S).createField(_,{name:De,type:Ge,options:We||{}}),Xt(!1),ve.onDataRefresh?.(),ke.showToast({type:"success",message:"字段创建成功"})}catch(Ct){console.error("❌ 字段创建失败:",Ct),ke.showToast({type:"error",message:"字段创建失败"})}},[J,k,S,_,ve,ke]),Qt=y.useCallback(async(De,Ge,We,Ct)=>{if(re){re(De,Ge,We,Ct);return}try{if(!_||!(k||S))return;await $r(k||S).createField(_,{name:We||`新字段_${Date.now()}`,type:De,options:Ct||{}}),ve.onDataRefresh?.(),ke.showToast({type:"success",message:"字段添加成功"})}catch($t){console.error("❌ Grid 字段创建失败:",$t),ke.showToast({type:"error",message:"字段添加失败"})}},[re,k,S,_,ve,ke]),In=y.useCallback((De,Ge,We)=>{if(ve.onColumnResize){ve.onColumnResize(De,Ge,We);return}Dt(Ct=>({...Ct,[De.id]:Ge}))},[ve]),Rr=y.useCallback((De,Ge)=>{if(ve.onColumnOrdered){ve.onColumnOrdered(De,Ge);return}an(We=>{const Ct=[...We];if(Ct.length===0)return Array.from({length:ve.columns?.length||0},(Zt,Wn)=>Wn);const $t=De.sort((Zt,Wn)=>Wn-Zt);$t.forEach(Zt=>Ct.splice(Zt,1));const rn=$t[0]<Ge?Ge-$t.length:Ge;return Ct.splice(rn,0,...De),Ct})},[ve]),Mr=y.useCallback(De=>{Ot(De),pe?.(De)},[pe]),Zn=Ee==="mobile",Co=y.useMemo(()=>m&&m.length>0?m:jt,[m,jt]),fr=y.useMemo(()=>g||En,[g,En]),ei=y.useMemo(()=>({short:28,medium:32,tall:40,"extra-tall":56})[gt]||32,[gt]),Jn=y.useMemo(()=>{if(!ve.columns)return ve;const Ge=(Bt.length===0?Array.from({length:ve.columns.length},(We,Ct)=>Ct):Bt).map(We=>{const Ct=ve.columns[We];return{...Ct,width:xt[Ct.id]??Ct.width??150}});return{...ve,columns:Ge}},[ve,xt,Bt]);return u.jsxs("div",{className:ge("flex h-full w-full flex-col",Qe),style:Ue,role:"application","aria-label":"数据视图",children:[a&&u.jsx(tO,{tabs:h,activeTabKey:Fe,onTabChange:st,views:Co,activeViewId:fr,onViewChange:Wt,onCreateView:Be,onRenameView:At,onDeleteView:_r,onAdd:p,isMobile:Zn,isTouch:Et}),l&&Fe==="table"&&u.jsx(kO,{config:Ne,fields:R,fieldConfigMode:ce,onFieldToggle:T,onFieldReorder:M,onFieldEdit:I,onFieldDelete:z,onFieldGroup:D,onFieldCopy:P,onFieldInsertLeft:L,onFieldInsertRight:H,onFieldFilter:$,onFieldSort:Y,onFieldFreeze:te,rowHeight:gt,onRowHeightChange:Mr,filterFields:He,filterConditions:V,onFilterConditionsChange:se,onFilteredDataChange:ze,onAddRecord:()=>yt(!0),onUndo:ae?.onUndo,onRedo:ae?.onRedo,onFilter:ae?.onFilter,onSort:ae?.onSort,onGroup:ae?.onGroup,isMobile:Zn}),Fe==="table"?u.jsx(jO,{state:e,loadingMessage:n,emptyStateProps:r,errorStateProps:i,gridProps:Jn,gridRef:Me,rowHeight:ei,onAddColumn:Qt,onEditColumn:ie,onDeleteColumn:G,onColumnResize:In,onColumnOrdered:Rr}):u.jsx("div",{className:"flex flex-1 items-center justify-center text-sm text-gray-500",children:"图表视图将在后续版本中提供"}),c&&u.jsx(EO,{recordCount:ve.rowCount,isMobile:Zn,children:je}),R&&_&&u.jsxs(u.Fragment,{children:[u.jsx(rO,{isOpen:ln,onClose:()=>Xt(!1),onConfirm:(De,Ge,We)=>dr(De,Ge,We)}),u.jsx(XO,{isOpen:Cn,onClose:()=>yt(!1),fields:R,tableId:_,adapter:k||S,onSuccess:()=>{ve.onDataRefresh?.(),ke.showToast({type:"success",message:"记录添加成功"})},onError:()=>{ke.showToast({type:"error",message:"记录添加失败"})}})]})]})}function JO(t){const{baseURL:e,token:n,tableId:r,autoLoad:i=!0,limit:a=100,offset:l=0,sdk:c,apiClient:h}=t,[d,p]=y.useState({table:null,fields:[],records:[],totalRecords:0,loading:!1,error:null}),m=y.useMemo(()=>{if(h)return h;if(c)return $r(c);if(e)return new X5({baseURL:e,token:n,onError:k=>{console.error("API Error:",k),p(_=>({..._,error:k.message||"API 请求失败"}))},onUnauthorized:()=>{console.log("未授权，需要重新登录"),p(k=>({...k,error:"未授权，请重新登录"}))}});throw new Error("必须提供 baseURL、sdk 或 apiClient 其中之一")},[e,n,c,h]),g=y.useCallback(async()=>{if(r){p(k=>({...k,loading:!0,error:null}));try{const[k,_,R]=await Promise.all([m.getTable(r),m.getFields(r),m.getRecords(r,{skip:l,take:a})]);let T=[];R&&(Array.isArray(R)?T=R:R.data?Array.isArray(R.data)?T=R.data:R.data.list&&Array.isArray(R.data.list)&&(T=R.data.list):R.list&&Array.isArray(R.list)&&(T=R.list));const M=R?.total||R?.data?.total||T.length;p({table:k,fields:_,records:T,totalRecords:M,loading:!1,error:null}),console.log(`✅ 表格数据加载完成: ${k.name} (${T.length}/${M} 条记录)`,{recordsResponse:R,recordsData:T.slice(0,2),fieldsCount:_.length})}catch(k){console.error("❌ 加载表格数据失败:",k),p(_=>({..._,loading:!1,error:k.message||"加载数据失败"}))}}},[m,r,a,l]),x=y.useCallback(async k=>{if(!r)throw new Error("表格ID不能为空");try{const _=await m.createRecord(r,{fields:k});return p(R=>({...R,records:[_,...R.records],totalRecords:R.totalRecords+1})),console.log("✅ 记录创建成功:",_.id),_}catch(_){throw console.error("❌ 创建记录失败:",_),_}},[m,r]),b=y.useCallback(async(k,_,R)=>{if(!r)throw new Error("表格ID不能为空");try{const T=await m.updateRecord(r,k,_,R);return p(M=>({...M,records:M.records.map(I=>I.id===k?T:I)})),console.log("✅ 记录更新成功:",k),T}catch(T){throw console.error("❌ 更新记录失败:",T),T}},[m,r]),C=y.useCallback(async k=>{if(!r)throw new Error("表格ID不能为空");try{await m.deleteRecord(r,k),p(_=>({..._,records:_.records.filter(R=>R.id!==k),totalRecords:_.totalRecords-1})),console.log("✅ 记录删除成功:",k)}catch(_){throw console.error("❌ 删除记录失败:",_),_}},[m,r]),w=y.useMemo(()=>Wj(d.fields,d.records),[d.fields,d.records]),S=y.useMemo(()=>$j(d.fields),[d.fields]);return y.useEffect(()=>{i&&r&&g()},[i,r,g]),{...d,columns:S,rowCount:d.records.length,loadTableData:g,createRecord:x,updateRecord:b,deleteRecord:C,getCellContent:w,apiClient:m}}function KO(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Jd="ScrollArea",[p0]=hS(Jd),[e3,kr]=p0(Jd),m0=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...l}=t,[c,h]=y.useState(null),[d,p]=y.useState(null),[m,g]=y.useState(null),[x,b]=y.useState(null),[C,w]=y.useState(null),[S,k]=y.useState(0),[_,R]=y.useState(0),[T,M]=y.useState(!1),[I,z]=y.useState(!1),D=ws(e,L=>h(L)),P=fS(i);return u.jsx(e3,{scope:n,type:r,dir:P,scrollHideDelay:a,scrollArea:c,viewport:d,onViewportChange:p,content:m,onContentChange:g,scrollbarX:x,onScrollbarXChange:b,scrollbarXEnabled:T,onScrollbarXEnabledChange:M,scrollbarY:C,onScrollbarYChange:w,scrollbarYEnabled:I,onScrollbarYEnabledChange:z,onCornerWidthChange:k,onCornerHeightChange:R,children:u.jsx(ga.div,{dir:P,...l,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});m0.displayName=Jd;var g0="ScrollAreaViewport",x0=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,l=kr(g0,n),c=y.useRef(null),h=ws(e,c,l.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),u.jsx(ga.div,{"data-radix-scroll-area-viewport":"",...a,ref:h,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:u.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});x0.displayName=g0;var Xr="ScrollAreaScrollbar",y0=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=kr(Xr,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=i,c=t.orientation==="horizontal";return y.useEffect(()=>(c?a(!0):l(!0),()=>{c?a(!1):l(!1)}),[c,a,l]),i.type==="hover"?u.jsx(t3,{...r,ref:e,forceMount:n}):i.type==="scroll"?u.jsx(n3,{...r,ref:e,forceMount:n}):i.type==="auto"?u.jsx(b0,{...r,ref:e,forceMount:n}):i.type==="always"?u.jsx(Kd,{...r,ref:e}):null});y0.displayName=Xr;var t3=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=kr(Xr,t.__scopeScrollArea),[a,l]=y.useState(!1);return y.useEffect(()=>{const c=i.scrollArea;let h=0;if(c){const d=()=>{window.clearTimeout(h),l(!0)},p=()=>{h=window.setTimeout(()=>l(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",p),()=>{window.clearTimeout(h),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",p)}}},[i.scrollArea,i.scrollHideDelay]),u.jsx(ec,{present:n||a,children:u.jsx(b0,{"data-state":a?"visible":"hidden",...r,ref:e})})}),n3=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=kr(Xr,t.__scopeScrollArea),a=t.orientation==="horizontal",l=dc(()=>h("SCROLL_END"),100),[c,h]=KO("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>h("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,i.scrollHideDelay,h]),y.useEffect(()=>{const d=i.viewport,p=a?"scrollLeft":"scrollTop";if(d){let m=d[p];const g=()=>{const x=d[p];m!==x&&(h("SCROLL"),l()),m=x};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[i.viewport,a,h,l]),u.jsx(ec,{present:n||c!=="hidden",children:u.jsx(Kd,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ki(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:ki(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),b0=y.forwardRef((t,e)=>{const n=kr(Xr,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,l]=y.useState(!1),c=t.orientation==="horizontal",h=dc(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;l(c?d:p)}},10);return bs(n.viewport,h),bs(n.content,h),u.jsx(ec,{present:r||a,children:u.jsx(Kd,{"data-state":a?"visible":"hidden",...i,ref:e})})}),Kd=y.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=kr(Xr,t.__scopeScrollArea),a=y.useRef(null),l=y.useRef(0),[c,h]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=k0(c.viewport,c.content),p={...r,sizes:c,onSizesChange:h,hasThumb:d>0&&d<1,onThumbChange:g=>a.current=g,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:g=>l.current=g};function m(g,x){return l3(g,l.current,c,x)}return n==="horizontal"?u.jsx(r3,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollLeft,x=fg(g,c,i.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollLeft=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollLeft=m(g,i.dir))}}):n==="vertical"?u.jsx(o3,{...p,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const g=i.viewport.scrollTop,x=fg(g,c);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{i.viewport&&(i.viewport.scrollTop=g)},onDragScroll:g=>{i.viewport&&(i.viewport.scrollTop=m(g))}}):null}),r3=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=kr(Xr,t.__scopeScrollArea),[l,c]=y.useState(),h=y.useRef(null),d=ws(e,h,a.onScrollbarXChange);return y.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),u.jsx(w0,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":uc(n)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,m)=>{if(a.viewport){const g=a.viewport.scrollLeft+p.deltaX;t.onWheelScroll(g),R0(g,m)&&p.preventDefault()}},onResize:()=>{h.current&&a.viewport&&l&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Ql(l.paddingLeft),paddingEnd:Ql(l.paddingRight)}})}})}),o3=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=kr(Xr,t.__scopeScrollArea),[l,c]=y.useState(),h=y.useRef(null),d=ws(e,h,a.onScrollbarYChange);return y.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),u.jsx(w0,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":uc(n)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,m)=>{if(a.viewport){const g=a.viewport.scrollTop+p.deltaY;t.onWheelScroll(g),R0(g,m)&&p.preventDefault()}},onResize:()=>{h.current&&a.viewport&&l&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Ql(l.paddingTop),paddingEnd:Ql(l.paddingBottom)}})}})}),[i3,v0]=p0(Xr),w0=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:h,onDragScroll:d,onWheelScroll:p,onResize:m,...g}=t,x=kr(Xr,n),[b,C]=y.useState(null),w=ws(e,D=>C(D)),S=y.useRef(null),k=y.useRef(""),_=x.viewport,R=r.content-r.viewport,T=yi(p),M=yi(h),I=dc(m,10);function z(D){if(S.current){const P=D.clientX-S.current.left,L=D.clientY-S.current.top;d({x:P,y:L})}}return y.useEffect(()=>{const D=P=>{const L=P.target;b?.contains(L)&&T(P,R)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[_,b,R,T]),y.useEffect(M,[r,M]),bs(b,I),bs(x.content,I),u.jsx(i3,{scope:n,scrollbar:b,hasThumb:i,onThumbChange:yi(a),onThumbPointerUp:yi(l),onThumbPositionChange:M,onThumbPointerDown:yi(c),children:u.jsx(ga.div,{...g,ref:w,style:{position:"absolute",...g.style},onPointerDown:ki(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),S.current=b.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),z(D))}),onPointerMove:ki(t.onPointerMove,z),onPointerUp:ki(t.onPointerUp,D=>{const P=D.target;P.hasPointerCapture(D.pointerId)&&P.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=k.current,x.viewport&&(x.viewport.style.scrollBehavior=""),S.current=null})})})}),Xl="ScrollAreaThumb",C0=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=v0(Xl,t.__scopeScrollArea);return u.jsx(ec,{present:n||i.hasThumb,children:u.jsx(s3,{ref:e,...r})})}),s3=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=kr(Xl,n),l=v0(Xl,n),{onThumbPositionChange:c}=l,h=ws(e,m=>l.onThumbChange(m)),d=y.useRef(void 0),p=dc(()=>{d.current&&(d.current(),d.current=void 0)},100);return y.useEffect(()=>{const m=a.viewport;if(m){const g=()=>{if(p(),!d.current){const x=c3(m,c);d.current=x,c()}};return c(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[a.viewport,p,c]),u.jsx(ga.div,{"data-state":l.hasThumb?"visible":"hidden",...i,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ki(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),b=m.clientX-x.left,C=m.clientY-x.top;l.onThumbPointerDown({x:b,y:C})}),onPointerUp:ki(t.onPointerUp,l.onThumbPointerUp)})});C0.displayName=Xl;var ef="ScrollAreaCorner",S0=y.forwardRef((t,e)=>{const n=kr(ef,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?u.jsx(a3,{...t,ref:e}):null});S0.displayName=ef;var a3=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=kr(ef,n),[a,l]=y.useState(0),[c,h]=y.useState(0),d=!!(a&&c);return bs(i.scrollbarX,()=>{const p=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(p),h(p)}),bs(i.scrollbarY,()=>{const p=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(p),l(p)}),d?u.jsx(ga.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ql(t){return t?parseInt(t,10):0}function k0(t,e){const n=t/e;return isNaN(n)?0:n}function uc(t){const e=k0(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function l3(t,e,n,r="ltr"){const i=uc(n),a=i/2,l=e||a,c=i-l,h=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-c,p=n.content-n.viewport,m=r==="ltr"?[0,p]:[p*-1,0];return _0([h,d],m)(t)}function fg(t,e,n="ltr"){const r=uc(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,l=e.content-e.viewport,c=a-r,h=n==="ltr"?[0,l]:[l*-1,0],d=mS(t,h);return _0([0,l],[0,c])(d)}function _0(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function R0(t,e){return t>0&&t<e}var c3=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const a={left:t.scrollLeft,top:t.scrollTop},l=n.left!==a.left,c=n.top!==a.top;(l||c)&&e(),n=a,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function dc(t,e){const n=yi(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function bs(t,e){const n=yi(e);pS(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var u3=m0,d3=x0,f3=S0;function h3({className:t,children:e,...n}){return u.jsxs(u3,{"data-slot":"scroll-area",className:jd("relative",t),...n,children:[u.jsx(d3,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),u.jsx(p3,{}),u.jsx(f3,{})]})}function p3({className:t,orientation:e="vertical",...n}){return u.jsx(y0,{"data-slot":"scroll-area-scrollbar",orientation:e,className:jd("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:u.jsx(C0,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function m3({base:t,tables:e,views:n,selectedTableId:r,onTableSelect:i,onTableCreate:a,onTableDelete:l,loading:c=!1}){const h=Zl(),{baseId:d}=Jl(),[p,m]=y.useState(!1),[g,x]=y.useState(""),[b,C]=y.useState(""),[w,S]=y.useState(!1),k=async()=>{if(!g.trim()){wn.error("请输入表格名称");return}try{m(!0),await a(g.trim(),b.trim()||void 0),x(""),C(""),S(!1),wn.success("创建表格成功")}catch(_){wn.error(_?.message||"创建表格失败")}finally{m(!1)}};return c?u.jsxs("div",{className:"w-64 bg-muted/20 p-4",style:{borderRight:"4px solid #eeeeee"},children:[u.jsx(Ju,{className:"h-6 w-32 mb-4"}),u.jsx("div",{className:"space-y-2",children:[1,2,3].map(_=>u.jsx(Ju,{className:"h-16 w-full"},_))})]}):u.jsxs("div",{className:"w-64 bg-muted/20 flex flex-col",style:{borderRight:"1px solidrgba(239, 229, 229, 0.73)"},children:[u.jsx("div",{className:"p-3 border-b bg-muted/10",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center",children:u.jsx(Ku,{className:"h-4 w-4 text-primary"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h2",{className:"font-semibold text-sm truncate",children:t?.name||"数据库"}),t?.description&&u.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.description})]})]})}),u.jsx(h3,{className:"flex-1",children:u.jsxs("div",{className:"p-3 space-y-3",children:[u.jsxs(gS,{open:w,onOpenChange:S,children:[u.jsx(xS,{asChild:!0,children:u.jsxs(po,{disabled:p,className:"w-full h-8 gap-2 bg-primary hover:bg-primary/90 text-primary-foreground text-xs",size:"sm",children:[u.jsx(yS,{className:"h-3 w-3"}),p?"创建中...":"新建表格"]})}),u.jsxs(bS,{className:"sm:max-w-[425px]",children:[u.jsxs(vS,{children:[u.jsx(wS,{children:"创建新表格"}),u.jsx(CS,{children:"在当前数据库中创建一个新的表格"})]}),u.jsxs("div",{className:"grid gap-4 py-4",children:[u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(up,{htmlFor:"table-name",className:"text-right",children:"表格名称"}),u.jsx(dS,{id:"table-name",placeholder:"例如：客户列表",value:g,onChange:_=>x(_.target.value),disabled:p,className:"col-span-3"})]}),u.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[u.jsx(up,{htmlFor:"table-description",className:"text-right",children:"描述"}),u.jsx(SS,{id:"table-description",placeholder:"简要描述这个表格的用途（可选）",value:b,onChange:_=>C(_.target.value),disabled:p,className:"col-span-3",rows:3})]})]}),u.jsxs(kS,{children:[u.jsx(po,{variant:"outline",onClick:()=>{x(""),C(""),S(!1)},disabled:p,children:"取消"}),u.jsx(po,{onClick:k,disabled:p,children:p?"创建中...":"创建"})]})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"数据表"}),e.length===0?u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(ed,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"暂无数据表"})]}):u.jsx("div",{className:"space-y-1",children:e.map(_=>u.jsxs("div",{className:jd("group flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors","hover:bg-muted/50",r===_.id&&"bg-primary/10 text-primary"),onClick:()=>i(_),children:[u.jsx(ed,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),u.jsx("span",{className:"font-medium text-xs truncate flex-1",children:_.name}),u.jsxs(_S,{children:[u.jsx(RS,{asChild:!0,children:u.jsx(po,{variant:"ghost",size:"icon",className:"h-5 w-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:R=>R.stopPropagation(),children:u.jsx(MS,{className:"h-3 w-3"})})}),u.jsxs(TS,{align:"end",children:[u.jsxs(xu,{onClick:async R=>{R.stopPropagation();try{const T=await vn.tables.getTableUsage(_.id),M=(T.usagePercentage||0).toFixed(2);wn.info(`数据表用量：${M}% (记录 ${T.recordCount}/${T.maxRecords})`)}catch(T){wn.error(T?.message||"获取用量失败")}},children:[u.jsx(Ku,{className:"h-4 w-4 mr-2"}),"数据表用量"]}),u.jsxs(xu,{onClick:async R=>{R.stopPropagation();try{const T=await vn.tables.duplicateTable(_.id,{name:`${_.name} (副本)`,withData:!0,withViews:!0,withFields:!0});wn.success("复制成功"),window.location.reload()}catch(T){wn.error(T?.message||"复制失败")}},children:[u.jsx(DS,{className:"h-4 w-4 mr-2"}),"复制数据表"]}),u.jsx(jS,{}),u.jsxs(xu,{variant:"destructive",onClick:async R=>{if(R.stopPropagation(),!!window.confirm("确定删除该数据表？此操作不可撤销。"))try{await l(_.id),wn.success("删除成功")}catch(T){wn.error(T?.message||"删除失败")}},children:[u.jsx(ES,{className:"h-4 w-4 mr-2"}),"删除数据表"]})]})]})]},_.id))})]}),r&&n.length>0&&u.jsxs(u.Fragment,{children:[u.jsx(mg,{}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"视图"}),u.jsx("div",{className:"space-y-1",children:n.map(_=>u.jsxs("div",{className:"group flex items-center gap-2 p-2 rounded-md cursor-pointer transition-colors hover:bg-muted/50",onClick:()=>{h(`/base/${d}/${r}/${_.id}`)},children:[u.jsx(xg,{className:"h-3 w-3 text-muted-foreground flex-shrink-0"}),u.jsx("span",{className:"font-medium text-xs truncate flex-1",children:_.name})]},_.id))})]})]})]})}),u.jsx("div",{className:"border-t p-2",children:u.jsxs(po,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 h-8 text-xs",children:[u.jsx(gg,{className:"h-3 w-3"}),"数据库设置"]})})]})}function g3({base:t,currentTable:e,currentView:n,loading:r=!1}){const i=Zl(),{baseId:a,tableId:l,viewId:c}=Jl();return u.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:u.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(po,{variant:"ghost",size:"sm",onClick:()=>i("/dashboard"),className:"gap-2",children:[u.jsx(NS,{className:"h-4 w-4"}),"返回首页"]}),u.jsx(mg,{orientation:"vertical",className:"h-4"}),u.jsxs("nav",{className:"flex items-center space-x-2 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ku,{className:"h-4 w-4 text-primary"}),u.jsx("span",{className:"text-muted-foreground",children:"数据库"})]}),u.jsx(yu,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"font-medium",children:t?.name||"加载中..."}),e&&u.jsxs(u.Fragment,{children:[u.jsx(yu,{className:"h-4 w-4 text-muted-foreground"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ed,{className:"h-4 w-4 text-primary"}),u.jsx("span",{className:"font-medium",children:e.name})]})]}),n&&u.jsxs(u.Fragment,{children:[u.jsx(yu,{className:"h-4 w-4 text-muted-foreground"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(xg,{className:"h-4 w-4 text-primary"}),u.jsx("span",{className:"font-medium",children:n.name})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(po,{variant:"outline",size:"sm",className:"gap-2",children:[u.jsx(LS,{className:"h-4 w-4"}),"分享"]}),u.jsxs(po,{variant:"outline",size:"sm",className:"gap-2",children:[u.jsx(OS,{className:"h-4 w-4"}),"导出"]}),u.jsxs(po,{variant:"outline",size:"sm",className:"gap-2",children:[u.jsx(gg,{className:"h-4 w-4"}),"设置"]})]})]})})}function Zu({children:t}){const e=Zl(),{baseId:n,tableId:r,viewId:i}=Jl(),[a,l]=y.useState(null),[c,h]=y.useState([]),[d,p]=y.useState([]),[m,g]=y.useState(!0);y.useEffect(()=>{n&&x()},[n]),y.useEffect(()=>{r?b(r):p([])},[r]);const x=async()=>{if(n)try{g(!0);const[R,T]=await Promise.all([vn.getBase(n),vn.listTables({baseId:n})]);l(R),h(T)}catch(R){console.error("Failed to load sidebar data:",R)}finally{g(!1)}},b=async R=>{try{const T=await vn.listViews({tableId:R});p(T)}catch(T){console.error("Failed to load views:",T),p([])}},C=async R=>{if(R.defaultViewId){e(`/base/${n}/${R.id}/${R.defaultViewId}`);return}try{const T=await vn.listViews({tableId:R.id});if(T.length>0){const M=T[0];e(`/base/${n}/${R.id}/${M.id}`)}else wn.error("该表格没有可用的视图")}catch(T){console.error("Failed to load views for table:",T),wn.error("加载视图失败")}},w=async(R,T)=>{if(n)try{const M=await vn.createTable({baseId:n,name:R,description:T});h(I=>[...I,M]),M.defaultViewId&&e(`/base/${n}/${M.id}/${M.defaultViewId}`)}catch(M){throw console.error("Failed to create table:",M),M}},S=async R=>{try{await vn.tables.deleteTable(R),h(T=>T.filter(M=>M.id!==R))}catch(T){throw console.error("Failed to delete table:",T),T}},k=c.find(R=>R.id===r),_=d.find(R=>R.id===i);return u.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[u.jsx(g3,{base:a,currentTable:k,currentView:_,loading:m}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[u.jsx(m3,{base:a,tables:c,views:d,selectedTableId:r,onTableSelect:C,onTableCreate:w,onTableDelete:S,loading:m}),u.jsx("main",{className:"flex-1 overflow-auto",children:t})]})]})}function k3(){const{baseId:t,tableId:e,viewId:n}=Jl(),r=Zl(),{accessToken:i,refreshToken:a,isAuthenticated:l}=cp();y.useEffect(()=>{i&&a&&l&&(console.log("🔐 Restoring SDK authentication..."),vn.setAccessToken(i),vn.setRefreshToken(a))},[i,a,l]);const[c,h]=y.useState(null),[d,p]=y.useState(!0),m=JO({sdk:vn,tableId:e||"",autoLoad:!!e,limit:100}),g=y.useCallback(async()=>{if(t)try{p(!0);const k=await vn.getBase(t);h(k);const _=await vn.listTables({baseId:t});if(_.length===0){wn.error("该数据库中没有表格");return}const R=_[0],T=await vn.listViews({tableId:R.id});if(T.length===0){wn.error("该表格中没有视图");return}r(`/base/${t}/${R.id}/${T[0].id}`,{replace:!0})}catch(k){console.error("❌ 重定向失败:",k),wn.error(k?.message||"加载失败")}finally{p(!1)}},[t,r]),x=y.useCallback(async()=>{if(t)try{p(!0);const k=await vn.getBase(t);h(k),console.log("✅ Base 加载完成:",k.name)}catch(k){console.error("❌ 加载 Base 失败:",k),wn.error(k?.message||"加载失败")}finally{p(!1)}},[t]);y.useEffect(()=>{t&&e&&n?x():t&&g()},[t,e,n,x,g]);const b=y.useCallback(async(k,_)=>{const[R,T]=k,M=m.fields[R],I=m.records[T];if(!(!M||!I))try{await m.updateRecord(I.id,M.id,_.data),wn.success("更新成功")}catch(z){console.error("❌ 更新失败:",z),wn.error(z?.message||"更新失败")}},[m]),C=y.useMemo(()=>({columns:m.columns,rowCount:m.rowCount,getCellContent:m.getCellContent,freezeColumnCount:1,rowHeight:36,columnHeaderHeight:40,onCellEdited:b,onDataRefresh:m.loadTableData}),[m,b]),w=y.useMemo(()=>m.fields.map(k=>({id:k.id,name:k.name,type:k.type,visible:!0,required:!1,isPrimary:k.isPrimary||!1,description:k.description||"",options:k.options||{}})),[m.fields]);return d||m.loading?u.jsx(Zu,{children:u.jsx("div",{className:"h-full flex items-center justify-center p-6",children:u.jsx(Ju,{className:"h-[400px] w-full"})})}):!c||!m.table?u.jsx(Zu,{children:u.jsx("div",{className:"h-full flex items-center justify-center",children:u.jsx(dp,{children:u.jsx(fp,{className:"p-12 text-center",children:u.jsxs("p",{className:"text-muted-foreground",children:[!c&&"数据库不存在",c&&!m.table&&"表格不存在"]})})})})}):u.jsx(Zu,{children:u.jsx("div",{className:"h-full flex flex-col",children:t&&e&&n?u.jsx(G5,{baseId:t,tableId:e,viewId:n,sdk:vn,userId:cp.getState().user?.id||"anonymous",children:u.jsx(ZO,{gridProps:C,fields:w,tableId:e,sdk:vn,statusContent:u.jsxs("div",{className:"text-xs text-muted-foreground",children:["共 ",m.fields.length," 个字段，",m.totalRecords," 条记录"]}),className:"h-full"})}):u.jsx(dp,{children:u.jsx(fp,{className:"p-12 text-center",children:u.jsx("p",{className:"text-muted-foreground",children:"缺少必要的参数，无法加载表格组件"})})})})})}export{k3 as default};
