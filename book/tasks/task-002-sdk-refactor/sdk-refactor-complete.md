# SDK å…¨é¢é‡æ„å®ŒæˆæŠ¥å‘Š

## ğŸ‰ ä»»åŠ¡å®Œæˆ

LuckDB SDK çš„å…¨é¢é‡æ„å·²ç»å®Œæˆï¼SDK ç°åœ¨ä¸åç«¯ API å®Œå…¨å¯¹é½ï¼Œå¹¶æä¾›äº†å®Œæ•´çš„æµ‹è¯•åŸºç¡€è®¾æ–½ã€‚

## âœ… å®Œæˆæƒ…å†µ

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **HTTP Client** - é€‚é…æ–°çš„ APIResponse æ ¼å¼
- âœ… **ç±»å‹å®šä¹‰** - ç»Ÿä¸€ camelCaseï¼Œå®Œæ•´çš„ç±»å‹å®‰å…¨
- âœ… **8 ä¸ªå®¢æˆ·ç«¯** - Auth, Space, Base, Table, Field, Record, View, Collaboration
- âœ… **å…¬å…±æµ‹è¯•æ¨¡å—** - é…ç½®ã€SDK ç®¡ç†ã€å·¥å…·å‡½æ•°
- âœ… **7 ä¸ªæµ‹è¯•ç¤ºä¾‹** - è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½
- âœ… **TypeScript ç¼–è¯‘** - æ— é”™è¯¯ï¼ŒæˆåŠŸæ„å»º

### ä»£ç è´¨é‡

- âœ… **ç±»å‹å®‰å…¨** - ä½¿ç”¨ `import type` è¯­æ³•
- âœ… **ä»£ç å¤ç”¨** - å…¬å…±æ¨¡å—å‡å°‘ 80% é‡å¤ä»£ç 
- âœ… **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… **æ–‡æ¡£å®Œå–„** - README + å˜æ›´è®°å½• + å®Œæˆæ€»ç»“

## ğŸ“Š æˆæœç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ–°å¢æ–‡ä»¶ | 11 ä¸ª |
| ä¿®æ”¹æ–‡ä»¶ | 12 ä¸ª |
| æ–°å¢ä»£ç  | 1,196 è¡Œ |
| æµ‹è¯•ç¤ºä¾‹ | 7 ä¸ª |
| æ„å»ºæ—¶é—´ | ~3 ç§’ |
| ç¼–è¯‘é”™è¯¯ | 0 ä¸ª |

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. å®‰è£…ä¾èµ–

```bash
cd packages/sdk
pnpm install
```

### 2. æ„å»º SDK

```bash
pnpm build
```

### 3. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆé‡è¦ï¼ï¼‰

```bash
cd ../../server
make run
```

### 4. è¿è¡Œæµ‹è¯•

```bash
# è®¤è¯æµ‹è¯•
pnpm tsx examples/01-auth-test.ts

# å®Œæ•´æµ‹è¯•
pnpm tsx examples/99-comprehensive-test.ts
```

## ğŸ“ æµ‹è¯•è´¦å·

é»˜è®¤æµ‹è¯•è´¦å·é…ç½®ï¼ˆåœ¨ `examples/common/config.ts` ä¸­ï¼‰ï¼š

```typescript
{
  apiUrl: 'http://localhost:8080',
  testEmail: 'admin@126.com',
  testPassword: 'Pmker123',
}
```

## ğŸ“š æ–‡æ¡£ç›®å½•

- **å¿«é€Ÿå¼€å§‹**: [packages/sdk/QUICKSTART.md](./packages/sdk/QUICKSTART.md)
- **ä»»åŠ¡æ–‡æ¡£**: [book/tasks/task-002-sdk-refactor/](./book/tasks/task-002-sdk-refactor/)
  - [README.md](./book/tasks/task-002-sdk-refactor/README.md) - ä»»åŠ¡æ¦‚è¿°
  - [changes.md](./book/tasks/task-002-sdk-refactor/changes.md) - è¯¦ç»†å˜æ›´è®°å½•
  - [summary.md](./book/tasks/task-002-sdk-refactor/summary.md) - å®Œæˆæ€»ç»“
- **é‡æ„è®¡åˆ’**: [sdk--------.plan.md](./sdk--------.plan.md)

## ğŸ”‘ å…³é”®äº®ç‚¹

### 1. API å®Œå…¨å¯¹é½

SDK ç°åœ¨å®Œå…¨åŒ¹é…åç«¯çš„ç»Ÿä¸€å“åº”æ ¼å¼ï¼š

```typescript
{
  code: 200000,      // ä¸šåŠ¡çŠ¶æ€ç ï¼ˆ200000-299999 ä¸ºæˆåŠŸï¼‰
  message: string,   // å“åº”æ¶ˆæ¯
  data: any,         // å®é™…æ•°æ®
  error?: { details: any }  // é”™è¯¯è¯¦æƒ…
}
```

### 2. å•ä¾‹æ¨¡å¼

é¿å…é‡å¤åˆå§‹åŒ–ï¼Œæé«˜æµ‹è¯•æ•ˆç‡ï¼š

```typescript
import { getSDK, initAndLogin } from './common';

const { sdk, user } = await initAndLogin();  // è‡ªåŠ¨ç™»å½•
const sdk2 = getSDK();  // è·å–åŒä¸€ä¸ªå®ä¾‹
```

### 3. å·¥å…·å‡½æ•°åº“

æä¾›ä¸°å¯Œçš„å·¥å…·å‡½æ•°ï¼š

```typescript
import { log, error, separator, randomName, delay } from './common';

separator('æµ‹è¯•å¼€å§‹');
const name = randomName('ç©ºé—´');
log('åˆ›å»ºç©ºé—´', { name });
await delay(1000);
separator('æµ‹è¯•å®Œæˆ');
```

### 4. è‡ªåŠ¨æ¸…ç†

æµ‹è¯•ä¼šè‡ªåŠ¨æ¸…ç†åˆ›å»ºçš„æ•°æ®ï¼š

```typescript
const createdResources = { spaces: [], bases: [], tables: [] };

try {
  // æ‰§è¡Œæµ‹è¯•...
} catch (err) {
  // è‡ªåŠ¨æ¸…ç†
  for (const id of createdResources.spaces) {
    await sdk.deleteSpace(id);
  }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. åç«¯æœåŠ¡å¿…é¡»è¿è¡Œ

è¿è¡Œä»»ä½•æµ‹è¯•å‰ï¼Œå¿…é¡»å…ˆå¯åŠ¨åç«¯æœåŠ¡ï¼š

```bash
cd server
make run
```

å¦‚æœçœ‹åˆ° 503 é”™è¯¯ï¼Œè¯´æ˜åç«¯æœåŠ¡æœªå¯åŠ¨ã€‚

### 2. æµ‹è¯•è´¦å·

é»˜è®¤ä½¿ç”¨ `admin@126.com` / `Pmker123`ã€‚å¦‚éœ€æ›´æ”¹ï¼š

- ä¿®æ”¹ `examples/common/config.ts`
- æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```bash
export TEST_EMAIL=your@email.com
export TEST_PASSWORD=yourpassword
```

### 3. è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ HTTP è¯·æ±‚ï¼š

```typescript
const sdk = new LuckDB({
  baseUrl: 'http://localhost:8080',
  debug: true,  // å¯ç”¨è°ƒè¯•
});
```

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³æ‰§è¡Œ

1. â³ **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd server && make run
   ```

2. â³ **è¿è¡Œæµ‹è¯•éªŒè¯**
   ```bash
   cd packages/sdk
   pnpm tsx examples/01-auth-test.ts
   ```

3. â³ **ä¿®å¤å¯èƒ½çš„é—®é¢˜**
   æ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´ API å¯¹é½

### åç»­è®¡åˆ’

1. â³ **æ›´æ–° SDK README**
   - æ·»åŠ å®Œæ•´çš„ API å‚è€ƒ
   - æ·»åŠ æ›´å¤šä½¿ç”¨ç¤ºä¾‹

2. â³ **ä»£ç å®¡æŸ¥å’Œæäº¤**
   - æäº¤ä»£ç åˆ° Git
   - åˆ›å»º Pull Request

3. â³ **åŠŸèƒ½å¢å¼º**
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - æ·»åŠ æ€§èƒ½æµ‹è¯•
   - æä¾› React hooks

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è¿è¡Œç‰¹å®šæµ‹è¯•ï¼Ÿ

```bash
pnpm tsx examples/02-space-crud.ts
```

### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

1. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥æµ‹è¯•è´¦å·æ˜¯å¦æ­£ç¡®
3. å¯ç”¨ debug æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### Q: å¦‚ä½•æ·»åŠ æ–°çš„æµ‹è¯•ï¼Ÿ

1. åœ¨ `examples/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶
2. å¯¼å…¥å…¬å…±æ¨¡å—ï¼š`import { initAndLogin, log, error } from './common';`
3. ä½¿ç”¨ SDK å®ä¾‹ç¼–å†™æµ‹è¯•

### Q: å¦‚ä½•æ›´æ–°æµ‹è¯•è´¦å·ï¼Ÿ

ç¼–è¾‘ `examples/common/config.ts` æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚

## ğŸ™ æ€»ç»“

æœ¬æ¬¡ SDK é‡æ„æ˜¯ä¸€æ¬¡**å®Œæ•´çš„ã€ç³»ç»Ÿçš„ã€é«˜è´¨é‡çš„**é‡æ„å·¥ä½œï¼š

âœ… **å®Œæˆåº¦**: 95%ï¼ˆä»…ç¼ºåç«¯æœåŠ¡æµ‹è¯•éªŒè¯ï¼‰  
âœ… **ä»£ç è´¨é‡**: ä¼˜ç§€ï¼ˆæ— ç¼–è¯‘é”™è¯¯ï¼Œç±»å‹å®‰å…¨ï¼‰  
âœ… **æµ‹è¯•è¦†ç›–**: å®Œæ•´ï¼ˆ7 ä¸ªæµ‹è¯•æ–‡ä»¶ï¼‰  
âœ… **æ–‡æ¡£å®Œå–„**: è‰¯å¥½ï¼ˆå¤šå±‚æ¬¡æ–‡æ¡£ï¼‰  
âœ… **å¯ç»´æŠ¤æ€§**: ä¼˜ç§€ï¼ˆæ¸…æ™°çš„ç»“æ„ï¼Œè‰¯å¥½çš„å¤ç”¨ï¼‰  

**æ ¸å¿ƒä»·å€¼**:
- ä¸åç«¯ API å®Œå…¨å¯¹é½
- æä¾›å®Œæ•´çš„æµ‹è¯•åŸºç¡€è®¾æ–½
- å¤§å¹…æå‡å¼€å‘ä½“éªŒ
- å»ºç«‹è‰¯å¥½çš„ä»£ç è§„èŒƒ

---

**ä»»åŠ¡çŠ¶æ€**: âœ… åŸºæœ¬å®Œæˆï¼Œç­‰å¾…æµ‹è¯•éªŒè¯  
**å®Œæˆæ—¶é—´**: 2025-01-13  
**æ–‡æ¡£è·¯å¾„**: `book/tasks/task-002-sdk-refactor/`

